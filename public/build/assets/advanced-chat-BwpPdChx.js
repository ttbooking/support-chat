function J1(e,t){const n=Object.create(null),r=e.split(",");for(let a=0;a<r.length;a++)n[r[a]]=!0;return a=>!!n[a]}const $1=()=>{},e0=Object.assign,t0=Object.prototype.hasOwnProperty,Ea=(e,t)=>t0.call(e,t),rr=Array.isArray,oa=e=>Ac(e)==="[object Map]",n0=e=>typeof e=="function",r0=e=>typeof e=="string",Js=e=>typeof e=="symbol",Ta=e=>e!==null&&typeof e=="object",i0=Object.prototype.toString,Ac=e=>i0.call(e),a0=e=>Ac(e).slice(8,-1),$s=e=>r0(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ec=(e,t)=>!Object.is(e,t),s0=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})};let Tn;class o0{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&Tn&&(this.parent=Tn,this.index=(Tn.scopes||(Tn.scopes=[])).push(this)-1)}run(t){if(this.active){const n=Tn;try{return Tn=this,t()}finally{Tn=n}}}on(){Tn=this}off(){Tn=this.parent}stop(t){if(this.active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(this.parent&&!t){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.active=!1}}}function l0(e,t=Tn){t&&t.active&&t.effects.push(e)}const eo=e=>{const t=new Set(e);return t.w=0,t.n=0,t},Tc=e=>(e.w&or)>0,Rc=e=>(e.n&or)>0,c0=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=or},u0=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const a=t[r];Tc(a)&&!Rc(a)?a.delete(e):t[n++]=a,a.w&=~or,a.n&=~or}t.length=n}},Ms=new WeakMap;let di=0,or=1;const As=30;let bn;const Ir=Symbol(""),Es=Symbol("");class to{constructor(t,n=null,r){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,l0(this,r)}run(){if(!this.active)return this.fn();let t=bn,n=ir;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=bn,bn=this,ir=!0,or=1<<++di,di<=As?c0(this):Xo(this),this.fn()}finally{di<=As&&u0(this),or=1<<--di,bn=this.parent,ir=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){bn===this?this.deferStop=!0:this.active&&(Xo(this),this.onStop&&this.onStop(),this.active=!1)}}function Xo(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let ir=!0;const Ic=[];function Qr(){Ic.push(ir),ir=!1}function Jr(){const e=Ic.pop();ir=e===void 0?!0:e}function on(e,t,n){if(ir&&bn){let r=Ms.get(e);r||Ms.set(e,r=new Map);let a=r.get(n);a||r.set(n,a=eo()),Cc(a)}}function Cc(e,t){let n=!1;di<=As?Rc(e)||(e.n|=or,n=!Tc(e)):n=!e.has(bn),n&&(e.add(bn),bn.deps.push(e))}function Pn(e,t,n,r,a,i){const s=Ms.get(e);if(!s)return;let c=[];if(t==="clear")c=[...s.values()];else if(n==="length"&&rr(e))s.forEach((v,u)=>{(u==="length"||u>=r)&&c.push(v)});else switch(n!==void 0&&c.push(s.get(n)),t){case"add":rr(e)?$s(n)&&c.push(s.get("length")):(c.push(s.get(Ir)),oa(e)&&c.push(s.get(Es)));break;case"delete":rr(e)||(c.push(s.get(Ir)),oa(e)&&c.push(s.get(Es)));break;case"set":oa(e)&&c.push(s.get(Ir));break}if(c.length===1)c[0]&&Ts(c[0]);else{const v=[];for(const u of c)u&&v.push(...u);Ts(eo(v))}}function Ts(e,t){const n=rr(e)?e:[...e];for(const r of n)r.computed&&Yo(r);for(const r of n)r.computed||Yo(r)}function Yo(e,t){(e!==bn||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const d0=J1("__proto__,__v_isRef,__isVue"),Bc=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Js)),m0=no(),h0=no(!1,!0),f0=no(!0),Ko=v0();function v0(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=ht(this);for(let i=0,s=this.length;i<s;i++)on(r,"get",i+"");const a=r[t](...n);return a===-1||a===!1?r[t](...n.map(ht)):a}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Qr();const r=ht(this)[t].apply(this,n);return Jr(),r}}),e}function no(e=!1,t=!1){return function(r,a,i){if(a==="__v_isReactive")return!e;if(a==="__v_isReadonly")return e;if(a==="__v_isShallow")return t;if(a==="__v_raw"&&i===(e?t?C0:Nc:t?jc:Lc).get(r))return r;const s=rr(r);if(!e&&s&&Ea(Ko,a))return Reflect.get(Ko,a,i);const c=Reflect.get(r,a,i);return(Js(a)?Bc.has(a):d0(a))||(e||on(r,"get",a),t)?c:Yt(c)?s&&$s(a)?c:c.value:Ta(c)?e?Dc(c):ao(c):c}}const _0=Fc(),p0=Fc(!0);function Fc(e=!1){return function(n,r,a,i){let s=n[r];if(Si(s)&&Yt(s)&&!Yt(a))return!1;if(!e&&!Si(a)&&(Rs(a)||(a=ht(a),s=ht(s)),!rr(n)&&Yt(s)&&!Yt(a)))return s.value=a,!0;const c=rr(n)&&$s(r)?Number(r)<n.length:Ea(n,r),v=Reflect.set(n,r,a,i);return n===ht(i)&&(c?Ec(a,s)&&Pn(n,"set",r,a):Pn(n,"add",r,a)),v}}function g0(e,t){const n=Ea(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&Pn(e,"delete",t,void 0),r}function b0(e,t){const n=Reflect.has(e,t);return(!Js(t)||!Bc.has(t))&&on(e,"has",t),n}function y0(e){return on(e,"iterate",rr(e)?"length":Ir),Reflect.ownKeys(e)}const Oc={get:m0,set:_0,deleteProperty:g0,has:b0,ownKeys:y0},w0={get:f0,set(e,t){return!0},deleteProperty(e,t){return!0}},k0=e0({},Oc,{get:h0,set:p0}),ro=e=>e,Ra=e=>Reflect.getPrototypeOf(e);function Vi(e,t,n=!1,r=!1){e=e.__v_raw;const a=ht(e),i=ht(t);n||(t!==i&&on(a,"get",t),on(a,"get",i));const{has:s}=Ra(a),c=r?ro:n?lo:oo;if(s.call(a,t))return c(e.get(t));if(s.call(a,i))return c(e.get(i));e!==a&&e.get(t)}function Ui(e,t=!1){const n=this.__v_raw,r=ht(n),a=ht(e);return t||(e!==a&&on(r,"has",e),on(r,"has",a)),e===a?n.has(e):n.has(e)||n.has(a)}function qi(e,t=!1){return e=e.__v_raw,!t&&on(ht(e),"iterate",Ir),Reflect.get(e,"size",e)}function Go(e){e=ht(e);const t=ht(this);return Ra(t).has.call(t,e)||(t.add(e),Pn(t,"add",e,e)),this}function Wo(e,t){t=ht(t);const n=ht(this),{has:r,get:a}=Ra(n);let i=r.call(n,e);i||(e=ht(e),i=r.call(n,e));const s=a.call(n,e);return n.set(e,t),i?Ec(t,s)&&Pn(n,"set",e,t):Pn(n,"add",e,t),this}function Zo(e){const t=ht(this),{has:n,get:r}=Ra(t);let a=n.call(t,e);a||(e=ht(e),a=n.call(t,e)),r&&r.call(t,e);const i=t.delete(e);return a&&Pn(t,"delete",e,void 0),i}function Qo(){const e=ht(this),t=e.size!==0,n=e.clear();return t&&Pn(e,"clear",void 0,void 0),n}function Xi(e,t){return function(r,a){const i=this,s=i.__v_raw,c=ht(s),v=t?ro:e?lo:oo;return!e&&on(c,"iterate",Ir),s.forEach((u,m)=>r.call(a,v(u),v(m),i))}}function Yi(e,t,n){return function(...r){const a=this.__v_raw,i=ht(a),s=oa(i),c=e==="entries"||e===Symbol.iterator&&s,v=e==="keys"&&s,u=a[e](...r),m=n?ro:t?lo:oo;return!t&&on(i,"iterate",v?Es:Ir),{next(){const{value:o,done:l}=u.next();return l?{value:o,done:l}:{value:c?[m(o[0]),m(o[1])]:m(o),done:l}},[Symbol.iterator](){return this}}}}function Kn(e){return function(...t){return e==="delete"?!1:this}}function S0(){const e={get(i){return Vi(this,i)},get size(){return qi(this)},has:Ui,add:Go,set:Wo,delete:Zo,clear:Qo,forEach:Xi(!1,!1)},t={get(i){return Vi(this,i,!1,!0)},get size(){return qi(this)},has:Ui,add:Go,set:Wo,delete:Zo,clear:Qo,forEach:Xi(!1,!0)},n={get(i){return Vi(this,i,!0)},get size(){return qi(this,!0)},has(i){return Ui.call(this,i,!0)},add:Kn("add"),set:Kn("set"),delete:Kn("delete"),clear:Kn("clear"),forEach:Xi(!0,!1)},r={get(i){return Vi(this,i,!0,!0)},get size(){return qi(this,!0)},has(i){return Ui.call(this,i,!0)},add:Kn("add"),set:Kn("set"),delete:Kn("delete"),clear:Kn("clear"),forEach:Xi(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=Yi(i,!1,!1),n[i]=Yi(i,!0,!1),t[i]=Yi(i,!1,!0),r[i]=Yi(i,!0,!0)}),[e,n,t,r]}const[x0,M0,A0,E0]=S0();function io(e,t){const n=t?e?E0:A0:e?M0:x0;return(r,a,i)=>a==="__v_isReactive"?!e:a==="__v_isReadonly"?e:a==="__v_raw"?r:Reflect.get(Ea(n,a)&&a in r?n:r,a,i)}const T0={get:io(!1,!1)},R0={get:io(!1,!0)},I0={get:io(!0,!1)},Lc=new WeakMap,jc=new WeakMap,Nc=new WeakMap,C0=new WeakMap;function B0(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function F0(e){return e.__v_skip||!Object.isExtensible(e)?0:B0(a0(e))}function ao(e){return Si(e)?e:so(e,!1,Oc,T0,Lc)}function O0(e){return so(e,!1,k0,R0,jc)}function Dc(e){return so(e,!0,w0,I0,Nc)}function so(e,t,n,r,a){if(!Ta(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=a.get(e);if(i)return i;const s=F0(e);if(s===0)return e;const c=new Proxy(e,s===2?r:n);return a.set(e,c),c}function Ur(e){return Si(e)?Ur(e.__v_raw):!!(e&&e.__v_isReactive)}function Si(e){return!!(e&&e.__v_isReadonly)}function Rs(e){return!!(e&&e.__v_isShallow)}function Hc(e){return Ur(e)||Si(e)}function ht(e){const t=e&&e.__v_raw;return t?ht(t):e}function Pc(e){return s0(e,"__v_skip",!0),e}const oo=e=>Ta(e)?ao(e):e,lo=e=>Ta(e)?Dc(e):e;function L0(e){ir&&bn&&(e=ht(e),Cc(e.dep||(e.dep=eo())))}function j0(e,t){e=ht(e),e.dep&&Ts(e.dep)}function Yt(e){return!!(e&&e.__v_isRef===!0)}function N0(e){return Yt(e)?e.value:e}const D0={get:(e,t,n)=>N0(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const a=e[t];return Yt(a)&&!Yt(n)?(a.value=n,!0):Reflect.set(e,t,n,r)}};function zc(e){return Ur(e)?e:new Proxy(e,D0)}class H0{constructor(t,n,r,a){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new to(t,()=>{this._dirty||(this._dirty=!0,j0(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!a,this.__v_isReadonly=r}get value(){const t=ht(this);return L0(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function P0(e,t,n=!1){let r,a;const i=n0(e);return i?(r=e,a=$1):(r=e.get,a=e.set),new H0(r,a,i||!a,n)}function z0(e,t){const n=Object.create(null),r=e.split(",");for(let a=0;a<r.length;a++)n[r[a]]=!0;return a=>!!n[a]}function Mt(e){if(ct(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],a=Kt(r)?q0(r):Mt(r);if(a)for(const i in a)t[i]=a[i]}return t}else{if(Kt(e))return e;if(Gt(e))return e}}const V0=/;(?![^(]*\))/g,U0=/:(.+)/;function q0(e){const t={};return e.split(V0).forEach(n=>{if(n){const r=n.split(U0);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function rt(e){let t="";if(Kt(e))t=e;else if(ct(e))for(let n=0;n<e.length;n++){const r=rt(e[n]);r&&(t+=r+" ")}else if(Gt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function pt(e){if(!e)return null;let{class:t,style:n}=e;return t&&!Kt(t)&&(e.class=rt(t)),n&&(e.style=Mt(n)),e}const $e=e=>Kt(e)?e:e==null?"":ct(e)||Gt(e)&&(e.toString===Kc||!it(e.toString))?JSON.stringify(e,Vc,2):String(e),Vc=(e,t)=>t&&t.__v_isRef?Vc(e,t.value):qc(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,a])=>(n[`${r} =>`]=a,n),{})}:Xc(t)?{[`Set(${t.size})`]:[...t.values()]}:Gt(t)&&!ct(t)&&!Gc(t)?String(t):t,wt={},qr=[],Hn=()=>{},X0=()=>!1,Y0=/^on[^a-z]/,co=e=>Y0.test(e),Uc=e=>e.startsWith("onUpdate:"),wn=Object.assign,uo=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},K0=Object.prototype.hasOwnProperty,mt=(e,t)=>K0.call(e,t),ct=Array.isArray,qc=e=>mo(e)==="[object Map]",Xc=e=>mo(e)==="[object Set]",it=e=>typeof e=="function",Kt=e=>typeof e=="string",Gt=e=>e!==null&&typeof e=="object",Yc=e=>Gt(e)&&it(e.then)&&it(e.catch),Kc=Object.prototype.toString,mo=e=>Kc.call(e),Gc=e=>mo(e)==="[object Object]",la=z0(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ia=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},G0=/-(\w)/g,On=Ia(e=>e.replace(G0,(t,n)=>n?n.toUpperCase():"")),W0=/\B([A-Z])/g,Ca=Ia(e=>e.replace(W0,"-$1").toLowerCase()),ho=Ia(e=>e.charAt(0).toUpperCase()+e.slice(1)),ts=Ia(e=>e?`on${ho(e)}`:""),Jo=(e,t)=>!Object.is(e,t),ns=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Is=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Z0=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let $o;const Q0=()=>$o||($o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ar(e,t,n,r){let a;try{a=r?e(...r):e()}catch(i){Ba(i,t,n)}return a}function hn(e,t,n,r){if(it(e)){const i=ar(e,t,n,r);return i&&Yc(i)&&i.catch(s=>{Ba(s,t,n)}),i}const a=[];for(let i=0;i<e.length;i++)a.push(hn(e[i],t,n,r));return a}function Ba(e,t,n,r=!0){const a=t?t.vnode:null;if(t){let i=t.parent;const s=t.proxy,c=n;for(;i;){const u=i.ec;if(u){for(let m=0;m<u.length;m++)if(u[m](e,s,c)===!1)return}i=i.parent}const v=t.appContext.config.errorHandler;if(v){ar(v,null,10,[e,s,c]);return}}J0(e,n,a,r)}function J0(e,t,n,r=!0){console.error(e)}let fa=!1,Cs=!1;const an=[];let Dn=0;const pi=[];let mi=null,Hr=0;const gi=[];let er=null,Pr=0;const Wc=Promise.resolve();let fo=null,Bs=null;function Zc(e){const t=fo||Wc;return e?t.then(this?e.bind(this):e):t}function $0(e){let t=Dn+1,n=an.length;for(;t<n;){const r=t+n>>>1;xi(an[r])<e?t=r+1:n=r}return t}function Qc(e){(!an.length||!an.includes(e,fa&&e.allowRecurse?Dn+1:Dn))&&e!==Bs&&(e.id==null?an.push(e):an.splice($0(e.id),0,e),Jc())}function Jc(){!fa&&!Cs&&(Cs=!0,fo=Wc.then(tu))}function ed(e){const t=an.indexOf(e);t>Dn&&an.splice(t,1)}function $c(e,t,n,r){ct(e)?n.push(...e):(!t||!t.includes(e,e.allowRecurse?r+1:r))&&n.push(e),Jc()}function td(e){$c(e,mi,pi,Hr)}function nd(e){$c(e,er,gi,Pr)}function Fa(e,t=null){if(pi.length){for(Bs=t,mi=[...new Set(pi)],pi.length=0,Hr=0;Hr<mi.length;Hr++)mi[Hr]();mi=null,Hr=0,Bs=null,Fa(e,t)}}function eu(e){if(Fa(),gi.length){const t=[...new Set(gi)];if(gi.length=0,er){er.push(...t);return}for(er=t,er.sort((n,r)=>xi(n)-xi(r)),Pr=0;Pr<er.length;Pr++)er[Pr]();er=null,Pr=0}}const xi=e=>e.id==null?1/0:e.id;function tu(e){Cs=!1,fa=!0,Fa(e),an.sort((t,n)=>xi(t)-xi(n));try{for(Dn=0;Dn<an.length;Dn++){const t=an[Dn];t&&t.active!==!1&&ar(t,null,14)}}finally{Dn=0,an.length=0,eu(),fa=!1,fo=null,(an.length||pi.length||gi.length)&&tu(e)}}function rd(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||wt;let a=n;const i=t.startsWith("update:"),s=i&&t.slice(7);if(s&&s in r){const m=`${s==="modelValue"?"model":s}Modifiers`,{number:o,trim:l}=r[m]||wt;l&&(a=n.map(f=>f.trim())),o&&(a=n.map(Z0))}let c,v=r[c=ts(t)]||r[c=ts(On(t))];!v&&i&&(v=r[c=ts(Ca(t))]),v&&hn(v,e,6,a);const u=r[c+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[c])return;e.emitted[c]=!0,hn(u,e,6,a)}}function nu(e,t,n=!1){const r=t.emitsCache,a=r.get(e);if(a!==void 0)return a;const i=e.emits;let s={},c=!1;if(!it(e)){const v=u=>{const m=nu(u,t,!0);m&&(c=!0,wn(s,m))};!n&&t.mixins.length&&t.mixins.forEach(v),e.extends&&v(e.extends),e.mixins&&e.mixins.forEach(v)}return!i&&!c?(r.set(e,null),null):(ct(i)?i.forEach(v=>s[v]=null):wn(s,i),r.set(e,s),s)}function Oa(e,t){return!e||!co(t)?!1:(t=t.slice(2).replace(/Once$/,""),mt(e,t[0].toLowerCase()+t.slice(1))||mt(e,Ca(t))||mt(e,t))}let Vt=null,ru=null;function va(e){const t=Vt;return Vt=e,ru=e&&e.type.__scopeId||null,t}function Ge(e,t=Vt,n){if(!t||e._n)return e;const r=(...a)=>{r._d&&dl(-1);const i=va(t),s=e(...a);return va(i),r._d&&dl(1),s};return r._n=!0,r._c=!0,r._d=!0,r}function el(e){const{type:t,vnode:n,proxy:r,withProxy:a,props:i,propsOptions:[s],slots:c,attrs:v,emit:u,render:m,renderCache:o,data:l,setupState:f,ctx:g,inheritAttrs:D}=e;let C,M;const p=va(e);try{if(n.shapeFlag&4){const j=a||r;C=In(m.call(j,j,o,i,f,l,g)),M=v}else{const j=t;C=In(j.length>1?j(i,{attrs:v,slots:c,emit:u}):j(i,null)),M=t.props?v:id(v)}}catch(j){yi.length=0,Ba(j,e,1),C=Oe(fn)}let I=C;if(M&&D!==!1){const j=Object.keys(M),{shapeFlag:_}=I;j.length&&_&7&&(s&&j.some(Uc)&&(M=ad(M,s)),I=lr(I,M))}return n.dirs&&(I=lr(I),I.dirs=I.dirs?I.dirs.concat(n.dirs):n.dirs),n.transition&&(I.transition=n.transition),C=I,va(p),C}const id=e=>{let t;for(const n in e)(n==="class"||n==="style"||co(n))&&((t||(t={}))[n]=e[n]);return t},ad=(e,t)=>{const n={};for(const r in e)(!Uc(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function sd(e,t,n){const{props:r,children:a,component:i}=e,{props:s,children:c,patchFlag:v}=t,u=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&v>=0){if(v&1024)return!0;if(v&16)return r?tl(r,s,u):!!s;if(v&8){const m=t.dynamicProps;for(let o=0;o<m.length;o++){const l=m[o];if(s[l]!==r[l]&&!Oa(u,l))return!0}}}else return(a||c)&&(!c||!c.$stable)?!0:r===s?!1:r?s?tl(r,s,u):!0:!!s;return!1}function tl(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let a=0;a<r.length;a++){const i=r[a];if(t[i]!==e[i]&&!Oa(n,i))return!0}return!1}function od({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const ld=e=>e.__isSuspense;function cd(e,t){t&&t.pendingBranch?ct(e)?t.effects.push(...e):t.effects.push(e):nd(e)}function ud(e,t){if(Nt){let n=Nt.provides;const r=Nt.parent&&Nt.parent.provides;r===n&&(n=Nt.provides=Object.create(r)),n[e]=t}}function rs(e,t,n=!1){const r=Nt||Vt;if(r){const a=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(a&&e in a)return a[e];if(arguments.length>1)return n&&it(t)?t.call(r.proxy):t}}const nl={};function is(e,t,n){return iu(e,t,n)}function iu(e,t,{immediate:n,deep:r,flush:a,onTrack:i,onTrigger:s}=wt){const c=Nt;let v,u=!1,m=!1;if(Yt(e)?(v=()=>e.value,u=Rs(e)):Ur(e)?(v=()=>e,r=!0):ct(e)?(m=!0,u=e.some(M=>Ur(M)||Rs(M)),v=()=>e.map(M=>{if(Yt(M))return M.value;if(Ur(M))return Tr(M);if(it(M))return ar(M,c,2)})):it(e)?t?v=()=>ar(e,c,2):v=()=>{if(!(c&&c.isUnmounted))return o&&o(),hn(e,c,3,[l])}:v=Hn,t&&r){const M=v;v=()=>Tr(M())}let o,l=M=>{o=C.onStop=()=>{ar(M,c,4)}};if(Ti)return l=Hn,t?n&&hn(t,c,3,[v(),m?[]:void 0,l]):v(),Hn;let f=m?[]:nl;const g=()=>{if(C.active)if(t){const M=C.run();(r||u||(m?M.some((p,I)=>Jo(p,f[I])):Jo(M,f)))&&(o&&o(),hn(t,c,3,[M,f===nl?void 0:f,l]),f=M)}else C.run()};g.allowRecurse=!!t;let D;a==="sync"?D=g:a==="post"?D=()=>en(g,c&&c.suspense):D=()=>td(g);const C=new to(v,D);return t?n?g():f=C.run():a==="post"?en(C.run.bind(C),c&&c.suspense):C.run(),()=>{C.stop(),c&&c.scope&&uo(c.scope.effects,C)}}function dd(e,t,n){const r=this.proxy,a=Kt(e)?e.includes(".")?au(r,e):()=>r[e]:e.bind(r,r);let i;it(t)?i=t:(i=t.handler,n=t);const s=Nt;Kr(this);const c=iu(a,i.bind(r),n);return s?Kr(s):Cr(),c}function au(e,t){const n=t.split(".");return()=>{let r=e;for(let a=0;a<n.length&&r;a++)r=r[n[a]];return r}}function Tr(e,t){if(!Gt(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),Yt(e))Tr(e.value,t);else if(ct(e))for(let n=0;n<e.length;n++)Tr(e[n],t);else if(Xc(e)||qc(e))e.forEach(n=>{Tr(n,t)});else if(Gc(e))for(const n in e)Tr(e[n],t);return e}function su(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return uu(()=>{e.isMounted=!0}),mu(()=>{e.isUnmounting=!0}),e}const cn=[Function,Array],md={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:cn,onEnter:cn,onAfterEnter:cn,onEnterCancelled:cn,onBeforeLeave:cn,onLeave:cn,onAfterLeave:cn,onLeaveCancelled:cn,onBeforeAppear:cn,onAppear:cn,onAfterAppear:cn,onAppearCancelled:cn},setup(e,{slots:t}){const n=Eu(),r=su();let a;return()=>{const i=t.default&&vo(t.default(),!0);if(!i||!i.length)return;let s=i[0];if(i.length>1){for(const D of i)if(D.type!==fn){s=D;break}}const c=ht(e),{mode:v}=c;if(r.isLeaving)return as(s);const u=rl(s);if(!u)return as(s);const m=Mi(u,c,r,n);Ai(u,m);const o=n.subTree,l=o&&rl(o);let f=!1;const{getTransitionKey:g}=u.type;if(g){const D=g();a===void 0?a=D:D!==a&&(a=D,f=!0)}if(l&&l.type!==fn&&(!Mr(u,l)||f)){const D=Mi(l,c,r,n);if(Ai(l,D),v==="out-in")return r.isLeaving=!0,D.afterLeave=()=>{r.isLeaving=!1,n.update()},as(s);v==="in-out"&&u.type!==fn&&(D.delayLeave=(C,M,p)=>{const I=lu(r,l);I[String(l.key)]=l,C._leaveCb=()=>{M(),C._leaveCb=void 0,delete m.delayedLeave},m.delayedLeave=p})}return s}}},ou=md;function lu(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function Mi(e,t,n,r){const{appear:a,mode:i,persisted:s=!1,onBeforeEnter:c,onEnter:v,onAfterEnter:u,onEnterCancelled:m,onBeforeLeave:o,onLeave:l,onAfterLeave:f,onLeaveCancelled:g,onBeforeAppear:D,onAppear:C,onAfterAppear:M,onAppearCancelled:p}=t,I=String(e.key),j=lu(n,e),_=(A,E)=>{A&&hn(A,r,9,E)},R=(A,E)=>{const h=E[1];_(A,E),ct(A)?A.every(y=>y.length<=1)&&h():A.length<=1&&h()},T={mode:i,persisted:s,beforeEnter(A){let E=c;if(!n.isMounted)if(a)E=D||c;else return;A._leaveCb&&A._leaveCb(!0);const h=j[I];h&&Mr(e,h)&&h.el._leaveCb&&h.el._leaveCb(),_(E,[A])},enter(A){let E=v,h=u,y=m;if(!n.isMounted)if(a)E=C||v,h=M||u,y=p||m;else return;let b=!1;const w=A._enterCb=S=>{b||(b=!0,S?_(y,[A]):_(h,[A]),T.delayedLeave&&T.delayedLeave(),A._enterCb=void 0)};E?R(E,[A,w]):w()},leave(A,E){const h=String(e.key);if(A._enterCb&&A._enterCb(!0),n.isUnmounting)return E();_(o,[A]);let y=!1;const b=A._leaveCb=w=>{y||(y=!0,E(),w?_(g,[A]):_(f,[A]),A._leaveCb=void 0,j[h]===e&&delete j[h])};j[h]=e,l?R(l,[A,b]):b()},clone(A){return Mi(A,t,n,r)}};return T}function as(e){if(La(e))return e=lr(e),e.children=null,e}function rl(e){return La(e)?e.children?e.children[0]:void 0:e}function Ai(e,t){e.shapeFlag&6&&e.component?Ai(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function vo(e,t=!1,n){let r=[],a=0;for(let i=0;i<e.length;i++){let s=e[i];const c=n==null?s.key:String(n)+String(s.key!=null?s.key:i);s.type===st?(s.patchFlag&128&&a++,r=r.concat(vo(s.children,t,c))):(t||s.type!==fn)&&r.push(c!=null?lr(s,{key:c}):s)}if(a>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}function hd(e){return it(e)?{setup:e,name:e.name}:e}const bi=e=>!!e.type.__asyncLoader,La=e=>e.type.__isKeepAlive;function fd(e,t){cu(e,"a",t)}function vd(e,t){cu(e,"da",t)}function cu(e,t,n=Nt){const r=e.__wdc||(e.__wdc=()=>{let a=n;for(;a;){if(a.isDeactivated)return;a=a.parent}return e()});if(ja(t,r,n),n){let a=n.parent;for(;a&&a.parent;)La(a.parent.vnode)&&_d(r,t,n,a),a=a.parent}}function _d(e,t,n,r){const a=ja(t,e,r,!0);hu(()=>{uo(r[t],a)},n)}function ja(e,t,n=Nt,r=!1){if(n){const a=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...s)=>{if(n.isUnmounted)return;Qr(),Kr(n);const c=hn(t,n,e,s);return Cr(),Jr(),c});return r?a.unshift(i):a.push(i),i}}const qn=e=>(t,n=Nt)=>(!Ti||e==="sp")&&ja(e,t,n),pd=qn("bm"),uu=qn("m"),gd=qn("bu"),du=qn("u"),mu=qn("bum"),hu=qn("um"),bd=qn("sp"),yd=qn("rtg"),wd=qn("rtc");function kd(e,t=Nt){ja("ec",e,t)}function zn(e,t){const n=Vt;if(n===null)return e;const r=Ha(n)||n.proxy,a=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[s,c,v,u=wt]=t[i];it(s)&&(s={mounted:s,updated:s}),s.deep&&Tr(c),a.push({dir:s,instance:r,value:c,oldValue:void 0,arg:v,modifiers:u})}return e}function mr(e,t,n,r){const a=e.dirs,i=t&&t.dirs;for(let s=0;s<a.length;s++){const c=a[s];i&&(c.oldValue=i[s].value);let v=c.dir[r];v&&(Qr(),hn(v,n,8,[e.el,c,e,t]),Jr())}}const _o="components",Sd="directives";function Ke(e,t){return po(_o,e,!0,t)||e}const fu=Symbol();function xd(e){return Kt(e)?po(_o,e,!1)||e:e||fu}function Na(e){return po(Sd,e)}function po(e,t,n=!0,r=!1){const a=Vt||Nt;if(a){const i=a.type;if(e===_o){const c=Qd(i,!1);if(c&&(c===t||c===On(t)||c===ho(On(t))))return i}const s=il(a[e]||i[e],t)||il(a.appContext[e],t);return!s&&r?i:s}}function il(e,t){return e&&(e[t]||e[On(t)]||e[ho(On(t))])}function nt(e,t,n,r){let a;const i=n;if(ct(e)||Kt(e)){a=new Array(e.length);for(let s=0,c=e.length;s<c;s++)a[s]=t(e[s],s,void 0,i)}else if(typeof e=="number"){a=new Array(e);for(let s=0;s<e;s++)a[s]=t(s+1,s,void 0,i)}else if(Gt(e))if(e[Symbol.iterator])a=Array.from(e,(s,c)=>t(s,c,void 0,i));else{const s=Object.keys(e);a=new Array(s.length);for(let c=0,v=s.length;c<v;c++){const u=s[c];a[c]=t(e[u],u,c,i)}}else a=[];return a}function gt(e,t){for(let n=0;n<t.length;n++){const r=t[n];if(ct(r))for(let a=0;a<r.length;a++)e[r[a].name]=r[a].fn;else r&&(e[r.name]=r.fn)}return e}function Ce(e,t,n={},r,a){if(Vt.isCE||Vt.parent&&bi(Vt.parent)&&Vt.parent.isCE)return Oe("slot",t==="default"?null:{name:t},r&&r());let i=e[t];i&&i._c&&(i._d=!1),$();const s=i&&vu(i(n)),c=ft(st,{key:n.key||`_${t}`},s||(r?r():[]),s&&e._===1?64:-2);return c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),i&&i._c&&(i._d=!0),c}function vu(e){return e.some(t=>ga(t)?!(t.type===fn||t.type===st&&!vu(t.children)):!0)?e:null}const Fs=e=>e?Tu(e)?Ha(e)||e.proxy:Fs(e.parent):null,_a=wn(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Fs(e.parent),$root:e=>Fs(e.root),$emit:e=>e.emit,$options:e=>pu(e),$forceUpdate:e=>e.f||(e.f=()=>Qc(e.update)),$nextTick:e=>e.n||(e.n=Zc.bind(e.proxy)),$watch:e=>dd.bind(e)}),Md={get({_:e},t){const{ctx:n,setupState:r,data:a,props:i,accessCache:s,type:c,appContext:v}=e;let u;if(t[0]!=="$"){const f=s[t];if(f!==void 0)switch(f){case 1:return r[t];case 2:return a[t];case 4:return n[t];case 3:return i[t]}else{if(r!==wt&&mt(r,t))return s[t]=1,r[t];if(a!==wt&&mt(a,t))return s[t]=2,a[t];if((u=e.propsOptions[0])&&mt(u,t))return s[t]=3,i[t];if(n!==wt&&mt(n,t))return s[t]=4,n[t];Os&&(s[t]=0)}}const m=_a[t];let o,l;if(m)return t==="$attrs"&&on(e,"get",t),m(e);if((o=c.__cssModules)&&(o=o[t]))return o;if(n!==wt&&mt(n,t))return s[t]=4,n[t];if(l=v.config.globalProperties,mt(l,t))return l[t]},set({_:e},t,n){const{data:r,setupState:a,ctx:i}=e;return a!==wt&&mt(a,t)?(a[t]=n,!0):r!==wt&&mt(r,t)?(r[t]=n,!0):mt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:a,propsOptions:i}},s){let c;return!!n[s]||e!==wt&&mt(e,s)||t!==wt&&mt(t,s)||(c=i[0])&&mt(c,s)||mt(r,s)||mt(_a,s)||mt(a.config.globalProperties,s)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:mt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};let Os=!0;function Ad(e){const t=pu(e),n=e.proxy,r=e.ctx;Os=!1,t.beforeCreate&&al(t.beforeCreate,e,"bc");const{data:a,computed:i,methods:s,watch:c,provide:v,inject:u,created:m,beforeMount:o,mounted:l,beforeUpdate:f,updated:g,activated:D,deactivated:C,beforeDestroy:M,beforeUnmount:p,destroyed:I,unmounted:j,render:_,renderTracked:R,renderTriggered:T,errorCaptured:A,serverPrefetch:E,expose:h,inheritAttrs:y,components:b,directives:w,filters:S}=t;if(u&&Ed(u,r,null,e.appContext.config.unwrapInjectedRef),s)for(const Y in s){const H=s[Y];it(H)&&(r[Y]=H.bind(n))}if(a){const Y=a.call(n,n);Gt(Y)&&(e.data=ao(Y))}if(Os=!0,i)for(const Y in i){const H=i[Y],q=it(H)?H.bind(n,n):it(H.get)?H.get.bind(n,n):Hn,d=!it(H)&&it(H.set)?H.set.bind(n):Hn,x=$d({get:q,set:d});Object.defineProperty(r,Y,{enumerable:!0,configurable:!0,get:()=>x.value,set:W=>x.value=W})}if(c)for(const Y in c)_u(c[Y],r,n,Y);if(v){const Y=it(v)?v.call(n):v;Reflect.ownKeys(Y).forEach(H=>{ud(H,Y[H])})}m&&al(m,e,"c");function N(Y,H){ct(H)?H.forEach(q=>Y(q.bind(n))):H&&Y(H.bind(n))}if(N(pd,o),N(uu,l),N(gd,f),N(du,g),N(fd,D),N(vd,C),N(kd,A),N(wd,R),N(yd,T),N(mu,p),N(hu,j),N(bd,E),ct(h))if(h.length){const Y=e.exposed||(e.exposed={});h.forEach(H=>{Object.defineProperty(Y,H,{get:()=>n[H],set:q=>n[H]=q})})}else e.exposed||(e.exposed={});_&&e.render===Hn&&(e.render=_),y!=null&&(e.inheritAttrs=y),b&&(e.components=b),w&&(e.directives=w)}function Ed(e,t,n=Hn,r=!1){ct(e)&&(e=Ls(e));for(const a in e){const i=e[a];let s;Gt(i)?"default"in i?s=rs(i.from||a,i.default,!0):s=rs(i.from||a):s=rs(i),Yt(s)&&r?Object.defineProperty(t,a,{enumerable:!0,configurable:!0,get:()=>s.value,set:c=>s.value=c}):t[a]=s}}function al(e,t,n){hn(ct(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function _u(e,t,n,r){const a=r.includes(".")?au(n,r):()=>n[r];if(Kt(e)){const i=t[e];it(i)&&is(a,i)}else if(it(e))is(a,e.bind(n));else if(Gt(e))if(ct(e))e.forEach(i=>_u(i,t,n,r));else{const i=it(e.handler)?e.handler.bind(n):t[e.handler];it(i)&&is(a,i,e)}}function pu(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:a,optionsCache:i,config:{optionMergeStrategies:s}}=e.appContext,c=i.get(t);let v;return c?v=c:!a.length&&!n&&!r?v=t:(v={},a.length&&a.forEach(u=>pa(v,u,s,!0)),pa(v,t,s)),i.set(t,v),v}function pa(e,t,n,r=!1){const{mixins:a,extends:i}=t;i&&pa(e,i,n,!0),a&&a.forEach(s=>pa(e,s,n,!0));for(const s in t)if(!(r&&s==="expose")){const c=Td[s]||n&&n[s];e[s]=c?c(e[s],t[s]):t[s]}return e}const Td={data:sl,props:Sr,emits:Sr,methods:Sr,computed:Sr,beforeCreate:qt,created:qt,beforeMount:qt,mounted:qt,beforeUpdate:qt,updated:qt,beforeDestroy:qt,beforeUnmount:qt,destroyed:qt,unmounted:qt,activated:qt,deactivated:qt,errorCaptured:qt,serverPrefetch:qt,components:Sr,directives:Sr,watch:Id,provide:sl,inject:Rd};function sl(e,t){return t?e?function(){return wn(it(e)?e.call(this,this):e,it(t)?t.call(this,this):t)}:t:e}function Rd(e,t){return Sr(Ls(e),Ls(t))}function Ls(e){if(ct(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function qt(e,t){return e?[...new Set([].concat(e,t))]:t}function Sr(e,t){return e?wn(wn(Object.create(null),e),t):t}function Id(e,t){if(!e)return t;if(!t)return e;const n=wn(Object.create(null),e);for(const r in t)n[r]=qt(e[r],t[r]);return n}function Cd(e,t,n,r=!1){const a={},i={};Is(i,Da,1),e.propsDefaults=Object.create(null),gu(e,t,a,i);for(const s in e.propsOptions[0])s in a||(a[s]=void 0);n?e.props=r?a:O0(a):e.type.props?e.props=a:e.props=i,e.attrs=i}function Bd(e,t,n,r){const{props:a,attrs:i,vnode:{patchFlag:s}}=e,c=ht(a),[v]=e.propsOptions;let u=!1;if((r||s>0)&&!(s&16)){if(s&8){const m=e.vnode.dynamicProps;for(let o=0;o<m.length;o++){let l=m[o];if(Oa(e.emitsOptions,l))continue;const f=t[l];if(v)if(mt(i,l))f!==i[l]&&(i[l]=f,u=!0);else{const g=On(l);a[g]=js(v,c,g,f,e,!1)}else f!==i[l]&&(i[l]=f,u=!0)}}}else{gu(e,t,a,i)&&(u=!0);let m;for(const o in c)(!t||!mt(t,o)&&((m=Ca(o))===o||!mt(t,m)))&&(v?n&&(n[o]!==void 0||n[m]!==void 0)&&(a[o]=js(v,c,o,void 0,e,!0)):delete a[o]);if(i!==c)for(const o in i)(!t||!mt(t,o))&&(delete i[o],u=!0)}u&&Pn(e,"set","$attrs")}function gu(e,t,n,r){const[a,i]=e.propsOptions;let s=!1,c;if(t)for(let v in t){if(la(v))continue;const u=t[v];let m;a&&mt(a,m=On(v))?!i||!i.includes(m)?n[m]=u:(c||(c={}))[m]=u:Oa(e.emitsOptions,v)||(!(v in r)||u!==r[v])&&(r[v]=u,s=!0)}if(i){const v=ht(n),u=c||wt;for(let m=0;m<i.length;m++){const o=i[m];n[o]=js(a,v,o,u[o],e,!mt(u,o))}}return s}function js(e,t,n,r,a,i){const s=e[n];if(s!=null){const c=mt(s,"default");if(c&&r===void 0){const v=s.default;if(s.type!==Function&&it(v)){const{propsDefaults:u}=a;n in u?r=u[n]:(Kr(a),r=u[n]=v.call(null,t),Cr())}else r=v}s[0]&&(i&&!c?r=!1:s[1]&&(r===""||r===Ca(n))&&(r=!0))}return r}function bu(e,t,n=!1){const r=t.propsCache,a=r.get(e);if(a)return a;const i=e.props,s={},c=[];let v=!1;if(!it(e)){const m=o=>{v=!0;const[l,f]=bu(o,t,!0);wn(s,l),f&&c.push(...f)};!n&&t.mixins.length&&t.mixins.forEach(m),e.extends&&m(e.extends),e.mixins&&e.mixins.forEach(m)}if(!i&&!v)return r.set(e,qr),qr;if(ct(i))for(let m=0;m<i.length;m++){const o=On(i[m]);ol(o)&&(s[o]=wt)}else if(i)for(const m in i){const o=On(m);if(ol(o)){const l=i[m],f=s[o]=ct(l)||it(l)?{type:l}:l;if(f){const g=ul(Boolean,f.type),D=ul(String,f.type);f[0]=g>-1,f[1]=D<0||g<D,(g>-1||mt(f,"default"))&&c.push(o)}}}const u=[s,c];return r.set(e,u),u}function ol(e){return e[0]!=="$"}function ll(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function cl(e,t){return ll(e)===ll(t)}function ul(e,t){return ct(t)?t.findIndex(n=>cl(n,e)):it(t)&&cl(t,e)?0:-1}const yu=e=>e[0]==="_"||e==="$stable",go=e=>ct(e)?e.map(In):[In(e)],Fd=(e,t,n)=>{if(t._n)return t;const r=Ge((...a)=>go(t(...a)),n);return r._c=!1,r},wu=(e,t,n)=>{const r=e._ctx;for(const a in e){if(yu(a))continue;const i=e[a];if(it(i))t[a]=Fd(a,i,r);else if(i!=null){const s=go(i);t[a]=()=>s}}},ku=(e,t)=>{const n=go(t);e.slots.default=()=>n},Od=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=ht(t),Is(t,"_",n)):wu(t,e.slots={})}else e.slots={},t&&ku(e,t);Is(e.slots,Da,1)},Ld=(e,t,n)=>{const{vnode:r,slots:a}=e;let i=!0,s=wt;if(r.shapeFlag&32){const c=t._;c?n&&c===1?i=!1:(wn(a,t),!n&&c===1&&delete a._):(i=!t.$stable,wu(t,a)),s=t}else t&&(ku(e,t),s={default:1});if(i)for(const c in a)!yu(c)&&!(c in s)&&delete a[c]};function Su(){return{app:null,config:{isNativeTag:X0,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let jd=0;function Nd(e,t){return function(r,a=null){it(r)||(r=Object.assign({},r)),a!=null&&!Gt(a)&&(a=null);const i=Su(),s=new Set;let c=!1;const v=i.app={_uid:jd++,_component:r,_props:a,_container:null,_context:i,_instance:null,version:tm,get config(){return i.config},set config(u){},use(u,...m){return s.has(u)||(u&&it(u.install)?(s.add(u),u.install(v,...m)):it(u)&&(s.add(u),u(v,...m))),v},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),v},component(u,m){return m?(i.components[u]=m,v):i.components[u]},directive(u,m){return m?(i.directives[u]=m,v):i.directives[u]},mount(u,m,o){if(!c){const l=Oe(r,a);return l.appContext=i,e(l,u,o),c=!0,v._container=u,u.__vue_app__=v,Ha(l.component)||l.component.proxy}},unmount(){c&&(e(null,v._container),delete v._container.__vue_app__)},provide(u,m){return i.provides[u]=m,v}};return v}}function Ns(e,t,n,r,a=!1){if(ct(e)){e.forEach((l,f)=>Ns(l,t&&(ct(t)?t[f]:t),n,r,a));return}if(bi(r)&&!a)return;const i=r.shapeFlag&4?Ha(r.component)||r.component.proxy:r.el,s=a?null:i,{i:c,r:v}=e,u=t&&t.r,m=c.refs===wt?c.refs={}:c.refs,o=c.setupState;if(u!=null&&u!==v&&(Kt(u)?(m[u]=null,mt(o,u)&&(o[u]=null)):Yt(u)&&(u.value=null)),it(v))ar(v,c,12,[s,m]);else{const l=Kt(v),f=Yt(v);if(l||f){const g=()=>{if(e.f){const D=l?m[v]:v.value;a?ct(D)&&uo(D,i):ct(D)?D.includes(i)||D.push(i):l?(m[v]=[i],mt(o,v)&&(o[v]=m[v])):(v.value=[i],e.k&&(m[e.k]=v.value))}else l?(m[v]=s,mt(o,v)&&(o[v]=s)):f&&(v.value=s,e.k&&(m[e.k]=s))};s?(g.id=-1,en(g,n)):g()}}}const en=cd;function Dd(e){return Hd(e)}function Hd(e,t){const n=Q0();n.__VUE__=!0;const{insert:r,remove:a,patchProp:i,createElement:s,createText:c,createComment:v,setText:u,setElementText:m,parentNode:o,nextSibling:l,setScopeId:f=Hn,cloneNode:g,insertStaticContent:D}=e,C=(V,X,te,ce=null,ue=null,be=null,Te=!1,ke=null,xe=!!X.dynamicChildren)=>{if(V===X)return;V&&!Mr(V,X)&&(ce=He(V),B(V,ue,be,!0),V=null),X.patchFlag===-2&&(xe=!1,X.dynamicChildren=null);const{type:pe,ref:ze,shapeFlag:De}=X;switch(pe){case bo:M(V,X,te,ce);break;case fn:p(V,X,te,ce);break;case ss:V==null&&I(X,te,ce,Te);break;case st:w(V,X,te,ce,ue,be,Te,ke,xe);break;default:De&1?R(V,X,te,ce,ue,be,Te,ke,xe):De&6?S(V,X,te,ce,ue,be,Te,ke,xe):(De&64||De&128)&&pe.process(V,X,te,ce,ue,be,Te,ke,xe,fe)}ze!=null&&ue&&Ns(ze,V&&V.ref,be,X||V,!X)},M=(V,X,te,ce)=>{if(V==null)r(X.el=c(X.children),te,ce);else{const ue=X.el=V.el;X.children!==V.children&&u(ue,X.children)}},p=(V,X,te,ce)=>{V==null?r(X.el=v(X.children||""),te,ce):X.el=V.el},I=(V,X,te,ce)=>{[V.el,V.anchor]=D(V.children,X,te,ce,V.el,V.anchor)},j=({el:V,anchor:X},te,ce)=>{let ue;for(;V&&V!==X;)ue=l(V),r(V,te,ce),V=ue;r(X,te,ce)},_=({el:V,anchor:X})=>{let te;for(;V&&V!==X;)te=l(V),a(V),V=te;a(X)},R=(V,X,te,ce,ue,be,Te,ke,xe)=>{Te=Te||X.type==="svg",V==null?T(X,te,ce,ue,be,Te,ke,xe):h(V,X,ue,be,Te,ke,xe)},T=(V,X,te,ce,ue,be,Te,ke)=>{let xe,pe;const{type:ze,props:De,shapeFlag:je,transition:Ve,patchFlag:qe,dirs:Ze}=V;if(V.el&&g!==void 0&&qe===-1)xe=V.el=g(V.el);else{if(xe=V.el=s(V.type,be,De&&De.is,De),je&8?m(xe,V.children):je&16&&E(V.children,xe,null,ce,ue,be&&ze!=="foreignObject",Te,ke),Ze&&mr(V,null,ce,"created"),De){for(const Me in De)Me!=="value"&&!la(Me)&&i(xe,Me,null,De[Me],be,V.children,ce,ue,_e);"value"in De&&i(xe,"value",null,De.value),(pe=De.onVnodeBeforeMount)&&Mn(pe,ce,V)}A(xe,V,V.scopeId,Te,ce)}Ze&&mr(V,null,ce,"beforeMount");const de=(!ue||ue&&!ue.pendingBranch)&&Ve&&!Ve.persisted;de&&Ve.beforeEnter(xe),r(xe,X,te),((pe=De&&De.onVnodeMounted)||de||Ze)&&en(()=>{pe&&Mn(pe,ce,V),de&&Ve.enter(xe),Ze&&mr(V,null,ce,"mounted")},ue)},A=(V,X,te,ce,ue)=>{if(te&&f(V,te),ce)for(let be=0;be<ce.length;be++)f(V,ce[be]);if(ue){let be=ue.subTree;if(X===be){const Te=ue.vnode;A(V,Te,Te.scopeId,Te.slotScopeIds,ue.parent)}}},E=(V,X,te,ce,ue,be,Te,ke,xe=0)=>{for(let pe=xe;pe<V.length;pe++){const ze=V[pe]=ke?nr(V[pe]):In(V[pe]);C(null,ze,X,te,ce,ue,be,Te,ke)}},h=(V,X,te,ce,ue,be,Te)=>{const ke=X.el=V.el;let{patchFlag:xe,dynamicChildren:pe,dirs:ze}=X;xe|=V.patchFlag&16;const De=V.props||wt,je=X.props||wt;let Ve;te&&hr(te,!1),(Ve=je.onVnodeBeforeUpdate)&&Mn(Ve,te,X,V),ze&&mr(X,V,te,"beforeUpdate"),te&&hr(te,!0);const qe=ue&&X.type!=="foreignObject";if(pe?y(V.dynamicChildren,pe,ke,te,ce,qe,be):Te||q(V,X,ke,null,te,ce,qe,be,!1),xe>0){if(xe&16)b(ke,X,De,je,te,ce,ue);else if(xe&2&&De.class!==je.class&&i(ke,"class",null,je.class,ue),xe&4&&i(ke,"style",De.style,je.style,ue),xe&8){const Ze=X.dynamicProps;for(let de=0;de<Ze.length;de++){const Me=Ze[de],re=De[Me],Le=je[Me];(Le!==re||Me==="value")&&i(ke,Me,re,Le,ue,V.children,te,ce,_e)}}xe&1&&V.children!==X.children&&m(ke,X.children)}else!Te&&pe==null&&b(ke,X,De,je,te,ce,ue);((Ve=je.onVnodeUpdated)||ze)&&en(()=>{Ve&&Mn(Ve,te,X,V),ze&&mr(X,V,te,"updated")},ce)},y=(V,X,te,ce,ue,be,Te)=>{for(let ke=0;ke<X.length;ke++){const xe=V[ke],pe=X[ke],ze=xe.el&&(xe.type===st||!Mr(xe,pe)||xe.shapeFlag&70)?o(xe.el):te;C(xe,pe,ze,null,ce,ue,be,Te,!0)}},b=(V,X,te,ce,ue,be,Te)=>{if(te!==ce){for(const ke in ce){if(la(ke))continue;const xe=ce[ke],pe=te[ke];xe!==pe&&ke!=="value"&&i(V,ke,pe,xe,Te,X.children,ue,be,_e)}if(te!==wt)for(const ke in te)!la(ke)&&!(ke in ce)&&i(V,ke,te[ke],null,Te,X.children,ue,be,_e);"value"in ce&&i(V,"value",te.value,ce.value)}},w=(V,X,te,ce,ue,be,Te,ke,xe)=>{const pe=X.el=V?V.el:c(""),ze=X.anchor=V?V.anchor:c("");let{patchFlag:De,dynamicChildren:je,slotScopeIds:Ve}=X;Ve&&(ke=ke?ke.concat(Ve):Ve),V==null?(r(pe,te,ce),r(ze,te,ce),E(X.children,te,ze,ue,be,Te,ke,xe)):De>0&&De&64&&je&&V.dynamicChildren?(y(V.dynamicChildren,je,te,ue,be,Te,ke),(X.key!=null||ue&&X===ue.subTree)&&xu(V,X,!0)):q(V,X,te,ze,ue,be,Te,ke,xe)},S=(V,X,te,ce,ue,be,Te,ke,xe)=>{X.slotScopeIds=ke,V==null?X.shapeFlag&512?ue.ctx.activate(X,te,ce,Te,xe):k(X,te,ce,ue,be,Te,xe):N(V,X,xe)},k=(V,X,te,ce,ue,be,Te)=>{const ke=V.component=Yd(V,ce,ue);if(La(V)&&(ke.ctx.renderer=fe),Kd(ke),ke.asyncDep){if(ue&&ue.registerDep(ke,Y),!V.el){const xe=ke.subTree=Oe(fn);p(null,xe,X,te)}return}Y(ke,V,X,te,ue,be,Te)},N=(V,X,te)=>{const ce=X.component=V.component;if(sd(V,X,te))if(ce.asyncDep&&!ce.asyncResolved){H(ce,X,te);return}else ce.next=X,ed(ce.update),ce.update();else X.el=V.el,ce.vnode=X},Y=(V,X,te,ce,ue,be,Te)=>{const ke=()=>{if(V.isMounted){let{next:ze,bu:De,u:je,parent:Ve,vnode:qe}=V,Ze=ze,de;hr(V,!1),ze?(ze.el=qe.el,H(V,ze,Te)):ze=qe,De&&ns(De),(de=ze.props&&ze.props.onVnodeBeforeUpdate)&&Mn(de,Ve,ze,qe),hr(V,!0);const Me=el(V),re=V.subTree;V.subTree=Me,C(re,Me,o(re.el),He(re),V,ue,be),ze.el=Me.el,Ze===null&&od(V,Me.el),je&&en(je,ue),(de=ze.props&&ze.props.onVnodeUpdated)&&en(()=>Mn(de,Ve,ze,qe),ue)}else{let ze;const{el:De,props:je}=X,{bm:Ve,m:qe,parent:Ze}=V,de=bi(X);hr(V,!1),Ve&&ns(Ve),!de&&(ze=je&&je.onVnodeBeforeMount)&&Mn(ze,Ze,X),hr(V,!0);{const Me=V.subTree=el(V);C(null,Me,te,ce,V,ue,be),X.el=Me.el}if(qe&&en(qe,ue),!de&&(ze=je&&je.onVnodeMounted)){const Me=X;en(()=>Mn(ze,Ze,Me),ue)}(X.shapeFlag&256||Ze&&bi(Ze.vnode)&&Ze.vnode.shapeFlag&256)&&V.a&&en(V.a,ue),V.isMounted=!0,X=te=ce=null}},xe=V.effect=new to(ke,()=>Qc(pe),V.scope),pe=V.update=()=>xe.run();pe.id=V.uid,hr(V,!0),pe()},H=(V,X,te)=>{X.component=V;const ce=V.vnode.props;V.vnode=X,V.next=null,Bd(V,X.props,ce,te),Ld(V,X.children,te),Qr(),Fa(void 0,V.update),Jr()},q=(V,X,te,ce,ue,be,Te,ke,xe=!1)=>{const pe=V&&V.children,ze=V?V.shapeFlag:0,De=X.children,{patchFlag:je,shapeFlag:Ve}=X;if(je>0){if(je&128){x(pe,De,te,ce,ue,be,Te,ke,xe);return}else if(je&256){d(pe,De,te,ce,ue,be,Te,ke,xe);return}}Ve&8?(ze&16&&_e(pe,ue,be),De!==pe&&m(te,De)):ze&16?Ve&16?x(pe,De,te,ce,ue,be,Te,ke,xe):_e(pe,ue,be,!0):(ze&8&&m(te,""),Ve&16&&E(De,te,ce,ue,be,Te,ke,xe))},d=(V,X,te,ce,ue,be,Te,ke,xe)=>{V=V||qr,X=X||qr;const pe=V.length,ze=X.length,De=Math.min(pe,ze);let je;for(je=0;je<De;je++){const Ve=X[je]=xe?nr(X[je]):In(X[je]);C(V[je],Ve,te,null,ue,be,Te,ke,xe)}pe>ze?_e(V,ue,be,!0,!1,De):E(X,te,ce,ue,be,Te,ke,xe,De)},x=(V,X,te,ce,ue,be,Te,ke,xe)=>{let pe=0;const ze=X.length;let De=V.length-1,je=ze-1;for(;pe<=De&&pe<=je;){const Ve=V[pe],qe=X[pe]=xe?nr(X[pe]):In(X[pe]);if(Mr(Ve,qe))C(Ve,qe,te,null,ue,be,Te,ke,xe);else break;pe++}for(;pe<=De&&pe<=je;){const Ve=V[De],qe=X[je]=xe?nr(X[je]):In(X[je]);if(Mr(Ve,qe))C(Ve,qe,te,null,ue,be,Te,ke,xe);else break;De--,je--}if(pe>De){if(pe<=je){const Ve=je+1,qe=Ve<ze?X[Ve].el:ce;for(;pe<=je;)C(null,X[pe]=xe?nr(X[pe]):In(X[pe]),te,qe,ue,be,Te,ke,xe),pe++}}else if(pe>je)for(;pe<=De;)B(V[pe],ue,be,!0),pe++;else{const Ve=pe,qe=pe,Ze=new Map;for(pe=qe;pe<=je;pe++){const U=X[pe]=xe?nr(X[pe]):In(X[pe]);U.key!=null&&Ze.set(U.key,pe)}let de,Me=0;const re=je-qe+1;let Le=!1,F=0;const L=new Array(re);for(pe=0;pe<re;pe++)L[pe]=0;for(pe=Ve;pe<=De;pe++){const U=V[pe];if(Me>=re){B(U,ue,be,!0);continue}let K;if(U.key!=null)K=Ze.get(U.key);else for(de=qe;de<=je;de++)if(L[de-qe]===0&&Mr(U,X[de])){K=de;break}K===void 0?B(U,ue,be,!0):(L[K-qe]=pe+1,K>=F?F=K:Le=!0,C(U,X[K],te,null,ue,be,Te,ke,xe),Me++)}const z=Le?Pd(L):qr;for(de=z.length-1,pe=re-1;pe>=0;pe--){const U=qe+pe,K=X[U],P=U+1<ze?X[U+1].el:ce;L[pe]===0?C(null,K,te,P,ue,be,Te,ke,xe):Le&&(de<0||pe!==z[de]?W(K,te,P,2):de--)}}},W=(V,X,te,ce,ue=null)=>{const{el:be,type:Te,transition:ke,children:xe,shapeFlag:pe}=V;if(pe&6){W(V.component.subTree,X,te,ce);return}if(pe&128){V.suspense.move(X,te,ce);return}if(pe&64){Te.move(V,X,te,fe);return}if(Te===st){r(be,X,te);for(let De=0;De<xe.length;De++)W(xe[De],X,te,ce);r(V.anchor,X,te);return}if(Te===ss){j(V,X,te);return}if(ce!==2&&pe&1&&ke)if(ce===0)ke.beforeEnter(be),r(be,X,te),en(()=>ke.enter(be),ue);else{const{leave:De,delayLeave:je,afterLeave:Ve}=ke,qe=()=>r(be,X,te),Ze=()=>{De(be,()=>{qe(),Ve&&Ve()})};je?je(be,qe,Ze):Ze()}else r(be,X,te)},B=(V,X,te,ce=!1,ue=!1)=>{const{type:be,props:Te,ref:ke,children:xe,dynamicChildren:pe,shapeFlag:ze,patchFlag:De,dirs:je}=V;if(ke!=null&&Ns(ke,null,te,V,!0),ze&256){X.ctx.deactivate(V);return}const Ve=ze&1&&je,qe=!bi(V);let Ze;if(qe&&(Ze=Te&&Te.onVnodeBeforeUnmount)&&Mn(Ze,X,V),ze&6)ge(V.component,te,ce);else{if(ze&128){V.suspense.unmount(te,ce);return}Ve&&mr(V,null,X,"beforeUnmount"),ze&64?V.type.remove(V,X,te,ue,fe,ce):pe&&(be!==st||De>0&&De&64)?_e(pe,X,te,!1,!0):(be===st&&De&384||!ue&&ze&16)&&_e(xe,X,te),ce&&he(V)}(qe&&(Ze=Te&&Te.onVnodeUnmounted)||Ve)&&en(()=>{Ze&&Mn(Ze,X,V),Ve&&mr(V,null,X,"unmounted")},te)},he=V=>{const{type:X,el:te,anchor:ce,transition:ue}=V;if(X===st){Ae(te,ce);return}if(X===ss){_(V);return}const be=()=>{a(te),ue&&!ue.persisted&&ue.afterLeave&&ue.afterLeave()};if(V.shapeFlag&1&&ue&&!ue.persisted){const{leave:Te,delayLeave:ke}=ue,xe=()=>Te(te,be);ke?ke(V.el,be,xe):xe()}else be()},Ae=(V,X)=>{let te;for(;V!==X;)te=l(V),a(V),V=te;a(X)},ge=(V,X,te)=>{const{bum:ce,scope:ue,update:be,subTree:Te,um:ke}=V;ce&&ns(ce),ue.stop(),be&&(be.active=!1,B(Te,V,X,te)),ke&&en(ke,X),en(()=>{V.isUnmounted=!0},X),X&&X.pendingBranch&&!X.isUnmounted&&V.asyncDep&&!V.asyncResolved&&V.suspenseId===X.pendingId&&(X.deps--,X.deps===0&&X.resolve())},_e=(V,X,te,ce=!1,ue=!1,be=0)=>{for(let Te=be;Te<V.length;Te++)B(V[Te],X,te,ce,ue)},He=V=>V.shapeFlag&6?He(V.component.subTree):V.shapeFlag&128?V.suspense.next():l(V.anchor||V.el),Ee=(V,X,te)=>{V==null?X._vnode&&B(X._vnode,null,null,!0):C(X._vnode||null,V,X,null,null,null,te),eu(),X._vnode=V},fe={p:C,um:B,m:W,r:he,mt:k,mc:E,pc:q,pbc:y,n:He,o:e};return{render:Ee,hydrate:void 0,createApp:Nd(Ee)}}function hr({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function xu(e,t,n=!1){const r=e.children,a=t.children;if(ct(r)&&ct(a))for(let i=0;i<r.length;i++){const s=r[i];let c=a[i];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=a[i]=nr(a[i]),c.el=s.el),n||xu(s,c))}}function Pd(e){const t=e.slice(),n=[0];let r,a,i,s,c;const v=e.length;for(r=0;r<v;r++){const u=e[r];if(u!==0){if(a=n[n.length-1],e[a]<u){t[r]=a,n.push(r);continue}for(i=0,s=n.length-1;i<s;)c=i+s>>1,e[n[c]]<u?i=c+1:s=c;u<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,s=n[i-1];i-- >0;)n[i]=s,s=t[s];return n}const zd=e=>e.__isTeleport,st=Symbol(void 0),bo=Symbol(void 0),fn=Symbol(void 0),ss=Symbol(void 0),yi=[];let yn=null;function $(e=!1){yi.push(yn=e?null:[])}function Vd(){yi.pop(),yn=yi[yi.length-1]||null}let Ei=1;function dl(e){Ei+=e}function Mu(e){return e.dynamicChildren=Ei>0?yn||qr:null,Vd(),Ei>0&&yn&&yn.push(e),e}function le(e,t,n,r,a,i){return Mu(Se(e,t,n,r,a,i,!0))}function ft(e,t,n,r,a){return Mu(Oe(e,t,n,r,a,!0))}function ga(e){return e?e.__v_isVNode===!0:!1}function Mr(e,t){return e.type===t.type&&e.key===t.key}const Da="__vInternal",Au=({key:e})=>e??null,ca=({ref:e,ref_key:t,ref_for:n})=>e!=null?Kt(e)||Yt(e)||it(e)?{i:Vt,r:e,k:t,f:!!n}:e:null;function Se(e,t=null,n=null,r=0,a=null,i=e===st?0:1,s=!1,c=!1){const v={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Au(t),ref:t&&ca(t),scopeId:ru,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:a,dynamicChildren:null,appContext:null};return c?(yo(v,n),i&128&&e.normalize(v)):n&&(v.shapeFlag|=Kt(n)?8:16),Ei>0&&!s&&yn&&(v.patchFlag>0||i&6)&&v.patchFlag!==32&&yn.push(v),v}const Oe=Ud;function Ud(e,t=null,n=null,r=0,a=null,i=!1){if((!e||e===fu)&&(e=fn),ga(e)){const c=lr(e,t,!0);return n&&yo(c,n),Ei>0&&!i&&yn&&(c.shapeFlag&6?yn[yn.indexOf(e)]=c:yn.push(c)),c.patchFlag|=-2,c}if(Jd(e)&&(e=e.__vccOpts),t){t=vt(t);let{class:c,style:v}=t;c&&!Kt(c)&&(t.class=rt(c)),Gt(v)&&(Hc(v)&&!ct(v)&&(v=wn({},v)),t.style=Mt(v))}const s=Kt(e)?1:ld(e)?128:zd(e)?64:Gt(e)?4:it(e)?2:0;return Se(e,t,n,r,a,s,i,!0)}function vt(e){return e?Hc(e)||Da in e?wn({},e):e:null}function lr(e,t,n=!1){const{props:r,ref:a,patchFlag:i,children:s}=e,c=t?wo(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&Au(c),ref:t&&t.ref?n&&a?ct(a)?a.concat(ca(t)):[a,ca(t)]:ca(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==st?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&lr(e.ssContent),ssFallback:e.ssFallback&&lr(e.ssFallback),el:e.el,anchor:e.anchor}}function Vn(e=" ",t=0){return Oe(bo,null,e,t)}function Ie(e="",t=!1){return t?($(),ft(fn,null,e)):Oe(fn,null,e)}function In(e){return e==null||typeof e=="boolean"?Oe(fn):ct(e)?Oe(st,null,e.slice()):typeof e=="object"?nr(e):Oe(bo,null,String(e))}function nr(e){return e.el===null||e.memo?e:lr(e)}function yo(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(ct(t))n=16;else if(typeof t=="object")if(r&65){const a=t.default;a&&(a._c&&(a._d=!1),yo(e,a()),a._c&&(a._d=!0));return}else{n=32;const a=t._;!a&&!(Da in t)?t._ctx=Vt:a===3&&Vt&&(Vt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else it(t)?(t={default:t,_ctx:Vt},n=32):(t=String(t),r&64?(n=16,t=[Vn(t)]):n=8);e.children=t,e.shapeFlag|=n}function wo(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const a in r)if(a==="class")t.class!==r.class&&(t.class=rt([t.class,r.class]));else if(a==="style")t.style=Mt([t.style,r.style]);else if(co(a)){const i=t[a],s=r[a];s&&i!==s&&!(ct(i)&&i.includes(s))&&(t[a]=i?[].concat(i,s):s)}else a!==""&&(t[a]=r[a])}return t}function Mn(e,t,n,r=null){hn(e,t,7,[n,r])}const qd=Su();let Xd=0;function Yd(e,t,n){const r=e.type,a=(t?t.appContext:e.appContext)||qd,i={uid:Xd++,vnode:e,type:r,parent:t,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,scope:new o0(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(a.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:bu(r,a),emitsOptions:nu(r,a),emit:null,emitted:null,propsDefaults:wt,inheritAttrs:r.inheritAttrs,ctx:wt,data:wt,props:wt,attrs:wt,slots:wt,refs:wt,setupState:wt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=rd.bind(null,i),e.ce&&e.ce(i),i}let Nt=null;const Eu=()=>Nt||Vt,Kr=e=>{Nt=e,e.scope.on()},Cr=()=>{Nt&&Nt.scope.off(),Nt=null};function Tu(e){return e.vnode.shapeFlag&4}let Ti=!1;function Kd(e,t=!1){Ti=t;const{props:n,children:r}=e.vnode,a=Tu(e);Cd(e,n,a,t),Od(e,r);const i=a?Gd(e,t):void 0;return Ti=!1,i}function Gd(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=Pc(new Proxy(e.ctx,Md));const{setup:r}=n;if(r){const a=e.setupContext=r.length>1?Zd(e):null;Kr(e),Qr();const i=ar(r,e,0,[e.props,a]);if(Jr(),Cr(),Yc(i)){if(i.then(Cr,Cr),t)return i.then(s=>{ml(e,s)}).catch(s=>{Ba(s,e,0)});e.asyncDep=i}else ml(e,i)}else Ru(e)}function ml(e,t,n){it(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Gt(t)&&(e.setupState=zc(t)),Ru(e)}function Ru(e,t,n){const r=e.type;e.render||(e.render=r.render||Hn),Kr(e),Qr(),Ad(e),Jr(),Cr()}function Wd(e){return new Proxy(e.attrs,{get(t,n){return on(e,"get","$attrs"),t[n]}})}function Zd(e){const t=r=>{e.exposed=r||{}};let n;return{get attrs(){return n||(n=Wd(e))},slots:e.slots,emit:e.emit,expose:t}}function Ha(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(zc(Pc(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in _a)return _a[n](e)}}))}function Qd(e,t=!0){return it(e)?e.displayName||e.name:e.name||t&&e.__name}function Jd(e){return it(e)&&"__vccOpts"in e}const $d=(e,t)=>P0(e,t,Ti);function em(e,t,n){const r=arguments.length;return r===2?Gt(t)&&!ct(t)?ga(t)?Oe(e,null,[t]):Oe(e,t):Oe(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&ga(n)&&(n=[n]),Oe(e,t,n))}const tm="3.2.37";function nm(e,t){const n=Object.create(null),r=e.split(",");for(let a=0;a<r.length;a++)n[r[a]]=!0;return a=>!!n[a]}const rm="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",im=nm(rm);function Iu(e){return!!e||e===""}const am=/^on[^a-z]/,sm=e=>am.test(e),om=e=>e.startsWith("onUpdate:"),Fi=Object.assign,Oi=Array.isArray,lm=e=>typeof e=="function",Ds=e=>typeof e=="string",cm=e=>e!==null&&typeof e=="object",ko=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},um=/-(\w)/g,hl=ko(e=>e.replace(um,(t,n)=>n?n.toUpperCase():"")),dm=/\B([A-Z])/g,Xr=ko(e=>e.replace(dm,"-$1").toLowerCase()),mm=ko(e=>e.charAt(0).toUpperCase()+e.slice(1)),Hs=e=>{const t=parseFloat(e);return isNaN(t)?e:t},hm="http://www.w3.org/2000/svg",Ar=typeof document<"u"?document:null,fl=Ar&&Ar.createElement("template"),fm={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const a=t?Ar.createElementNS(hm,e):Ar.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&a.setAttribute("multiple",r.multiple),a},createText:e=>Ar.createTextNode(e),createComment:e=>Ar.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ar.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,n,r,a,i){const s=n?n.previousSibling:t.lastChild;if(a&&(a===i||a.nextSibling))for(;t.insertBefore(a.cloneNode(!0),n),!(a===i||!(a=a.nextSibling)););else{fl.innerHTML=r?`<svg>${e}</svg>`:e;const c=fl.content;if(r){const v=c.firstChild;for(;v.firstChild;)c.appendChild(v.firstChild);c.removeChild(v)}t.insertBefore(c,n)}return[s?s.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function vm(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function _m(e,t,n){const r=e.style,a=Ds(n);if(n&&!a){for(const i in n)Ps(r,i,n[i]);if(t&&!Ds(t))for(const i in t)n[i]==null&&Ps(r,i,"")}else{const i=r.display;a?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=i)}}const vl=/\s*!important$/;function Ps(e,t,n){if(Oi(n))n.forEach(r=>Ps(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=pm(e,t);vl.test(n)?e.setProperty(Xr(r),n.replace(vl,""),"important"):e[r]=n}}const _l=["Webkit","Moz","ms"],os={};function pm(e,t){const n=os[t];if(n)return n;let r=On(t);if(r!=="filter"&&r in e)return os[t]=r;r=mm(r);for(let a=0;a<_l.length;a++){const i=_l[a]+r;if(i in e)return os[t]=i}return t}const pl="http://www.w3.org/1999/xlink";function gm(e,t,n,r,a){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(pl,t.slice(6,t.length)):e.setAttributeNS(pl,t,n);else{const i=im(t);n==null||i&&!Iu(n)?e.removeAttribute(t):e.setAttribute(t,i?"":n)}}function bm(e,t,n,r,a,i,s){if(t==="innerHTML"||t==="textContent"){r&&s(r,a,i),e[t]=n??"";return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=n;const v=n??"";(e.value!==v||e.tagName==="OPTION")&&(e.value=v),n==null&&e.removeAttribute(t);return}let c=!1;if(n===""||n==null){const v=typeof e[t];v==="boolean"?n=Iu(n):n==null&&v==="string"?(n="",c=!0):v==="number"&&(n=0,c=!0)}try{e[t]=n}catch{}c&&e.removeAttribute(t)}const[Cu,ym]=(()=>{let e=Date.now,t=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance));const n=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(n&&Number(n[1])<=53)}return[e,t]})();let zs=0;const wm=Promise.resolve(),km=()=>{zs=0},Sm=()=>zs||(wm.then(km),zs=Cu());function xm(e,t,n,r){e.addEventListener(t,n,r)}function Mm(e,t,n,r){e.removeEventListener(t,n,r)}function Am(e,t,n,r,a=null){const i=e._vei||(e._vei={}),s=i[t];if(r&&s)s.value=r;else{const[c,v]=Em(t);if(r){const u=i[t]=Tm(r,a);xm(e,c,u,v)}else s&&(Mm(e,c,s,v),i[t]=void 0)}}const gl=/(?:Once|Passive|Capture)$/;function Em(e){let t;if(gl.test(e)){t={};let n;for(;n=e.match(gl);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[Xr(e.slice(2)),t]}function Tm(e,t){const n=r=>{const a=r.timeStamp||Cu();(ym||a>=n.attached-1)&&hn(Rm(r,n.value),t,5,[r])};return n.value=e,n.attached=Sm(),n}function Rm(e,t){if(Oi(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>a=>!a._stopped&&r&&r(a))}else return t}const bl=/^on[a-z]/,Im=(e,t,n,r,a=!1,i,s,c,v)=>{t==="class"?vm(e,r,a):t==="style"?_m(e,n,r):sm(t)?om(t)||Am(e,t,n,r,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Cm(e,t,r,a))?bm(e,t,r,i,s,c,v):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),gm(e,t,r,a))};function Cm(e,t,n,r){return r?!!(t==="innerHTML"||t==="textContent"||t in e&&bl.test(t)&&lm(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||bl.test(t)&&Ds(n)?!1:t in e}function Bm(e,t){const n=hd(e);class r extends So{constructor(i){super(n,i,t)}}return r.def=n,r}const Fm=typeof HTMLElement<"u"?HTMLElement:class{};class So extends Fm{constructor(t,n={},r){super(),this._def=t,this._props=n,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&r?r(this._createVNode(),this.shadowRoot):this.attachShadow({mode:"open"})}connectedCallback(){this._connected=!0,this._instance||this._resolveDef()}disconnectedCallback(){this._connected=!1,Zc(()=>{this._connected||(Al(null,this.shadowRoot),this._instance=null)})}_resolveDef(){if(this._resolved)return;this._resolved=!0;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);new MutationObserver(r=>{for(const a of r)this._setAttr(a.attributeName)}).observe(this,{attributes:!0});const t=r=>{const{props:a,styles:i}=r,s=!Oi(a),c=a?s?Object.keys(a):a:[];let v;if(s)for(const u in this._props){const m=a[u];(m===Number||m&&m.type===Number)&&(this._props[u]=Hs(this._props[u]),(v||(v=Object.create(null)))[u]=!0)}this._numberProps=v;for(const u of Object.keys(this))u[0]!=="_"&&this._setProp(u,this[u],!0,!1);for(const u of c.map(hl))Object.defineProperty(this,u,{get(){return this._getProp(u)},set(m){this._setProp(u,m)}});this._applyStyles(i),this._update()},n=this._def.__asyncLoader;n?n().then(t):t(this._def)}_setAttr(t){let n=this.getAttribute(t);this._numberProps&&this._numberProps[t]&&(n=Hs(n)),this._setProp(hl(t),n,!1)}_getProp(t){return this._props[t]}_setProp(t,n,r=!0,a=!0){n!==this._props[t]&&(this._props[t]=n,a&&this._instance&&this._update(),r&&(n===!0?this.setAttribute(Xr(t),""):typeof n=="string"||typeof n=="number"?this.setAttribute(Xr(t),n+""):n||this.removeAttribute(Xr(t))))}_update(){Al(this._createVNode(),this.shadowRoot)}_createVNode(){const t=Oe(this._def,Fi({},this._props));return this._instance||(t.ce=n=>{this._instance=n,n.isCE=!0,n.emit=(a,...i)=>{this.dispatchEvent(new CustomEvent(a,{detail:i}))};let r=this;for(;r=r&&(r.parentNode||r.host);)if(r instanceof So){n.parent=r._instance;break}}),t}_applyStyles(t){t&&t.forEach(n=>{const r=document.createElement("style");r.textContent=n,this.shadowRoot.appendChild(r)})}}const Gn="transition",ii="animation",Bt=(e,{slots:t})=>em(ou,Fu(e),t);Bt.displayName="Transition";const Bu={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Om=Bt.props=Fi({},ou.props,Bu),fr=(e,t=[])=>{Oi(e)?e.forEach(n=>n(...t)):e&&e(...t)},yl=e=>e?Oi(e)?e.some(t=>t.length>1):e.length>1:!1;function Fu(e){const t={};for(const b in e)b in Bu||(t[b]=e[b]);if(e.css===!1)return t;const{name:n="v",type:r,duration:a,enterFromClass:i=`${n}-enter-from`,enterActiveClass:s=`${n}-enter-active`,enterToClass:c=`${n}-enter-to`,appearFromClass:v=i,appearActiveClass:u=s,appearToClass:m=c,leaveFromClass:o=`${n}-leave-from`,leaveActiveClass:l=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=e,g=Lm(a),D=g&&g[0],C=g&&g[1],{onBeforeEnter:M,onEnter:p,onEnterCancelled:I,onLeave:j,onLeaveCancelled:_,onBeforeAppear:R=M,onAppear:T=p,onAppearCancelled:A=I}=t,E=(b,w,S)=>{tr(b,w?m:c),tr(b,w?u:s),S&&S()},h=(b,w)=>{b._isLeaving=!1,tr(b,o),tr(b,f),tr(b,l),w&&w()},y=b=>(w,S)=>{const k=b?T:p,N=()=>E(w,b,S);fr(k,[w,N]),wl(()=>{tr(w,b?v:i),Nn(w,b?m:c),yl(k)||kl(w,r,D,N)})};return Fi(t,{onBeforeEnter(b){fr(M,[b]),Nn(b,i),Nn(b,s)},onBeforeAppear(b){fr(R,[b]),Nn(b,v),Nn(b,u)},onEnter:y(!1),onAppear:y(!0),onLeave(b,w){b._isLeaving=!0;const S=()=>h(b,w);Nn(b,o),Lu(),Nn(b,l),wl(()=>{b._isLeaving&&(tr(b,o),Nn(b,f),yl(j)||kl(b,r,C,S))}),fr(j,[b,S])},onEnterCancelled(b){E(b,!1),fr(I,[b])},onAppearCancelled(b){E(b,!0),fr(A,[b])},onLeaveCancelled(b){h(b),fr(_,[b])}})}function Lm(e){if(e==null)return null;if(cm(e))return[ls(e.enter),ls(e.leave)];{const t=ls(e);return[t,t]}}function ls(e){return Hs(e)}function Nn(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e._vtc||(e._vtc=new Set)).add(t)}function tr(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function wl(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let jm=0;function kl(e,t,n,r){const a=e._endId=++jm,i=()=>{a===e._endId&&r()};if(n)return setTimeout(i,n);const{type:s,timeout:c,propCount:v}=Ou(e,t);if(!s)return r();const u=s+"end";let m=0;const o=()=>{e.removeEventListener(u,l),i()},l=f=>{f.target===e&&++m>=v&&o()};setTimeout(()=>{m<v&&o()},c+1),e.addEventListener(u,l)}function Ou(e,t){const n=window.getComputedStyle(e),r=g=>(n[g]||"").split(", "),a=r(Gn+"Delay"),i=r(Gn+"Duration"),s=Sl(a,i),c=r(ii+"Delay"),v=r(ii+"Duration"),u=Sl(c,v);let m=null,o=0,l=0;t===Gn?s>0&&(m=Gn,o=s,l=i.length):t===ii?u>0&&(m=ii,o=u,l=v.length):(o=Math.max(s,u),m=o>0?s>u?Gn:ii:null,l=m?m===Gn?i.length:v.length:0);const f=m===Gn&&/\b(transform|all)(,|$)/.test(n[Gn+"Property"]);return{type:m,timeout:o,propCount:l,hasTransform:f}}function Sl(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,r)=>xl(n)+xl(e[r])))}function xl(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function Lu(){return document.body.offsetHeight}const ju=new WeakMap,Nu=new WeakMap,Nm={name:"TransitionGroup",props:Fi({},Om,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=Eu(),r=su();let a,i;return du(()=>{if(!a.length)return;const s=e.moveClass||`${e.name||"v"}-move`;if(!zm(a[0].el,n.vnode.el,s))return;a.forEach(Dm),a.forEach(Hm);const c=a.filter(Pm);Lu(),c.forEach(v=>{const u=v.el,m=u.style;Nn(u,s),m.transform=m.webkitTransform=m.transitionDuration="";const o=u._moveCb=l=>{l&&l.target!==u||(!l||/transform$/.test(l.propertyName))&&(u.removeEventListener("transitionend",o),u._moveCb=null,tr(u,s))};u.addEventListener("transitionend",o)})}),()=>{const s=ht(e),c=Fu(s);let v=s.tag||st;a=i,i=t.default?vo(t.default()):[];for(let u=0;u<i.length;u++){const m=i[u];m.key!=null&&Ai(m,Mi(m,c,r,n))}if(a)for(let u=0;u<a.length;u++){const m=a[u];Ai(m,Mi(m,c,r,n)),ju.set(m,m.el.getBoundingClientRect())}return Oe(v,null,i)}}},xo=Nm;function Dm(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function Hm(e){Nu.set(e,e.el.getBoundingClientRect())}function Pm(e){const t=ju.get(e),n=Nu.get(e),r=t.left-n.left,a=t.top-n.top;if(r||a){const i=e.el.style;return i.transform=i.webkitTransform=`translate(${r}px,${a}px)`,i.transitionDuration="0s",e}}function zm(e,t,n){const r=e.cloneNode();e._vtc&&e._vtc.forEach(s=>{s.split(/\s+/).forEach(c=>c&&r.classList.remove(c))}),n.split(/\s+/).forEach(s=>s&&r.classList.add(s)),r.style.display="none";const a=t.nodeType===1?t:t.parentNode;a.appendChild(r);const{hasTransform:i}=Ou(r);return a.removeChild(r),i}const Vm=["ctrl","shift","alt","meta"],Um={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Vm.some(n=>e[`${n}Key`]&&!t.includes(n))},Fn=(e,t)=>(n,...r)=>{for(let a=0;a<t.length;a++){const i=Um[t[a]];if(i&&i(n,t))return}return e(n,...r)},qm={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},xr=(e,t)=>n=>{if(!("key"in n))return;const r=Xr(n.key);if(t.some(a=>a===r||qm[a]===r))return e(n)},Pa={beforeMount(e,{value:t},{transition:n}){e._vod=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):ai(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),ai(e,!0),r.enter(e)):r.leave(e,()=>{ai(e,!1)}):ai(e,t))},beforeUnmount(e,{value:t}){ai(e,t)}};function ai(e,t){e.style.display=t?e._vod:"none"}const Xm=Fi({patchProp:Im},fm);let Ml;function Ym(){return Ml||(Ml=Dd(Xm))}const Al=(...e)=>{Ym().render(...e)};var St=(e,t)=>{const n=e.__vccOpts||e;for(const[r,a]of t)n[r]=a;return n};const Km={name:"AppLoader",props:{show:{type:Boolean,default:!1},infinite:{type:Boolean,default:!1},type:{type:String,required:!0},messageId:{type:String,default:""}}},Gm=Se("div",{id:"vac-circle"},null,-1),Wm=Se("div",{id:"vac-circle"},null,-1),Zm=Se("div",{id:"vac-circle"},null,-1),Qm=Se("div",{id:"vac-circle"},null,-1),Jm=Se("div",{id:"vac-circle"},null,-1),$m=Se("div",{id:"vac-circle"},null,-1);function eh(e,t,n,r,a,i){return $(),ft(Bt,{name:"vac-fade-spinner",appear:""},{default:Ge(()=>[n.show?($(),le("div",{key:0,class:rt(["vac-loader-wrapper",{"vac-container-center":!n.infinite,"vac-container-top":n.infinite}])},[n.type==="rooms"?Ce(e.$slots,"spinner-icon-rooms",{key:0},()=>[Gm]):Ie("",!0),n.type==="infinite-rooms"?Ce(e.$slots,"spinner-icon-infinite-rooms",{key:1},()=>[Wm]):Ie("",!0),n.type==="message-file"?Ce(e.$slots,"spinner-icon-message-file_"+n.messageId,{key:2},()=>[Zm]):Ie("",!0),n.type==="room-file"?Ce(e.$slots,"spinner-icon-room-file",{key:3},()=>[Qm]):Ie("",!0),n.type==="messages"?Ce(e.$slots,"spinner-icon-messages",{key:4},()=>[Jm]):Ie("",!0),n.type==="infinite-messages"?Ce(e.$slots,"spinner-icon-infinite-messages",{key:5},()=>[$m]):Ie("",!0)],2)):Ie("",!0)]),_:3})}var za=St(Km,[["render",eh]]);const th={name:"SvgIcon",props:{name:{type:String,default:null},param:{type:String,default:null}},data(){return{svgItem:{search:{path:"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"},add:{path:"M17,13H13V17H11V13H7V11H11V7H13V11H17M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"},toggle:{path:"M5,13L9,17L7.6,18.42L1.18,12L7.6,5.58L9,7L5,11H21V13H5M21,6V8H11V6H21M21,16V18H11V16H21Z"},menu:{path:"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z"},close:{path:"M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z"},file:{path:"M14,17H7V15H14M17,13H7V11H17M17,9H7V7H17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z"},paperclip:{path:"M16.5,6V17.5A4,4 0 0,1 12.5,21.5A4,4 0 0,1 8.5,17.5V5A2.5,2.5 0 0,1 11,2.5A2.5,2.5 0 0,1 13.5,5V15.5A1,1 0 0,1 12.5,16.5A1,1 0 0,1 11.5,15.5V6H10V15.5A2.5,2.5 0 0,0 12.5,18A2.5,2.5 0 0,0 15,15.5V5A4,4 0 0,0 11,1A4,4 0 0,0 7,5V17.5A5.5,5.5 0 0,0 12.5,23A5.5,5.5 0 0,0 18,17.5V6H16.5Z"},"close-outline":{path:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"},send:{path:"M2,21L23,12L2,3V10L17,12L2,14V21Z"},emoji:{path:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"},document:{path:"M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z"},pencil:{path:"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"},checkmark:{path:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"},"double-checkmark":{path:"M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"},eye:{path:"M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"},dropdown:{path:"M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"},deleted:{path:"M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12C4,13.85 4.63,15.55 5.68,16.91L16.91,5.68C15.55,4.63 13.85,4 12,4M12,20A8,8 0 0,0 20,12C20,10.15 19.37,8.45 18.32,7.09L7.09,18.32C8.45,19.37 10.15,20 12,20Z"},microphone:{size:"large",path:"M432.8,216.4v39.2c0,45.2-15.3,84.3-45.2,118.4c-29.8,33.2-67.3,52.8-111.6,57.9v40.9h78.4c5.1,0,10.2,1.7,13.6,6c4.3,4.3,6,8.5,6,13.6c0,5.1-1.7,10.2-6,13.6c-4.3,4.3-8.5,6-13.6,6H157.6c-5.1,0-10.2-1.7-13.6-6c-4.3-4.3-6-8.5-6-13.6c0-5.1,1.7-10.2,6-13.6c4.3-4.3,8.5-6,13.6-6H236v-40.9c-44.3-5.1-81.8-23.9-111.6-57.9s-45.2-73.3-45.2-118.4v-39.2c0-5.1,1.7-10.2,6-13.6c4.3-4.3,8.5-6,13.6-6s10.2,1.7,13.6,6c4.3,4.3,6,8.5,6,13.6v39.2c0,37.5,13.6,70.7,40,97.1s59.6,40,97.1,40s70.7-13.6,97.1-40c26.4-26.4,40-59.6,40-97.1v-39.2c0-5.1,1.7-10.2,6-13.6c4.3-4.3,8.5-6,13.6-6c5.1,0,10.2,1.7,13.6,6C430.2,206.2,432.8,211.3,432.8,216.4z M353.5,98v157.6c0,27.3-9.4,50.3-29,69c-19.6,19.6-42.6,29-69,29s-50.3-9.4-69-29c-19.6-19.6-29-42.6-29-69V98c0-27.3,9.4-50.3,29-69c19.6-19.6,42.6-29,69-29s50.3,9.4,69,29C344.2,47.7,353.5,71.6,353.5,98z"},"audio-play":{size:"medium",path:"M43.331,21.237L7.233,0.397c-0.917-0.529-2.044-0.529-2.96,0c-0.916,0.528-1.48,1.505-1.48,2.563v41.684   c0,1.058,0.564,2.035,1.48,2.563c0.458,0.268,0.969,0.397,1.48,0.397c0.511,0,1.022-0.133,1.48-0.397l36.098-20.84   c0.918-0.529,1.479-1.506,1.479-2.564S44.247,21.767,43.331,21.237z"},"audio-pause":{size:"medium",path:"M17.991,40.976c0,3.662-2.969,6.631-6.631,6.631l0,0c-3.662,0-6.631-2.969-6.631-6.631V6.631C4.729,2.969,7.698,0,11.36,0l0,0c3.662,0,6.631,2.969,6.631,6.631V40.976z",path2:"M42.877,40.976c0,3.662-2.969,6.631-6.631,6.631l0,0c-3.662,0-6.631-2.969-6.631-6.631V6.631C29.616,2.969,32.585,0,36.246,0l0,0c3.662,0,6.631,2.969,6.631,6.631V40.976z"}}}},computed:{svgId(){const e=this.param?"-"+this.param:"";return`vac-icon-${this.name}${e}`},size(){const e=this.svgItem[this.name];return e.size==="large"?512:e.size==="medium"?48:24}}},nh=["viewBox"],rh=["id","d"],ih=["id","d"];function ah(e,t,n,r,a,i){return $(),le("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",width:"24",height:"24",viewBox:`0 0 ${i.size} ${i.size}`},[Se("path",{id:i.svgId,d:a.svgItem[n.name].path},null,8,rh),a.svgItem[n.name].path2?($(),le("path",{key:0,id:i.svgId,d:a.svgItem[n.name].path2},null,8,ih)):Ie("",!0)],8,nh)}var Dt=St(th,[["render",ah]]);const sh={name:"RoomsSearch",components:{SvgIcon:Dt},props:{textMessages:{type:Object,required:!0},showSearch:{type:Boolean,required:!0},showAddRoom:{type:Boolean,required:!0},loadingRooms:{type:Boolean,required:!0}},emits:["search-room","add-room"],computed:{showSearchBar(){return this.showSearch||this.showAddRoom}}},oh={key:0,class:"vac-icon-search"},lh=["placeholder"];function ch(e,t,n,r,a,i){const s=Ke("svg-icon");return $(),le("div",{class:rt({"vac-box-search":i.showSearchBar,"vac-box-empty":!i.showSearchBar})},[n.showSearch?($(),le(st,{key:0},[n.loadingRooms?Ie("",!0):($(),le("div",oh,[Ce(e.$slots,"search-icon",{},()=>[Oe(s,{name:"search"})])])),n.loadingRooms?Ie("",!0):($(),le("input",{key:1,type:"search",placeholder:n.textMessages.SEARCH,autocomplete:"off",class:"vac-input",onInput:t[0]||(t[0]=c=>e.$emit("search-room",c))},null,40,lh))],64)):Ie("",!0),n.showAddRoom?($(),le("div",{key:1,class:"vac-svg-button vac-add-icon",onClick:t[1]||(t[1]=c=>e.$emit("add-room"))},[Ce(e.$slots,"add-icon",{},()=>[Oe(s,{name:"add"})])])):Ie("",!0)],2)}var uh=St(sh,[["render",ch]]);const El=document.createElement("i");function Du(e){const t="&"+e+";";El.innerHTML=t;const n=El.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function sn(e,t,n,r){const a=e.length;let i=0,s;if(t<0?t=-t>a?0:a+t:t=t>a?a:t,n=n>0?n:0,r.length<1e4)s=Array.from(r),s.unshift(t,n),e.splice(...s);else for(n&&e.splice(t,n);i<r.length;)s=r.slice(i,i+1e4),s.unshift(t,0),e.splice(...s),i+=1e4,t+=1e4}function zt(e,t){return e.length>0?(sn(e,e.length,0,t),e):t}const Vs={}.hasOwnProperty;function Hu(e){const t={};let n=-1;for(;++n<e.length;)dh(t,e[n]);return t}function dh(e,t){let n;for(n in t){const a=(Vs.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let s;if(i)for(s in i){Vs.call(a,s)||(a[s]=[]);const c=i[s];mh(a[s],Array.isArray(c)?c:c?[c]:[])}}}function mh(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);sn(e,0,0,r)}function Pu(e){const t={};let n=-1;for(;++n<e.length;)hh(t,e[n]);return t}function hh(e,t){let n;for(n in t){const a=(Vs.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let s;if(i)for(s in i)a[s]=i[s]}}function fh(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCharCode(n)}const vh={'"':"quot","&":"amp","<":"lt",">":"gt"};function zu(e){return e.replace(/["&<>]/g,t);function t(n){return"&"+vh[n]+";"}}function Ln(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const _h=/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,Xt=cr(/[A-Za-z]/),Ut=cr(/[\dA-Za-z]/),ph=cr(/[#-'*+\--9=?A-Z^-~]/);function ba(e){return e!==null&&(e<32||e===127)}const Us=cr(/\d/),gh=cr(/[\dA-Fa-f]/),bh=cr(/[!-/:-@[-`{-~]/);function We(e){return e!==null&&e<-2}function kt(e){return e!==null&&(e<0||e===32)}function at(e){return e===-2||e===-1||e===32}const Mo=cr(_h),Gr=cr(/\s/);function cr(e){return t;function t(n){return n!==null&&e.test(String.fromCharCode(n))}}function Rr(e,t){const n=zu(yh(e||""));if(!t)return n;const r=n.indexOf(":"),a=n.indexOf("?"),i=n.indexOf("#"),s=n.indexOf("/");return r<0||s>-1&&r>s||a>-1&&r>a||i>-1&&r>i||t.test(n.slice(0,r))?n:""}function yh(e){const t=[];let n=-1,r=0,a=0;for(;++n<e.length;){const i=e.charCodeAt(n);let s="";if(i===37&&Ut(e.charCodeAt(n+1))&&Ut(e.charCodeAt(n+2)))a=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(s=String.fromCharCode(i));else if(i>55295&&i<57344){const c=e.charCodeAt(n+1);i<56320&&c>56319&&c<57344?(s=String.fromCharCode(i,c),a=1):s=""}else s=String.fromCharCode(i);s&&(t.push(e.slice(r,n),encodeURIComponent(s)),r=n+a+1,s=""),a&&(n+=a,a=0)}return t.join("")+e.slice(r)}const Tl={}.hasOwnProperty,Rl=/^(https?|ircs?|mailto|xmpp)$/i,wh=/^https?$/i;function kh(e){const t=e||{};let n=!0;const r={},a=[[]],i=[],s=[],v=Pu([{enter:{blockQuote:S,codeFenced:H,codeFencedFenceInfo:C,codeFencedFenceMeta:C,codeIndented:x,codeText:U,content:ke,definition:X,definitionDestinationString:ce,definitionLabelString:C,definitionTitleString:C,emphasis:L,htmlFlow:re,htmlText:F,image:B,label:C,link:he,listItemMarker:h,listItemValue:E,listOrdered:T,listUnordered:A,paragraph:N,reference:C,resource:He,resourceDestinationString:Ee,resourceTitleString:C,setextHeading:pe,strong:z},exit:{atxHeading:De,atxHeadingSequence:xe,autolinkEmail:oe,autolinkProtocol:ee,blockQuote:k,characterEscapeValue:qe,characterReferenceMarkerHexadecimal:G,characterReferenceMarkerNumeric:G,characterReferenceValue:se,codeFenced:W,codeFencedFence:d,codeFencedFenceInfo:q,codeFencedFenceMeta:M,codeFlowValue:de,codeIndented:W,codeText:K,codeTextData:qe,data:qe,definition:Te,definitionDestinationString:ue,definitionLabelString:te,definitionTitleString:be,emphasis:P,hardBreakEscape:Me,hardBreakTrailing:Me,htmlFlow:Le,htmlFlowData:qe,htmlText:Le,htmlTextData:qe,image:V,label:ge,labelText:Ae,lineEnding:Ze,link:V,listOrdered:y,listUnordered:b,paragraph:Y,reference:M,referenceString:_e,resource:M,resourceDestinationString:fe,resourceTitleString:Xe,setextHeading:Ve,setextHeadingLineSequence:je,setextHeadingText:ze,strong:Z,thematicBreak:J}}].concat(t.htmlExtensions||[])),u={tightStack:s,definitions:r},m={lineEndingIfNeeded:_,options:t,encode:R,raw:I,tag:p,buffer:C,resume:M,setData:g,getData:D};let o=t.defaultLineEnding;return l;function l(Q){let ve=-1,me=0;const Pe=[];let ne=[],Be=[];for(;++ve<Q.length;)!o&&(Q[ve][1].type==="lineEnding"||Q[ve][1].type==="lineEndingBlank")&&(o=Q[ve][2].sliceSerialize(Q[ve][1])),(Q[ve][1].type==="listOrdered"||Q[ve][1].type==="listUnordered")&&(Q[ve][0]==="enter"?Pe.push(ve):f(Q.slice(Pe.pop(),ve))),Q[ve][1].type==="definition"&&(Q[ve][0]==="enter"?(Be=zt(Be,Q.slice(me,ve)),me=ve):(ne=zt(ne,Q.slice(me,ve+1)),me=ve+1));ne=zt(ne,Be),ne=zt(ne,Q.slice(me)),ve=-1;const Ye=ne;for(v.enter.null&&v.enter.null.call(m);++ve<Q.length;){const ye=v[Ye[ve][0]],Ne=Ye[ve][1].type,we=ye[Ne];Tl.call(ye,Ne)&&we&&we.call(Object.assign({sliceSerialize:Ye[ve][2].sliceSerialize},m),Ye[ve][1])}return v.exit.null&&v.exit.null.call(m),a[0].join("")}function f(Q){const ve=Q.length;let me=0,Pe=0,ne=!1,Be;for(;++me<ve;){const Ye=Q[me];if(Ye[1]._container)Be=void 0,Ye[0]==="enter"?Pe++:Pe--;else switch(Ye[1].type){case"listItemPrefix":{Ye[0]==="exit"&&(Be=!0);break}case"linePrefix":break;case"lineEndingBlank":{Ye[0]==="enter"&&!Pe&&(Be?Be=void 0:ne=!0);break}default:Be=void 0}}Q[0][1]._loose=ne}function g(Q,ve){u[Q]=ve}function D(Q){return u[Q]}function C(){a.push([])}function M(){return a.pop().join("")}function p(Q){n&&(g("lastWasTag",!0),a[a.length-1].push(Q))}function I(Q){g("lastWasTag"),a[a.length-1].push(Q)}function j(){I(o||`
`)}function _(){const Q=a[a.length-1],ve=Q[Q.length-1],me=ve?ve.charCodeAt(ve.length-1):null;me===10||me===13||me===null||j()}function R(Q){return D("ignoreEncode")?Q:zu(Q)}function T(Q){s.push(!Q._loose),_(),p("<ol"),g("expectFirstItem",!0)}function A(Q){s.push(!Q._loose),_(),p("<ul"),g("expectFirstItem",!0)}function E(Q){if(D("expectFirstItem")){const ve=Number.parseInt(this.sliceSerialize(Q),10);ve!==1&&p(' start="'+R(String(ve))+'"')}}function h(){D("expectFirstItem")?p(">"):w(),_(),p("<li>"),g("expectFirstItem"),g("lastWasTag")}function y(){w(),s.pop(),j(),p("</ol>")}function b(){w(),s.pop(),j(),p("</ul>")}function w(){D("lastWasTag")&&!D("slurpAllLineEndings")&&_(),p("</li>"),g("slurpAllLineEndings")}function S(){s.push(!1),_(),p("<blockquote>")}function k(){s.pop(),_(),p("</blockquote>"),g("slurpAllLineEndings")}function N(){s[s.length-1]||(_(),p("<p>")),g("slurpAllLineEndings")}function Y(){s[s.length-1]?g("slurpAllLineEndings",!0):p("</p>")}function H(){_(),p("<pre><code"),g("fencesCount",0)}function q(){const Q=M();p(' class="language-'+Q+'"')}function d(){const Q=D("fencesCount")||0;Q||(p(">"),g("slurpOneLineEnding",!0)),g("fencesCount",Q+1)}function x(){_(),p("<pre><code>")}function W(){const Q=D("fencesCount");Q!==void 0&&Q<2&&u.tightStack.length>0&&!D("lastWasTag")&&j(),D("flowCodeSeenData")&&_(),p("</code></pre>"),Q!==void 0&&Q<2&&_(),g("flowCodeSeenData"),g("fencesCount"),g("slurpOneLineEnding")}function B(){i.push({image:!0}),n=void 0}function he(){i.push({})}function Ae(Q){i[i.length-1].labelId=this.sliceSerialize(Q)}function ge(){i[i.length-1].label=M()}function _e(Q){i[i.length-1].referenceId=this.sliceSerialize(Q)}function He(){C(),i[i.length-1].destination=""}function Ee(){C(),g("ignoreEncode",!0)}function fe(){i[i.length-1].destination=M(),g("ignoreEncode")}function Xe(){i[i.length-1].title=M()}function V(){let Q=i.length-1;const ve=i[Q],me=ve.referenceId||ve.labelId,Pe=ve.destination===void 0?r[Ln(me)]:ve;for(n=!0;Q--;)if(i[Q].image){n=void 0;break}ve.image?(p('<img src="'+Rr(Pe.destination,t.allowDangerousProtocol?void 0:wh)+'" alt="'),I(ve.label),p('"')):p('<a href="'+Rr(Pe.destination,t.allowDangerousProtocol?void 0:Rl)+'"'),p(Pe.title?' title="'+Pe.title+'"':""),ve.image?p(" />"):(p(">"),I(ve.label),p("</a>")),i.pop()}function X(){C(),i.push({})}function te(Q){M(),i[i.length-1].labelId=this.sliceSerialize(Q)}function ce(){C(),g("ignoreEncode",!0)}function ue(){i[i.length-1].destination=M(),g("ignoreEncode")}function be(){i[i.length-1].title=M()}function Te(){const Q=i[i.length-1],ve=Ln(Q.labelId);M(),Tl.call(r,ve)||(r[ve]=i[i.length-1]),i.pop()}function ke(){g("slurpAllLineEndings",!0)}function xe(Q){D("headingRank")||(g("headingRank",this.sliceSerialize(Q).length),_(),p("<h"+D("headingRank")+">"))}function pe(){C(),g("slurpAllLineEndings")}function ze(){g("slurpAllLineEndings",!0)}function De(){p("</h"+D("headingRank")+">"),g("headingRank")}function je(Q){g("headingRank",this.sliceSerialize(Q).charCodeAt(0)===61?1:2)}function Ve(){const Q=M();_(),p("<h"+D("headingRank")+">"),I(Q),p("</h"+D("headingRank")+">"),g("slurpAllLineEndings"),g("headingRank")}function qe(Q){I(R(this.sliceSerialize(Q)))}function Ze(Q){if(!D("slurpAllLineEndings")){if(D("slurpOneLineEnding")){g("slurpOneLineEnding");return}if(D("inCodeText")){I(" ");return}I(R(this.sliceSerialize(Q)))}}function de(Q){I(R(this.sliceSerialize(Q))),g("flowCodeSeenData",!0)}function Me(){p("<br />")}function re(){_(),F()}function Le(){g("ignoreEncode")}function F(){t.allowDangerousHtml&&g("ignoreEncode",!0)}function L(){p("<em>")}function z(){p("<strong>")}function U(){g("inCodeText",!0),p("<code>")}function K(){g("inCodeText"),p("</code>")}function P(){p("</em>")}function Z(){p("</strong>")}function J(){_(),p("<hr />")}function G(Q){g("characterReferenceType",Q.type)}function se(Q){let ve=this.sliceSerialize(Q);ve=D("characterReferenceType")?fh(ve,D("characterReferenceType")==="characterReferenceMarkerNumeric"?10:16):Du(ve),I(R(ve)),g("characterReferenceType")}function ee(Q){const ve=this.sliceSerialize(Q);p('<a href="'+Rr(ve,t.allowDangerousProtocol?void 0:Rl)+'">'),I(R(ve)),p("</a>")}function oe(Q){const ve=this.sliceSerialize(Q);p('<a href="'+Rr("mailto:"+ve)+'">'),I(R(ve)),p("</a>")}}function lt(e,t,n,r){const a=r?r-1:Number.POSITIVE_INFINITY;let i=0;return s;function s(v){return at(v)?(e.enter(n),c(v)):t(v)}function c(v){return at(v)&&i++<a?(e.consume(v),c):(e.exit(n),t(v))}}const Sh={tokenize:xh};function xh(e){const t=e.attempt(this.parser.constructs.contentInitial,r,a);let n;return t;function r(c){if(c===null){e.consume(c);return}return e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),lt(e,t,"linePrefix")}function a(c){return e.enter("paragraph"),i(c)}function i(c){const v=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=v),n=v,s(c)}function s(c){if(c===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(c);return}return We(c)?(e.consume(c),e.exit("chunkText"),i):(e.consume(c),s)}}const Mh={tokenize:Ah},Il={tokenize:Eh};function Ah(e){const t=this,n=[];let r=0,a,i,s;return c;function c(I){if(r<n.length){const j=n[r];return t.containerState=j[1],e.attempt(j[0].continuation,v,u)(I)}return u(I)}function v(I){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,a&&p();const j=t.events.length;let _=j,R;for(;_--;)if(t.events[_][0]==="exit"&&t.events[_][1].type==="chunkFlow"){R=t.events[_][1].end;break}M(r);let T=j;for(;T<t.events.length;)t.events[T][1].end=Object.assign({},R),T++;return sn(t.events,_+1,0,t.events.slice(j)),t.events.length=T,u(I)}return c(I)}function u(I){if(r===n.length){if(!a)return l(I);if(a.currentConstruct&&a.currentConstruct.concrete)return g(I);t.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Il,m,o)(I)}function m(I){return a&&p(),M(r),l(I)}function o(I){return t.parser.lazy[t.now().line]=r!==n.length,s=t.now().offset,g(I)}function l(I){return t.containerState={},e.attempt(Il,f,g)(I)}function f(I){return r++,n.push([t.currentConstruct,t.containerState]),l(I)}function g(I){if(I===null){a&&p(),M(0),e.consume(I);return}return a=a||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:i,_tokenizer:a}),D(I)}function D(I){if(I===null){C(e.exit("chunkFlow"),!0),M(0),e.consume(I);return}return We(I)?(e.consume(I),C(e.exit("chunkFlow")),r=0,t.interrupt=void 0,c):(e.consume(I),D)}function C(I,j){const _=t.sliceStream(I);if(j&&_.push(null),I.previous=i,i&&(i.next=I),i=I,a.defineSkip(I.start),a.write(_),t.parser.lazy[I.start.line]){let R=a.events.length;for(;R--;)if(a.events[R][1].start.offset<s&&(!a.events[R][1].end||a.events[R][1].end.offset>s))return;const T=t.events.length;let A=T,E,h;for(;A--;)if(t.events[A][0]==="exit"&&t.events[A][1].type==="chunkFlow"){if(E){h=t.events[A][1].end;break}E=!0}for(M(r),R=T;R<t.events.length;)t.events[R][1].end=Object.assign({},h),R++;sn(t.events,A+1,0,t.events.slice(T)),t.events.length=R}}function M(I){let j=n.length;for(;j-- >I;){const _=n[j];t.containerState=_[1],_[0].exit.call(t,e)}n.length=I}function p(){a.write([null]),i=void 0,a=void 0,t.containerState._closeFlow=void 0}}function Eh(e,t,n){return lt(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function ya(e){if(e===null||kt(e)||Gr(e))return 1;if(Mo(e))return 2}function Va(e,t,n){const r=[];let a=-1;for(;++a<e.length;){const i=e[a].resolveAll;i&&!r.includes(i)&&(t=i(t,n),r.push(i))}return t}const qs={name:"attention",tokenize:Rh,resolveAll:Th};function Th(e,t){let n=-1,r,a,i,s,c,v,u,m;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;v=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const o=Object.assign({},e[r][1].end),l=Object.assign({},e[n][1].start);Cl(o,-v),Cl(l,v),s={type:v>1?"strongSequence":"emphasisSequence",start:o,end:Object.assign({},e[r][1].end)},c={type:v>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:l},i={type:v>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},a={type:v>1?"strong":"emphasis",start:Object.assign({},s.start),end:Object.assign({},c.end)},e[r][1].end=Object.assign({},s.start),e[n][1].start=Object.assign({},c.end),u=[],e[r][1].end.offset-e[r][1].start.offset&&(u=zt(u,[["enter",e[r][1],t],["exit",e[r][1],t]])),u=zt(u,[["enter",a,t],["enter",s,t],["exit",s,t],["enter",i,t]]),u=zt(u,Va(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),u=zt(u,[["exit",i,t],["enter",c,t],["exit",c,t],["exit",a,t]]),e[n][1].end.offset-e[n][1].start.offset?(m=2,u=zt(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):m=0,sn(e,r-1,n-r+3,u),n=r+u.length-m-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function Rh(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,a=ya(r);let i;return s;function s(v){return i=v,e.enter("attentionSequence"),c(v)}function c(v){if(v===i)return e.consume(v),c;const u=e.exit("attentionSequence"),m=ya(v),o=!m||m===2&&a||n.includes(v),l=!a||a===2&&m||n.includes(r);return u._open=!!(i===42?o:o&&(a||!l)),u._close=!!(i===42?l:l&&(m||!o)),t(v)}}function Cl(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Ih={name:"autolink",tokenize:Ch};function Ch(e,t,n){let r=0;return a;function a(f){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i}function i(f){return Xt(f)?(e.consume(f),s):u(f)}function s(f){return f===43||f===45||f===46||Ut(f)?(r=1,c(f)):u(f)}function c(f){return f===58?(e.consume(f),r=0,v):(f===43||f===45||f===46||Ut(f))&&r++<32?(e.consume(f),c):(r=0,u(f))}function v(f){return f===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):f===null||f===32||f===60||ba(f)?n(f):(e.consume(f),v)}function u(f){return f===64?(e.consume(f),m):ph(f)?(e.consume(f),u):n(f)}function m(f){return Ut(f)?o(f):n(f)}function o(f){return f===46?(e.consume(f),r=0,m):f===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):l(f)}function l(f){if((f===45||Ut(f))&&r++<63){const g=f===45?l:o;return e.consume(f),g}return n(f)}}const Li={tokenize:Bh,partial:!0};function Bh(e,t,n){return r;function r(i){return at(i)?lt(e,a,"linePrefix")(i):a(i)}function a(i){return i===null||We(i)?t(i):n(i)}}const Vu={name:"blockQuote",tokenize:Fh,continuation:{tokenize:Oh},exit:Lh};function Fh(e,t,n){const r=this;return a;function a(s){if(s===62){const c=r.containerState;return c.open||(e.enter("blockQuote",{_container:!0}),c.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(s),e.exit("blockQuoteMarker"),i}return n(s)}function i(s){return at(s)?(e.enter("blockQuotePrefixWhitespace"),e.consume(s),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(s))}}function Oh(e,t,n){const r=this;return a;function a(s){return at(s)?lt(e,i,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):i(s)}function i(s){return e.attempt(Vu,t,n)(s)}}function Lh(e){e.exit("blockQuote")}const Uu={name:"characterEscape",tokenize:jh};function jh(e,t,n){return r;function r(i){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(i),e.exit("escapeMarker"),a}function a(i){return bh(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(i)}}const qu={name:"characterReference",tokenize:Nh};function Nh(e,t,n){const r=this;let a=0,i,s;return c;function c(o){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(o),e.exit("characterReferenceMarker"),v}function v(o){return o===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(o),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),i=31,s=Ut,m(o))}function u(o){return o===88||o===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(o),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,s=gh,m):(e.enter("characterReferenceValue"),i=7,s=Us,m(o))}function m(o){if(o===59&&a){const l=e.exit("characterReferenceValue");return s===Ut&&!Du(r.sliceSerialize(l))?n(o):(e.enter("characterReferenceMarker"),e.consume(o),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return s(o)&&a++<i?(e.consume(o),m):n(o)}}const Bl={tokenize:Hh,partial:!0},Fl={name:"codeFenced",tokenize:Dh,concrete:!0};function Dh(e,t,n){const r=this,a={tokenize:_,partial:!0};let i=0,s=0,c;return v;function v(R){return u(R)}function u(R){const T=r.events[r.events.length-1];return i=T&&T[1].type==="linePrefix"?T[2].sliceSerialize(T[1],!0).length:0,c=R,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),m(R)}function m(R){return R===c?(s++,e.consume(R),m):s<3?n(R):(e.exit("codeFencedFenceSequence"),at(R)?lt(e,o,"whitespace")(R):o(R))}function o(R){return R===null||We(R)?(e.exit("codeFencedFence"),r.interrupt?t(R):e.check(Bl,D,j)(R)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),l(R))}function l(R){return R===null||We(R)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),o(R)):at(R)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),lt(e,f,"whitespace")(R)):R===96&&R===c?n(R):(e.consume(R),l)}function f(R){return R===null||We(R)?o(R):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),g(R))}function g(R){return R===null||We(R)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),o(R)):R===96&&R===c?n(R):(e.consume(R),g)}function D(R){return e.attempt(a,j,C)(R)}function C(R){return e.enter("lineEnding"),e.consume(R),e.exit("lineEnding"),M}function M(R){return i>0&&at(R)?lt(e,p,"linePrefix",i+1)(R):p(R)}function p(R){return R===null||We(R)?e.check(Bl,D,j)(R):(e.enter("codeFlowValue"),I(R))}function I(R){return R===null||We(R)?(e.exit("codeFlowValue"),p(R)):(e.consume(R),I)}function j(R){return e.exit("codeFenced"),t(R)}function _(R,T,A){let E=0;return h;function h(k){return R.enter("lineEnding"),R.consume(k),R.exit("lineEnding"),y}function y(k){return R.enter("codeFencedFence"),at(k)?lt(R,b,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(k):b(k)}function b(k){return k===c?(R.enter("codeFencedFenceSequence"),w(k)):A(k)}function w(k){return k===c?(E++,R.consume(k),w):E>=s?(R.exit("codeFencedFenceSequence"),at(k)?lt(R,S,"whitespace")(k):S(k)):A(k)}function S(k){return k===null||We(k)?(R.exit("codeFencedFence"),T(k)):A(k)}}}function Hh(e,t,n){const r=this;return a;function a(s){return s===null?n(s):(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),i)}function i(s){return r.parser.lazy[r.now().line]?n(s):t(s)}}const cs={name:"codeIndented",tokenize:zh},Ph={tokenize:Vh,partial:!0};function zh(e,t,n){const r=this;return a;function a(u){return e.enter("codeIndented"),lt(e,i,"linePrefix",5)(u)}function i(u){const m=r.events[r.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?s(u):n(u)}function s(u){return u===null?v(u):We(u)?e.attempt(Ph,s,v)(u):(e.enter("codeFlowValue"),c(u))}function c(u){return u===null||We(u)?(e.exit("codeFlowValue"),s(u)):(e.consume(u),c)}function v(u){return e.exit("codeIndented"),t(u)}}function Vh(e,t,n){const r=this;return a;function a(s){return r.parser.lazy[r.now().line]?n(s):We(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),a):lt(e,i,"linePrefix",5)(s)}function i(s){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?t(s):We(s)?a(s):n(s)}}const Uh={name:"codeText",tokenize:Yh,resolve:qh,previous:Xh};function qh(e){let t=e.length-4,n=3,r,a;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)a===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(a=r):(r===t||e[r][1].type==="lineEnding")&&(e[a][1].type="codeTextData",r!==a+2&&(e[a][1].end=e[r-1][1].end,e.splice(a+2,r-a-2),t-=r-a-2,r=a+2),a=void 0);return e}function Xh(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Yh(e,t,n){let r=0,a,i;return s;function s(o){return e.enter("codeText"),e.enter("codeTextSequence"),c(o)}function c(o){return o===96?(e.consume(o),r++,c):(e.exit("codeTextSequence"),v(o))}function v(o){return o===null?n(o):o===32?(e.enter("space"),e.consume(o),e.exit("space"),v):o===96?(i=e.enter("codeTextSequence"),a=0,m(o)):We(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),v):(e.enter("codeTextData"),u(o))}function u(o){return o===null||o===32||o===96||We(o)?(e.exit("codeTextData"),v(o)):(e.consume(o),u)}function m(o){return o===96?(e.consume(o),a++,m):a===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(o)):(i.type="codeTextData",u(o))}}function Xu(e){const t={};let n=-1,r,a,i,s,c,v,u;for(;++n<e.length;){for(;n in t;)n=t[n];if(r=e[n],n&&r[1].type==="chunkFlow"&&e[n-1][1].type==="listItemPrefix"&&(v=r[1]._tokenizer.events,i=0,i<v.length&&v[i][1].type==="lineEndingBlank"&&(i+=2),i<v.length&&v[i][1].type==="content"))for(;++i<v.length&&v[i][1].type!=="content";)v[i][1].type==="chunkText"&&(v[i][1]._isInFirstContentOfListItem=!0,i++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Kh(e,n)),n=t[n],u=!0);else if(r[1]._container){for(i=n,a=void 0;i--&&(s=e[i],s[1].type==="lineEnding"||s[1].type==="lineEndingBlank");)s[0]==="enter"&&(a&&(e[a][1].type="lineEndingBlank"),s[1].type="lineEnding",a=i);a&&(r[1].end=Object.assign({},e[a][1].start),c=e.slice(a,n),c.unshift(r),sn(e,a,n-a+1,c))}}return!u}function Kh(e,t){const n=e[t][1],r=e[t][2];let a=t-1;const i=[],s=n._tokenizer||r.parser[n.contentType](n.start),c=s.events,v=[],u={};let m,o,l=-1,f=n,g=0,D=0;const C=[D];for(;f;){for(;e[++a][1]!==f;);i.push(a),f._tokenizer||(m=r.sliceStream(f),f.next||m.push(null),o&&s.defineSkip(f.start),f._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(m),f._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),o=f,f=f.next}for(f=n;++l<c.length;)c[l][0]==="exit"&&c[l-1][0]==="enter"&&c[l][1].type===c[l-1][1].type&&c[l][1].start.line!==c[l][1].end.line&&(D=l+1,C.push(D),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(s.events=[],f?(f._tokenizer=void 0,f.previous=void 0):C.pop(),l=C.length;l--;){const M=c.slice(C[l],C[l+1]),p=i.pop();v.unshift([p,p+M.length-1]),sn(e,p,2,M)}for(l=-1;++l<v.length;)u[g+v[l][0]]=g+v[l][1],g+=v[l][1]-v[l][0]-1;return u}const Gh={tokenize:Qh,resolve:Zh},Wh={tokenize:Jh,partial:!0};function Zh(e){return Xu(e),e}function Qh(e,t){let n;return r;function r(c){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),a(c)}function a(c){return c===null?i(c):We(c)?e.check(Wh,s,i)(c):(e.consume(c),a)}function i(c){return e.exit("chunkContent"),e.exit("content"),t(c)}function s(c){return e.consume(c),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,a}}function Jh(e,t,n){const r=this;return a;function a(s){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),lt(e,i,"linePrefix")}function i(s){if(s===null||We(s))return n(s);const c=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?t(s):e.interrupt(r.parser.constructs.flow,n,t)(s)}}function Yu(e,t,n,r,a,i,s,c,v){const u=v||Number.POSITIVE_INFINITY;let m=0;return o;function o(M){return M===60?(e.enter(r),e.enter(a),e.enter(i),e.consume(M),e.exit(i),l):M===null||M===32||M===41||ba(M)?n(M):(e.enter(r),e.enter(s),e.enter(c),e.enter("chunkString",{contentType:"string"}),D(M))}function l(M){return M===62?(e.enter(i),e.consume(M),e.exit(i),e.exit(a),e.exit(r),t):(e.enter(c),e.enter("chunkString",{contentType:"string"}),f(M))}function f(M){return M===62?(e.exit("chunkString"),e.exit(c),l(M)):M===null||M===60||We(M)?n(M):(e.consume(M),M===92?g:f)}function g(M){return M===60||M===62||M===92?(e.consume(M),f):f(M)}function D(M){return!m&&(M===null||M===41||kt(M))?(e.exit("chunkString"),e.exit(c),e.exit(s),e.exit(r),t(M)):m<u&&M===40?(e.consume(M),m++,D):M===41?(e.consume(M),m--,D):M===null||M===32||M===40||ba(M)?n(M):(e.consume(M),M===92?C:D)}function C(M){return M===40||M===41||M===92?(e.consume(M),D):D(M)}}function Ku(e,t,n,r,a,i){const s=this;let c=0,v;return u;function u(f){return e.enter(r),e.enter(a),e.consume(f),e.exit(a),e.enter(i),m}function m(f){return c>999||f===null||f===91||f===93&&!v||f===94&&!c&&"_hiddenFootnoteSupport"in s.parser.constructs?n(f):f===93?(e.exit(i),e.enter(a),e.consume(f),e.exit(a),e.exit(r),t):We(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),m):(e.enter("chunkString",{contentType:"string"}),o(f))}function o(f){return f===null||f===91||f===93||We(f)||c++>999?(e.exit("chunkString"),m(f)):(e.consume(f),v||(v=!at(f)),f===92?l:o)}function l(f){return f===91||f===92||f===93?(e.consume(f),c++,o):o(f)}}function Gu(e,t,n,r,a,i){let s;return c;function c(l){return l===34||l===39||l===40?(e.enter(r),e.enter(a),e.consume(l),e.exit(a),s=l===40?41:l,v):n(l)}function v(l){return l===s?(e.enter(a),e.consume(l),e.exit(a),e.exit(r),t):(e.enter(i),u(l))}function u(l){return l===s?(e.exit(i),v(s)):l===null?n(l):We(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),lt(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),m(l))}function m(l){return l===s||l===null||We(l)?(e.exit("chunkString"),u(l)):(e.consume(l),l===92?o:m)}function o(l){return l===s||l===92?(e.consume(l),m):m(l)}}function wi(e,t){let n;return r;function r(a){return We(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),n=!0,r):at(a)?lt(e,r,n?"linePrefix":"lineSuffix")(a):t(a)}}const $h={name:"definition",tokenize:tf},ef={tokenize:nf,partial:!0};function tf(e,t,n){const r=this;let a;return i;function i(f){return e.enter("definition"),s(f)}function s(f){return Ku.call(r,e,c,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function c(f){return a=Ln(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),f===58?(e.enter("definitionMarker"),e.consume(f),e.exit("definitionMarker"),v):n(f)}function v(f){return kt(f)?wi(e,u)(f):u(f)}function u(f){return Yu(e,m,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function m(f){return e.attempt(ef,o,o)(f)}function o(f){return at(f)?lt(e,l,"whitespace")(f):l(f)}function l(f){return f===null||We(f)?(e.exit("definition"),r.parser.defined.push(a),t(f)):n(f)}}function nf(e,t,n){return r;function r(c){return kt(c)?wi(e,a)(c):n(c)}function a(c){return Gu(e,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(c)}function i(c){return at(c)?lt(e,s,"whitespace")(c):s(c)}function s(c){return c===null||We(c)?t(c):n(c)}}const rf={name:"hardBreakEscape",tokenize:af};function af(e,t,n){return r;function r(i){return e.enter("hardBreakEscape"),e.consume(i),a}function a(i){return We(i)?(e.exit("hardBreakEscape"),t(i)):n(i)}}const sf={name:"headingAtx",tokenize:lf,resolve:of};function of(e,t){let n=e.length-2,r=3,a,i;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(a={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},i={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},sn(e,r,n-r+1,[["enter",a,t],["enter",i,t],["exit",i,t],["exit",a,t]])),e}function lf(e,t,n){let r=0;return a;function a(m){return e.enter("atxHeading"),i(m)}function i(m){return e.enter("atxHeadingSequence"),s(m)}function s(m){return m===35&&r++<6?(e.consume(m),s):m===null||kt(m)?(e.exit("atxHeadingSequence"),c(m)):n(m)}function c(m){return m===35?(e.enter("atxHeadingSequence"),v(m)):m===null||We(m)?(e.exit("atxHeading"),t(m)):at(m)?lt(e,c,"whitespace")(m):(e.enter("atxHeadingText"),u(m))}function v(m){return m===35?(e.consume(m),v):(e.exit("atxHeadingSequence"),c(m))}function u(m){return m===null||m===35||kt(m)?(e.exit("atxHeadingText"),c(m)):(e.consume(m),u)}}const cf=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Ol=["pre","script","style","textarea"],uf={name:"htmlFlow",tokenize:ff,resolveTo:hf,concrete:!0},df={tokenize:_f,partial:!0},mf={tokenize:vf,partial:!0};function hf(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function ff(e,t,n){const r=this;let a,i,s,c,v;return u;function u(B){return m(B)}function m(B){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(B),o}function o(B){return B===33?(e.consume(B),l):B===47?(e.consume(B),i=!0,D):B===63?(e.consume(B),a=3,r.interrupt?t:d):Xt(B)?(e.consume(B),s=String.fromCharCode(B),C):n(B)}function l(B){return B===45?(e.consume(B),a=2,f):B===91?(e.consume(B),a=5,c=0,g):Xt(B)?(e.consume(B),a=4,r.interrupt?t:d):n(B)}function f(B){return B===45?(e.consume(B),r.interrupt?t:d):n(B)}function g(B){const he="CDATA[";return B===he.charCodeAt(c++)?(e.consume(B),c===he.length?r.interrupt?t:b:g):n(B)}function D(B){return Xt(B)?(e.consume(B),s=String.fromCharCode(B),C):n(B)}function C(B){if(B===null||B===47||B===62||kt(B)){const he=B===47,Ae=s.toLowerCase();return!he&&!i&&Ol.includes(Ae)?(a=1,r.interrupt?t(B):b(B)):cf.includes(s.toLowerCase())?(a=6,he?(e.consume(B),M):r.interrupt?t(B):b(B)):(a=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(B):i?p(B):I(B))}return B===45||Ut(B)?(e.consume(B),s+=String.fromCharCode(B),C):n(B)}function M(B){return B===62?(e.consume(B),r.interrupt?t:b):n(B)}function p(B){return at(B)?(e.consume(B),p):h(B)}function I(B){return B===47?(e.consume(B),h):B===58||B===95||Xt(B)?(e.consume(B),j):at(B)?(e.consume(B),I):h(B)}function j(B){return B===45||B===46||B===58||B===95||Ut(B)?(e.consume(B),j):_(B)}function _(B){return B===61?(e.consume(B),R):at(B)?(e.consume(B),_):I(B)}function R(B){return B===null||B===60||B===61||B===62||B===96?n(B):B===34||B===39?(e.consume(B),v=B,T):at(B)?(e.consume(B),R):A(B)}function T(B){return B===v?(e.consume(B),v=null,E):B===null||We(B)?n(B):(e.consume(B),T)}function A(B){return B===null||B===34||B===39||B===47||B===60||B===61||B===62||B===96||kt(B)?_(B):(e.consume(B),A)}function E(B){return B===47||B===62||at(B)?I(B):n(B)}function h(B){return B===62?(e.consume(B),y):n(B)}function y(B){return B===null||We(B)?b(B):at(B)?(e.consume(B),y):n(B)}function b(B){return B===45&&a===2?(e.consume(B),N):B===60&&a===1?(e.consume(B),Y):B===62&&a===4?(e.consume(B),x):B===63&&a===3?(e.consume(B),d):B===93&&a===5?(e.consume(B),q):We(B)&&(a===6||a===7)?(e.exit("htmlFlowData"),e.check(df,W,w)(B)):B===null||We(B)?(e.exit("htmlFlowData"),w(B)):(e.consume(B),b)}function w(B){return e.check(mf,S,W)(B)}function S(B){return e.enter("lineEnding"),e.consume(B),e.exit("lineEnding"),k}function k(B){return B===null||We(B)?w(B):(e.enter("htmlFlowData"),b(B))}function N(B){return B===45?(e.consume(B),d):b(B)}function Y(B){return B===47?(e.consume(B),s="",H):b(B)}function H(B){if(B===62){const he=s.toLowerCase();return Ol.includes(he)?(e.consume(B),x):b(B)}return Xt(B)&&s.length<8?(e.consume(B),s+=String.fromCharCode(B),H):b(B)}function q(B){return B===93?(e.consume(B),d):b(B)}function d(B){return B===62?(e.consume(B),x):B===45&&a===2?(e.consume(B),d):b(B)}function x(B){return B===null||We(B)?(e.exit("htmlFlowData"),W(B)):(e.consume(B),x)}function W(B){return e.exit("htmlFlow"),t(B)}}function vf(e,t,n){const r=this;return a;function a(s){return We(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),i):n(s)}function i(s){return r.parser.lazy[r.now().line]?n(s):t(s)}}function _f(e,t,n){return r;function r(a){return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),e.attempt(Li,t,n)}}const pf={name:"htmlText",tokenize:gf};function gf(e,t,n){const r=this;let a,i,s;return c;function c(d){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(d),v}function v(d){return d===33?(e.consume(d),u):d===47?(e.consume(d),_):d===63?(e.consume(d),I):Xt(d)?(e.consume(d),A):n(d)}function u(d){return d===45?(e.consume(d),m):d===91?(e.consume(d),i=0,g):Xt(d)?(e.consume(d),p):n(d)}function m(d){return d===45?(e.consume(d),f):n(d)}function o(d){return d===null?n(d):d===45?(e.consume(d),l):We(d)?(s=o,Y(d)):(e.consume(d),o)}function l(d){return d===45?(e.consume(d),f):o(d)}function f(d){return d===62?N(d):d===45?l(d):o(d)}function g(d){const x="CDATA[";return d===x.charCodeAt(i++)?(e.consume(d),i===x.length?D:g):n(d)}function D(d){return d===null?n(d):d===93?(e.consume(d),C):We(d)?(s=D,Y(d)):(e.consume(d),D)}function C(d){return d===93?(e.consume(d),M):D(d)}function M(d){return d===62?N(d):d===93?(e.consume(d),M):D(d)}function p(d){return d===null||d===62?N(d):We(d)?(s=p,Y(d)):(e.consume(d),p)}function I(d){return d===null?n(d):d===63?(e.consume(d),j):We(d)?(s=I,Y(d)):(e.consume(d),I)}function j(d){return d===62?N(d):I(d)}function _(d){return Xt(d)?(e.consume(d),R):n(d)}function R(d){return d===45||Ut(d)?(e.consume(d),R):T(d)}function T(d){return We(d)?(s=T,Y(d)):at(d)?(e.consume(d),T):N(d)}function A(d){return d===45||Ut(d)?(e.consume(d),A):d===47||d===62||kt(d)?E(d):n(d)}function E(d){return d===47?(e.consume(d),N):d===58||d===95||Xt(d)?(e.consume(d),h):We(d)?(s=E,Y(d)):at(d)?(e.consume(d),E):N(d)}function h(d){return d===45||d===46||d===58||d===95||Ut(d)?(e.consume(d),h):y(d)}function y(d){return d===61?(e.consume(d),b):We(d)?(s=y,Y(d)):at(d)?(e.consume(d),y):E(d)}function b(d){return d===null||d===60||d===61||d===62||d===96?n(d):d===34||d===39?(e.consume(d),a=d,w):We(d)?(s=b,Y(d)):at(d)?(e.consume(d),b):(e.consume(d),S)}function w(d){return d===a?(e.consume(d),a=void 0,k):d===null?n(d):We(d)?(s=w,Y(d)):(e.consume(d),w)}function S(d){return d===null||d===34||d===39||d===60||d===61||d===96?n(d):d===47||d===62||kt(d)?E(d):(e.consume(d),S)}function k(d){return d===47||d===62||kt(d)?E(d):n(d)}function N(d){return d===62?(e.consume(d),e.exit("htmlTextData"),e.exit("htmlText"),t):n(d)}function Y(d){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),H}function H(d){return at(d)?lt(e,q,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(d):q(d)}function q(d){return e.enter("htmlTextData"),s(d)}}const Ao={name:"labelEnd",tokenize:xf,resolveTo:Sf,resolveAll:kf},bf={tokenize:Mf},yf={tokenize:Af},wf={tokenize:Ef};function kf(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function Sf(e,t){let n=e.length,r=0,a,i,s,c;for(;n--;)if(a=e[n][1],i){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;e[n][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(s){if(e[n][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(i=n,a.type!=="labelLink")){r=2;break}}else a.type==="labelEnd"&&(s=n);const v={type:e[i][1].type==="labelLink"?"link":"image",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)},u={type:"label",start:Object.assign({},e[i][1].start),end:Object.assign({},e[s][1].end)},m={type:"labelText",start:Object.assign({},e[i+r+2][1].end),end:Object.assign({},e[s-2][1].start)};return c=[["enter",v,t],["enter",u,t]],c=zt(c,e.slice(i+1,i+r+3)),c=zt(c,[["enter",m,t]]),c=zt(c,Va(t.parser.constructs.insideSpan.null,e.slice(i+r+4,s-3),t)),c=zt(c,[["exit",m,t],e[s-2],e[s-1],["exit",u,t]]),c=zt(c,e.slice(s+1)),c=zt(c,[["exit",v,t]]),sn(e,i,e.length,c),e}function xf(e,t,n){const r=this;let a=r.events.length,i,s;for(;a--;)if((r.events[a][1].type==="labelImage"||r.events[a][1].type==="labelLink")&&!r.events[a][1]._balanced){i=r.events[a][1];break}return c;function c(l){return i?i._inactive?o(l):(s=r.parser.defined.includes(Ln(r.sliceSerialize({start:i.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelEnd"),v):n(l)}function v(l){return l===40?e.attempt(bf,m,s?m:o)(l):l===91?e.attempt(yf,m,s?u:o)(l):s?m(l):o(l)}function u(l){return e.attempt(wf,m,o)(l)}function m(l){return t(l)}function o(l){return i._balanced=!0,n(l)}}function Mf(e,t,n){return r;function r(o){return e.enter("resource"),e.enter("resourceMarker"),e.consume(o),e.exit("resourceMarker"),a}function a(o){return kt(o)?wi(e,i)(o):i(o)}function i(o){return o===41?m(o):Yu(e,s,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(o)}function s(o){return kt(o)?wi(e,v)(o):m(o)}function c(o){return n(o)}function v(o){return o===34||o===39||o===40?Gu(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(o):m(o)}function u(o){return kt(o)?wi(e,m)(o):m(o)}function m(o){return o===41?(e.enter("resourceMarker"),e.consume(o),e.exit("resourceMarker"),e.exit("resource"),t):n(o)}}function Af(e,t,n){const r=this;return a;function a(c){return Ku.call(r,e,i,s,"reference","referenceMarker","referenceString")(c)}function i(c){return r.parser.defined.includes(Ln(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(c):n(c)}function s(c){return n(c)}}function Ef(e,t,n){return r;function r(i){return e.enter("reference"),e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),a}function a(i){return i===93?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):n(i)}}const Tf={name:"labelStartImage",tokenize:Rf,resolveAll:Ao.resolveAll};function Rf(e,t,n){const r=this;return a;function a(c){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(c),e.exit("labelImageMarker"),i}function i(c){return c===91?(e.enter("labelMarker"),e.consume(c),e.exit("labelMarker"),e.exit("labelImage"),s):n(c)}function s(c){return c===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(c):t(c)}}const If={name:"labelStartLink",tokenize:Cf,resolveAll:Ao.resolveAll};function Cf(e,t,n){const r=this;return a;function a(s){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(s),e.exit("labelMarker"),e.exit("labelLink"),i}function i(s){return s===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(s):t(s)}}const us={name:"lineEnding",tokenize:Bf};function Bf(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),lt(e,t,"linePrefix")}}const ua={name:"thematicBreak",tokenize:Ff};function Ff(e,t,n){let r=0,a;return i;function i(u){return e.enter("thematicBreak"),s(u)}function s(u){return a=u,c(u)}function c(u){return u===a?(e.enter("thematicBreakSequence"),v(u)):r>=3&&(u===null||We(u))?(e.exit("thematicBreak"),t(u)):n(u)}function v(u){return u===a?(e.consume(u),r++,v):(e.exit("thematicBreakSequence"),at(u)?lt(e,c,"whitespace")(u):c(u))}}const $t={name:"list",tokenize:jf,continuation:{tokenize:Nf},exit:Hf},Of={tokenize:Pf,partial:!0},Lf={tokenize:Df,partial:!0};function jf(e,t,n){const r=this,a=r.events[r.events.length-1];let i=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,s=0;return c;function c(f){const g=r.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(g==="listUnordered"?!r.containerState.marker||f===r.containerState.marker:Us(f)){if(r.containerState.type||(r.containerState.type=g,e.enter(g,{_container:!0})),g==="listUnordered")return e.enter("listItemPrefix"),f===42||f===45?e.check(ua,n,u)(f):u(f);if(!r.interrupt||f===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),v(f)}return n(f)}function v(f){return Us(f)&&++s<10?(e.consume(f),v):(!r.interrupt||s<2)&&(r.containerState.marker?f===r.containerState.marker:f===41||f===46)?(e.exit("listItemValue"),u(f)):n(f)}function u(f){return e.enter("listItemMarker"),e.consume(f),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||f,e.check(Li,r.interrupt?n:m,e.attempt(Of,l,o))}function m(f){return r.containerState.initialBlankLine=!0,i++,l(f)}function o(f){return at(f)?(e.enter("listItemPrefixWhitespace"),e.consume(f),e.exit("listItemPrefixWhitespace"),l):n(f)}function l(f){return r.containerState.size=i+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(f)}}function Nf(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Li,a,i);function a(c){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,lt(e,t,"listItemIndent",r.containerState.size+1)(c)}function i(c){return r.containerState.furtherBlankLines||!at(c)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,s(c)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(Lf,t,s)(c))}function s(c){return r.containerState._closeFlow=!0,r.interrupt=void 0,lt(e,e.attempt($t,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c)}}function Df(e,t,n){const r=this;return lt(e,a,"listItemIndent",r.containerState.size+1);function a(i){const s=r.events[r.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===r.containerState.size?t(i):n(i)}}function Hf(e){e.exit(this.containerState.type)}function Pf(e,t,n){const r=this;return lt(e,a,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(i){const s=r.events[r.events.length-1];return!at(i)&&s&&s[1].type==="listItemPrefixWhitespace"?t(i):n(i)}}const Ll={name:"setextUnderline",tokenize:Vf,resolveTo:zf};function zf(e,t){let n=e.length,r,a,i;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(a=n)}else e[n][1].type==="content"&&e.splice(n,1),!i&&e[n][1].type==="definition"&&(i=n);const s={type:"setextHeading",start:Object.assign({},e[a][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[a][1].type="setextHeadingText",i?(e.splice(a,0,["enter",s,t]),e.splice(i+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[i][1].end)):e[r][1]=s,e.push(["exit",s,t]),e}function Vf(e,t,n){const r=this;let a;return i;function i(u){let m=r.events.length,o;for(;m--;)if(r.events[m][1].type!=="lineEnding"&&r.events[m][1].type!=="linePrefix"&&r.events[m][1].type!=="content"){o=r.events[m][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||o)?(e.enter("setextHeadingLine"),a=u,s(u)):n(u)}function s(u){return e.enter("setextHeadingLineSequence"),c(u)}function c(u){return u===a?(e.consume(u),c):(e.exit("setextHeadingLineSequence"),at(u)?lt(e,v,"lineSuffix")(u):v(u))}function v(u){return u===null||We(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const Uf={tokenize:qf};function qf(e){const t=this,n=e.attempt(Li,r,e.attempt(this.parser.constructs.flowInitial,a,lt(e,e.attempt(this.parser.constructs.flow,a,e.attempt(Gh,a)),"linePrefix")));return n;function r(i){if(i===null){e.consume(i);return}return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function a(i){if(i===null){e.consume(i);return}return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const Xf={resolveAll:Zu()},Yf=Wu("string"),Kf=Wu("text");function Wu(e){return{tokenize:t,resolveAll:Zu(e==="text"?Gf:void 0)};function t(n){const r=this,a=this.parser.constructs[e],i=n.attempt(a,s,c);return s;function s(m){return u(m)?i(m):c(m)}function c(m){if(m===null){n.consume(m);return}return n.enter("data"),n.consume(m),v}function v(m){return u(m)?(n.exit("data"),i(m)):(n.consume(m),v)}function u(m){if(m===null)return!0;const o=a[m];let l=-1;if(o)for(;++l<o.length;){const f=o[l];if(!f.previous||f.previous.call(r,r.previous))return!0}return!1}}}function Zu(e){return t;function t(n,r){let a=-1,i;for(;++a<=n.length;)i===void 0?n[a]&&n[a][1].type==="data"&&(i=a,a++):(!n[a]||n[a][1].type!=="data")&&(a!==i+2&&(n[i][1].end=n[a-1][1].end,n.splice(i+2,a-i-2),a=i+2),i=void 0);return e?e(n,r):n}}function Gf(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],a=t.sliceStream(r);let i=a.length,s=-1,c=0,v;for(;i--;){const u=a[i];if(typeof u=="string"){for(s=u.length;u.charCodeAt(s-1)===32;)c++,s--;if(s)break;s=-1}else if(u===-2)v=!0,c++;else if(u!==-1){i++;break}}if(c){const u={type:n===e.length||v||c<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-c,offset:r.end.offset-c,_index:r.start._index+i,_bufferIndex:i?s:r.start._bufferIndex+s},end:Object.assign({},r.end)};r.end=Object.assign({},u.start),r.start.offset===r.end.offset?Object.assign(r,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}function Wf(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const a={},i=[];let s=[],c=[];const v={consume:p,enter:I,exit:j,attempt:T(_),check:T(R),interrupt:T(R,{interrupt:!0})},u={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:f,sliceSerialize:l,now:g,defineSkip:D,write:o};let m=t.tokenize.call(u,v);return t.resolveAll&&i.push(t),u;function o(y){return s=zt(s,y),C(),s[s.length-1]!==null?[]:(A(t,0),u.events=Va(i,u.events,u),u.events)}function l(y,b){return Qf(f(y),b)}function f(y){return Zf(s,y)}function g(){const{line:y,column:b,offset:w,_index:S,_bufferIndex:k}=r;return{line:y,column:b,offset:w,_index:S,_bufferIndex:k}}function D(y){a[y.line]=y.column,h()}function C(){let y;for(;r._index<s.length;){const b=s[r._index];if(typeof b=="string")for(y=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===y&&r._bufferIndex<b.length;)M(b.charCodeAt(r._bufferIndex));else M(b)}}function M(y){m=m(y)}function p(y){We(y)?(r.line++,r.column=1,r.offset+=y===-3?2:1,h()):y!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===s[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=y}function I(y,b){const w=b||{};return w.type=y,w.start=g(),u.events.push(["enter",w,u]),c.push(w),w}function j(y){const b=c.pop();return b.end=g(),u.events.push(["exit",b,u]),b}function _(y,b){A(y,b.from)}function R(y,b){b.restore()}function T(y,b){return w;function w(S,k,N){let Y,H,q,d;return Array.isArray(S)?W(S):"tokenize"in S?W([S]):x(S);function x(ge){return _e;function _e(He){const Ee=He!==null&&ge[He],fe=He!==null&&ge.null,Xe=[...Array.isArray(Ee)?Ee:Ee?[Ee]:[],...Array.isArray(fe)?fe:fe?[fe]:[]];return W(Xe)(He)}}function W(ge){return Y=ge,H=0,ge.length===0?N:B(ge[H])}function B(ge){return _e;function _e(He){return d=E(),q=ge,ge.partial||(u.currentConstruct=ge),ge.name&&u.parser.constructs.disable.null.includes(ge.name)?Ae():ge.tokenize.call(b?Object.assign(Object.create(u),b):u,v,he,Ae)(He)}}function he(ge){return y(q,d),k}function Ae(ge){return d.restore(),++H<Y.length?B(Y[H]):N}}}function A(y,b){y.resolveAll&&!i.includes(y)&&i.push(y),y.resolve&&sn(u.events,b,u.events.length-b,y.resolve(u.events.slice(b),u)),y.resolveTo&&(u.events=y.resolveTo(u.events,u))}function E(){const y=g(),b=u.previous,w=u.currentConstruct,S=u.events.length,k=Array.from(c);return{restore:N,from:S};function N(){r=y,u.previous=b,u.currentConstruct=w,u.events.length=S,c=k,h()}}function h(){r.line in a&&r.column<2&&(r.column=a[r.line],r.offset+=a[r.line]-1)}}function Zf(e,t){const n=t.start._index,r=t.start._bufferIndex,a=t.end._index,i=t.end._bufferIndex;let s;if(n===a)s=[e[n].slice(r,i)];else{if(s=e.slice(n,a),r>-1){const c=s[0];typeof c=="string"?s[0]=c.slice(r):s.shift()}i>0&&s.push(e[a].slice(0,i))}return s}function Qf(e,t){let n=-1;const r=[];let a;for(;++n<e.length;){const i=e[n];let s;if(typeof i=="string")s=i;else switch(i){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=t?" ":"	";break}case-1:{if(!t&&a)continue;s=" ";break}default:s=String.fromCharCode(i)}a=i===-2,r.push(s)}return r.join("")}const Jf={42:$t,43:$t,45:$t,48:$t,49:$t,50:$t,51:$t,52:$t,53:$t,54:$t,55:$t,56:$t,57:$t,62:Vu},$f={91:$h},e2={[-2]:cs,[-1]:cs,32:cs},t2={35:sf,42:ua,45:[Ll,ua],60:uf,61:Ll,95:ua,96:Fl,126:Fl},n2={38:qu,92:Uu},r2={[-5]:us,[-4]:us,[-3]:us,33:Tf,38:qu,42:qs,60:[Ih,pf],91:If,92:[rf,Uu],93:Ao,95:qs,96:Uh},i2={null:[qs,Xf]},a2={null:[42,95]},s2={null:[]};var o2=Object.freeze(Object.defineProperty({__proto__:null,document:Jf,contentInitial:$f,flowInitial:e2,flow:t2,string:n2,text:r2,insideSpan:i2,attentionMarkers:a2,disable:s2},Symbol.toStringTag,{value:"Module"}));function l2(e){const n=Hu([o2,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:a(Sh),document:a(Mh),flow:a(Uf),string:a(Yf),text:a(Kf)};return r;function a(i){return s;function s(c){return Wf(r,i,c)}}}function c2(e){for(;!Xu(e););return e}const jl=/[\0\t\n\r]/g;function u2(){let e=1,t="",n=!0,r;return a;function a(i,s,c){const v=[];let u,m,o,l,f;for(i=t+i.toString(s),o=0,t="",n&&(i.charCodeAt(0)===65279&&o++,n=void 0);o<i.length;){if(jl.lastIndex=o,u=jl.exec(i),l=u&&u.index!==void 0?u.index:i.length,f=i.charCodeAt(l),!u){t=i.slice(o);break}if(f===10&&o===l&&r)v.push(-3),r=void 0;else switch(r&&(v.push(-5),r=void 0),o<l&&(v.push(i.slice(o,l)),e+=l-o),f){case 0:{v.push(65533),e++;break}case 9:{for(m=Math.ceil(e/4)*4,v.push(-2);e++<m;)v.push(-1);break}case 10:{v.push(-4),e=1;break}default:r=!0,e=1}o=l+1}return c&&(r&&v.push(-5),t&&v.push(t),v.push(null)),v}}function d2(e,t,n){return typeof t!="string"&&(n=t,t=void 0),kh(n)(c2(l2(n).document().write(u2()(e,t,!0))))}const m2={tokenize:g2,partial:!0},Qu={tokenize:b2,partial:!0},Ju={tokenize:y2,partial:!0},$u={tokenize:w2,partial:!0},h2={tokenize:k2,partial:!0},e1={tokenize:_2,previous:n1},t1={tokenize:p2,previous:r1},Xn={tokenize:v2,previous:i1},jn={},f2={text:jn};let vr=48;for(;vr<123;)jn[vr]=Xn,vr++,vr===58?vr=65:vr===91&&(vr=97);jn[43]=Xn;jn[45]=Xn;jn[46]=Xn;jn[95]=Xn;jn[72]=[Xn,t1];jn[104]=[Xn,t1];jn[87]=[Xn,e1];jn[119]=[Xn,e1];function v2(e,t,n){const r=this;let a,i;return s;function s(o){return!Xs(o)||!i1.call(r,r.previous)||Eo(r.events)?n(o):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),c(o))}function c(o){return Xs(o)?(e.consume(o),c):o===64?(e.consume(o),v):n(o)}function v(o){return o===46?e.check(h2,m,u)(o):o===45||o===95||Ut(o)?(i=!0,e.consume(o),v):m(o)}function u(o){return e.consume(o),a=!0,v}function m(o){return i&&a&&Xt(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(o)):n(o)}}function _2(e,t,n){const r=this;return a;function a(s){return s!==87&&s!==119||!n1.call(r,r.previous)||Eo(r.events)?n(s):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(m2,e.attempt(Qu,e.attempt(Ju,i),n),n)(s))}function i(s){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(s)}}function p2(e,t,n){const r=this;let a="",i=!1;return s;function s(o){return(o===72||o===104)&&r1.call(r,r.previous)&&!Eo(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),a+=String.fromCodePoint(o),e.consume(o),c):n(o)}function c(o){if(Xt(o)&&a.length<5)return a+=String.fromCodePoint(o),e.consume(o),c;if(o===58){const l=a.toLowerCase();if(l==="http"||l==="https")return e.consume(o),v}return n(o)}function v(o){return o===47?(e.consume(o),i?u:(i=!0,v)):n(o)}function u(o){return o===null||ba(o)||kt(o)||Gr(o)||Mo(o)?n(o):e.attempt(Qu,e.attempt(Ju,m),n)(o)}function m(o){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(o)}}function g2(e,t,n){let r=0;return a;function a(s){return(s===87||s===119)&&r<3?(r++,e.consume(s),a):s===46&&r===3?(e.consume(s),i):n(s)}function i(s){return s===null?n(s):t(s)}}function b2(e,t,n){let r,a,i;return s;function s(u){return u===46||u===95?e.check($u,v,c)(u):u===null||kt(u)||Gr(u)||u!==45&&Mo(u)?v(u):(i=!0,e.consume(u),s)}function c(u){return u===95?r=!0:(a=r,r=void 0),e.consume(u),s}function v(u){return a||r||!i?n(u):t(u)}}function y2(e,t){let n=0,r=0;return a;function a(s){return s===40?(n++,e.consume(s),a):s===41&&r<n?i(s):s===33||s===34||s===38||s===39||s===41||s===42||s===44||s===46||s===58||s===59||s===60||s===63||s===93||s===95||s===126?e.check($u,t,i)(s):s===null||kt(s)||Gr(s)?t(s):(e.consume(s),a)}function i(s){return s===41&&r++,e.consume(s),a}}function w2(e,t,n){return r;function r(c){return c===33||c===34||c===39||c===41||c===42||c===44||c===46||c===58||c===59||c===63||c===95||c===126?(e.consume(c),r):c===38?(e.consume(c),i):c===93?(e.consume(c),a):c===60||c===null||kt(c)||Gr(c)?t(c):n(c)}function a(c){return c===null||c===40||c===91||kt(c)||Gr(c)?t(c):r(c)}function i(c){return Xt(c)?s(c):n(c)}function s(c){return c===59?(e.consume(c),r):Xt(c)?(e.consume(c),s):n(c)}}function k2(e,t,n){return r;function r(i){return e.consume(i),a}function a(i){return Ut(i)?n(i):t(i)}}function n1(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||kt(e)}function r1(e){return!Xt(e)}function i1(e){return!(e===47||Xs(e))}function Xs(e){return e===43||e===45||e===46||e===95||Ut(e)}function Eo(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const S2={exit:{literalAutolinkEmail:M2,literalAutolinkHttp:A2,literalAutolinkWww:x2}};function x2(e){To.call(this,e,"http://")}function M2(e){To.call(this,e,"mailto:")}function A2(e){To.call(this,e)}function To(e,t){const n=this.sliceSerialize(e);this.tag('<a href="'+Rr((t||"")+n)+'">'),this.raw(this.encode(n)),this.tag("</a>")}const E2={tokenize:L2,partial:!0};function T2(){return{document:{91:{tokenize:B2,continuation:{tokenize:F2},exit:O2}},text:{91:{tokenize:C2},93:{add:"after",tokenize:R2,resolveTo:I2}}}}function R2(e,t,n){const r=this;let a=r.events.length;const i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s;for(;a--;){const v=r.events[a][1];if(v.type==="labelImage"){s=v;break}if(v.type==="gfmFootnoteCall"||v.type==="labelLink"||v.type==="label"||v.type==="image"||v.type==="link")break}return c;function c(v){if(!s||!s._balanced)return n(v);const u=Ln(r.sliceSerialize({start:s.end,end:r.now()}));return u.codePointAt(0)!==94||!i.includes(u.slice(1))?n(v):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(v),e.exit("gfmFootnoteCallLabelMarker"),t(v))}}function I2(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},a={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};a.end.column++,a.end.offset++,a.end._bufferIndex++;const i={type:"gfmFootnoteCallString",start:Object.assign({},a.end),end:Object.assign({},e[e.length-1][1].start)},s={type:"chunkString",contentType:"string",start:Object.assign({},i.start),end:Object.assign({},i.end)},c=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",a,t],["exit",a,t],["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...c),e}function C2(e,t,n){const r=this,a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i=0,s;return c;function c(o){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(o),e.exit("gfmFootnoteCallLabelMarker"),v}function v(o){return o!==94?n(o):(e.enter("gfmFootnoteCallMarker"),e.consume(o),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",u)}function u(o){if(i>999||o===93&&!s||o===null||o===91||kt(o))return n(o);if(o===93){e.exit("chunkString");const l=e.exit("gfmFootnoteCallString");return a.includes(Ln(r.sliceSerialize(l)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(o),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(o)}return kt(o)||(s=!0),i++,e.consume(o),o===92?m:u}function m(o){return o===91||o===92||o===93?(e.consume(o),i++,u):u(o)}}function B2(e,t,n){const r=this,a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i,s=0,c;return v;function v(g){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(g),e.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(g){return g===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(g),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",m):n(g)}function m(g){if(s>999||g===93&&!c||g===null||g===91||kt(g))return n(g);if(g===93){e.exit("chunkString");const D=e.exit("gfmFootnoteDefinitionLabelString");return i=Ln(r.sliceSerialize(D)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(g),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),l}return kt(g)||(c=!0),s++,e.consume(g),g===92?o:m}function o(g){return g===91||g===92||g===93?(e.consume(g),s++,m):m(g)}function l(g){return g===58?(e.enter("definitionMarker"),e.consume(g),e.exit("definitionMarker"),a.includes(i)||a.push(i),lt(e,f,"gfmFootnoteDefinitionWhitespace")):n(g)}function f(g){return t(g)}}function F2(e,t,n){return e.check(Li,t,e.attempt(E2,t,n))}function O2(e){e.exit("gfmFootnoteDefinition")}function L2(e,t,n){const r=this;return lt(e,a,"gfmFootnoteDefinitionIndent",5);function a(i){const s=r.events[r.events.length-1];return s&&s[1].type==="gfmFootnoteDefinitionIndent"&&s[2].sliceSerialize(s[1],!0).length===4?t(i):n(i)}}const j2={}.hasOwnProperty,N2={};function D2(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function H2(e){const t=N2,n=t.label||"Footnotes",r=t.labelTagName||"h2",a=t.labelAttributes===null||t.labelAttributes===void 0?'class="sr-only"':t.labelAttributes,i=t.backLabel||D2,s=t.clobberPrefix===null||t.clobberPrefix===void 0?"user-content-":t.clobberPrefix;return{enter:{gfmFootnoteDefinition(){this.getData("tightStack").push(!1)},gfmFootnoteDefinitionLabelString(){this.buffer()},gfmFootnoteCallString(){this.buffer()}},exit:{gfmFootnoteDefinition(){let c=this.getData("gfmFootnoteDefinitions");const v=this.getData("gfmFootnoteDefinitionStack"),u=this.getData("tightStack"),m=v.pop(),o=this.resume();c||this.setData("gfmFootnoteDefinitions",c={}),j2.call(c,m)||(c[m]=o),u.pop(),this.setData("slurpOneLineEnding",!0),this.setData("lastWasTag")},gfmFootnoteDefinitionLabelString(c){let v=this.getData("gfmFootnoteDefinitionStack");v||this.setData("gfmFootnoteDefinitionStack",v=[]),v.push(Ln(this.sliceSerialize(c))),this.resume(),this.buffer()},gfmFootnoteCallString(c){let v=this.getData("gfmFootnoteCallOrder"),u=this.getData("gfmFootnoteCallCounts");const m=Ln(this.sliceSerialize(c));let o;this.resume(),v||this.setData("gfmFootnoteCallOrder",v=[]),u||this.setData("gfmFootnoteCallCounts",u={});const l=v.indexOf(m),f=Rr(m.toLowerCase());l===-1?(v.push(m),u[m]=1,o=v.length):(u[m]++,o=l+1);const g=u[m];this.tag('<sup><a href="#'+s+"fn-"+f+'" id="'+s+"fnref-"+f+(g>1?"-"+g:"")+'" data-footnote-ref="" aria-describedby="footnote-label">'+String(o)+"</a></sup>")},null(){const c=this.getData("gfmFootnoteCallOrder")||[],v=this.getData("gfmFootnoteCallCounts")||{},u=this.getData("gfmFootnoteDefinitions")||{};let m=-1;for(c.length>0&&(this.lineEndingIfNeeded(),this.tag('<section data-footnotes="" class="footnotes"><'+r+' id="footnote-label"'+(a?" "+a:"")+">"),this.raw(this.encode(n)),this.tag("</"+r+">"),this.lineEndingIfNeeded(),this.tag("<ol>"));++m<c.length;){const o=c[m],l=Rr(o.toLowerCase());let f=0;const g=[];for(;++f<=v[o];)g.push('<a href="#'+s+"fnref-"+l+(f>1?"-"+f:"")+'" data-footnote-backref="" aria-label="'+this.encode(typeof i=="string"?i:i(m,f))+'" class="data-footnote-backref">'+(f>1?"<sup>"+f+"</sup>":"")+"</a>");const D=g.join(" ");let C=!1;this.lineEndingIfNeeded(),this.tag('<li id="'+s+"fn-"+l+'">'),this.lineEndingIfNeeded(),this.tag(u[o].replace(/<\/p>(?:\r?\n|\r)?$/,M=>(C=!0," "+D+M))),C||(this.lineEndingIfNeeded(),this.tag(D)),this.lineEndingIfNeeded(),this.tag("</li>")}c.length>0&&(this.lineEndingIfNeeded(),this.tag("</ol>"),this.lineEndingIfNeeded(),this.tag("</section>"))}}}}const P2={enter:{strikethrough(){this.tag("<del>")}},exit:{strikethrough(){this.tag("</del>")}}};function z2(e){let n={}.singleTilde;const r={tokenize:i,resolveAll:a};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function a(s,c){let v=-1;for(;++v<s.length;)if(s[v][0]==="enter"&&s[v][1].type==="strikethroughSequenceTemporary"&&s[v][1]._close){let u=v;for(;u--;)if(s[u][0]==="exit"&&s[u][1].type==="strikethroughSequenceTemporary"&&s[u][1]._open&&s[v][1].end.offset-s[v][1].start.offset===s[u][1].end.offset-s[u][1].start.offset){s[v][1].type="strikethroughSequence",s[u][1].type="strikethroughSequence";const m={type:"strikethrough",start:Object.assign({},s[u][1].start),end:Object.assign({},s[v][1].end)},o={type:"strikethroughText",start:Object.assign({},s[u][1].end),end:Object.assign({},s[v][1].start)},l=[["enter",m,c],["enter",s[u][1],c],["exit",s[u][1],c],["enter",o,c]],f=c.parser.constructs.insideSpan.null;f&&sn(l,l.length,0,Va(f,s.slice(u+1,v),c)),sn(l,l.length,0,[["exit",o,c],["enter",s[v][1],c],["exit",s[v][1],c],["exit",m,c]]),sn(s,u-1,v-u+3,l),v=u+l.length-2;break}}for(v=-1;++v<s.length;)s[v][1].type==="strikethroughSequenceTemporary"&&(s[v][1].type="data");return s}function i(s,c,v){const u=this.previous,m=this.events;let o=0;return l;function l(g){return u===126&&m[m.length-1][1].type!=="characterEscape"?v(g):(s.enter("strikethroughSequenceTemporary"),f(g))}function f(g){const D=ya(u);if(g===126)return o>1?v(g):(s.consume(g),o++,f);if(o<2&&!n)return v(g);const C=s.exit("strikethroughSequenceTemporary"),M=ya(g);return C._open=!M||M===2&&!!D,C._close=!D||D===2&&!!M,c(g)}}}const ds={none:"",left:' align="left"',right:' align="right"',center:' align="center"'},V2={enter:{table(e){const t=e._align;this.lineEndingIfNeeded(),this.tag("<table>"),this.setData("tableAlign",t)},tableBody(){this.tag("<tbody>")},tableData(){const e=this.getData("tableAlign"),t=this.getData("tableColumn"),n=ds[e[t]];n===void 0?this.buffer():(this.lineEndingIfNeeded(),this.tag("<td"+n+">"))},tableHead(){this.lineEndingIfNeeded(),this.tag("<thead>")},tableHeader(){const e=this.getData("tableAlign"),t=this.getData("tableColumn"),n=ds[e[t]];this.lineEndingIfNeeded(),this.tag("<th"+n+">")},tableRow(){this.setData("tableColumn",0),this.lineEndingIfNeeded(),this.tag("<tr>")}},exit:{codeTextData(e){let t=this.sliceSerialize(e);this.getData("tableAlign")&&(t=t.replace(/\\([\\|])/g,U2)),this.raw(this.encode(t))},table(){this.setData("tableAlign"),this.setData("slurpAllLineEndings"),this.lineEndingIfNeeded(),this.tag("</table>")},tableBody(){this.lineEndingIfNeeded(),this.tag("</tbody>")},tableData(){const e=this.getData("tableAlign"),t=this.getData("tableColumn");t in e?(this.tag("</td>"),this.setData("tableColumn",t+1)):this.resume()},tableHead(){this.lineEndingIfNeeded(),this.tag("</thead>")},tableHeader(){const e=this.getData("tableColumn");this.tag("</th>"),this.setData("tableColumn",e+1)},tableRow(){const e=this.getData("tableAlign");let t=this.getData("tableColumn");for(;t<e.length;)this.lineEndingIfNeeded(),this.tag("<td"+ds[e[t]]+"></td>"),t++;this.setData("tableColumn",t),this.lineEndingIfNeeded(),this.tag("</tr>")}}};function U2(e,t){return t==="|"?t:e}class q2{constructor(){this.map=[]}add(t,n,r){X2(this,t,n,r)}consume(t){if(this.map.sort((i,s)=>i[0]-s[0]),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1])),r.push(this.map[n][2]),t.length=this.map[n][0];r.push([...t]),t.length=0;let a=r.pop();for(;a;)t.push(...a),a=r.pop();this.map.length=0}}function X2(e,t,n,r){let a=0;if(!(n===0&&r.length===0)){for(;a<e.map.length;){if(e.map[a][0]===t){e.map[a][1]+=n,e.map[a][2].push(...r);return}a+=1}e.map.push([t,n,r])}}function Y2(e,t){let n=!1;const r=[];for(;t<e.length;){const a=e[t];if(n){if(a[0]==="enter")a[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(a[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const i=r.length-1;r[i]=r[i]==="left"?"center":"right"}}else if(a[1].type==="tableDelimiterRow")break}else a[0]==="enter"&&a[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}const K2={flow:{null:{tokenize:G2,resolveAll:W2}}};function G2(e,t,n){const r=this;let a=0,i=0,s;return c;function c(h){let y=r.events.length-1;for(;y>-1;){const S=r.events[y][1].type;if(S==="lineEnding"||S==="linePrefix")y--;else break}const b=y>-1?r.events[y][1].type:null,w=b==="tableHead"||b==="tableRow"?R:v;return w===R&&r.parser.lazy[r.now().line]?n(h):w(h)}function v(h){return e.enter("tableHead"),e.enter("tableRow"),u(h)}function u(h){return h===124||(s=!0,i+=1),m(h)}function m(h){return h===null?n(h):We(h)?i>1?(i=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),f):n(h):at(h)?lt(e,m,"whitespace")(h):(i+=1,s&&(s=!1,a+=1),h===124?(e.enter("tableCellDivider"),e.consume(h),e.exit("tableCellDivider"),s=!0,m):(e.enter("data"),o(h)))}function o(h){return h===null||h===124||kt(h)?(e.exit("data"),m(h)):(e.consume(h),h===92?l:o)}function l(h){return h===92||h===124?(e.consume(h),o):o(h)}function f(h){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(h):(e.enter("tableDelimiterRow"),s=!1,at(h)?lt(e,g,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(h):g(h))}function g(h){return h===45||h===58?C(h):h===124?(s=!0,e.enter("tableCellDivider"),e.consume(h),e.exit("tableCellDivider"),D):_(h)}function D(h){return at(h)?lt(e,C,"whitespace")(h):C(h)}function C(h){return h===58?(i+=1,s=!0,e.enter("tableDelimiterMarker"),e.consume(h),e.exit("tableDelimiterMarker"),M):h===45?(i+=1,M(h)):h===null||We(h)?j(h):_(h)}function M(h){return h===45?(e.enter("tableDelimiterFiller"),p(h)):_(h)}function p(h){return h===45?(e.consume(h),p):h===58?(s=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(h),e.exit("tableDelimiterMarker"),I):(e.exit("tableDelimiterFiller"),I(h))}function I(h){return at(h)?lt(e,j,"whitespace")(h):j(h)}function j(h){return h===124?g(h):h===null||We(h)?!s||a!==i?_(h):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(h)):_(h)}function _(h){return n(h)}function R(h){return e.enter("tableRow"),T(h)}function T(h){return h===124?(e.enter("tableCellDivider"),e.consume(h),e.exit("tableCellDivider"),T):h===null||We(h)?(e.exit("tableRow"),t(h)):at(h)?lt(e,T,"whitespace")(h):(e.enter("data"),A(h))}function A(h){return h===null||h===124||kt(h)?(e.exit("data"),T(h)):(e.consume(h),h===92?E:A)}function E(h){return h===92||h===124?(e.consume(h),A):A(h)}}function W2(e,t){let n=-1,r=!0,a=0,i=[0,0,0,0],s=[0,0,0,0],c=!1,v=0,u,m,o;const l=new q2;for(;++n<e.length;){const f=e[n],g=f[1];f[0]==="enter"?g.type==="tableHead"?(c=!1,v!==0&&(Nl(l,t,v,u,m),m=void 0,v=0),u={type:"table",start:Object.assign({},g.start),end:Object.assign({},g.end)},l.add(n,0,[["enter",u,t]])):g.type==="tableRow"||g.type==="tableDelimiterRow"?(r=!0,o=void 0,i=[0,0,0,0],s=[0,n+1,0,0],c&&(c=!1,m={type:"tableBody",start:Object.assign({},g.start),end:Object.assign({},g.end)},l.add(n,0,[["enter",m,t]])),a=g.type==="tableDelimiterRow"?2:m?3:1):a&&(g.type==="data"||g.type==="tableDelimiterMarker"||g.type==="tableDelimiterFiller")?(r=!1,s[2]===0&&(i[1]!==0&&(s[0]=s[1],o=Ki(l,t,i,a,void 0,o),i=[0,0,0,0]),s[2]=n)):g.type==="tableCellDivider"&&(r?r=!1:(i[1]!==0&&(s[0]=s[1],o=Ki(l,t,i,a,void 0,o)),i=s,s=[i[1],n,0,0])):g.type==="tableHead"?(c=!0,v=n):g.type==="tableRow"||g.type==="tableDelimiterRow"?(v=n,i[1]!==0?(s[0]=s[1],o=Ki(l,t,i,a,n,o)):s[1]!==0&&(o=Ki(l,t,s,a,n,o)),a=0):a&&(g.type==="data"||g.type==="tableDelimiterMarker"||g.type==="tableDelimiterFiller")&&(s[3]=n)}for(v!==0&&Nl(l,t,v,u,m),l.consume(t.events),n=-1;++n<t.events.length;){const f=t.events[n];f[0]==="enter"&&f[1].type==="table"&&(f[1]._align=Y2(t.events,n))}return e}function Ki(e,t,n,r,a,i){const s=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",c="tableContent";n[0]!==0&&(i.end=Object.assign({},zr(t.events,n[0])),e.add(n[0],0,[["exit",i,t]]));const v=zr(t.events,n[1]);if(i={type:s,start:Object.assign({},v),end:Object.assign({},v)},e.add(n[1],0,[["enter",i,t]]),n[2]!==0){const u=zr(t.events,n[2]),m=zr(t.events,n[3]),o={type:c,start:Object.assign({},u),end:Object.assign({},m)};if(e.add(n[2],0,[["enter",o,t]]),r!==2){const l=t.events[n[2]],f=t.events[n[3]];if(l[1].end=Object.assign({},f[1].end),l[1].type="chunkText",l[1].contentType="text",n[3]>n[2]+1){const g=n[2]+1,D=n[3]-n[2]-1;e.add(g,D,[])}}e.add(n[3]+1,0,[["exit",o,t]])}return a!==void 0&&(i.end=Object.assign({},zr(t.events,a)),e.add(a,0,[["exit",i,t]]),i=void 0),i}function Nl(e,t,n,r,a){const i=[],s=zr(t.events,n);a&&(a.end=Object.assign({},s),i.push(["exit",a,t])),r.end=Object.assign({},s),i.push(["exit",r,t]),e.add(n+1,0,i)}function zr(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const a1=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|title|textarea|xmp)(?=[\t\n\f\r />])/gi,Z2=new RegExp("^"+a1.source,"i"),Q2={exit:{htmlFlowData(e){Dl.call(this,e,a1)},htmlTextData(e){Dl.call(this,e,Z2)}}};function Dl(e,t){let n=this.sliceSerialize(e);this.options.allowDangerousHtml&&(n=n.replace(t,"&lt;$1$2")),this.raw(this.encode(n))}const J2={enter:{taskListCheck(){this.tag('<input type="checkbox" disabled="" ')}},exit:{taskListCheck(){this.tag("/>")},taskListCheckValueChecked(){this.tag('checked="" ')}}},$2={tokenize:tv},ev={text:{91:$2}};function tv(e,t,n){const r=this;return a;function a(v){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(v):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(v),e.exit("taskListCheckMarker"),i)}function i(v){return kt(v)?(e.enter("taskListCheckValueUnchecked"),e.consume(v),e.exit("taskListCheckValueUnchecked"),s):v===88||v===120?(e.enter("taskListCheckValueChecked"),e.consume(v),e.exit("taskListCheckValueChecked"),s):n(v)}function s(v){return v===93?(e.enter("taskListCheckMarker"),e.consume(v),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),c):n(v)}function c(v){return We(v)?t(v):at(v)?e.check({tokenize:nv},t,n)(v):n(v)}}function nv(e,t,n){return lt(e,r,"whitespace");function r(a){return a===null?n(a):t(a)}}function rv(e){return Hu([f2,T2(),z2(),K2,ev])}function iv(e){return Pu([S2,H2(),P2,V2,Q2,J2])}const jt={carriageReturn:-5,lineFeed:-4,carriageReturnLineFeed:-3,eof:null,greaterThan:62,atSign:64,backslash:92,degree:176},av=(e,t,n)=>{const r=s=>s===jt.carriageReturn||s===jt.lineFeed||s===jt.carriageReturnLineFeed||s===jt.eof?n(s):s===jt.backslash?(e.consume(s),a):s===jt.degree?(e.exit("underlineContent"),e.enter("underlineMarker"),e.consume(s),e.exit("underlineMarker"),e.exit("underline"),t):(e.consume(s),r),a=s=>s===jt.backslash||s===jt.degree?(e.consume(s),r):r(s),i=s=>s===jt.degree?n(s):r(s);return s=>(e.enter("underline"),e.enter("underlineMarker"),e.consume(s),e.exit("underlineMarker"),e.enter("underlineContent",{contentType:"string"}),i)},sv={name:"underline",tokenize:av},ov={text:{176:sv}},lv={enter:{underline(){this.tag("<u>")}},exit:{underline(){this.tag("</u>")}}},cv=(e,t,n)=>{const r=s=>s===jt.carriageReturn||s===jt.lineFeed||s===jt.carriageReturnLineFeed||s===jt.eof?n(s):s===jt.backslash?(e.consume(s),a):s===jt.greaterThan?(e.exit("usertagContent"),e.enter("usertagMarker"),e.consume(s),e.exit("usertagMarker"),e.exit("usertag"),t):(e.consume(s),r),a=s=>s===jt.backslash||s===jt.greaterThan?(e.consume(s),r):r(s),i=s=>s===jt.atSign?(e.consume(s),e.exit("usertagMarker"),e.enter("usertagContent"),r):n(s);return s=>(e.enter("usertag"),e.enter("usertagMarker"),e.consume(s),i)},uv={name:"usertag",tokenize:cv},dv={text:{60:uv}},mv=e=>({exit:{usertagContent(t){const n=this.sliceSerialize(t);this.tag(`<span class="vac-text-tag" data-user-id="${n}">`);const r=e.find(a=>a._id===n);this.raw(`@${this.encode(r?r.username:n)}`),this.tag("</span>")}}});var hv=(e,{textFormatting:t})=>{if(t){let n=[];t.linkify||(n=["literalAutolink","literalAutolinkEmail"]);const r=d2(e.replaceAll("<usertag>","<@").replaceAll("</usertag>",">"),{extensions:[{...rv(),disable:{null:n}},ov,dv],htmlExtensions:[iv(),lv,mv(t.users)]});if(t.singleLine){const a=document.createElement("div");return a.innerHTML=r,[{types:[],value:a.innerText}]}return[{types:["markdown"],value:r}]}return[{types:[],value:e}]};const Ro=["png","jpg","jpeg","webp","svg","gif"],s1=["mp4","video/ogg","webm","quicktime"],fv=["mp3","audio/ogg","wav","mpeg"],vv={name:"FormatMessage",components:{SvgIcon:Dt},props:{messageId:{type:String,default:""},roomId:{type:String,default:""},roomList:{type:Boolean,default:!1},content:{type:[String,Number],required:!0},deleted:{type:Boolean,default:!1},users:{type:Array,default:()=>[]},linkify:{type:Boolean,default:!0},singleLine:{type:Boolean,default:!1},reply:{type:Boolean,default:!1},textFormatting:{type:Object,required:!0},textMessages:{type:Object,default:()=>{}},linkOptions:{type:Object,required:!0}},emits:["open-user-tag"],computed:{parsedMessage(){if(this.deleted)return[{value:this.textMessages.MESSAGE_DELETED}];let e;this.textFormatting.disabled?e={}:e={textFormatting:{linkify:this.linkify,linkOptions:this.linkOptions,singleLine:this.singleLine,reply:this.reply,users:this.users,...this.textFormatting}};const t=hv(this.content,e);return t.forEach(n=>{n.markdown=this.checkType(n,"markdown"),n.tag=this.checkType(n,"tag"),n.image=this.checkImageType(n)}),t}},methods:{checkType(e,t){return e.types&&e.types.indexOf(t)!==-1},checkImageType(e){let t=e.value.lastIndexOf(".");e.value.lastIndexOf("/")>t&&(t=-1);const r=e.value.substring(t+1,e.value.length),a=t>0&&Ro.some(i=>r.toLowerCase().includes(i));return a&&this.setImageSize(e),a},setImageSize(e){const t=new Image;t.src=e.value,t.addEventListener("load",n);function n(r){const a=r.path[0].width/150;e.height=Math.round(r.path[0].height/a)+"px",t.removeEventListener("load",n)}},openTag(e){const t=e.target.getAttribute("data-user-id");if(!this.singleLine&&t){const n=this.users.find(r=>String(r._id)===t);this.$emit("open-user-tag",n)}}}},_v=["innerHTML"],pv={class:"vac-image-link-container"},gv={class:"vac-image-link-message"};function bv(e,t,n,r,a,i){const s=Ke("svg-icon");return $(),le("div",{class:rt(["vac-format-message-wrapper",{"vac-text-ellipsis":n.singleLine}])},[($(!0),le(st,null,nt(i.parsedMessage,(c,v)=>($(),le(st,{key:v},[c.markdown?($(),le("div",{key:0,class:"markdown",onClick:t[0]||(t[0]=(...u)=>i.openTag&&i.openTag(...u)),innerHTML:c.value},null,8,_v)):($(),le("div",{key:1,class:rt(["vac-format-container",{"vac-text-ellipsis":n.singleLine}])},[($(),ft(xd(c.url?"a":"span"),{class:rt({"vac-text-ellipsis":n.singleLine,"vac-text-tag":!n.singleLine&&!n.reply&&c.tag}),href:c.href,target:c.href?n.linkOptions.target:null,rel:c.href?n.linkOptions.rel:null},{default:Ge(()=>[n.deleted?($(),le(st,{key:0},[Ce(e.$slots,n.roomList?"deleted-icon-room_"+n.roomId:"deleted-icon_"+n.messageId,{},()=>[Oe(s,{name:"deleted",class:rt(["vac-icon-deleted",{"vac-icon-deleted-room":n.roomList}])},null,8,["class"])]),Vn(" "+$e(n.textMessages.MESSAGE_DELETED),1)],64)):c.url&&c.image?($(),le(st,{key:1},[Se("div",pv,[Se("div",{class:"vac-image-link",style:Mt({"background-image":`url('${c.value}')`,height:c.height})},null,4)]),Se("div",gv,$e(c.value),1)],64)):($(),le(st,{key:2},[Vn($e(c.value),1)],64))]),_:2},1032,["class","href","target","rel"]))],2))],64))),128))],2)}var ji=St(vv,[["render",bv]]);const Er="__v-click-outside",o1=typeof window<"u",yv=typeof navigator<"u",wv=o1&&("ontouchstart"in window||yv&&navigator.msMaxTouchPoints>0),kv=wv?["touchstart"]:["click"],Sv=e=>{const t=typeof e=="function";if(!t&&typeof e!="object")throw new Error("v-click-outside: Binding value must be a function or an object");return{handler:t?e:e.handler,middleware:e.middleware||(n=>n),events:e.events||kv,isActive:e.isActive!==!1,detectIframe:e.detectIframe!==!1,capture:!!e.capture}},l1=({event:e,handler:t,middleware:n})=>{n(e)&&t(e)},xv=({el:e,event:t,handler:n,middleware:r})=>{setTimeout(()=>{const{activeElement:a}=document;a&&a.tagName==="IFRAME"&&!e.contains(a)&&l1({event:t,handler:n,middleware:r})},0)},Mv=({el:e,event:t,handler:n,middleware:r})=>{const a=t.path||t.composedPath&&t.composedPath();(a?a.indexOf(e)<0:!e.contains(t.target))&&l1({event:t,handler:n,middleware:r})},c1=(e,{value:t})=>{const{events:n,handler:r,middleware:a,isActive:i,detectIframe:s,capture:c}=Sv(t);if(i){if(e[Er]=n.map(v=>({event:v,srcTarget:document.documentElement,handler:u=>Mv({el:e,event:u,handler:r,middleware:a}),capture:c})),s){const v={event:"blur",srcTarget:window,handler:u=>xv({el:e,event:u,handler:r,middleware:a}),capture:c};e[Er]=[...e[Er],v]}e[Er].forEach(({event:v,srcTarget:u,handler:m})=>setTimeout(()=>{e[Er]&&u.addEventListener(v,m,c)},0))}},u1=e=>{(e[Er]||[]).forEach(({event:n,srcTarget:r,handler:a,capture:i})=>r.removeEventListener(n,a,i)),delete e[Er]},Av=(e,{value:t,oldValue:n})=>{JSON.stringify(t)!==JSON.stringify(n)&&(u1(e),c1(e,{value:t}))},Ev={beforeMount:c1,updated:Av,unmounted:u1};var Ua=o1?Ev:{},d1=(e,t,n)=>{if(e.typingUsers&&e.typingUsers.length){const r=e.users.filter(a=>{if(a._id!==t&&e.typingUsers.indexOf(a._id)!==-1&&!(a.status&&a.status.state==="offline"))return!0});return r.length?e.users.length===2?n.IS_TYPING:r.map(a=>a.username).join(", ")+" "+n.IS_TYPING:void 0}};function Ri(e,t){if(!(!t||!t.type))return e.some(n=>t.type.toLowerCase().includes(n))}function Wr(e){return Ri(Ro,e)}function Ni(e){return Ri(s1,e)}function Hl(e){return Ri(Ro,e)||Ri(s1,e)}function qa(e){return Ri(fv,e)}const Tv={name:"RoomsContent",components:{SvgIcon:Dt,FormatMessage:ji},directives:{clickOutside:Ua},props:{currentUserId:{type:[String,Number],required:!0},room:{type:Object,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},textMessages:{type:Object,required:!0},roomActions:{type:Array,required:!0}},emits:["room-action-handler"],data(){return{roomMenuOpened:null}},computed:{getLastMessage(){const e=this.typingUsers;if(e)return e;const t=this.room.lastMessage.content;if(this.room.users.length<=2)return t;const n=this.room.users.find(r=>r._id===this.room.lastMessage.senderId);return this.room.lastMessage.username?`${this.room.lastMessage.username} - ${t}`:!n||n._id===this.currentUserId?t:`${n.username} - ${t}`},userStatus(){if(!this.room.users||this.room.users.length!==2)return;const e=this.room.users.find(t=>t._id!==this.currentUserId);return e&&e.status?e.status.state:null},typingUsers(){return d1(this.room,this.currentUserId,this.textMessages)},isMessageCheckmarkVisible(){return!this.typingUsers&&this.room.lastMessage&&!this.room.lastMessage.deleted&&this.room.lastMessage.senderId===this.currentUserId&&(this.room.lastMessage.saved||this.room.lastMessage.distributed||this.room.lastMessage.seen)},formattedDuration(){var e,t;const n=(t=(e=this.room.lastMessage)==null?void 0:e.files)==null?void 0:t[0];if(n){if(!n.duration)return`${n.name}.${n.extension}`;let r=Math.floor(n.duration);return(r-(r%=60))/60+(r>9?":":":0")+r}return""},isAudio(){return this.room.lastMessage.files?qa(this.room.lastMessage.files[0]):!1}},methods:{roomActionHandler(e){this.closeRoomMenu(),this.$emit("room-action-handler",{action:e,roomId:this.room.roomId})},closeRoomMenu(){this.roomMenuOpened=null}}},Rv={class:"vac-room-container"},Iv={class:"vac-name-container vac-text-ellipsis"},Cv={class:"vac-title-container"},Bv={class:"vac-room-name vac-text-ellipsis"},Fv={key:1,class:"vac-text-date"},Ov={key:0},Lv={key:1,class:"vac-text-ellipsis"},jv={key:3,class:"vac-text-ellipsis"},Nv={class:"vac-room-options-container"},Dv={key:0,class:"vac-badge-counter vac-room-badge"},Hv={key:0,class:"vac-menu-options"},Pv={class:"vac-menu-list"},zv=["onClick"];function Vv(e,t,n,r,a,i){const s=Ke("svg-icon"),c=Ke("format-message"),v=Na("click-outside");return $(),le("div",Rv,[Ce(e.$slots,"room-list-item_"+n.room.roomId,{},()=>[Ce(e.$slots,"room-list-avatar_"+n.room.roomId,{},()=>[n.room.avatar?($(),le("div",{key:0,class:"vac-avatar",style:Mt({"background-image":`url('${n.room.avatar}')`})},null,4)):Ie("",!0)]),Se("div",Iv,[Se("div",Cv,[i.userStatus?($(),le("div",{key:0,class:rt(["vac-state-circle",{"vac-state-online":i.userStatus==="online"}])},null,2)):Ie("",!0),Ce(e.$slots,"room-list-info_"+n.room.roomId,{},()=>[Se("div",Bv,$e(n.room.roomName),1)]),n.room.lastMessage?($(),le("div",Fv,$e(n.room.lastMessage.timestamp),1)):Ie("",!0)]),Se("div",{class:rt(["vac-text-last",{"vac-message-new":n.room.lastMessage&&n.room.lastMessage.new&&!i.typingUsers}])},[i.isMessageCheckmarkVisible?($(),le("span",Ov,[Ce(e.$slots,"checkmark-icon_"+n.room.roomId,{},()=>[Oe(s,{name:n.room.lastMessage.distributed?"double-checkmark":"checkmark",param:n.room.lastMessage.seen?"seen":"",class:"vac-icon-check"},null,8,["name","param"])])])):Ie("",!0),n.room.lastMessage&&!n.room.lastMessage.deleted&&i.isAudio?($(),le("div",Lv,[Ce(e.$slots,"microphone-icon_"+n.room.roomId,{},()=>[Oe(s,{name:"microphone",class:"vac-icon-microphone"})]),Vn(" "+$e(i.formattedDuration),1)])):n.room.lastMessage?($(),ft(c,{key:2,"message-id":n.room.lastMessage._id,"room-id":n.room.roomId,"room-list":!0,content:i.getLastMessage,deleted:!!n.room.lastMessage.deleted&&!i.typingUsers,users:n.room.users,"text-messages":n.textMessages,linkify:!1,"text-formatting":n.textFormatting,"link-options":n.linkOptions,"single-line":!0},gt({_:2},[nt(e.$slots,(u,m)=>({name:m,fn:Ge(o=>[Ce(e.$slots,m,pt(vt(o)))])}))]),1032,["message-id","room-id","content","deleted","users","text-messages","text-formatting","link-options"])):Ie("",!0),!n.room.lastMessage&&i.typingUsers?($(),le("div",jv,$e(i.typingUsers),1)):Ie("",!0),Se("div",Nv,[n.room.unreadCount?($(),le("div",Dv,$e(n.room.unreadCount),1)):Ie("",!0),Ce(e.$slots,"room-list-options_"+n.room.roomId,{},()=>[n.roomActions.length?($(),le("div",{key:0,class:"vac-svg-button vac-list-room-options",onClick:t[0]||(t[0]=Fn(u=>a.roomMenuOpened=n.room.roomId,["stop"]))},[Ce(e.$slots,"room-list-options-icon_"+n.room.roomId,{},()=>[Oe(s,{name:"dropdown",param:"room"})])])):Ie("",!0),n.roomActions.length?($(),ft(Bt,{key:1,name:"vac-slide-left"},{default:Ge(()=>[a.roomMenuOpened===n.room.roomId?zn(($(),le("div",Hv,[Se("div",Pv,[($(!0),le(st,null,nt(n.roomActions,u=>($(),le("div",{key:u.name},[Se("div",{class:"vac-menu-item",onClick:Fn(m=>i.roomActionHandler(u),["stop"])},$e(u.title),9,zv)]))),128))])])),[[v,i.closeRoomMenu]]):Ie("",!0)]),_:1})):Ie("",!0)])])],2)])])])}var Uv=St(Tv,[["render",Vv]]),wa=(e,t,n,r=!1)=>!n||n===""?e:e.filter(a=>r?Gi(a[t]).startsWith(Gi(n)):Gi(a[t]).includes(Gi(n)));function Gi(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}const qv={name:"RoomsList",components:{Loader:za,RoomsSearch:uh,RoomContent:Uv},props:{currentUserId:{type:[String,Number],required:!0},textMessages:{type:Object,required:!0},showRoomsList:{type:Boolean,required:!0},showSearch:{type:Boolean,required:!0},showAddRoom:{type:Boolean,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},isMobile:{type:Boolean,required:!0},rooms:{type:Array,required:!0},loadingRooms:{type:Boolean,required:!0},roomsLoaded:{type:Boolean,required:!0},room:{type:Object,required:!0},customSearchRoomEnabled:{type:[Boolean,String],default:!1},roomActions:{type:Array,required:!0},scrollDistance:{type:Number,required:!0},minimumVisibleRooms:{type:Number,default:10}},emits:["add-room","search-room","room-action-handler","loading-more-rooms","fetch-room","fetch-more-rooms"],data(){return{filter:null,observer:null,showLoader:!0,loadingMoreRooms:!1,selectedRoomId:""}},computed:{filteredRooms(){return wa(this.rooms||[],"roomName",this.filter)}},watch:{rooms:{deep:!0,handler(e=[],t=[]){const n=Array.isArray(e)?e.length:0,r=Array.isArray(t)?t.length:0;if((n!==r||this.roomsLoaded)&&(this.loadingMoreRooms=!1),this.roomsLoaded){this.showLoader=!1;return}const a=this.filteredRooms;!this.loadingMoreRooms&&a.length<this.minimumVisibleRooms&&(this.loadingMoreRooms=!0,this.loadMoreRooms())}},loadingRooms(e){e||setTimeout(()=>this.initIntersectionObserver())},loadingMoreRooms(e){this.$emit("loading-more-rooms",e)},roomsLoaded:{immediate:!0,handler(e){e&&(this.loadingMoreRooms=!1,this.loadingRooms||(this.showLoader=!1))}},room:{immediate:!0,handler(e){e&&!this.isMobile&&(this.selectedRoomId=e.roomId)}}},methods:{initIntersectionObserver(){this.observer&&(this.showLoader=!0,this.observer.disconnect());const e=this.$el.querySelector("#infinite-loader-rooms");if(e){const t={root:this.$el.querySelector("#rooms-list"),rootMargin:`${this.scrollDistance}px`,threshold:0};this.observer=new IntersectionObserver(n=>{n[0].isIntersecting&&this.loadMoreRooms()},t),this.observer.observe(e)}},searchRoom(e){this.filter=e.target.value,this.customSearchRoomEnabled?this.$emit("search-room",this.filter):this.filteredRooms=wa(this.rooms,"roomName",this.filter)},openRoom(e){e.roomId===this.room.roomId&&!this.isMobile||(this.isMobile||(this.selectedRoomId=e.roomId),this.$emit("fetch-room",{room:e}))},loadMoreRooms(){if(!this.loadingMoreRooms){if(this.roomsLoaded){this.loadingMoreRooms=!1,this.showLoader=!1;return}this.$emit("fetch-more-rooms"),this.loadingMoreRooms=!0}}}},Xv={key:0,class:"vac-rooms-empty"},Yv={key:1,id:"rooms-list",class:"vac-room-list"},Kv=["id","onClick"],Gv={key:0,id:"infinite-loader-rooms"};function Wv(e,t,n,r,a,i){const s=Ke("rooms-search"),c=Ke("loader"),v=Ke("room-content");return zn(($(),le("div",{class:rt(["vac-rooms-container",{"vac-rooms-container-full":n.isMobile,"vac-app-border-r":!n.isMobile}])},[Ce(e.$slots,"rooms-header"),Ce(e.$slots,"rooms-list-search",{},()=>[Oe(s,{"loading-rooms":n.loadingRooms,"text-messages":n.textMessages,"show-search":n.showSearch,"show-add-room":n.showAddRoom,onSearchRoom:i.searchRoom,onAddRoom:t[0]||(t[0]=u=>e.$emit("add-room"))},gt({_:2},[nt(e.$slots,(u,m)=>({name:m,fn:Ge(o=>[Ce(e.$slots,m,pt(vt(o)))])}))]),1032,["loading-rooms","text-messages","show-search","show-add-room","onSearchRoom"])]),Oe(c,{show:n.loadingRooms,type:"rooms"},gt({_:2},[nt(e.$slots,(u,m)=>({name:m,fn:Ge(o=>[Ce(e.$slots,m,pt(vt(o)))])}))]),1032,["show"]),!n.loadingRooms&&!n.rooms.length?($(),le("div",Xv,[Ce(e.$slots,"rooms-empty",{},()=>[Vn($e(n.textMessages.ROOMS_EMPTY),1)])])):Ie("",!0),n.loadingRooms?Ie("",!0):($(),le("div",Yv,[($(!0),le(st,null,nt(i.filteredRooms,u=>($(),le("div",{id:u.roomId,key:u.roomId,class:rt(["vac-room-item",{"vac-room-selected":a.selectedRoomId===u.roomId}]),onClick:m=>i.openRoom(u)},[Oe(v,{"current-user-id":n.currentUserId,room:u,"text-formatting":n.textFormatting,"link-options":n.linkOptions,"text-messages":n.textMessages,"room-actions":n.roomActions,onRoomActionHandler:t[1]||(t[1]=m=>e.$emit("room-action-handler",m))},gt({_:2},[nt(e.$slots,(m,o)=>({name:o,fn:Ge(l=>[Ce(e.$slots,o,pt(vt(l)))])}))]),1032,["current-user-id","room","text-formatting","link-options","text-messages","room-actions"])],10,Kv))),128)),Oe(Bt,{name:"vac-fade-message"},{default:Ge(()=>[n.rooms.length&&!n.loadingRooms?($(),le("div",Gv,[Oe(c,{show:a.showLoader,infinite:!0,type:"infinite-rooms"},gt({_:2},[nt(e.$slots,(u,m)=>({name:m,fn:Ge(o=>[Ce(e.$slots,m,pt(vt(o)))])}))]),1032,["show"])])):Ie("",!0)]),_:3})]))],2)),[[Pa,n.showRoomsList]])}var Zv=St(qv,[["render",Wv]]);const Qv={name:"RoomHeader",components:{SvgIcon:Dt},directives:{clickOutside:Ua},props:{currentUserId:{type:[String,Number],required:!0},textMessages:{type:Object,required:!0},singleRoom:{type:Boolean,required:!0},showRoomsList:{type:Boolean,required:!0},isMobile:{type:Boolean,required:!0},roomInfoEnabled:{type:Boolean,required:!0},menuActions:{type:Array,required:!0},room:{type:Object,required:!0},messageSelectionEnabled:{type:Boolean,required:!0},messageSelectionActions:{type:Array,required:!0},selectedMessagesTotal:{type:Number,required:!0}},emits:["toggle-rooms-list","room-info","menu-action-handler","cancel-message-selection","message-selection-action-handler"],data(){return{menuOpened:!1,messageSelectionAnimationEnded:!0}},computed:{typingUsers(){return d1(this.room,this.currentUserId,this.textMessages)},userStatus(){if(!this.room.users||this.room.users.length!==2)return;const e=this.room.users.find(n=>n._id!==this.currentUserId);if(!e?.status)return;let t="";return e.status.state==="online"?t=this.textMessages.IS_ONLINE:e.status.lastChanged&&(t=this.textMessages.LAST_SEEN+e.status.lastChanged),t}},watch:{messageSelectionEnabled(e){e?this.messageSelectionAnimationEnded=!1:setTimeout(()=>{this.messageSelectionAnimationEnded=!0},300)}},methods:{menuActionHandler(e){this.closeMenu(),this.$emit("menu-action-handler",e)},closeMenu(){this.menuOpened=!1},messageSelectionActionHandler(e){this.$emit("message-selection-action-handler",e)}}},Jv={class:"vac-room-header vac-app-border-b"},$v={class:"vac-room-wrapper"},e_={key:0,class:"vac-room-selection"},t_=["id"],n_=["onClick"],r_={class:"vac-selection-button-count"},i_={class:"vac-text-ellipsis"},a_={class:"vac-room-name vac-text-ellipsis"},s_={key:0,class:"vac-room-info vac-text-ellipsis"},o_={key:1,class:"vac-room-info vac-text-ellipsis"},l_={key:0,class:"vac-menu-options"},c_={class:"vac-menu-list"},u_=["onClick"];function d_(e,t,n,r,a,i){const s=Ke("svg-icon"),c=Na("click-outside");return $(),le("div",Jv,[Ce(e.$slots,"room-header",{},()=>[Se("div",$v,[Oe(Bt,{name:"vac-slide-up"},{default:Ge(()=>[n.messageSelectionEnabled?($(),le("div",e_,[($(!0),le(st,null,nt(n.messageSelectionActions,v=>($(),le("div",{id:v.name,key:v.name},[Se("div",{class:"vac-selection-button",onClick:u=>i.messageSelectionActionHandler(v)},[Vn($e(v.title)+" ",1),Se("span",r_,$e(n.selectedMessagesTotal),1)],8,n_)],8,t_))),128)),Se("div",{class:"vac-selection-cancel vac-item-clickable",onClick:t[0]||(t[0]=v=>e.$emit("cancel-message-selection"))},$e(n.textMessages.CANCEL_SELECT_MESSAGE),1)])):Ie("",!0)]),_:1}),!n.messageSelectionEnabled&&a.messageSelectionAnimationEnded?($(),le(st,{key:0},[n.singleRoom?Ie("",!0):($(),le("div",{key:0,class:rt(["vac-svg-button vac-toggle-button",{"vac-rotate-icon-init":!n.isMobile,"vac-rotate-icon":!n.showRoomsList&&!n.isMobile}]),onClick:t[1]||(t[1]=v=>e.$emit("toggle-rooms-list"))},[Ce(e.$slots,"toggle-icon",{},()=>[Oe(s,{name:"toggle"})])],2)),Se("div",{class:rt(["vac-info-wrapper",{"vac-item-clickable":n.roomInfoEnabled}]),onClick:t[2]||(t[2]=v=>e.$emit("room-info"))},[Ce(e.$slots,"room-header-avatar",{},()=>[n.room.avatar?($(),le("div",{key:0,class:"vac-avatar",style:Mt({"background-image":`url('${n.room.avatar}')`})},null,4)):Ie("",!0)]),Ce(e.$slots,"room-header-info",{},()=>[Se("div",i_,[Se("div",a_,$e(n.room.roomName),1),i.typingUsers?($(),le("div",s_,$e(i.typingUsers),1)):($(),le("div",o_,$e(i.userStatus),1))])])],2),n.room.roomId?Ce(e.$slots,"room-options",{key:1},()=>[n.menuActions.length?($(),le("div",{key:0,class:"vac-svg-button vac-room-options",onClick:t[3]||(t[3]=v=>a.menuOpened=!a.menuOpened)},[Ce(e.$slots,"menu-icon",{},()=>[Oe(s,{name:"menu"})])])):Ie("",!0),n.menuActions.length?($(),ft(Bt,{key:1,name:"vac-slide-left"},{default:Ge(()=>[a.menuOpened?zn(($(),le("div",l_,[Se("div",c_,[($(!0),le(st,null,nt(n.menuActions,v=>($(),le("div",{key:v.name},[Se("div",{class:"vac-menu-item",onClick:u=>i.menuActionHandler(v)},$e(v.title),9,u_)]))),128))])])),[[c,i.closeMenu]]):Ie("",!0)]),_:1})):Ie("",!0)]):Ie("",!0)],64)):Ie("",!0)])])])}var m_=St(Qv,[["render",d_]]);function Wi(e){if(typeof e!="string"||!e)throw new Error("expected a non-empty string, got: "+e)}function ms(e){if(typeof e!="number")throw new Error("expected a number, got: "+e)}const h_=1,f_=1,Fr="emoji",Zr="keyvalue",Io="favorites",v_="tokens",m1="tokens",__="unicode",h1="count",p_="group",g_="order",f1="group-order",Ys="eTag",ka="url",Pl="skinTone",$r="readonly",Co="readwrite",v1="skinUnicodes",b_="skinUnicodes",y_="https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",w_="en";function k_(e,t){const n=new Set,r=[];for(const a of e){const i=t(a);n.has(i)||(n.add(i),r.push(a))}return r}function zl(e){return k_(e,t=>t.unicode)}function S_(e){function t(n,r,a){const i=r?e.createObjectStore(n,{keyPath:r}):e.createObjectStore(n);if(a)for(const[s,[c,v]]of Object.entries(a))i.createIndex(s,c,{multiEntry:v});return i}t(Zr),t(Fr,__,{[m1]:[v_,!0],[f1]:[[p_,g_]],[v1]:[b_,!0]}),t(Io,void 0,{[h1]:[""]})}const Ks={},da={},Sa={};function _1(e,t,n){n.onerror=()=>t(n.error),n.onblocked=()=>t(new Error("IDB blocked")),n.onsuccess=()=>e(n.result)}async function x_(e){const t=await new Promise((n,r)=>{const a=indexedDB.open(e,h_);Ks[e]=a,a.onupgradeneeded=i=>{i.oldVersion<f_&&S_(a.result)},_1(n,r,a)});return t.onclose=()=>Bo(e),t}function M_(e){return da[e]||(da[e]=x_(e)),da[e]}function Yn(e,t,n,r){return new Promise((a,i)=>{const s=e.transaction(t,n,{durability:"relaxed"}),c=typeof t=="string"?s.objectStore(t):t.map(u=>s.objectStore(u));let v;r(c,s,u=>{v=u}),s.oncomplete=()=>a(v),s.onerror=()=>i(s.error)})}function Bo(e){const t=Ks[e],n=t&&t.result;if(n){n.close();const r=Sa[e];if(r)for(const a of r)a()}delete Ks[e],delete da[e],delete Sa[e]}function A_(e){return new Promise((t,n)=>{Bo(e);const r=indexedDB.deleteDatabase(e);_1(t,n,r)})}function E_(e,t){let n=Sa[e];n||(n=Sa[e]=[]),n.push(t)}const T_=new Set([":D","XD",":'D","O:)",":X",":P",";P","XP",":L",":Z",":j","8D","XO","8)",":B",":O",":S",":'o","Dx","X(","D:",":C",">0)",":3","</3","<3","\\M/",":E","8#"]);function Yr(e){return e.split(/[\s_]+/).map(t=>!t.match(/\w/)||T_.has(t)?t.toLowerCase():t.replace(/[)(:,]/g,"").replace(//g,"'").toLowerCase()).filter(Boolean)}const R_=2;function p1(e){return e.filter(Boolean).map(t=>t.toLowerCase()).filter(t=>t.length>=R_)}function I_(e){return e.map(({annotation:n,emoticon:r,group:a,order:i,shortcodes:s,skins:c,tags:v,emoji:u,version:m})=>{const o=[...new Set(p1([...(s||[]).map(Yr).flat(),...v.map(Yr).flat(),...Yr(n),r]))].sort(),l={annotation:n,group:a,order:i,tags:v,tokens:o,unicode:u,version:m};if(r&&(l.emoticon=r),s&&(l.shortcodes=s),c){l.skinTones=[],l.skinUnicodes=[],l.skinVersions=[];for(const{tone:f,emoji:g,version:D}of c)l.skinTones.push(f),l.skinUnicodes.push(g),l.skinVersions.push(D)}return l})}function g1(e,t,n,r){e[t](n).onsuccess=a=>r&&r(a.target.result)}function Br(e,t,n){g1(e,"get",t,n)}function b1(e,t,n){g1(e,"getAll",t,n)}function Fo(e){e.commit&&e.commit()}function C_(e,t){let n=e[0];for(let r=1;r<e.length;r++){const a=e[r];t(n)>t(a)&&(n=a)}return n}function y1(e,t){const n=C_(e,a=>a.length),r=[];for(const a of n)e.some(i=>i.findIndex(s=>t(s)===t(a))===-1)||r.push(a);return r}async function B_(e){return!await Oo(e,Zr,ka)}async function F_(e,t,n){const[r,a]=await Promise.all([Ys,ka].map(i=>Oo(e,Zr,i)));return r===n&&a===t}async function O_(e,t){return Yn(e,Fr,$r,(r,a,i)=>{let s;const c=()=>{r.getAll(s&&IDBKeyRange.lowerBound(s,!0),50).onsuccess=v=>{const u=v.target.result;for(const m of u)if(s=m.unicode,t(m))return i(m);if(u.length<50)return i();c()}};c()})}async function w1(e,t,n,r){try{const a=I_(t);await Yn(e,[Fr,Zr],Co,([i,s],c)=>{let v,u,m=0;function o(){++m===2&&l()}function l(){if(!(v===r&&u===n)){i.clear();for(const f of a)i.put(f);s.put(r,Ys),s.put(n,ka),Fo(c)}}Br(s,Ys,f=>{v=f,o()}),Br(s,ka,f=>{u=f,o()})})}finally{}}async function L_(e,t){return Yn(e,Fr,$r,(n,r,a)=>{const i=IDBKeyRange.bound([t,0],[t+1,0],!1,!0);b1(n.index(f1),i,a)})}async function k1(e,t){const n=p1(Yr(t));return n.length?Yn(e,Fr,$r,(r,a,i)=>{const s=[],c=()=>{s.length===n.length&&v()},v=()=>{const u=y1(s,m=>m.unicode);i(u.sort((m,o)=>m.order<o.order?-1:1))};for(let u=0;u<n.length;u++){const m=n[u],o=u===n.length-1?IDBKeyRange.bound(m,m+"",!1,!0):IDBKeyRange.only(m);b1(r.index(m1),o,l=>{s.push(l),c()})}}):[]}async function j_(e,t){const n=await k1(e,t);return n.length?n.filter(r=>(r.shortcodes||[]).map(i=>i.toLowerCase()).includes(t.toLowerCase()))[0]||null:await O_(e,a=>(a.shortcodes||[]).includes(t.toLowerCase()))||null}async function N_(e,t){return Yn(e,Fr,$r,(n,r,a)=>Br(n,t,i=>{if(i)return a(i);Br(n.index(v1),t,s=>a(s||null))}))}function Oo(e,t,n){return Yn(e,t,$r,(r,a,i)=>Br(r,n,i))}function D_(e,t,n,r){return Yn(e,t,Co,(a,i)=>{a.put(r,n),Fo(i)})}function H_(e,t){return Yn(e,Io,Co,(n,r)=>Br(n,t,a=>{n.put((a||0)+1,t),Fo(r)}))}function P_(e,t,n){return n===0?[]:Yn(e,[Io,Fr],$r,([r,a],i,s)=>{const c=[];r.index(h1).openCursor(void 0,"prev").onsuccess=v=>{const u=v.target.result;if(!u)return s(c);function m(f){if(c.push(f),c.length===n)return s(c);u.continue()}const o=u.primaryKey,l=t.byName(o);if(l)return m(l);Br(a,o,f=>{if(f)return m(f);u.continue()})}})}const Zi="";function z_(e,t){const n=new Map;for(const a of e){const i=t(a);for(const s of i){let c=n;for(let u=0;u<s.length;u++){const m=s.charAt(u);let o=c.get(m);o||(o=new Map,c.set(m,o)),c=o}let v=c.get(Zi);v||(v=[],c.set(Zi,v)),v.push(a)}}return(a,i)=>{let s=n;for(let u=0;u<a.length;u++){const m=a.charAt(u),o=s.get(m);if(o)s=o;else return[]}if(i)return s.get(Zi)||[];const c=[],v=[s];for(;v.length;){const m=[...v.shift().entries()].sort((o,l)=>o[0]<l[0]?-1:1);for(const[o,l]of m)o===Zi?c.push(...l):v.push(l)}return c}}const V_=["name","url"];function U_(e){const t=e&&Array.isArray(e),n=t&&e.length&&(!e[0]||V_.some(r=>!(r in e[0])));if(!t||n)throw new Error("Custom emojis are in the wrong format")}function Vl(e){U_(e);const t=(l,f)=>l.name.toLowerCase()<f.name.toLowerCase()?-1:1,n=e.sort(t),a=z_(e,l=>[...new Set((l.shortcodes||[]).map(f=>Yr(f)).flat())]),i=l=>a(l,!0),s=l=>a(l,!1),c=l=>{const f=Yr(l),g=f.map((D,C)=>(C<f.length-1?i:s)(D));return y1(g,D=>D.name).sort(t)},v=new Map,u=new Map;for(const l of e){u.set(l.name.toLowerCase(),l);for(const f of l.shortcodes||[])v.set(f.toLowerCase(),l)}return{all:n,search:c,byShortcode:l=>v.get(l.toLowerCase()),byName:l=>u.get(l.toLowerCase())}}function si(e){if(!e)return e;if(delete e.tokens,e.skinTones){const t=e.skinTones.length;e.skins=Array(t);for(let n=0;n<t;n++)e.skins[n]={tone:e.skinTones[n],unicode:e.skinUnicodes[n],version:e.skinVersions[n]};delete e.skinTones,delete e.skinUnicodes,delete e.skinVersions}return e}function S1(e){e||console.warn("emoji-picker-element is more efficient if the dataSource server exposes an ETag header.")}const q_=["annotation","emoji","group","order","tags","version"];function X_(e){if(!e||!Array.isArray(e)||!e[0]||typeof e[0]!="object"||q_.some(t=>!(t in e[0])))throw new Error("Emoji data is in the wrong format")}function x1(e,t){if(Math.floor(e.status/100)!==2)throw new Error("Failed to fetch: "+t+":  "+e.status)}async function Y_(e){const t=await fetch(e,{method:"HEAD"});x1(t,e);const n=t.headers.get("etag");return S1(n),n}async function Gs(e){const t=await fetch(e);x1(t,e);const n=t.headers.get("etag");S1(n);const r=await t.json();return X_(r),[n,r]}function K_(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,a=-1;++a<r;)t+=String.fromCharCode(n[a]);return t}function G_(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),a=-1;++a<t;)r[a]=e.charCodeAt(a);return n}async function M1(e){const t=JSON.stringify(e),n=G_(t),r=await crypto.subtle.digest("SHA-1",n),a=K_(r);return btoa(a)}async function W_(e,t){let n,r=await Y_(t);if(!r){const a=await Gs(t);r=a[0],n=a[1],r||(r=await M1(n))}await F_(e,t,r)||(n||(n=(await Gs(t))[1]),await w1(e,n,t,r))}async function Z_(e,t){let[n,r]=await Gs(t);n||(n=await M1(r)),await w1(e,r,t,n)}class A1{constructor({dataSource:t=y_,locale:n=w_,customEmoji:r=[]}={}){this.dataSource=t,this.locale=n,this._dbName=`emoji-picker-element-${this.locale}`,this._db=void 0,this._lazyUpdate=void 0,this._custom=Vl(r),this._clear=this._clear.bind(this),this._ready=this._init()}async _init(){const t=this._db=await M_(this._dbName);E_(this._dbName,this._clear);const n=this.dataSource;await B_(t)?await Z_(t,n):this._lazyUpdate=W_(t,n)}async ready(){const t=async()=>(this._ready||(this._ready=this._init()),this._ready);await t(),this._db||await t()}async getEmojiByGroup(t){return ms(t),await this.ready(),zl(await L_(this._db,t)).map(si)}async getEmojiBySearchQuery(t){Wi(t),await this.ready();const n=this._custom.search(t),r=zl(await k1(this._db,t)).map(si);return[...n,...r]}async getEmojiByShortcode(t){Wi(t),await this.ready();const n=this._custom.byShortcode(t);return n||si(await j_(this._db,t))}async getEmojiByUnicodeOrName(t){Wi(t),await this.ready();const n=this._custom.byName(t);return n||si(await N_(this._db,t))}async getPreferredSkinTone(){return await this.ready(),await Oo(this._db,Zr,Pl)||0}async setPreferredSkinTone(t){return ms(t),await this.ready(),D_(this._db,Zr,Pl,t)}async incrementFavoriteEmojiCount(t){return Wi(t),await this.ready(),H_(this._db,t)}async getTopFavoriteEmoji(t){return ms(t),await this.ready(),(await P_(this._db,this._custom,t)).map(si)}set customEmoji(t){this._custom=Vl(t)}get customEmoji(){return this._custom.all}async _shutdown(){await this.ready();try{await this._lazyUpdate}catch{}}_clear(){this._db=this._ready=this._lazyUpdate=void 0}async close(){await this._shutdown(),await Bo(this._dbName)}async delete(){await this._shutdown(),await A_(this._dbName)}}function Ii(){}function E1(e){return e()}function Ul(){return Object.create(null)}function Di(e){e.forEach(E1)}function T1(e){return typeof e=="function"}function Q_(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Qi;function xa(e,t){return Qi||(Qi=document.createElement("a")),Qi.href=t,e===Qi.href}function J_(e){return Object.keys(e).length===0}function $_(e){return e&&T1(e.destroy)?e.destroy:Ii}function yt(e,t){e.appendChild(t)}function kn(e,t,n){e.insertBefore(t,n||null)}function Sn(e){e.parentNode.removeChild(e)}function _t(e){return document.createElement(e)}function Cn(e){return document.createTextNode(e)}function gn(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function ie(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Bn(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function ql(e,t){e.value=t??""}function Wn(e,t,n,r){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,"")}let Lo;function ki(e){Lo=e}const hi=[],Vr=[],ma=[],Xl=[],R1=Promise.resolve();let Ws=!1;function I1(){Ws||(Ws=!0,R1.then(C1))}function ep(){return I1(),R1}function Zs(e){ma.push(e)}const hs=new Set;let Ji=0;function C1(){const e=Lo;do{for(;Ji<hi.length;){const t=hi[Ji];Ji++,ki(t),tp(t.$$)}for(ki(null),hi.length=0,Ji=0;Vr.length;)Vr.pop()();for(let t=0;t<ma.length;t+=1){const n=ma[t];hs.has(n)||(hs.add(n),n())}ma.length=0}while(hi.length);for(;Xl.length;)Xl.pop()();Ws=!1,hs.clear(),ki(e)}function tp(e){if(e.fragment!==null){e.update(),Di(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Zs)}}const np=new Set;function rp(e,t){e&&e.i&&(np.delete(e),e.i(t))}const ip=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function fi(e,t){e.d(1),t.delete(e.key)}function vi(e,t,n,r,a,i,s,c,v,u,m,o){let l=e.length,f=i.length,g=l;const D={};for(;g--;)D[e[g].key]=g;const C=[],M=new Map,p=new Map;for(g=f;g--;){const R=o(a,i,g),T=n(R);let A=s.get(T);A?A.p(R,t):(A=u(T,R),A.c()),M.set(T,C[g]=A),T in D&&p.set(T,Math.abs(g-D[T]))}const I=new Set,j=new Set;function _(R){rp(R,1),R.m(c,m),s.set(R.key,R),m=R.first,f--}for(;l&&f;){const R=C[f-1],T=e[l-1],A=R.key,E=T.key;R===T?(m=R.first,l--,f--):M.has(E)?!s.has(A)||I.has(A)?_(R):j.has(E)?l--:p.get(A)>p.get(E)?(j.add(A),_(R)):(I.add(E),l--):(v(T,s),l--)}for(;l--;){const R=e[l];M.has(R.key)||v(R,s)}for(;f;)_(C[f-1]);return C}function ap(e,t,n,r){const{fragment:a,on_mount:i,on_destroy:s,after_update:c}=e.$$;a&&a.m(t,n),Zs(()=>{const v=i.map(E1).filter(T1);s?s.push(...v):Di(v),e.$$.on_mount=[]}),c.forEach(Zs)}function sp(e,t){const n=e.$$;n.fragment!==null&&(Di(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function op(e,t){e.$$.dirty[0]===-1&&(hi.push(e),I1(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function lp(e,t,n,r,a,i,s,c=[-1]){const v=Lo;ki(e);const u=e.$$={fragment:null,ctx:null,props:i,update:Ii,not_equal:a,bound:Ul(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(v?v.$$.context:[]),callbacks:Ul(),dirty:c,skip_bound:!1,root:t.target||v.$$.root};let m=!1;u.ctx=n?n(e,t.props||{},(o,l,...f)=>{const g=f.length?f[0]:l;return u.ctx&&a(u.ctx[o],u.ctx[o]=g)&&(!u.skip_bound&&u.bound[o]&&u.bound[o](g),m&&op(e,o)),l}):[],u.update(),m=!0,Di(u.before_update),u.fragment=r?r(u.ctx):!1,t.target&&(u.fragment&&u.fragment.c(),ap(e,t.target,void 0),C1()),ki(v)}class cp{$destroy(){sp(this,1),this.$destroy=Ii}$on(t,n){const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const a=r.indexOf(n);a!==-1&&r.splice(a,1)}}$set(t){this.$$set&&!J_(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const B1=[[-1,"","custom"],[0,"","smileys-emotion"],[1,"","people-body"],[3,"","animals-nature"],[4,"","food-drink"],[5,"","travel-places"],[6,"","activities"],[7,"","objects"],[8,"","symbols"],[9,"","flags"]].map(([e,t,n])=>({id:e,emoji:t,name:n})),$i=B1.slice(1),up=B1[0],dp=2,Yl=6,F1=typeof requestIdleCallback=="function"?requestIdleCallback:setTimeout;function Kl(e){return e.unicode.includes("")}const mp={"":14,"":13.1,"":12.1,"":11,"":5,"":4,"":3,"":2,"":1,"":.7,"":.6},hp=1e3,fp="",vp=8,_p=["","","","","","","","","","","","","",""],O1='"Twemoji Mozilla","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji","EmojiOne Color","Android Emoji",sans-serif',pp=(e,t)=>e<t?-1:e>t?1:0,Gl=(e,t)=>{const n=document.createElement("canvas");n.width=n.height=1;const r=n.getContext("2d");return r.textBaseline="top",r.font=`100px ${O1}`,r.fillStyle=t,r.scale(.01,.01),r.fillText(e,0,0),r.getImageData(0,0,1,1).data},gp=(e,t)=>{const n=[...e].join(","),r=[...t].join(",");return n===r&&!n.startsWith("0,0,0,")};function bp(e){const t=Gl(e,"#000"),n=Gl(e,"#fff");return t&&n&&gp(t,n)}function yp(){const e=Object.entries(mp);try{for(const[t,n]of e)if(bp(t))return n}catch{}finally{}return e[0][1]}const fs=new Promise(e=>F1(()=>e(yp()))),Qs=new Map,wp="",kp="\uD83C",Sp="",xp=127995,Mp=57339;function Ap(e,t){if(t===0)return e;const n=e.indexOf(Sp);return n!==-1?e.substring(0,n)+String.fromCodePoint(xp+t-1)+e.substring(n):(e.endsWith(wp)&&(e=e.substring(0,e.length-1)),e+kp+String.fromCodePoint(Mp+t-1))}function Zn(e){e.preventDefault(),e.stopPropagation()}function vs(e,t,n){return t+=e?-1:1,t<0?t=n.length-1:t>=n.length&&(t=0),t}function L1(e,t){const n=new Set,r=[];for(const a of e){const i=t(a);n.has(i)||(n.add(i),r.push(a))}return r}function Ep(e,t){const n=r=>{const a={};for(const i of r)typeof i.tone=="number"&&i.version<=t&&(a[i.tone]=i.unicode);return a};return e.map(({unicode:r,skins:a,shortcodes:i,url:s,name:c,category:v})=>({unicode:r,name:c,shortcodes:i,url:s,category:v,id:r||c,skins:a&&n(a),title:(i||[]).join(", ")}))}const ha=requestAnimationFrame;let Tp=typeof ResizeObserver=="function";function Rp(e,t){let n;return Tp?(n=new ResizeObserver(r=>t(r[0].contentRect.width)),n.observe(e)):ha(()=>t(e.getBoundingClientRect().width)),{destroy(){n&&n.disconnect()}}}function Wl(e){{const t=document.createRange();return t.selectNode(e.firstChild),t.getBoundingClientRect().width}}let _s;function Ip(e,t,n){for(const r of e){const a=n(r),i=Wl(a);typeof _s>"u"&&(_s=Wl(t));const s=i/1.8<_s;Qs.set(r.unicode,s)}}function Cp(e){return L1(e,t=>t)}const{Map:_i}=ip;function Zl(e,t,n){const r=e.slice();return r[63]=t[n],r[65]=n,r}function Ql(e,t,n){const r=e.slice();return r[66]=t[n],r[65]=n,r}function Jl(e,t,n){const r=e.slice();return r[63]=t[n],r[65]=n,r}function $l(e,t,n){const r=e.slice();return r[69]=t[n],r}function ec(e,t,n){const r=e.slice();return r[72]=t[n],r[65]=n,r}function tc(e,t){let n,r=t[72]+"",a,i,s,c,v,u;return{key:e,first:null,c(){n=_t("div"),a=Cn(r),ie(n,"id",i="skintone-"+t[65]),ie(n,"class",s="emoji hide-focus "+(t[65]===t[20]?"active":"")),ie(n,"aria-selected",c=t[65]===t[20]),ie(n,"role","option"),ie(n,"title",v=t[0].skinTones[t[65]]),ie(n,"tabindex","-1"),ie(n,"aria-label",u=t[0].skinTones[t[65]]),this.first=n},m(m,o){kn(m,n,o),yt(n,a)},p(m,o){t=m,o[0]&512&&r!==(r=t[72]+"")&&Bn(a,r),o[0]&512&&i!==(i="skintone-"+t[65])&&ie(n,"id",i),o[0]&1049088&&s!==(s="emoji hide-focus "+(t[65]===t[20]?"active":""))&&ie(n,"class",s),o[0]&1049088&&c!==(c=t[65]===t[20])&&ie(n,"aria-selected",c),o[0]&513&&v!==(v=t[0].skinTones[t[65]])&&ie(n,"title",v),o[0]&513&&u!==(u=t[0].skinTones[t[65]])&&ie(n,"aria-label",u)},d(m){m&&Sn(n)}}}function nc(e,t){let n,r,a=t[69].emoji+"",i,s,c,v,u,m,o;function l(){return t[49](t[69])}return{key:e,first:null,c(){n=_t("button"),r=_t("div"),i=Cn(a),ie(r,"class","nav-emoji emoji"),ie(n,"role","tab"),ie(n,"class","nav-button"),ie(n,"aria-controls",s="tab-"+t[69].id),ie(n,"aria-label",c=t[0].categories[t[69].name]),ie(n,"aria-selected",v=!t[4]&&t[13].id===t[69].id),ie(n,"title",u=t[0].categories[t[69].name]),this.first=n},m(f,g){kn(f,n,g),yt(n,r),yt(r,i),m||(o=gn(n,"click",l),m=!0)},p(f,g){t=f,g[0]&4096&&a!==(a=t[69].emoji+"")&&Bn(i,a),g[0]&4096&&s!==(s="tab-"+t[69].id)&&ie(n,"aria-controls",s),g[0]&4097&&c!==(c=t[0].categories[t[69].name])&&ie(n,"aria-label",c),g[0]&12304&&v!==(v=!t[4]&&t[13].id===t[69].id)&&ie(n,"aria-selected",v),g[0]&4097&&u!==(u=t[0].categories[t[69].name])&&ie(n,"title",u)},d(f){f&&Sn(n),m=!1,o()}}}function Bp(e){let t,n;return{c(){t=_t("img"),ie(t,"class","custom-emoji"),xa(t.src,n=e[63].url)||ie(t,"src",n),ie(t,"alt",""),ie(t,"loading","lazy")},m(r,a){kn(r,t,a)},p(r,a){a[0]&32768&&!xa(t.src,n=r[63].url)&&ie(t,"src",n)},d(r){r&&Sn(t)}}}function Fp(e){let t=e[27](e[63],e[8])+"",n;return{c(){n=Cn(t)},m(r,a){kn(r,n,a)},p(r,a){a[0]&33024&&t!==(t=r[27](r[63],r[8])+"")&&Bn(n,t)},d(r){r&&Sn(n)}}}function rc(e,t){let n,r,a,i,s,c,v;function u(l,f){return l[63].unicode?Fp:Bp}let m=u(t),o=m(t);return{key:e,first:null,c(){n=_t("button"),o.c(),ie(n,"role",r=t[4]?"option":"menuitem"),ie(n,"aria-selected",a=t[4]?t[65]==t[5]:""),ie(n,"aria-label",i=t[28](t[63],t[8])),ie(n,"title",s=t[63].title),ie(n,"class",c="emoji "+(t[4]&&t[65]===t[5]?"active":"")),ie(n,"id",v="emo-"+t[63].id),this.first=n},m(l,f){kn(l,n,f),o.m(n,null)},p(l,f){t=l,m===(m=u(t))&&o?o.p(t,f):(o.d(1),o=m(t),o&&(o.c(),o.m(n,null))),f[0]&16&&r!==(r=t[4]?"option":"menuitem")&&ie(n,"role",r),f[0]&32816&&a!==(a=t[4]?t[65]==t[5]:"")&&ie(n,"aria-selected",a),f[0]&33024&&i!==(i=t[28](t[63],t[8]))&&ie(n,"aria-label",i),f[0]&32768&&s!==(s=t[63].title)&&ie(n,"title",s),f[0]&32816&&c!==(c="emoji "+(t[4]&&t[65]===t[5]?"active":""))&&ie(n,"class",c),f[0]&32768&&v!==(v="emo-"+t[63].id)&&ie(n,"id",v)},d(l){l&&Sn(n),o.d()}}}function ic(e,t){let n,r=(t[4]?t[0].searchResultsLabel:t[66].category?t[66].category:t[15].length>1?t[0].categories.custom:t[0].categories[t[13].name])+"",a,i,s,c,v=[],u=new _i,m,o,l,f=t[66].emojis;const g=D=>D[63].id;for(let D=0;D<f.length;D+=1){let C=Jl(t,f,D),M=g(C);u.set(M,v[D]=rc(M,C))}return{key:e,first:null,c(){n=_t("div"),a=Cn(r),c=_t("div");for(let D=0;D<v.length;D+=1)v[D].c();ie(n,"id",i="menu-label-"+t[65]),ie(n,"class",s="category "+(t[15].length===1&&t[15][0].category===""?"gone":"")),ie(n,"aria-hidden","true"),ie(c,"class","emoji-menu"),ie(c,"role",m=t[4]?"listbox":"menu"),ie(c,"aria-labelledby",o="menu-label-"+t[65]),ie(c,"id",l=t[4]?"search-results":""),this.first=n},m(D,C){kn(D,n,C),yt(n,a),kn(D,c,C);for(let M=0;M<v.length;M+=1)v[M].m(c,null)},p(D,C){t=D,C[0]&40977&&r!==(r=(t[4]?t[0].searchResultsLabel:t[66].category?t[66].category:t[15].length>1?t[0].categories.custom:t[0].categories[t[13].name])+"")&&Bn(a,r),C[0]&32768&&i!==(i="menu-label-"+t[65])&&ie(n,"id",i),C[0]&32768&&s!==(s="category "+(t[15].length===1&&t[15][0].category===""?"gone":""))&&ie(n,"class",s),C[0]&402686256&&(f=t[66].emojis,v=vi(v,C,g,1,t,f,u,c,fi,rc,null,Jl)),C[0]&16&&m!==(m=t[4]?"listbox":"menu")&&ie(c,"role",m),C[0]&32768&&o!==(o="menu-label-"+t[65])&&ie(c,"aria-labelledby",o),C[0]&16&&l!==(l=t[4]?"search-results":"")&&ie(c,"id",l)},d(D){D&&Sn(n),D&&Sn(c);for(let C=0;C<v.length;C+=1)v[C].d()}}}function Op(e){let t,n;return{c(){t=_t("img"),ie(t,"class","custom-emoji"),xa(t.src,n=e[63].url)||ie(t,"src",n),ie(t,"alt",""),ie(t,"loading","lazy")},m(r,a){kn(r,t,a)},p(r,a){a[0]&1024&&!xa(t.src,n=r[63].url)&&ie(t,"src",n)},d(r){r&&Sn(t)}}}function Lp(e){let t=e[27](e[63],e[8])+"",n;return{c(){n=Cn(t)},m(r,a){kn(r,n,a)},p(r,a){a[0]&1280&&t!==(t=r[27](r[63],r[8])+"")&&Bn(n,t)},d(r){r&&Sn(n)}}}function ac(e,t){let n,r,a,i;function s(u,m){return u[63].unicode?Lp:Op}let c=s(t),v=c(t);return{key:e,first:null,c(){n=_t("button"),v.c(),ie(n,"role","menuitem"),ie(n,"aria-label",r=t[28](t[63],t[8])),ie(n,"title",a=t[63].title),ie(n,"class","emoji"),ie(n,"id",i="fav-"+t[63].id),this.first=n},m(u,m){kn(u,n,m),v.m(n,null)},p(u,m){t=u,c===(c=s(t))&&v?v.p(t,m):(v.d(1),v=c(t),v&&(v.c(),v.m(n,null))),m[0]&1280&&r!==(r=t[28](t[63],t[8]))&&ie(n,"aria-label",r),m[0]&1024&&a!==(a=t[63].title)&&ie(n,"title",a),m[0]&1024&&i!==(i="fav-"+t[63].id)&&ie(n,"id",i)},d(u){u&&Sn(n),v.d()}}}function jp(e){let t,n,r,a,i,s,c,v,u,m=e[0].searchLabel+"",o,l,f=e[0].searchDescription+"",g,D,C,M,p,I,j,_=e[0].skinToneDescription+"",R,T,A=[],E=new _i,h,y,b,w,S,k=[],N=new _i,Y,H,q,d,x,W,B,he,Ae=[],ge=new _i,_e,He,Ee,fe,Xe,V=[],X=new _i,te,ce,ue,be,Te,ke,xe=e[9];const pe=de=>de[72];for(let de=0;de<xe.length;de+=1){let Me=ec(e,xe,de),re=pe(Me);E.set(re,A[de]=tc(re,Me))}let ze=e[12];const De=de=>de[69].id;for(let de=0;de<ze.length;de+=1){let Me=$l(e,ze,de),re=De(Me);N.set(re,k[de]=nc(re,Me))}let je=e[15];const Ve=de=>de[66].category;for(let de=0;de<je.length;de+=1){let Me=Ql(e,je,de),re=Ve(Me);ge.set(re,Ae[de]=ic(re,Me))}let qe=e[10];const Ze=de=>de[63].id;for(let de=0;de<qe.length;de+=1){let Me=Zl(e,qe,de),re=Ze(Me);X.set(re,V[de]=ac(re,Me))}return{c(){t=_t("section"),n=_t("div"),r=_t("div"),a=_t("div"),i=_t("input"),u=_t("label"),o=Cn(m),l=_t("span"),g=Cn(f),D=_t("div"),C=_t("button"),M=Cn(e[21]),j=_t("span"),R=Cn(_),T=_t("div");for(let de=0;de<A.length;de+=1)A[de].c();S=_t("div");for(let de=0;de<k.length;de+=1)k[de].c();H=_t("div"),q=_t("div"),d=_t("div"),x=Cn(e[18]),B=_t("div"),he=_t("div");for(let de=0;de<Ae.length;de+=1)Ae[de].c();Xe=_t("div");for(let de=0;de<V.length;de+=1)V[de].c();ue=_t("button"),ue.textContent="",ie(n,"class","pad-top"),ie(i,"id","search"),ie(i,"class","search"),ie(i,"type","search"),ie(i,"role","combobox"),ie(i,"enterkeyhint","search"),ie(i,"placeholder",s=e[0].searchLabel),ie(i,"autocapitalize","none"),ie(i,"autocomplete","off"),ie(i,"spellcheck","true"),ie(i,"aria-expanded",c=!!(e[4]&&e[1].length)),ie(i,"aria-controls","search-results"),ie(i,"aria-describedby","search-description"),ie(i,"aria-autocomplete","list"),ie(i,"aria-activedescendant",v=e[26]?`emo-${e[26]}`:""),ie(u,"class","sr-only"),ie(u,"for","search"),ie(l,"id","search-description"),ie(l,"class","sr-only"),ie(a,"class","search-wrapper"),ie(C,"id","skintone-button"),ie(C,"class",p="emoji "+(e[6]?"hide-focus":"")),ie(C,"aria-label",e[23]),ie(C,"title",e[23]),ie(C,"aria-describedby","skintone-description"),ie(C,"aria-haspopup","listbox"),ie(C,"aria-expanded",e[6]),ie(C,"aria-controls","skintone-list"),ie(D,"class",I="skintone-button-wrapper "+(e[19]?"expanded":"")),ie(j,"id","skintone-description"),ie(j,"class","sr-only"),ie(T,"id","skintone-list"),ie(T,"class",h="skintone-list "+(e[6]?"":"hidden no-animate")),Wn(T,"transform","translateY("+(e[6]?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))")+")"),ie(T,"role","listbox"),ie(T,"aria-label",y=e[0].skinTonesLabel),ie(T,"aria-activedescendant",b="skintone-"+e[20]),ie(T,"aria-hidden",w=!e[6]),ie(r,"class","search-row"),ie(S,"class","nav"),ie(S,"role","tablist"),Wn(S,"grid-template-columns","repeat("+e[12].length+", 1fr)"),ie(S,"aria-label",Y=e[0].categoriesLabel),ie(q,"class","indicator"),Wn(q,"transform","translateX("+(e[24]?-1:1)*e[11]*100+"%)"),ie(H,"class","indicator-wrapper"),ie(d,"class",W="message "+(e[18]?"":"gone")),ie(d,"role","alert"),ie(d,"aria-live","polite"),ie(B,"class",_e="tabpanel "+(!e[14]||e[18]?"gone":"")),ie(B,"role",He=e[4]?"region":"tabpanel"),ie(B,"aria-label",Ee=e[4]?e[0].searchResultsLabel:e[0].categories[e[13].name]),ie(B,"id",fe=e[4]?"":`tab-${e[13].id}`),ie(B,"tabindex","0"),ie(Xe,"class",te="favorites emoji-menu "+(e[18]?"gone":"")),ie(Xe,"role","menu"),ie(Xe,"aria-label",ce=e[0].favoritesLabel),Wn(Xe,"padding-inline-end",e[25]+"px"),ie(ue,"aria-hidden","true"),ie(ue,"tabindex","-1"),ie(ue,"class","abs-pos hidden emoji"),ie(t,"class","picker"),ie(t,"aria-label",be=e[0].regionLabel),ie(t,"style",e[22])},m(de,Me){kn(de,t,Me),yt(t,n),yt(t,r),yt(r,a),yt(a,i),ql(i,e[2]),yt(a,u),yt(u,o),yt(a,l),yt(l,g),yt(r,D),yt(D,C),yt(C,M),yt(r,j),yt(j,R),yt(r,T);for(let re=0;re<A.length;re+=1)A[re].m(T,null);e[48](T),yt(t,S);for(let re=0;re<k.length;re+=1)k[re].m(S,null);yt(t,H),yt(H,q),yt(t,d),yt(d,x),yt(t,B),yt(B,he);for(let re=0;re<Ae.length;re+=1)Ae[re].m(he,null);e[50](B),yt(t,Xe);for(let re=0;re<V.length;re+=1)V[re].m(Xe,null);yt(t,ue),e[51](ue),e[52](t),Te||(ke=[gn(i,"input",e[47]),gn(i,"keydown",e[30]),gn(C,"click",e[35]),gn(T,"focusout",e[38]),gn(T,"click",e[34]),gn(T,"keydown",e[36]),gn(T,"keyup",e[37]),gn(S,"keydown",e[32]),$_(e[29].call(null,he)),gn(B,"click",e[33]),gn(Xe,"click",e[33])],Te=!0)},p(de,Me){Me[0]&1&&s!==(s=de[0].searchLabel)&&ie(i,"placeholder",s),Me[0]&18&&c!==(c=!!(de[4]&&de[1].length))&&ie(i,"aria-expanded",c),Me[0]&67108864&&v!==(v=de[26]?`emo-${de[26]}`:"")&&ie(i,"aria-activedescendant",v),Me[0]&4&&ql(i,de[2]),Me[0]&1&&m!==(m=de[0].searchLabel+"")&&Bn(o,m),Me[0]&1&&f!==(f=de[0].searchDescription+"")&&Bn(g,f),Me[0]&2097152&&Bn(M,de[21]),Me[0]&64&&p!==(p="emoji "+(de[6]?"hide-focus":""))&&ie(C,"class",p),Me[0]&8388608&&ie(C,"aria-label",de[23]),Me[0]&8388608&&ie(C,"title",de[23]),Me[0]&64&&ie(C,"aria-expanded",de[6]),Me[0]&524288&&I!==(I="skintone-button-wrapper "+(de[19]?"expanded":""))&&ie(D,"class",I),Me[0]&1&&_!==(_=de[0].skinToneDescription+"")&&Bn(R,_),Me[0]&1049089&&(xe=de[9],A=vi(A,Me,pe,1,de,xe,E,T,fi,tc,null,ec)),Me[0]&64&&h!==(h="skintone-list "+(de[6]?"":"hidden no-animate"))&&ie(T,"class",h),Me[0]&64&&Wn(T,"transform","translateY("+(de[6]?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))")+")"),Me[0]&1&&y!==(y=de[0].skinTonesLabel)&&ie(T,"aria-label",y),Me[0]&1048576&&b!==(b="skintone-"+de[20])&&ie(T,"aria-activedescendant",b),Me[0]&64&&w!==(w=!de[6])&&ie(T,"aria-hidden",w),Me[0]&12305|Me[1]&1&&(ze=de[12],k=vi(k,Me,De,1,de,ze,N,S,fi,nc,null,$l)),Me[0]&4096&&Wn(S,"grid-template-columns","repeat("+de[12].length+", 1fr)"),Me[0]&1&&Y!==(Y=de[0].categoriesLabel)&&ie(S,"aria-label",Y),Me[0]&16779264&&Wn(q,"transform","translateX("+(de[24]?-1:1)*de[11]*100+"%)"),Me[0]&262144&&Bn(x,de[18]),Me[0]&262144&&W!==(W="message "+(de[18]?"":"gone"))&&ie(d,"class",W),Me[0]&402694449&&(je=de[15],Ae=vi(Ae,Me,Ve,1,de,je,ge,he,fi,ic,null,Ql)),Me[0]&278528&&_e!==(_e="tabpanel "+(!de[14]||de[18]?"gone":""))&&ie(B,"class",_e),Me[0]&16&&He!==(He=de[4]?"region":"tabpanel")&&ie(B,"role",He),Me[0]&8209&&Ee!==(Ee=de[4]?de[0].searchResultsLabel:de[0].categories[de[13].name])&&ie(B,"aria-label",Ee),Me[0]&8208&&fe!==(fe=de[4]?"":`tab-${de[13].id}`)&&ie(B,"id",fe),Me[0]&402654464&&(qe=de[10],V=vi(V,Me,Ze,1,de,qe,X,Xe,fi,ac,null,Zl)),Me[0]&262144&&te!==(te="favorites emoji-menu "+(de[18]?"gone":""))&&ie(Xe,"class",te),Me[0]&1&&ce!==(ce=de[0].favoritesLabel)&&ie(Xe,"aria-label",ce),Me[0]&33554432&&Wn(Xe,"padding-inline-end",de[25]+"px"),Me[0]&1&&be!==(be=de[0].regionLabel)&&ie(t,"aria-label",be),Me[0]&4194304&&ie(t,"style",de[22])},i:Ii,o:Ii,d(de){de&&Sn(t);for(let Me=0;Me<A.length;Me+=1)A[Me].d();e[48](null);for(let Me=0;Me<k.length;Me+=1)k[Me].d();for(let Me=0;Me<Ae.length;Me+=1)Ae[Me].d();e[50](null);for(let Me=0;Me<V.length;Me+=1)V[Me].d();e[51](null),e[52](null),Te=!1,Di(ke)}}}function Np(e,t,n){let{skinToneEmoji:r}=t,{i18n:a}=t,{database:i}=t,{customEmoji:s}=t,{customCategorySorting:c}=t,v=!0,u=[],m=[],o="",l="",f,g,D,C=!1,M=-1,p,I=!1,j=!1,_,R=0,T=0,A,E,h="",y=[],b=[],w,S=vp,k=!1,N=0,Y=0,H=$i,q,d=!1,x;const W=re=>{f.getRootNode().getElementById(re).focus()},B=(re,Le)=>{f.dispatchEvent(new CustomEvent(re,{detail:Le,bubbles:!0,composed:!0}))},he=(re,Le)=>Le&&re.skins&&re.skins[Le]||re.unicode,Ae=(re,Le)=>Cp([re.name||he(re,Le),...re.shortcodes||[]]).join(", "),ge=re=>/^skintone-/.test(re.id);fs.then(re=>{re||n(18,p=a.emojiUnsupportedMessage)});function _e(re){return Rp(re,Le=>{{const F=getComputedStyle(f),L=parseInt(F.getPropertyValue("--num-columns"),10),z=F.getPropertyValue("direction")==="rtl",K=re.parentElement.getBoundingClientRect().width-Le;n(46,S=L),n(25,N=K),n(24,k=z)}})}function He(re){const Le=f.getRootNode();Ip(re,g,L=>Le.getElementById(`emo-${L.id}`)),n(1,u=u)}function Ee(re){return!re.unicode||!Kl(re)||Qs.get(re.unicode)}async function fe(re){const Le=await fs;return re.filter(({version:F})=>!F||F<=Le)}async function Xe(re){return Ep(re,await fs)}async function V(re){if(typeof re>"u")return[];const Le=re===-1?s:await i.getEmojiByGroup(re);return Xe(await fe(Le))}async function X(re){return Xe(await fe(await i.getEmojiBySearchQuery(re)))}function te(re){if(!C||!u.length)return;const Le=F=>{Zn(re),n(5,M=vs(F,M,u))};switch(re.key){case"ArrowDown":return Le(!1);case"ArrowUp":return Le(!0);case"Enter":if(M!==-1)return Zn(re),be(u[M].id);u.length&&n(5,M=0)}}function ce(re){n(2,o=""),n(44,l=""),n(5,M=-1),n(11,Y=H.findIndex(Le=>Le.id===re.id))}function ue(re){const{target:Le,key:F}=re,L=z=>{z&&(Zn(re),z.focus())};switch(F){case"ArrowLeft":return L(Le.previousSibling);case"ArrowRight":return L(Le.nextSibling);case"Home":return L(Le.parentElement.firstChild);case"End":return L(Le.parentElement.lastChild)}}async function be(re){const Le=await i.getEmojiByUnicodeOrName(re),F=[...u,...b].find(z=>z.id===re),L=F.unicode&&he(F,R);await i.incrementFavoriteEmojiCount(re),B("emoji-click",{emoji:Le,skinTone:R,...L&&{unicode:L},...F.name&&{name:F.name}})}async function Te(re){const{target:Le}=re;if(!Le.classList.contains("emoji"))return;Zn(re);const F=Le.id.substring(4);be(F)}async function ke(re){const{target:Le}=re;if(!ge(Le))return;Zn(re);const F=parseInt(Le.id.slice(9),10);n(8,R=F),n(6,I=!1),W("skintone-button"),B("skin-tone-change",{skinTone:F}),i.setPreferredSkinTone(F)}async function xe(re){n(6,I=!I),n(20,T=R),I&&(Zn(re),ha(()=>W(`skintone-${T}`)))}function pe(re){if(!I)return;const Le=async F=>{Zn(re),n(20,T=F),await ep(),W(`skintone-${T}`)};switch(re.key){case"ArrowUp":return Le(vs(!0,T,y));case"ArrowDown":return Le(vs(!1,T,y));case"Home":return Le(0);case"End":return Le(y.length-1);case"Enter":return ke(re);case"Escape":return Zn(re),n(6,I=!1),W("skintone-button")}}function ze(re){if(I)switch(re.key){case" ":return ke(re)}}async function De(re){const{relatedTarget:Le}=re;(!Le||!ge(Le))&&n(6,I=!1)}function je(){o=this.value,n(2,o)}function Ve(re){Vr[re?"unshift":"push"](()=>{_=re,n(7,_)})}const qe=re=>ce(re);function Ze(re){Vr[re?"unshift":"push"](()=>{D=re,n(3,D)})}function de(re){Vr[re?"unshift":"push"](()=>{g=re,n(17,g)})}function Me(re){Vr[re?"unshift":"push"](()=>{f=re,n(16,f)})}return e.$$set=re=>{"skinToneEmoji"in re&&n(40,r=re.skinToneEmoji),"i18n"in re&&n(0,a=re.i18n),"database"in re&&n(39,i=re.database),"customEmoji"in re&&n(41,s=re.customEmoji),"customCategorySorting"in re&&n(42,c=re.customCategorySorting)},e.$$.update=()=>{if(e.$$.dirty[1]&1280&&s&&i&&n(39,i.customEmoji=s,i),e.$$.dirty[0]&1|e.$$.dirty[1]&256){async function re(){let Le=!1;const F=setTimeout(()=>{Le=!0,n(18,p=a.loadingMessage)},hp);try{await i.ready(),n(14,d=!0)}catch(L){console.error(L),n(18,p=a.networkErrorMessage)}finally{clearTimeout(F),Le&&(Le=!1,n(18,p=""))}}i&&re()}if(e.$$.dirty[0]&6144|e.$$.dirty[1]&1024&&(s&&s.length?n(12,H=[up,...$i]):H!==$i&&(Y&&n(11,Y--,Y),n(12,H=$i))),e.$$.dirty[0]&4&&F1(()=>{n(44,l=(o||"").trim()),n(5,M=-1)}),e.$$.dirty[0]&6144&&n(13,q=H[Y]),e.$$.dirty[0]&24576|e.$$.dirty[1]&8192){async function re(){if(!d)n(1,u=[]),n(4,C=!1);else if(l.length>=dp){const Le=l,F=await X(Le);Le===l&&(n(1,u=F),n(4,C=!0))}else if(q){const Le=q.id,F=await V(Le);Le===q.id&&(n(1,u=F),n(4,C=!1))}}re()}if(e.$$.dirty[0]&4112&&n(22,E=`
  --font-family: ${O1};
  --num-groups: ${H.length}; 
  --indicator-opacity: ${C?0:1}; 
  --num-skintones: ${Yl};`),e.$$.dirty[0]&16384|e.$$.dirty[1]&256){async function re(){d&&n(8,R=await i.getPreferredSkinTone())}re()}if(e.$$.dirty[1]&512&&n(9,y=Array(Yl).fill().map((re,Le)=>Ap(r,Le))),e.$$.dirty[0]&768&&n(21,A=y[R]),e.$$.dirty[0]&257&&n(23,h=a.skinToneLabel.replace("{skinTone}",a.skinTones[R])),e.$$.dirty[0]&16384|e.$$.dirty[1]&256){async function re(){n(45,w=(await Promise.all(_p.map(Le=>i.getEmojiByUnicodeOrName(Le)))).filter(Boolean))}d&&re()}if(e.$$.dirty[0]&16384|e.$$.dirty[1]&49408){async function re(){const Le=await i.getTopFavoriteEmoji(S),F=await Xe(L1([...Le,...w],L=>L.unicode||L.name).slice(0,S));n(10,b=F)}d&&w&&re()}if(e.$$.dirty[0]&10){const re=u.filter(Le=>Le.unicode).filter(Le=>Kl(Le)&&!Qs.has(Le.unicode));re.length?ha(()=>He(re)):(n(1,u=u.filter(Ee)),ha(()=>{(D||{}).scrollTop=0}))}e.$$.dirty[0]&1026|e.$$.dirty[1]&4096,e.$$.dirty[0]&18|e.$$.dirty[1]&2048&&n(15,m=function(){if(C)return[{category:"",emojis:u}];const Le=new Map;for(const F of u){const L=F.category||"";let z=Le.get(L);z||(z=[],Le.set(L,z)),z.push(F)}return[...Le.entries()].map(([F,L])=>({category:F,emojis:L})).sort((F,L)=>c(F.category,L.category))}()),e.$$.dirty[0]&34&&n(26,x=M!==-1&&u[M].id),e.$$.dirty[0]&192&&(I?_.addEventListener("transitionend",()=>{n(19,j=!0)},{once:!0}):n(19,j=!1))},[a,u,o,D,C,M,I,_,R,y,b,Y,H,q,d,m,f,g,p,j,T,A,E,h,k,N,x,he,Ae,_e,te,ce,ue,Te,ke,xe,pe,ze,De,i,r,s,c,v,l,w,S,je,Ve,qe,Ze,de,Me]}class Dp extends cp{constructor(t){super(),lp(this,t,Np,jp,Q_,{skinToneEmoji:40,i18n:0,database:39,customEmoji:41,customCategorySorting:42},null,[-1,-1,-1])}}const Hp="https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",Pp="en";var zp={categoriesLabel:"Categories",emojiUnsupportedMessage:"Your browser does not support color emoji.",favoritesLabel:"Favorites",loadingMessage:"Loading",networkErrorMessage:"Could not load emoji.",regionLabel:"Emoji picker",searchDescription:"When search results are available, press up or down to select and enter to choose.",searchLabel:"Search",searchResultsLabel:"Search results",skinToneDescription:"When expanded, press up or down to select and enter to choose.",skinToneLabel:"Choose a skin tone (currently {skinTone})",skinTonesLabel:"Skin tones",skinTones:["Default","Light","Medium-Light","Medium","Medium-Dark","Dark"],categories:{custom:"Custom","smileys-emotion":"Smileys and emoticons","people-body":"People and body","animals-nature":"Animals and nature","food-drink":"Food and drink","travel-places":"Travel and places",activities:"Activities",objects:"Objects",symbols:"Symbols",flags:"Flags"}};const j1=["customEmoji","customCategorySorting","database","dataSource","i18n","locale","skinToneEmoji"];class N1 extends HTMLElement{constructor(t){super(),this.attachShadow({mode:"open"});const n=document.createElement("style");n.textContent=":host{--emoji-size:1.375rem;--emoji-padding:0.5rem;--category-emoji-size:var(--emoji-size);--category-emoji-padding:var(--emoji-padding);--indicator-height:3px;--input-border-radius:0.5rem;--input-border-size:1px;--input-font-size:1rem;--input-line-height:1.5;--input-padding:0.25rem;--num-columns:8;--outline-size:2px;--border-size:1px;--skintone-border-radius:1rem;--category-font-size:1rem;display:flex;width:min-content;height:400px}:host,:host(.light){--background:#fff;--border-color:#e0e0e0;--indicator-color:#385ac1;--input-border-color:#999;--input-font-color:#111;--input-placeholder-color:#999;--outline-color:#999;--category-font-color:#111;--button-active-background:#e6e6e6;--button-hover-background:#d9d9d9}:host(.dark){--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}@media (prefers-color-scheme:dark){:host{--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}}:host([hidden]){display:none}button{margin:0;padding:0;border:0;background:0 0;box-shadow:none;-webkit-tap-highlight-color:transparent}button::-moz-focus-inner{border:0}input{padding:0;margin:0;line-height:1.15;font-family:inherit}input[type=search]{-webkit-appearance:none}:focus{outline:var(--outline-color) solid var(--outline-size);outline-offset:calc(-1*var(--outline-size))}:host([data-js-focus-visible]) :focus:not([data-focus-visible-added]){outline:0}:focus:not(:focus-visible){outline:0}.hide-focus{outline:0}*{box-sizing:border-box}.picker{contain:content;display:flex;flex-direction:column;background:var(--background);border:var(--border-size) solid var(--border-color);width:100%;height:100%;overflow:hidden;--total-emoji-size:calc(var(--emoji-size) + (2 * var(--emoji-padding)));--total-category-emoji-size:calc(var(--category-emoji-size) + (2 * var(--category-emoji-padding)))}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.hidden{opacity:0;pointer-events:none}.abs-pos{position:absolute;left:0;top:0}.gone{display:none!important}.skintone-button-wrapper,.skintone-list{background:var(--background);z-index:3}.skintone-button-wrapper.expanded{z-index:1}.skintone-list{position:absolute;inset-inline-end:0;top:0;z-index:2;overflow:visible;border-bottom:var(--border-size) solid var(--border-color);border-radius:0 0 var(--skintone-border-radius) var(--skintone-border-radius);will-change:transform;transition:transform .2s ease-in-out;transform-origin:center 0}@media (prefers-reduced-motion:reduce){.skintone-list{transition-duration:.001s}}@supports not (inset-inline-end:0){.skintone-list{right:0}}.skintone-list.no-animate{transition:none}.tabpanel{overflow-y:auto;-webkit-overflow-scrolling:touch;will-change:transform;min-height:0;flex:1;contain:content}.emoji-menu{display:grid;grid-template-columns:repeat(var(--num-columns),var(--total-emoji-size));justify-content:space-around;align-items:flex-start;width:100%}.category{padding:var(--emoji-padding);font-size:var(--category-font-size);color:var(--category-font-color)}.custom-emoji,.emoji,button.emoji{height:var(--total-emoji-size);width:var(--total-emoji-size)}.emoji,button.emoji{font-size:var(--emoji-size);display:flex;align-items:center;justify-content:center;border-radius:100%;line-height:1;overflow:hidden;font-family:var(--font-family);cursor:pointer}@media (hover:hover) and (pointer:fine){.emoji:hover,button.emoji:hover{background:var(--button-hover-background)}}.emoji.active,.emoji:active,button.emoji.active,button.emoji:active{background:var(--button-active-background)}.custom-emoji{padding:var(--emoji-padding);object-fit:contain;pointer-events:none;background-repeat:no-repeat;background-position:center center;background-size:var(--emoji-size) var(--emoji-size)}.nav,.nav-button{align-items:center}.nav{display:grid;justify-content:space-between;contain:content}.nav-button{display:flex;justify-content:center}.nav-emoji{font-size:var(--category-emoji-size);width:var(--total-category-emoji-size);height:var(--total-category-emoji-size)}.indicator-wrapper{display:flex;border-bottom:1px solid var(--border-color)}.indicator{width:calc(100%/var(--num-groups));height:var(--indicator-height);opacity:var(--indicator-opacity);background-color:var(--indicator-color);will-change:transform,opacity;transition:opacity .1s linear,transform .25s ease-in-out}@media (prefers-reduced-motion:reduce){.indicator{will-change:opacity;transition:opacity .1s linear}}.pad-top,input.search{background:var(--background);width:100%}.pad-top{height:var(--emoji-padding);z-index:3}.search-row{display:flex;align-items:center;position:relative;padding-inline-start:var(--emoji-padding);padding-bottom:var(--emoji-padding)}.search-wrapper{flex:1;min-width:0}input.search{padding:var(--input-padding);border-radius:var(--input-border-radius);border:var(--input-border-size) solid var(--input-border-color);color:var(--input-font-color);font-size:var(--input-font-size);line-height:var(--input-line-height)}input.search::placeholder{color:var(--input-placeholder-color)}.favorites{display:flex;flex-direction:row;border-top:var(--border-size) solid var(--border-color);contain:content}.message{padding:var(--emoji-padding)}",this.shadowRoot.appendChild(n),this._ctx={locale:Pp,dataSource:Hp,skinToneEmoji:fp,customCategorySorting:pp,customEmoji:null,i18n:zp,...t};for(const r of j1)r!=="database"&&Object.prototype.hasOwnProperty.call(this,r)&&(this._ctx[r]=this[r],delete this[r]);this._dbFlush()}connectedCallback(){this._cmp=new Dp({target:this.shadowRoot,props:this._ctx})}disconnectedCallback(){this._cmp.$destroy(),this._cmp=void 0;const{database:t}=this._ctx;t&&t.close().catch(n=>console.error(n))}static get observedAttributes(){return["locale","data-source","skin-tone-emoji"]}attributeChangedCallback(t,n,r){this._set(t.replace(/-([a-z])/g,(a,i)=>i.toUpperCase()),r)}_set(t,n){this._ctx[t]=n,this._cmp&&this._cmp.$set({[t]:n}),["locale","dataSource"].includes(t)&&this._dbFlush()}_dbCreate(){const{locale:t,dataSource:n,database:r}=this._ctx;(!r||r.locale!==t||r.dataSource!==n)&&this._set("database",new A1({locale:t,dataSource:n}))}_dbFlush(){Promise.resolve().then(()=>this._dbCreate())}}const D1={};for(const e of j1)D1[e]={get(){return e==="database"&&this._dbCreate(),this._ctx[e]},set(t){if(e==="database")throw new Error("database is read-only");this._set(e,t)}};Object.defineProperties(N1.prototype,D1);customElements.get("emoji-picker")||customElements.define("emoji-picker",N1);function H1(e,t){for(;e&&!e.querySelector(t);){e=e.parentNode;const n=e.querySelector(t);if(n)return n}return null}const Vp={name:"EmojiPickerContainer",components:{SvgIcon:Dt},props:{emojiOpened:{type:Boolean,default:!1},emojiReaction:{type:Boolean,default:!1},positionTop:{type:Boolean,default:!1},positionRight:{type:Boolean,default:!1},messageId:{type:String,default:""},emojiDataSource:{type:String,default:void 0}},emits:["add-emoji","open-emoji"],data(){return{emojiPickerHeight:320,emojiPickerTop:0,emojiPickerRight:""}},watch:{emojiOpened(e){e&&setTimeout(()=>{this.addCustomStyling(),this.$refs.emojiPicker.shadowRoot.addEventListener("emoji-click",({detail:t})=>{this.$emit("add-emoji",{unicode:t.unicode})})},0)}},methods:{addCustomStyling(){const e=`.picker {
				border: none;
			}`,t=`.nav {
				overflow-x: auto;
			}`,n=`.search-wrapper {
				padding-right: 2px;
				padding-left: 2px;
			}`,r=`input.search {
				height: 32px;
				font-size: 14px;
				border-radius: 10rem;
				border: var(--chat-border-style);
				padding: 5px 10px;
				outline: none;
				background: var(--chat-bg-color-input);
				color: var(--chat-color);
			}`,a=document.createElement("style");a.textContent=e+t+n+r,this.$refs.emojiPicker.shadowRoot.appendChild(a)},openEmoji(e){this.$emit("open-emoji",!this.emojiOpened),this.setEmojiPickerPosition(e.clientY,e.view.innerWidth,e.view.innerHeight)},setEmojiPickerPosition(e,t,n){const r=t<500||n<700,a=H1(this.$el,"#room-footer");if(!a){r&&(this.emojiPickerRight="-50px");return}r?(this.emojiPickerRight=t/2-(this.positionTop?200:150)+"px",this.emojiPickerTop=100,this.emojiPickerHeight=n-200):(a.getBoundingClientRect().top-e>this.emojiPickerHeight-50?this.emojiPickerTop=e+10:this.emojiPickerTop=e-this.emojiPickerHeight-10,this.emojiPickerRight=this.positionTop?"0px":this.positionRight?"60px":"")}}},Up={class:"vac-emoji-wrapper"};function qp(e,t,n,r,a,i){const s=Ke("svg-icon"),c=Ke("emoji-picker");return $(),le("div",Up,[Se("div",{class:rt(["vac-svg-button",{"vac-emoji-reaction":n.emojiReaction}]),onClick:t[0]||(t[0]=(...v)=>i.openEmoji&&i.openEmoji(...v))},[Ce(e.$slots,n.messageId?"emoji-picker-reaction-icon_"+n.messageId:"emoji-picker-icon",{},()=>[Oe(s,{name:"emoji",param:n.emojiReaction?"reaction":""},null,8,["param"])])],2),n.emojiOpened?($(),ft(Bt,{key:0,name:"vac-slide-up",appear:""},{default:Ge(()=>[Se("div",{class:rt(["vac-emoji-picker",{"vac-picker-reaction":n.emojiReaction}]),style:Mt({height:`${a.emojiPickerHeight}px`,top:n.positionTop?a.emojiPickerHeight:`${a.emojiPickerTop}px`,right:a.emojiPickerRight,display:a.emojiPickerTop||!n.emojiReaction?"initial":"none"})},[n.emojiOpened?($(),ft(c,{key:0,ref:"emojiPicker","data-source":n.emojiDataSource},null,8,["data-source"])):Ie("",!0)],6)]),_:1})):Ie("",!0)])}var P1=St(Vp,[["render",qp]]);const Xp={name:"RoomFiles",components:{Loader:za,SvgIcon:Dt},props:{file:{type:Object,required:!0},index:{type:Number,required:!0}},emits:["remove-file"],computed:{isImage(){return Wr(this.file)},isVideo(){return Ni(this.file)}}},Yp={class:"vac-room-file-container"},Kp=["src"],Gp={class:"vac-text-ellipsis"},Wp={key:0,class:"vac-text-ellipsis vac-text-extension"};function Zp(e,t,n,r,a,i){const s=Ke("loader"),c=Ke("svg-icon");return $(),le("div",Yp,[Oe(s,{show:n.file.loading,type:"room-file"},gt({_:2},[nt(e.$slots,(v,u)=>({name:u,fn:Ge(m=>[Ce(e.$slots,u,pt(vt(m)))])}))]),1032,["show"]),Se("div",{class:"vac-svg-button vac-icon-remove",onClick:t[0]||(t[0]=v=>e.$emit("remove-file",n.index))},[Ce(e.$slots,"image-close-icon",{},()=>[Oe(c,{name:"close",param:"image"})])]),i.isImage?($(),le("div",{key:0,class:rt(["vac-message-image",{"vac-blur-loading":n.file.loading}]),style:Mt({"background-image":`url('${n.file.localUrl||n.file.url}')`})},null,6)):i.isVideo?($(),le("video",{key:1,controls:"",class:rt({"vac-blur-loading":n.file.loading})},[Se("source",{src:n.file.localUrl||n.file.url},null,8,Kp)],2)):($(),le("div",{key:2,class:rt(["vac-file-container",{"vac-blur-loading":n.file.loading}])},[Se("div",null,[Ce(e.$slots,"file-icon",{},()=>[Oe(c,{name:"file"})])]),Se("div",Gp,$e(n.file.name),1),n.file.extension?($(),le("div",Wp,$e(n.file.extension),1)):Ie("",!0)],2))])}var Qp=St(Xp,[["render",Zp]]);const Jp={name:"RoomFiles",components:{SvgIcon:Dt,RoomFile:Qp},props:{files:{type:Array,required:!0}},emits:["remove-file","reset-message"],computed:{}},$p={key:0,class:"vac-room-files-container"},e3={class:"vac-files-box"},t3={class:"vac-icon-close"};function n3(e,t,n,r,a,i){const s=Ke("room-file"),c=Ke("svg-icon");return $(),ft(Bt,{name:"vac-slide-up"},{default:Ge(()=>[n.files.length?($(),le("div",$p,[Se("div",e3,[($(!0),le(st,null,nt(n.files,(v,u)=>($(),le("div",{key:u},[Oe(s,{file:v,index:u,onRemoveFile:t[0]||(t[0]=m=>e.$emit("remove-file",m))},gt({_:2},[nt(e.$slots,(m,o)=>({name:o,fn:Ge(l=>[Ce(e.$slots,o,pt(vt(l)))])}))]),1032,["file","index"])]))),128))]),Se("div",t3,[Se("div",{class:"vac-svg-button",onClick:t[1]||(t[1]=v=>e.$emit("reset-message"))},[Ce(e.$slots,"files-close-icon",{},()=>[Oe(c,{name:"close-outline"})])])])])):Ie("",!0)]),_:3})}var r3=St(Jp,[["render",n3]]);const i3={props:{percentage:{type:Number,default:0},messageSelectionEnabled:{type:Boolean,required:!0}},emits:["hover-audio-progress","change-linehead"],data(){return{isMouseDown:!1}},methods:{onMouseDown(e){if(this.messageSelectionEnabled)return;this.isMouseDown=!0;const t=this.calculateLineHeadPosition(e,this.$refs.progress);this.$emit("change-linehead",t),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)},onMouseUp(e){if(this.messageSelectionEnabled)return;this.isMouseDown=!1,document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMove);const t=this.calculateLineHeadPosition(e,this.$refs.progress);this.$emit("change-linehead",t)},onMouseMove(e){if(this.messageSelectionEnabled)return;const t=this.calculateLineHeadPosition(e,this.$refs.progress);this.$emit("change-linehead",t)},calculateLineHeadPosition(e,t){const n=t.getBoundingClientRect().width,r=t.getBoundingClientRect().left;let a=(e.clientX-r)/n;return a=a<0?0:a,a=a>1?1:a,a}}},a3={class:"vac-player-progress"},s3={class:"vac-line-container"};function o3(e,t,n,r,a,i){return $(),le("div",{ref:"progress",class:"vac-player-bar",onMousedown:t[0]||(t[0]=(...s)=>i.onMouseDown&&i.onMouseDown(...s)),onMouseover:t[1]||(t[1]=s=>e.$emit("hover-audio-progress",!0)),onMouseout:t[2]||(t[2]=s=>e.$emit("hover-audio-progress",!1))},[Se("div",a3,[Se("div",s3,[Se("div",{class:"vac-line-progress",style:Mt({width:`${n.percentage}%`})},null,4),Se("div",{class:rt(["vac-line-dot",{"vac-line-dot__active":a.isMouseDown}]),style:Mt({left:`${n.percentage}%`})},null,6)])])],544)}var l3=St(i3,[["render",o3]]);const c3={name:"AudioPlayer",components:{SvgIcon:Dt,AudioControl:l3},props:{messageId:{type:[String,Number],default:null},src:{type:String,default:null},messageSelectionEnabled:{type:Boolean,required:!0}},emits:["hover-audio-progress","update-progress-time"],data(){return{isPlaying:!1,duration:this.convertTimeMMSS(0),playedTime:this.convertTimeMMSS(0),progress:0}},computed:{playerUniqId(){return`audio-player${this.messageId}`},audioSource(){return this.src?this.src:(this.resetProgress(),null)}},mounted(){this.player=this.$el.querySelector("#"+this.playerUniqId),this.player.addEventListener("ended",()=>{this.isPlaying=!1}),this.player.addEventListener("loadeddata",()=>{this.resetProgress(),this.duration=this.convertTimeMMSS(this.player.duration),this.updateProgressTime()}),this.player.addEventListener("timeupdate",this.onTimeUpdate)},methods:{convertTimeMMSS(e){return new Date(e*1e3).toISOString().substr(14,5)},playback(){this.messageSelectionEnabled||!this.audioSource||(this.isPlaying?this.player.pause():setTimeout(()=>this.player.play()),this.isPlaying=!this.isPlaying)},resetProgress(){this.isPlaying&&this.player.pause(),this.duration=this.convertTimeMMSS(0),this.playedTime=this.convertTimeMMSS(0),this.progress=0,this.isPlaying=!1,this.updateProgressTime()},onTimeUpdate(){this.playedTime=this.convertTimeMMSS(this.player.currentTime),this.progress=this.player.currentTime/this.player.duration*100,this.updateProgressTime()},onUpdateProgress(e){e&&(this.player.currentTime=e*this.player.duration)},updateProgressTime(){this.$emit("update-progress-time",this.progress>1?this.playedTime:this.duration)}}},u3={class:"vac-audio-player"},d3=["id","src"];function m3(e,t,n,r,a,i){const s=Ke("svg-icon"),c=Ke("audio-control");return $(),le("div",null,[Se("div",u3,[Se("div",{class:"vac-svg-button",onClick:t[0]||(t[0]=(...v)=>i.playback&&i.playback(...v))},[a.isPlaying?Ce(e.$slots,"audio-pause-icon_"+n.messageId,{key:0},()=>[Oe(s,{name:"audio-pause"})]):Ce(e.$slots,"audio-play-icon_"+n.messageId,{key:1},()=>[Oe(s,{name:"audio-play"})])]),Oe(c,{percentage:a.progress,"message-selection-enabled":n.messageSelectionEnabled,onChangeLinehead:i.onUpdateProgress,onHoverAudioProgress:t[1]||(t[1]=v=>e.$emit("hover-audio-progress",v))},null,8,["percentage","message-selection-enabled","onChangeLinehead"]),Se("audio",{id:i.playerUniqId,src:i.audioSource},null,8,d3)])])}var jo=St(c3,[["render",m3]]);const h3={name:"RoomMessageReply",components:{SvgIcon:Dt,FormatMessage:ji,AudioPlayer:jo},props:{room:{type:Object,required:!0},messageReply:{type:Object,default:null},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0}},emits:["reset-message"],computed:{firstFile(){var e,t;return(t=(e=this.messageReply)==null?void 0:e.files)!=null&&t.length?this.messageReply.files[0]:{}},isImage(){return Wr(this.firstFile)},isVideo(){return Ni(this.firstFile)},isAudio(){return qa(this.firstFile)},isOtherFile(){var e,t;return((t=(e=this.messageReply)==null?void 0:e.files)==null?void 0:t.length)&&!this.isAudio&&!this.isVideo&&!this.isImage}}},f3={key:0,class:"vac-reply-container"},v3={class:"vac-reply-box"},_3={class:"vac-reply-info"},p3={class:"vac-reply-username"},g3={class:"vac-reply-content"},b3=["src"],y3={key:1,controls:"",class:"vac-image-reply"},w3=["src"],k3={key:3,class:"vac-image-reply vac-file-container"},S3={class:"vac-text-ellipsis"},x3={key:0,class:"vac-text-ellipsis vac-text-extension"},M3={class:"vac-icon-reply"};function A3(e,t,n,r,a,i){const s=Ke("format-message"),c=Ke("audio-player"),v=Ke("svg-icon");return $(),ft(Bt,{name:"vac-slide-up"},{default:Ge(()=>[n.messageReply?($(),le("div",f3,[Se("div",v3,[Se("div",_3,[Se("div",p3,$e(n.messageReply.username),1),Se("div",g3,[Oe(s,{"message-id":n.messageReply._id,content:n.messageReply.content,users:n.room.users,"text-formatting":n.textFormatting,"link-options":n.linkOptions,reply:!0},null,8,["message-id","content","users","text-formatting","link-options"])])]),i.isImage?($(),le("img",{key:0,src:i.firstFile.url,class:"vac-image-reply"},null,8,b3)):i.isVideo?($(),le("video",y3,[Se("source",{src:i.firstFile.url},null,8,w3)])):i.isAudio?($(),ft(c,{key:2,src:i.firstFile.url,"message-selection-enabled":!1,class:"vac-audio-reply"},gt({_:2},[nt(e.$slots,(u,m)=>({name:m,fn:Ge(o=>[Ce(e.$slots,m,pt(vt(o)))])}))]),1032,["src"])):i.isOtherFile?($(),le("div",k3,[Se("div",null,[Ce(e.$slots,"file-icon",{},()=>[Oe(v,{name:"file"})])]),Se("div",S3,$e(i.firstFile.name),1),i.firstFile.extension?($(),le("div",x3,$e(i.firstFile.extension),1)):Ie("",!0)])):Ie("",!0)]),Se("div",M3,[Se("div",{class:"vac-svg-button",onClick:t[0]||(t[0]=u=>e.$emit("reset-message"))},[Ce(e.$slots,"reply-close-icon",{},()=>[Oe(v,{name:"close-outline"})])])])])):Ie("",!0)]),_:3})}var E3=St(h3,[["render",A3]]);const T3={name:"RoomUsersTag",props:{filteredUsersTag:{type:Array,required:!0},selectItem:{type:Boolean,default:null},activeUpOrDown:{type:Number,default:null}},emits:["select-user-tag","activate-item"],data(){return{activeItem:null}},watch:{filteredUsersTag(e,t){(!t.length||e.length!==t.length)&&(this.activeItem=0)},selectItem(e){e&&this.$emit("select-user-tag",this.filteredUsersTag[this.activeItem])},activeUpOrDown(){this.activeUpOrDown>0&&this.activeItem<this.filteredUsersTag.length-1?this.activeItem++:this.activeUpOrDown<0&&this.activeItem>0&&this.activeItem--,this.$emit("activate-item")}}},R3={key:0,class:"vac-tags-container"},I3=["onMouseover","onClick"],C3={class:"vac-tags-info"},B3={class:"vac-tags-username"};function F3(e,t,n,r,a,i){return $(),ft(Bt,{name:"vac-slide-up"},{default:Ge(()=>[n.filteredUsersTag.length?($(),le("div",R3,[($(!0),le(st,null,nt(n.filteredUsersTag,(s,c)=>($(),le("div",{key:s._id,class:rt(["vac-tags-box",{"vac-tags-box-active":c===a.activeItem}]),onMouseover:v=>a.activeItem=c,onClick:v=>e.$emit("select-user-tag",s)},[Se("div",C3,[s.avatar?($(),le("div",{key:0,class:"vac-avatar vac-tags-avatar",style:Mt({"background-image":`url('${s.avatar}')`})},null,4)):Ie("",!0),Se("div",B3,$e(s.username),1)])],42,I3))),128))])):Ie("",!0)]),_:1})}var O3=St(T3,[["render",F3]]);const L3={name:"RoomEmojis",props:{filteredEmojis:{type:Array,required:!0},selectItem:{type:Boolean,default:null},activeUpOrDown:{type:Number,default:null}},emits:["select-emoji","activate-item"],data(){return{activeItem:null}},watch:{filteredEmojis(e,t){(!t.length||e.length!==t.length)&&(this.activeItem=0)},selectItem(e){e&&this.$emit("select-emoji",this.filteredEmojis[this.activeItem])},activeUpOrDown(){this.activeUpOrDown>0&&this.activeItem<this.filteredEmojis.length-1?this.activeItem++:this.activeUpOrDown<0&&this.activeItem>0&&this.activeItem--,this.$emit("activate-item")}}},j3={key:0,class:"vac-emojis-container"},N3=["onMouseover","onClick"];function D3(e,t,n,r,a,i){return $(),ft(Bt,{name:"vac-slide-up"},{default:Ge(()=>[n.filteredEmojis.length?($(),le("div",j3,[($(!0),le(st,null,nt(n.filteredEmojis,(s,c)=>($(),le("div",{key:s,class:rt(["vac-emoji-element",{"vac-emoji-element-active":c===a.activeItem}]),onMouseover:v=>a.activeItem=c,onClick:v=>e.$emit("select-emoji",s)},$e(s),43,N3))),128))])):Ie("",!0)]),_:1})}var H3=St(L3,[["render",D3]]);const P3={name:"RoomTemplatesText",props:{filteredTemplatesText:{type:Array,required:!0},selectItem:{type:Boolean,default:null},activeUpOrDown:{type:Number,default:null}},emits:["select-template-text","activate-item"],data(){return{activeItem:null}},watch:{filteredTemplatesText(e,t){(!t.length||e.length!==t.length)&&(this.activeItem=0)},selectItem(e){e&&this.$emit("select-template-text",this.filteredTemplatesText[this.activeItem])},activeUpOrDown(){this.activeUpOrDown>0&&this.activeItem<this.filteredTemplatesText.length-1?this.activeItem++:this.activeUpOrDown<0&&this.activeItem>0&&this.activeItem--,this.$emit("activate-item")}}},z3={key:0,class:"vac-template-container vac-app-box-shadow"},V3=["onMouseover","onClick"],U3={class:"vac-template-info"},q3={class:"vac-template-tag"},X3={class:"vac-template-text"};function Y3(e,t,n,r,a,i){return $(),ft(Bt,{name:"vac-slide-up"},{default:Ge(()=>[n.filteredTemplatesText.length?($(),le("div",z3,[($(!0),le(st,null,nt(n.filteredTemplatesText,(s,c)=>($(),le("div",{key:c,class:rt(["vac-template-box",{"vac-template-active":c===a.activeItem}]),onMouseover:v=>a.activeItem=c,onClick:v=>e.$emit("select-template-text",s)},[Se("div",U3,[Se("div",q3," /"+$e(s.tag),1),Se("div",X3,$e(s.text),1)])],42,V3))),128))])):Ie("",!0)]),_:1})}var K3=St(P3,[["render",Y3]]);function G3(e){return new Int8Array(e)}function W3(e){return new Int16Array(e)}function z1(e){return new Int32Array(e)}function V1(e){return new Float32Array(e)}function Z3(e){return new Float64Array(e)}function U1(e){if(e.length==1)return V1(e[0]);var t=e[0];e=e.slice(1);for(var n=[],r=0;r<t;r++)n.push(U1(e));return n}function q1(e){if(e.length==1)return z1(e[0]);var t=e[0];e=e.slice(1);for(var n=[],r=0;r<t;r++)n.push(q1(e));return n}function X1(e){if(e.length==1)return W3(e[0]);var t=e[0];e=e.slice(1);for(var n=[],r=0;r<t;r++)n.push(X1(e));return n}function Y1(e){if(e.length==1)return new Array(e[0]);var t=e[0];e=e.slice(1);for(var n=[],r=0;r<t;r++)n.push(Y1(e));return n}var K1={};K1.fill=function(e,t,n,r){if(arguments.length==2)for(var a=0;a<e.length;a++)e[a]=arguments[1];else for(var a=t;a<n;a++)e[a]=r};var Hi={};Hi.arraycopy=function(e,t,n,r,a){for(var i=t+a;t<i;)n[r++]=e[t++]};Hi.out={};Hi.out.println=function(e){console.log(e)};Hi.out.printf=function(){console.log.apply(console,arguments)};var Xa={};Xa.SQRT2=1.4142135623730951;Xa.FAST_LOG10=function(e){return Math.log10(e)};Xa.FAST_LOG10_X=function(e,t){return Math.log10(e)*t};function Un(e){this.ordinal=e}Un.short_block_allowed=new Un(0);Un.short_block_coupled=new Un(1);Un.short_block_dispensed=new Un(2);Un.short_block_forced=new Un(3);var G1={};G1.MAX_VALUE=34028235e31;function ln(e){this.ordinal=e}ln.vbr_off=new ln(0);ln.vbr_mt=new ln(1);ln.vbr_rh=new ln(2);ln.vbr_abr=new ln(3);ln.vbr_mtrh=new ln(4);ln.vbr_default=ln.vbr_mtrh;var Q3=function(e){},Re={System:Hi,VbrMode:ln,Float:G1,ShortBlock:Un,Util:Xa,Arrays:K1,new_array_n:Y1,new_byte:G3,new_double:Z3,new_float:V1,new_float_n:U1,new_int:z1,new_int_n:q1,new_short_n:X1,assert:Q3},J3=Re.System,Rt=Re.Util,$3=Re.Arrays,eg=Re.new_float;function tg(){var e=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*Rt.SQRT2*.5/2384e-9,.017876148*Rt.SQRT2*.5/2384e-9,.003134727*Rt.SQRT2*.5/2384e-9,.002457142*Rt.SQRT2*.5/2384e-9,971317e-9*Rt.SQRT2*.5/2384e-9,218868e-9*Rt.SQRT2*.5/2384e-9,101566e-9*Rt.SQRT2*.5/2384e-9,13828e-9*Rt.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],t=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],n=t[O.SHORT_TYPE],r=t[O.SHORT_TYPE],a=t[O.SHORT_TYPE],i=t[O.SHORT_TYPE],s=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function c(m,o,l){for(var f=10,g=o+238-14-286,D=-15;D<0;D++){var C,M,p;C=e[f+-10],M=m[g+-224]*C,p=m[o+224]*C,C=e[f+-9],M+=m[g+-160]*C,p+=m[o+160]*C,C=e[f+-8],M+=m[g+-96]*C,p+=m[o+96]*C,C=e[f+-7],M+=m[g+-32]*C,p+=m[o+32]*C,C=e[f+-6],M+=m[g+32]*C,p+=m[o+-32]*C,C=e[f+-5],M+=m[g+96]*C,p+=m[o+-96]*C,C=e[f+-4],M+=m[g+160]*C,p+=m[o+-160]*C,C=e[f+-3],M+=m[g+224]*C,p+=m[o+-224]*C,C=e[f+-2],M+=m[o+-256]*C,p-=m[g+256]*C,C=e[f+-1],M+=m[o+-192]*C,p-=m[g+192]*C,C=e[f+0],M+=m[o+-128]*C,p-=m[g+128]*C,C=e[f+1],M+=m[o+-64]*C,p-=m[g+64]*C,C=e[f+2],M+=m[o+0]*C,p-=m[g+0]*C,C=e[f+3],M+=m[o+64]*C,p-=m[g+-64]*C,C=e[f+4],M+=m[o+128]*C,p-=m[g+-128]*C,C=e[f+5],M+=m[o+192]*C,p-=m[g+-192]*C,M*=e[f+6],C=p-M,l[30+D*2]=p+M,l[31+D*2]=e[f+7]*C,f+=18,o--,g++}{var M,p,I,j;p=m[o+-16]*e[f+-10],M=m[o+-32]*e[f+-2],p+=(m[o+-48]-m[o+16])*e[f+-9],M+=m[o+-96]*e[f+-1],p+=(m[o+-80]+m[o+48])*e[f+-8],M+=m[o+-160]*e[f+0],p+=(m[o+-112]-m[o+80])*e[f+-7],M+=m[o+-224]*e[f+1],p+=(m[o+-144]+m[o+112])*e[f+-6],M-=m[o+32]*e[f+2],p+=(m[o+-176]-m[o+144])*e[f+-5],M-=m[o+96]*e[f+3],p+=(m[o+-208]+m[o+176])*e[f+-4],M-=m[o+160]*e[f+4],p+=(m[o+-240]-m[o+208])*e[f+-3],M-=m[o+224],I=M-p,j=M+p,p=l[14],M=l[15]-p,l[31]=j+p,l[30]=I+M,l[15]=I-M,l[14]=j-p}{var _;_=l[28]-l[0],l[0]+=l[28],l[28]=_*e[f+-36+7],_=l[29]-l[1],l[1]+=l[29],l[29]=_*e[f+-36+7],_=l[26]-l[2],l[2]+=l[26],l[26]=_*e[f+-72+7],_=l[27]-l[3],l[3]+=l[27],l[27]=_*e[f+-72+7],_=l[24]-l[4],l[4]+=l[24],l[24]=_*e[f+-108+7],_=l[25]-l[5],l[5]+=l[25],l[25]=_*e[f+-108+7],_=l[22]-l[6],l[6]+=l[22],l[22]=_*Rt.SQRT2,_=l[23]-l[7],l[7]+=l[23],l[23]=_*Rt.SQRT2-l[7],l[7]-=l[6],l[22]-=l[7],l[23]-=l[22],_=l[6],l[6]=l[31]-_,l[31]=l[31]+_,_=l[7],l[7]=l[30]-_,l[30]=l[30]+_,_=l[22],l[22]=l[15]-_,l[15]=l[15]+_,_=l[23],l[23]=l[14]-_,l[14]=l[14]+_,_=l[20]-l[8],l[8]+=l[20],l[20]=_*e[f+-180+7],_=l[21]-l[9],l[9]+=l[21],l[21]=_*e[f+-180+7],_=l[18]-l[10],l[10]+=l[18],l[18]=_*e[f+-216+7],_=l[19]-l[11],l[11]+=l[19],l[19]=_*e[f+-216+7],_=l[16]-l[12],l[12]+=l[16],l[16]=_*e[f+-252+7],_=l[17]-l[13],l[13]+=l[17],l[17]=_*e[f+-252+7],_=-l[20]+l[24],l[20]+=l[24],l[24]=_*e[f+-216+7],_=-l[21]+l[25],l[21]+=l[25],l[25]=_*e[f+-216+7],_=l[4]-l[8],l[4]+=l[8],l[8]=_*e[f+-216+7],_=l[5]-l[9],l[5]+=l[9],l[9]=_*e[f+-216+7],_=l[0]-l[12],l[0]+=l[12],l[12]=_*e[f+-72+7],_=l[1]-l[13],l[1]+=l[13],l[13]=_*e[f+-72+7],_=l[16]-l[28],l[16]+=l[28],l[28]=_*e[f+-72+7],_=-l[17]+l[29],l[17]+=l[29],l[29]=_*e[f+-72+7],_=Rt.SQRT2*(l[2]-l[10]),l[2]+=l[10],l[10]=_,_=Rt.SQRT2*(l[3]-l[11]),l[3]+=l[11],l[11]=_,_=Rt.SQRT2*(-l[18]+l[26]),l[18]+=l[26],l[26]=_-l[18],_=Rt.SQRT2*(-l[19]+l[27]),l[19]+=l[27],l[27]=_-l[19],_=l[2],l[19]-=l[3],l[3]-=_,l[2]=l[31]-_,l[31]+=_,_=l[3],l[11]-=l[19],l[18]-=_,l[3]=l[30]-_,l[30]+=_,_=l[18],l[27]-=l[11],l[19]-=_,l[18]=l[15]-_,l[15]+=_,_=l[19],l[10]-=_,l[19]=l[14]-_,l[14]+=_,_=l[10],l[11]-=_,l[10]=l[23]-_,l[23]+=_,_=l[11],l[26]-=_,l[11]=l[22]-_,l[22]+=_,_=l[26],l[27]-=_,l[26]=l[7]-_,l[7]+=_,_=l[27],l[27]=l[6]-_,l[6]+=_,_=Rt.SQRT2*(l[0]-l[4]),l[0]+=l[4],l[4]=_,_=Rt.SQRT2*(l[1]-l[5]),l[1]+=l[5],l[5]=_,_=Rt.SQRT2*(l[16]-l[20]),l[16]+=l[20],l[20]=_,_=Rt.SQRT2*(l[17]-l[21]),l[17]+=l[21],l[21]=_,_=-Rt.SQRT2*(l[8]-l[12]),l[8]+=l[12],l[12]=_-l[8],_=-Rt.SQRT2*(l[9]-l[13]),l[9]+=l[13],l[13]=_-l[9],_=-Rt.SQRT2*(l[25]-l[29]),l[25]+=l[29],l[29]=_-l[25],_=-Rt.SQRT2*(l[24]+l[28]),l[24]-=l[28],l[28]=_-l[24],_=l[24]-l[16],l[24]=_,_=l[20]-_,l[20]=_,_=l[28]-_,l[28]=_,_=l[25]-l[17],l[25]=_,_=l[21]-_,l[21]=_,_=l[29]-_,l[29]=_,_=l[17]-l[1],l[17]=_,_=l[9]-_,l[9]=_,_=l[25]-_,l[25]=_,_=l[5]-_,l[5]=_,_=l[21]-_,l[21]=_,_=l[13]-_,l[13]=_,_=l[29]-_,l[29]=_,_=l[1]-l[0],l[1]=_,_=l[16]-_,l[16]=_,_=l[17]-_,l[17]=_,_=l[8]-_,l[8]=_,_=l[9]-_,l[9]=_,_=l[24]-_,l[24]=_,_=l[25]-_,l[25]=_,_=l[4]-_,l[4]=_,_=l[5]-_,l[5]=_,_=l[20]-_,l[20]=_,_=l[21]-_,l[21]=_,_=l[12]-_,l[12]=_,_=l[13]-_,l[13]=_,_=l[28]-_,l[28]=_,_=l[29]-_,l[29]=_,_=l[0],l[0]+=l[31],l[31]-=_,_=l[1],l[1]+=l[30],l[30]-=_,_=l[16],l[16]+=l[15],l[15]-=_,_=l[17],l[17]+=l[14],l[14]-=_,_=l[8],l[8]+=l[23],l[23]-=_,_=l[9],l[9]+=l[22],l[22]-=_,_=l[24],l[24]+=l[7],l[7]-=_,_=l[25],l[25]+=l[6],l[6]-=_,_=l[4],l[4]+=l[27],l[27]-=_,_=l[5],l[5]+=l[26],l[26]-=_,_=l[20],l[20]+=l[11],l[11]-=_,_=l[21],l[21]+=l[10],l[10]-=_,_=l[12],l[12]+=l[19],l[19]-=_,_=l[13],l[13]+=l[18],l[18]-=_,_=l[28],l[28]+=l[3],l[3]-=_,_=l[29],l[29]+=l[2],l[2]-=_}}function v(m,o){for(var l=0;l<3;l++){var f,g,D,C,M,p;C=m[o+6]*t[O.SHORT_TYPE][0]-m[o+15],f=m[o+0]*t[O.SHORT_TYPE][2]-m[o+9],g=C+f,D=C-f,C=m[o+15]*t[O.SHORT_TYPE][0]+m[o+6],f=m[o+9]*t[O.SHORT_TYPE][2]+m[o+0],M=C+f,p=-C+f,f=(m[o+3]*t[O.SHORT_TYPE][1]-m[o+12])*2069978111953089e-26,C=(m[o+12]*t[O.SHORT_TYPE][1]+m[o+3])*2069978111953089e-26,m[o+0]=g*190752519173728e-25+f,m[o+15]=-M*190752519173728e-25+C,D=D*.8660254037844387*1907525191737281e-26,M=M*.5*1907525191737281e-26+C,m[o+3]=D-M,m[o+6]=D+M,g=g*.5*1907525191737281e-26-f,p=p*.8660254037844387*1907525191737281e-26,m[o+9]=g+p,m[o+12]=g-p,o++}}function u(m,o,l){var f,g;{var D,C,M,p,I,j,_,R;D=l[17]-l[9],M=l[15]-l[11],p=l[14]-l[12],I=l[0]+l[8],j=l[1]+l[7],_=l[2]+l[6],R=l[3]+l[5],m[o+17]=I+_-R-(j-l[4]),g=(I+_-R)*r[19]+(j-l[4]),f=(D-M-p)*r[18],m[o+5]=f+g,m[o+6]=f-g,C=(l[16]-l[10])*r[18],j=j*r[19]+l[4],f=D*r[12]+C+M*r[13]+p*r[14],g=-I*r[16]+j-_*r[17]+R*r[15],m[o+1]=f+g,m[o+2]=f-g,f=D*r[13]-C-M*r[14]+p*r[12],g=-I*r[17]+j-_*r[15]+R*r[16],m[o+9]=f+g,m[o+10]=f-g,f=D*r[14]-C+M*r[12]-p*r[13],g=I*r[15]-j+_*r[16]-R*r[17],m[o+13]=f+g,m[o+14]=f-g}{var T,A,E,h,y,b,w,S;T=l[8]-l[0],E=l[6]-l[2],h=l[5]-l[3],y=l[17]+l[9],b=l[16]+l[10],w=l[15]+l[11],S=l[14]+l[12],m[o+0]=y+w+S+(b+l[13]),f=(y+w+S)*r[19]-(b+l[13]),g=(T-E+h)*r[18],m[o+11]=f+g,m[o+12]=f-g,A=(l[7]-l[1])*r[18],b=l[13]-b*r[19],f=y*r[15]-b+w*r[16]+S*r[17],g=T*r[14]+A+E*r[12]+h*r[13],m[o+3]=f+g,m[o+4]=f-g,f=-y*r[17]+b-w*r[15]-S*r[16],g=T*r[13]+A-E*r[14]-h*r[12],m[o+7]=f+g,m[o+8]=f-g,f=-y*r[16]+b-w*r[17]-S*r[15],g=T*r[12]-A+E*r[13]-h*r[14],m[o+15]=f+g,m[o+16]=f-g}}this.mdct_sub48=function(m,o,l){for(var f=o,g=286,D=0;D<m.channels_out;D++){for(var C=0;C<m.mode_gr;C++){for(var M,p=m.l3_side.tt[C][D],I=p.xr,j=0,_=m.sb_sample[D][1-C],R=0,T=0;T<18/2;T++)for(c(f,g,_[R]),c(f,g+32,_[R+1]),R+=2,g+=64,M=1;M<32;M+=2)_[R-1][M]*=-1;for(M=0;M<32;M++,j+=18){var A=p.block_type,E=m.sb_sample[D][C],h=m.sb_sample[D][1-C];if(p.mixed_block_flag!=0&&M<2&&(A=0),m.amp_filter[M]<1e-12)$3.fill(I,j+0,j+18,0);else{if(m.amp_filter[M]<1)for(var T=0;T<18;T++)h[T][s[M]]*=m.amp_filter[M];if(A==O.SHORT_TYPE){for(var T=-12/4;T<0;T++){var y=t[O.SHORT_TYPE][T+3];I[j+T*3+9]=E[9+T][s[M]]*y-E[8-T][s[M]],I[j+T*3+18]=E[14-T][s[M]]*y+E[15+T][s[M]],I[j+T*3+10]=E[15+T][s[M]]*y-E[14-T][s[M]],I[j+T*3+19]=h[2-T][s[M]]*y+h[3+T][s[M]],I[j+T*3+11]=h[3+T][s[M]]*y-h[2-T][s[M]],I[j+T*3+20]=h[8-T][s[M]]*y+h[9+T][s[M]]}v(I,j)}else{for(var b=eg(18),T=-36/4;T<0;T++){var w,S;w=t[A][T+27]*h[T+9][s[M]]+t[A][T+36]*h[8-T][s[M]],S=t[A][T+9]*E[T+9][s[M]]-t[A][T+18]*E[8-T][s[M]],b[T+9]=w-S*n[3+T+9],b[T+18]=w*n[3+T+9]+S}u(I,j,b)}}if(A!=O.SHORT_TYPE&&M!=0)for(var T=7;T>=0;--T){var k,N;k=I[j+T]*a[20+T]+I[j+-1-T]*i[28+T],N=I[j+T]*i[28+T]-I[j+-1-T]*a[20+T],I[j+-1-T]=k,I[j+T]=N}}}if(f=l,g=286,m.mode_gr==1)for(var Y=0;Y<18;Y++)J3.arraycopy(m.sb_sample[D][1][Y],0,m.sb_sample[D][0][Y],0,32)}}}var ng=Re.System,rg=Re.new_float,ig=Re.new_float_n;function Ma(){this.l=rg(O.SBMAX_l),this.s=ig([O.SBMAX_s,3]);var e=this;this.assign=function(t){ng.arraycopy(t.l,0,e.l,0,O.SBMAX_l);for(var n=0;n<O.SBMAX_s;n++)for(var r=0;r<3;r++)e.s[n][r]=t.s[n][r]}}function Qn(){this.thm=new Ma,this.en=new Ma}function dt(e){var t=e;this.ordinal=function(){return t}}dt.STEREO=new dt(0);dt.JOINT_STEREO=new dt(1);dt.DUAL_CHANNEL=new dt(2);dt.MONO=new dt(3);dt.NOT_SET=new dt(4);var sc=Re.System,ea=Re.VbrMode,oc=Re.new_array_n,lc=Re.new_float,ag=Re.new_float_n,sg=Re.new_int,ta=Re.assert;O.ENCDELAY=576;O.POSTDELAY=1152;O.MDCTDELAY=48;O.FFTOFFSET=224+O.MDCTDELAY;O.DECDELAY=528;O.SBLIMIT=32;O.CBANDS=64;O.SBPSY_l=21;O.SBPSY_s=12;O.SBMAX_l=22;O.SBMAX_s=13;O.PSFB21=6;O.PSFB12=6;O.BLKSIZE=1024;O.HBLKSIZE=O.BLKSIZE/2+1;O.BLKSIZE_s=256;O.HBLKSIZE_s=O.BLKSIZE_s/2+1;O.NORM_TYPE=0;O.START_TYPE=1;O.SHORT_TYPE=2;O.STOP_TYPE=3;O.MPG_MD_LR_LR=0;O.MPG_MD_LR_I=1;O.MPG_MD_MS_LR=2;O.MPG_MD_MS_I=3;O.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function O(){var e=O.FFTOFFSET,t=O.MPG_MD_MS_LR,n=null;this.psy=null;var r=null,a=null,i=null;this.setModules=function(m,o,l,f){n=m,this.psy=o,r=o,a=f,i=l};var s=new tg;function c(m){var o,l;if(m.ATH.useAdjust==0){m.ATH.adjust=1;return}if(l=m.loudness_sq[0][0],o=m.loudness_sq[1][0],m.channels_out==2?(l+=m.loudness_sq[0][1],o+=m.loudness_sq[1][1]):(l+=l,o+=o),m.mode_gr==2&&(l=Math.max(l,o)),l*=.5,l*=m.ATH.aaSensitivityP,l>.03125)m.ATH.adjust>=1?m.ATH.adjust=1:m.ATH.adjust<m.ATH.adjustLimit&&(m.ATH.adjust=m.ATH.adjustLimit),m.ATH.adjustLimit=1;else{var f=31.98*l+625e-6;m.ATH.adjust>=f?(m.ATH.adjust*=f*.075+.925,m.ATH.adjust<f&&(m.ATH.adjust=f)):m.ATH.adjustLimit>=f?m.ATH.adjust=f:m.ATH.adjust<m.ATH.adjustLimit&&(m.ATH.adjust=m.ATH.adjustLimit),m.ATH.adjustLimit=f}}function v(m){var o,l;for(ta(m.bitrate_index>=0&&m.bitrate_index<16),ta(m.mode_ext>=0&&m.mode_ext<4),m.bitrate_stereoMode_Hist[m.bitrate_index][4]++,m.bitrate_stereoMode_Hist[15][4]++,m.channels_out==2&&(m.bitrate_stereoMode_Hist[m.bitrate_index][m.mode_ext]++,m.bitrate_stereoMode_Hist[15][m.mode_ext]++),o=0;o<m.mode_gr;++o)for(l=0;l<m.channels_out;++l){var f=m.l3_side.tt[o][l].block_type|0;m.l3_side.tt[o][l].mixed_block_flag!=0&&(f=4),m.bitrate_blockType_Hist[m.bitrate_index][f]++,m.bitrate_blockType_Hist[m.bitrate_index][5]++,m.bitrate_blockType_Hist[15][f]++,m.bitrate_blockType_Hist[15][5]++}}function u(m,o){var l=m.internal_flags,f,g;if(l.lame_encode_frame_init==0){var D,C,M=lc(2014),p=lc(2014);for(l.lame_encode_frame_init=1,D=0,C=0;D<286+576*(1+l.mode_gr);++D)D<576*l.mode_gr?(M[D]=0,l.channels_out==2&&(p[D]=0)):(M[D]=o[0][C],l.channels_out==2&&(p[D]=o[1][C]),++C);for(g=0;g<l.mode_gr;g++)for(f=0;f<l.channels_out;f++)l.l3_side.tt[g][f].block_type=O.SHORT_TYPE;s.mdct_sub48(l,M,p),ta(l.mf_size>=O.BLKSIZE+m.framesize-O.FFTOFFSET),ta(l.mf_size>=512+m.framesize-32)}}this.lame_encode_mp3_frame=function(m,o,l,f,g,D){var C,M=oc([2,2]);M[0][0]=new Qn,M[0][1]=new Qn,M[1][0]=new Qn,M[1][1]=new Qn;var p=oc([2,2]);p[0][0]=new Qn,p[0][1]=new Qn,p[1][0]=new Qn,p[1][1]=new Qn;var I,j=[null,null],_=m.internal_flags,R=ag([2,4]),T=[.5,.5],A=[[0,0],[0,0]],E=[[0,0],[0,0]],h,y,b;if(j[0]=o,j[1]=l,_.lame_encode_frame_init==0&&u(m,j),_.padding=0,(_.slot_lag-=_.frac_SpF)<0&&(_.slot_lag+=m.out_samplerate,_.padding=1),_.psymodel!=0){var w,S=[null,null],k=0,N=sg(2);for(b=0;b<_.mode_gr;b++){for(y=0;y<_.channels_out;y++)S[y]=j[y],k=576+b*576-O.FFTOFFSET;if(m.VBR==ea.vbr_mtrh||m.VBR==ea.vbr_mt?w=r.L3psycho_anal_vbr(m,S,k,b,M,p,A[b],E[b],R[b],N):w=r.L3psycho_anal_ns(m,S,k,b,M,p,A[b],E[b],R[b],N),w!=0)return-4;for(m.mode==dt.JOINT_STEREO&&(T[b]=R[b][2]+R[b][3],T[b]>0&&(T[b]=R[b][3]/T[b])),y=0;y<_.channels_out;y++){var Y=_.l3_side.tt[b][y];Y.block_type=N[y],Y.mixed_block_flag=0}}}else for(b=0;b<_.mode_gr;b++)for(y=0;y<_.channels_out;y++)_.l3_side.tt[b][y].block_type=O.NORM_TYPE,_.l3_side.tt[b][y].mixed_block_flag=0,E[b][y]=A[b][y]=700;if(c(_),s.mdct_sub48(_,j[0],j[1]),_.mode_ext=O.MPG_MD_LR_LR,m.force_ms)_.mode_ext=O.MPG_MD_MS_LR;else if(m.mode==dt.JOINT_STEREO){var H=0,q=0;for(b=0;b<_.mode_gr;b++)for(y=0;y<_.channels_out;y++)H+=E[b][y],q+=A[b][y];if(H<=1*q){var d=_.l3_side.tt[0],x=_.l3_side.tt[_.mode_gr-1];d[0].block_type==d[1].block_type&&x[0].block_type==x[1].block_type&&(_.mode_ext=O.MPG_MD_MS_LR)}}if(_.mode_ext==t?(I=p,h=E):(I=M,h=A),m.analysis&&_.pinfo!=null)for(b=0;b<_.mode_gr;b++)for(y=0;y<_.channels_out;y++)_.pinfo.ms_ratio[b]=_.ms_ratio[b],_.pinfo.ms_ener_ratio[b]=T[b],_.pinfo.blocktype[b][y]=_.l3_side.tt[b][y].block_type,_.pinfo.pe[b][y]=h[b][y],sc.arraycopy(_.l3_side.tt[b][y].xr,0,_.pinfo.xr[b][y],0,576),_.mode_ext==t&&(_.pinfo.ers[b][y]=_.pinfo.ers[b][y+2],sc.arraycopy(_.pinfo.energy[b][y+2],0,_.pinfo.energy[b][y],0,_.pinfo.energy[b][y].length));if(m.VBR==ea.vbr_off||m.VBR==ea.vbr_abr){var W,B;for(W=0;W<18;W++)_.nsPsy.pefirbuf[W]=_.nsPsy.pefirbuf[W+1];for(B=0,b=0;b<_.mode_gr;b++)for(y=0;y<_.channels_out;y++)B+=h[b][y];for(_.nsPsy.pefirbuf[18]=B,B=_.nsPsy.pefirbuf[9],W=0;W<9;W++)B+=(_.nsPsy.pefirbuf[W]+_.nsPsy.pefirbuf[18-W])*O.fircoef[W];for(B=670*5*_.mode_gr*_.channels_out/B,b=0;b<_.mode_gr;b++)for(y=0;y<_.channels_out;y++)h[b][y]*=B}if(_.iteration_loop.iteration_loop(m,h,T,I),n.format_bitstream(m),C=n.copy_buffer(_,f,g,D,1),m.bWriteVbrTag&&a.addVbrFrame(m),m.analysis&&_.pinfo!=null){for(y=0;y<_.channels_out;y++){var he;for(he=0;he<e;he++)_.pinfo.pcmdata[y][he]=_.pinfo.pcmdata[y][he+m.framesize];for(he=e;he<1600;he++)_.pinfo.pcmdata[y][he]=j[y][he-e]}i.set_frame_pinfo(m,I)}return v(_),C}}var cc=Re.Util,uc=Re.new_float;function og(){var e=uc(O.BLKSIZE),t=uc(O.BLKSIZE_s/2),n=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function r(i,s,c){var v=0,u,m,o;c<<=1;var l=s+c;u=4;do{var f,g,D,C,M,p,I;I=u>>1,C=u,M=u<<1,p=M+C,u=M<<1,m=s,o=m+I;do{var j,_,R,T;_=i[m+0]-i[m+C],j=i[m+0]+i[m+C],T=i[m+M]-i[m+p],R=i[m+M]+i[m+p],i[m+M]=j-R,i[m+0]=j+R,i[m+p]=_-T,i[m+C]=_+T,_=i[o+0]-i[o+C],j=i[o+0]+i[o+C],T=cc.SQRT2*i[o+p],R=cc.SQRT2*i[o+M],i[o+M]=j-R,i[o+0]=j+R,i[o+p]=_-T,i[o+C]=_+T,o+=u,m+=u}while(m<l);for(g=n[v+0],f=n[v+1],D=1;D<I;D++){var A,E;A=1-2*f*f,E=2*f*g,m=s+D,o=s+C-D;do{var h,y,b,j,_,w,R,S,T,k;y=E*i[m+C]-A*i[o+C],h=A*i[m+C]+E*i[o+C],_=i[m+0]-h,j=i[m+0]+h,w=i[o+0]-y,b=i[o+0]+y,y=E*i[m+p]-A*i[o+p],h=A*i[m+p]+E*i[o+p],T=i[m+M]-h,R=i[m+M]+h,k=i[o+M]-y,S=i[o+M]+y,y=f*R-g*k,h=g*R+f*k,i[m+M]=j-h,i[m+0]=j+h,i[o+p]=w-y,i[o+C]=w+y,y=g*S-f*T,h=f*S+g*T,i[o+M]=b-h,i[o+0]=b+h,i[m+p]=_-y,i[m+C]=_+y,o+=u,m+=u}while(m<l);A=g,g=A*n[v+0]-f*n[v+1],f=A*n[v+1]+f*n[v+0]}v+=2}while(u<c)}var a=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(i,s,c,v,u){for(var m=0;m<3;m++){var o=O.BLKSIZE_s/2,l=65535&576/3*(m+1),f=O.BLKSIZE_s/8-1;do{var g,D,C,M,p,I=a[f<<2]&255;g=t[I]*v[c][u+I+l],p=t[127-I]*v[c][u+I+l+128],D=g-p,g=g+p,C=t[I+64]*v[c][u+I+l+64],p=t[63-I]*v[c][u+I+l+192],M=C-p,C=C+p,o-=4,s[m][o+0]=g+C,s[m][o+2]=g-C,s[m][o+1]=D+M,s[m][o+3]=D-M,g=t[I+1]*v[c][u+I+l+1],p=t[126-I]*v[c][u+I+l+129],D=g-p,g=g+p,C=t[I+65]*v[c][u+I+l+65],p=t[62-I]*v[c][u+I+l+193],M=C-p,C=C+p,s[m][o+O.BLKSIZE_s/2+0]=g+C,s[m][o+O.BLKSIZE_s/2+2]=g-C,s[m][o+O.BLKSIZE_s/2+1]=D+M,s[m][o+O.BLKSIZE_s/2+3]=D-M}while(--f>=0);r(s[m],o,O.BLKSIZE_s/2)}},this.fft_long=function(i,s,c,v,u){var m=O.BLKSIZE/8-1,o=O.BLKSIZE/2;do{var l,f,g,D,C,M=a[m]&255;l=e[M]*v[c][u+M],C=e[M+512]*v[c][u+M+512],f=l-C,l=l+C,g=e[M+256]*v[c][u+M+256],C=e[M+768]*v[c][u+M+768],D=g-C,g=g+C,o-=4,s[o+0]=l+g,s[o+2]=l-g,s[o+1]=f+D,s[o+3]=f-D,l=e[M+1]*v[c][u+M+1],C=e[M+513]*v[c][u+M+513],f=l-C,l=l+C,g=e[M+257]*v[c][u+M+257],C=e[M+769]*v[c][u+M+769],D=g-C,g=g+C,s[o+O.BLKSIZE/2+0]=l+g,s[o+O.BLKSIZE/2+2]=l-g,s[o+O.BLKSIZE/2+1]=f+D,s[o+O.BLKSIZE/2+3]=f-D}while(--m>=0);r(s,o,O.BLKSIZE/2)},this.init_fft=function(i){for(var s=0;s<O.BLKSIZE;s++)e[s]=.42-.5*Math.cos(2*Math.PI*(s+.5)/O.BLKSIZE)+.08*Math.cos(4*Math.PI*(s+.5)/O.BLKSIZE);for(var s=0;s<O.BLKSIZE_s/2;s++)t[s]=.5*(1-Math.cos(2*Math.PI*(s+.5)/O.BLKSIZE_s))}}var Lr=Re.VbrMode,dc=Re.Float,jr=Re.ShortBlock,Qt=Re.Util,lg=Re.Arrays,Ft=Re.new_float,un=Re.new_float_n,_r=Re.new_int,et=Re.assert;function ps(){var e=new og,t=2.302585092994046,n=2,r=16,a=2,i=16,s=.34,c=1/(14752*14752)/(O.BLKSIZE/2),v=.01,u=.8,m=.6,o=.3,l=3.5,f=21,g=.2302585093;function D(F){return F}function C(F,L){for(var z=0,U=0;U<O.BLKSIZE/2;++U)z+=F[U]*L.ATH.eql_w[U];return z*=c,z}function M(F,L,z,U,K,P,Z,J,G,se,ee){var oe=F.internal_flags;if(G<2)e.fft_long(oe,U[K],G,se,ee),e.fft_short(oe,P[Z],G,se,ee);else if(G==2){for(var Q=O.BLKSIZE-1;Q>=0;--Q){var ve=U[K+0][Q],me=U[K+1][Q];U[K+0][Q]=(ve+me)*Qt.SQRT2*.5,U[K+1][Q]=(ve-me)*Qt.SQRT2*.5}for(var Pe=2;Pe>=0;--Pe)for(var Q=O.BLKSIZE_s-1;Q>=0;--Q){var ve=P[Z+0][Pe][Q],me=P[Z+1][Pe][Q];P[Z+0][Pe][Q]=(ve+me)*Qt.SQRT2*.5,P[Z+1][Pe][Q]=(ve-me)*Qt.SQRT2*.5}}L[0]=U[K+0][0],L[0]*=L[0];for(var Q=O.BLKSIZE/2-1;Q>=0;--Q){var ne=U[K+0][O.BLKSIZE/2-Q],Be=U[K+0][O.BLKSIZE/2+Q];L[O.BLKSIZE/2-Q]=(ne*ne+Be*Be)*.5}for(var Pe=2;Pe>=0;--Pe){z[Pe][0]=P[Z+0][Pe][0],z[Pe][0]*=z[Pe][0];for(var Q=O.BLKSIZE_s/2-1;Q>=0;--Q){var ne=P[Z+0][Pe][O.BLKSIZE_s/2-Q],Be=P[Z+0][Pe][O.BLKSIZE_s/2+Q];z[Pe][O.BLKSIZE_s/2-Q]=(ne*ne+Be*Be)*.5}}{for(var Ye=0,Q=11;Q<O.HBLKSIZE;Q++)Ye+=L[Q];oe.tot_ener[G]=Ye}if(F.analysis){for(var Q=0;Q<O.HBLKSIZE;Q++)oe.pinfo.energy[J][G][Q]=oe.pinfo.energy_save[G][Q],oe.pinfo.energy_save[G][Q]=L[Q];oe.pinfo.pe[J][G]=oe.pe[G]}F.athaa_loudapprox==2&&G<2&&(oe.loudness_sq[J][G]=oe.loudness_sq_save[G],oe.loudness_sq_save[G]=C(L,oe))}var p=8,I=23,j=15,_,R,T,A=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function E(){_=Math.pow(10,(p+1)/16),R=Math.pow(10,(I+1)/16),T=Math.pow(10,j/10)}var h=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],y=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],b=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function w(F,L,z,U,K,P){var Z;if(L>F)if(L<F*R)Z=L/F;else return F+L;else{if(F>=L*R)return F+L;Z=F/L}if(F+=L,U+3<=6){if(Z>=_)return F;var J=0|Qt.FAST_LOG10_X(Z,16);return F*y[J]}var J=0|Qt.FAST_LOG10_X(Z,16);if(L=K.ATH.cb_l[z]*K.ATH.adjust,F<T*L){if(F>L){var G,se;return G=1,J<=13&&(G=b[J]),se=Qt.FAST_LOG10_X(F/L,10/15),F*((h[J]-G)*se+G)}return J>13?F:F*b[J]}return F*h[J]}var S=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1];function k(F,L,z){var U;if(F<0&&(F=0),L<0&&(L=0),F<=0)return L;if(L<=0)return F;if(L>F?U=L/F:U=F/L,z>=-2&&z<=2){if(U>=_)return F+L;var K=0|Qt.FAST_LOG10_X(U,16);return(F+L)*S[K]}return U<R?F+L:(F<L&&(F=L),F)}function N(F,L){var z=F.internal_flags;if(z.channels_out>1){for(var U=0;U<O.SBMAX_l;U++){var K=z.thm[0].l[U],P=z.thm[1].l[U];z.thm[0].l[U]+=P*L,z.thm[1].l[U]+=K*L}for(var U=0;U<O.SBMAX_s;U++)for(var Z=0;Z<3;Z++){var K=z.thm[0].s[U][Z],P=z.thm[1].s[U][Z];z.thm[0].s[U][Z]+=P*L,z.thm[1].s[U][Z]+=K*L}}}function Y(F){for(var L=0;L<O.SBMAX_l;L++)if(!(F.thm[0].l[L]>1.58*F.thm[1].l[L]||F.thm[1].l[L]>1.58*F.thm[0].l[L])){var z=F.mld_l[L]*F.en[3].l[L],U=Math.max(F.thm[2].l[L],Math.min(F.thm[3].l[L],z));z=F.mld_l[L]*F.en[2].l[L];var K=Math.max(F.thm[3].l[L],Math.min(F.thm[2].l[L],z));F.thm[2].l[L]=U,F.thm[3].l[L]=K}for(var L=0;L<O.SBMAX_s;L++)for(var P=0;P<3;P++)if(!(F.thm[0].s[L][P]>1.58*F.thm[1].s[L][P]||F.thm[1].s[L][P]>1.58*F.thm[0].s[L][P])){var z=F.mld_s[L]*F.en[3].s[L][P],U=Math.max(F.thm[2].s[L][P],Math.min(F.thm[3].s[L][P],z));z=F.mld_s[L]*F.en[2].s[L][P];var K=Math.max(F.thm[3].s[L][P],Math.min(F.thm[2].s[L][P],z));F.thm[2].s[L][P]=U,F.thm[3].s[L][P]=K}}function H(F,L,z){var U=L,K=Math.pow(10,z);L*=2,U*=2;for(var P=0;P<O.SBMAX_l;P++){var Z,J,G,se;if(se=F.ATH.cb_l[F.bm_l[P]]*K,Z=Math.min(Math.max(F.thm[0].l[P],se),Math.max(F.thm[1].l[P],se)),J=Math.max(F.thm[2].l[P],se),G=Math.max(F.thm[3].l[P],se),Z*L<J+G){var ee=Z*U/(J+G);J*=ee,G*=ee}F.thm[2].l[P]=Math.min(J,F.thm[2].l[P]),F.thm[3].l[P]=Math.min(G,F.thm[3].l[P])}K*=O.BLKSIZE_s/O.BLKSIZE;for(var P=0;P<O.SBMAX_s;P++)for(var oe=0;oe<3;oe++){var Z,J,G,se;if(se=F.ATH.cb_s[F.bm_s[P]]*K,Z=Math.min(Math.max(F.thm[0].s[P][oe],se),Math.max(F.thm[1].s[P][oe],se)),J=Math.max(F.thm[2].s[P][oe],se),G=Math.max(F.thm[3].s[P][oe],se),Z*L<J+G){var ee=Z*L/(J+G);J*=ee,G*=ee}F.thm[2].s[P][oe]=Math.min(F.thm[2].s[P][oe],J),F.thm[3].s[P][oe]=Math.min(F.thm[3].s[P][oe],G)}}function q(F,L,z,U,K){var P,Z,J=0,G=0;for(P=Z=0;P<O.SBMAX_s;++Z,++P){for(var se=F.bo_s[P],ee=F.npart_s,oe=se<ee?se:ee;Z<oe;)et(L[Z]>=0),et(z[Z]>=0),J+=L[Z],G+=z[Z],Z++;if(F.en[U].s[P][K]=J,F.thm[U].s[P][K]=G,Z>=ee){++P;break}et(L[Z]>=0),et(z[Z]>=0);{var Q=F.PSY.bo_s_weight[P],ve=1-Q;J=Q*L[Z],G=Q*z[Z],F.en[U].s[P][K]+=J,F.thm[U].s[P][K]+=G,J=ve*L[Z],G=ve*z[Z]}}for(;P<O.SBMAX_s;++P)F.en[U].s[P][K]=0,F.thm[U].s[P][K]=0}function d(F,L,z,U){var K,P,Z=0,J=0;for(K=P=0;K<O.SBMAX_l;++P,++K){for(var G=F.bo_l[K],se=F.npart_l,ee=G<se?G:se;P<ee;)et(L[P]>=0),et(z[P]>=0),Z+=L[P],J+=z[P],P++;if(F.en[U].l[K]=Z,F.thm[U].l[K]=J,P>=se){++K;break}et(L[P]>=0),et(z[P]>=0);{var oe=F.PSY.bo_l_weight[K],Q=1-oe;Z=oe*L[P],J=oe*z[P],F.en[U].l[K]+=Z,F.thm[U].l[K]+=J,Z=Q*L[P],J=Q*z[P]}}for(;K<O.SBMAX_l;++K)F.en[U].l[K]=0,F.thm[U].l[K]=0}function x(F,L,z,U,K,P){var Z=F.internal_flags,J,G;for(G=J=0;G<Z.npart_s;++G){for(var se=0,ee=Z.numlines_s[G],oe=0;oe<ee;++oe,++J){var Q=L[P][J];se+=Q}z[G]=se}for(et(G==Z.npart_s),J=G=0;G<Z.npart_s;G++){var ve=Z.s3ind_s[G][0],me=Z.s3_ss[J++]*z[ve];for(++ve;ve<=Z.s3ind_s[G][1];)me+=Z.s3_ss[J]*z[ve],++J,++ve;{var Pe=a*Z.nb_s1[K][G];U[G]=Math.min(me,Pe)}if(Z.blocktype_old[K&1]==O.SHORT_TYPE){var Pe=i*Z.nb_s2[K][G],ne=U[G];U[G]=Math.min(Pe,ne)}Z.nb_s2[K][G]=Z.nb_s1[K][G],Z.nb_s1[K][G]=me,et(U[G]>=0)}for(;G<=O.CBANDS;++G)z[G]=0,U[G]=0}function W(F,L,z,U){var K=F.internal_flags;F.short_blocks==jr.short_block_coupled&&!(L[0]!=0&&L[1]!=0)&&(L[0]=L[1]=0);for(var P=0;P<K.channels_out;P++)U[P]=O.NORM_TYPE,F.short_blocks==jr.short_block_dispensed&&(L[P]=1),F.short_blocks==jr.short_block_forced&&(L[P]=0),L[P]!=0?(et(K.blocktype_old[P]!=O.START_TYPE),K.blocktype_old[P]==O.SHORT_TYPE&&(U[P]=O.STOP_TYPE)):(U[P]=O.SHORT_TYPE,K.blocktype_old[P]==O.NORM_TYPE&&(K.blocktype_old[P]=O.START_TYPE),K.blocktype_old[P]==O.STOP_TYPE&&(K.blocktype_old[P]=O.SHORT_TYPE)),z[P]=K.blocktype_old[P],K.blocktype_old[P]=U[P]}function B(F,L,z){return z>=1?F:z<=0?L:L>0?Math.pow(F/L,z)*L:0}var he=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function Ae(F,L){for(var z=309.07,U=0;U<O.SBMAX_s-1;U++)for(var K=0;K<3;K++){var P=F.thm.s[U][K];if(P>0){var Z=P*L,J=F.en.s[U][K];J>Z&&(J>Z*1e10?z+=he[U]*(10*t):z+=he[U]*Qt.FAST_LOG10(J/Z))}}return z}var ge=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function _e(F,L){for(var z=281.0575,U=0;U<O.SBMAX_l-1;U++){var K=F.thm.l[U];if(K>0){var P=K*L,Z=F.en.l[U];Z>P&&(Z>P*1e10?z+=ge[U]*(10*t):z+=ge[U]*Qt.FAST_LOG10(Z/P))}}return z}function He(F,L,z,U,K){var P,Z;for(P=Z=0;P<F.npart_l;++P){var J=0,G=0,se;for(se=0;se<F.numlines_l[P];++se,++Z){var ee=L[Z];J+=ee,G<ee&&(G=ee)}z[P]=J,U[P]=G,K[P]=J*F.rnumlines_l[P],et(F.rnumlines_l[P]>=0),et(z[P]>=0),et(U[P]>=0),et(K[P]>=0)}}function Ee(F,L,z,U){var K=A.length-1,P=0,Z=z[P]+z[P+1];if(Z>0){var J=L[P];J<L[P+1]&&(J=L[P+1]),et(F.numlines_l[P]+F.numlines_l[P+1]-1>0),Z=20*(J*2-Z)/(Z*(F.numlines_l[P]+F.numlines_l[P+1]-1));var G=0|Z;G>K&&(G=K),U[P]=G}else U[P]=0;for(P=1;P<F.npart_l-1;P++)if(Z=z[P-1]+z[P]+z[P+1],Z>0){var J=L[P-1];J<L[P]&&(J=L[P]),J<L[P+1]&&(J=L[P+1]),et(F.numlines_l[P-1]+F.numlines_l[P]+F.numlines_l[P+1]-1>0),Z=20*(J*3-Z)/(Z*(F.numlines_l[P-1]+F.numlines_l[P]+F.numlines_l[P+1]-1));var G=0|Z;G>K&&(G=K),U[P]=G}else U[P]=0;if(et(P==F.npart_l-1),Z=z[P-1]+z[P],Z>0){var J=L[P-1];J<L[P]&&(J=L[P]),et(F.numlines_l[P-1]+F.numlines_l[P]-1>0),Z=20*(J*2-Z)/(Z*(F.numlines_l[P-1]+F.numlines_l[P]-1));var G=0|Z;G>K&&(G=K),U[P]=G}else U[P]=0;et(P==F.npart_l-1)}var fe=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(F,L,z,U,K,P,Z,J,G,se){var ee=F.internal_flags,oe=un([2,O.BLKSIZE]),Q=un([2,3,O.BLKSIZE_s]),ve=Ft(O.CBANDS+1),me=Ft(O.CBANDS+1),Pe=Ft(O.CBANDS+2),ne=_r(2),Be=_r(2),Ye,ye,Ne,we,Ue,xt,Fe,Qe,tt=un([2,576]),At,tn=_r(O.CBANDS+2),Ct=_r(O.CBANDS+2);for(lg.fill(Ct,0),Ye=ee.channels_out,F.mode==dt.JOINT_STEREO&&(Ye=4),F.VBR==Lr.vbr_off?At=ee.ResvMax==0?0:ee.ResvSize/ee.ResvMax*.5:F.VBR==Lr.vbr_rh||F.VBR==Lr.vbr_mtrh||F.VBR==Lr.vbr_mt?At=.6:At=1,ye=0;ye<ee.channels_out;ye++){var Et=L[ye],Wt=z+576-350-f+192;for(we=0;we<576;we++){var nn,rn;for(nn=Et[Wt+we+10],rn=0,Ue=0;Ue<(f-1)/2-1;Ue+=2)nn+=fe[Ue]*(Et[Wt+we+Ue]+Et[Wt+we+f-Ue]),rn+=fe[Ue+1]*(Et[Wt+we+Ue+1]+Et[Wt+we+f-Ue-1]);tt[ye][we]=nn+rn}K[U][ye].en.assign(ee.en[ye]),K[U][ye].thm.assign(ee.thm[ye]),Ye>2&&(P[U][ye].en.assign(ee.en[ye+2]),P[U][ye].thm.assign(ee.thm[ye+2]))}for(ye=0;ye<Ye;ye++){var vn,_n,Ht=Ft(12),xn=[0,0,0,0],Or=Ft(12),Ka=1,Ho,Po=Ft(O.CBANDS),zo=Ft(O.CBANDS),Tt=[0,0,0,0],Vo=Ft(O.HBLKSIZE),Uo=un([3,O.HBLKSIZE_s]);for(et(ee.npart_s<=O.CBANDS),et(ee.npart_l<=O.CBANDS),we=0;we<3;we++)Ht[we]=ee.nsPsy.last_en_subshort[ye][we+6],et(ee.nsPsy.last_en_subshort[ye][we+4]>0),Or[we]=Ht[we]/ee.nsPsy.last_en_subshort[ye][we+4],xn[0]+=Ht[we];if(ye==2)for(we=0;we<576;we++){var Ga,Wa;Ga=tt[0][we],Wa=tt[1][we],tt[0][we]=Ga+Wa,tt[1][we]=Ga-Wa}{var qo=tt[ye&1],ei=0;for(we=0;we<9;we++){for(var Q1=ei+64,Lt=1;ei<Q1;ei++)Lt<Math.abs(qo[ei])&&(Lt=Math.abs(qo[ei]));ee.nsPsy.last_en_subshort[ye][we]=Ht[we+3]=Lt,xn[1+we/3]+=Lt,Lt>Ht[we+3-2]?(et(Ht[we+3-2]>0),Lt=Lt/Ht[we+3-2]):Ht[we+3-2]>Lt*10?Lt=Ht[we+3-2]/(Lt*10):Lt=0,Or[we+3]=Lt}}if(F.analysis){var Za=Or[0];for(we=1;we<12;we++)Za<Or[we]&&(Za=Or[we]);ee.pinfo.ers[U][ye]=ee.pinfo.ers_save[ye],ee.pinfo.ers_save[ye]=Za}for(Ho=ye==3?ee.nsPsy.attackthre_s:ee.nsPsy.attackthre,we=0;we<12;we++)Tt[we/3]==0&&Or[we]>Ho&&(Tt[we/3]=we%3+1);for(we=1;we<4;we++){var Qa;xn[we-1]>xn[we]?(et(xn[we]>0),Qa=xn[we-1]/xn[we]):(et(xn[we-1]>0),Qa=xn[we]/xn[we-1]),Qa<1.7&&(Tt[we]=0,we==1&&(Tt[0]=0))}for(Tt[0]!=0&&ee.nsPsy.lastAttacks[ye]!=0&&(Tt[0]=0),(ee.nsPsy.lastAttacks[ye]==3||Tt[0]+Tt[1]+Tt[2]+Tt[3]!=0)&&(Ka=0,Tt[1]!=0&&Tt[0]!=0&&(Tt[1]=0),Tt[2]!=0&&Tt[1]!=0&&(Tt[2]=0),Tt[3]!=0&&Tt[2]!=0&&(Tt[3]=0)),ye<2?Be[ye]=Ka:Ka==0&&(Be[0]=Be[1]=0),G[ye]=ee.tot_ener[ye],_n=Q,vn=oe,M(F,Vo,Uo,vn,ye&1,_n,ye&1,U,ye,L,z),He(ee,Vo,ve,Po,zo),Ee(ee,Po,zo,tn),Qe=0;Qe<3;Qe++){var Ja,Zt;for(x(F,Uo,me,Pe,ye,Qe),q(ee,me,Pe,ye,Qe),Fe=0;Fe<O.SBMAX_s;Fe++){if(Zt=ee.thm[ye].s[Fe][Qe],Zt*=u,Tt[Qe]>=2||Tt[Qe+1]==1){var ti=Qe!=0?Qe-1:2,Lt=B(ee.thm[ye].s[Fe][ti],Zt,m*At);Zt=Math.min(Zt,Lt)}if(Tt[Qe]==1){var ti=Qe!=0?Qe-1:2,Lt=B(ee.thm[ye].s[Fe][ti],Zt,o*At);Zt=Math.min(Zt,Lt)}else if(Qe!=0&&Tt[Qe-1]==3||Qe==0&&ee.nsPsy.lastAttacks[ye]==3){var ti=Qe!=2?Qe+1:0,Lt=B(ee.thm[ye].s[Fe][ti],Zt,o*At);Zt=Math.min(Zt,Lt)}Ja=Ht[Qe*3+3]+Ht[Qe*3+4]+Ht[Qe*3+5],Ht[Qe*3+5]*6<Ja&&(Zt*=.5,Ht[Qe*3+4]*6<Ja&&(Zt*=.5)),ee.thm[ye].s[Fe][Qe]=Zt}}for(ee.nsPsy.lastAttacks[ye]=Tt[2],xt=0,Ne=0;Ne<ee.npart_l;Ne++){for(var ur=ee.s3ind[Ne][0],$a=ve[ur]*A[tn[ur]],dr=ee.s3_ll[xt++]*$a;++ur<=ee.s3ind[Ne][1];)$a=ve[ur]*A[tn[ur]],dr=w(dr,ee.s3_ll[xt++]*$a,ur,ur-Ne,ee);dr*=.158489319246111,ee.blocktype_old[ye&1]==O.SHORT_TYPE?Pe[Ne]=dr:Pe[Ne]=B(Math.min(dr,Math.min(n*ee.nb_1[ye][Ne],r*ee.nb_2[ye][Ne])),dr,At),ee.nb_2[ye][Ne]=ee.nb_1[ye][Ne],ee.nb_1[ye][Ne]=dr}for(;Ne<=O.CBANDS;++Ne)ve[Ne]=0,Pe[Ne]=0;d(ee,ve,Pe,ye)}if((F.mode==dt.STEREO||F.mode==dt.JOINT_STEREO)&&F.interChRatio>0&&N(F,F.interChRatio),F.mode==dt.JOINT_STEREO){var es;Y(ee),es=F.msfix,Math.abs(es)>0&&H(ee,es,F.ATHlower*ee.ATH.adjust)}for(W(F,Be,se,ne),ye=0;ye<Ye;ye++){var ni,ri=0,Pi,zi;ye>1?(ni=J,ri=-2,Pi=O.NORM_TYPE,(se[0]==O.SHORT_TYPE||se[1]==O.SHORT_TYPE)&&(Pi=O.SHORT_TYPE),zi=P[U][ye-2]):(ni=Z,ri=0,Pi=se[ye],zi=K[U][ye]),Pi==O.SHORT_TYPE?ni[ri+ye]=Ae(zi,ee.masking_lower):ni[ri+ye]=_e(zi,ee.masking_lower),F.analysis&&(ee.pinfo.pe[U][ye]=ni[ri+ye])}return 0};function Xe(F,L,z,U,K,P,Z,J){var G=F.internal_flags;if(U<2)e.fft_long(G,Z[J],U,L,z);else if(U==2)for(var se=O.BLKSIZE-1;se>=0;--se){var ee=Z[J+0][se],oe=Z[J+1][se];Z[J+0][se]=(ee+oe)*Qt.SQRT2*.5,Z[J+1][se]=(ee-oe)*Qt.SQRT2*.5}P[0]=Z[J+0][0],P[0]*=P[0];for(var se=O.BLKSIZE/2-1;se>=0;--se){var Q=Z[J+0][O.BLKSIZE/2-se],ve=Z[J+0][O.BLKSIZE/2+se];P[O.BLKSIZE/2-se]=(Q*Q+ve*ve)*.5}{for(var me=0,se=11;se<O.HBLKSIZE;se++)me+=P[se];G.tot_ener[U]=me}if(F.analysis){for(var se=0;se<O.HBLKSIZE;se++)G.pinfo.energy[K][U][se]=G.pinfo.energy_save[U][se],G.pinfo.energy_save[U][se]=P[se];G.pinfo.pe[K][U]=G.pe[U]}}function V(F,L,z,U,K,P,Z,J){var G=F.internal_flags;if(K==0&&U<2&&e.fft_short(G,Z[J],U,L,z),U==2)for(var se=O.BLKSIZE_s-1;se>=0;--se){var ee=Z[J+0][K][se],oe=Z[J+1][K][se];Z[J+0][K][se]=(ee+oe)*Qt.SQRT2*.5,Z[J+1][K][se]=(ee-oe)*Qt.SQRT2*.5}P[K][0]=Z[J+0][K][0],P[K][0]*=P[K][0];for(var se=O.BLKSIZE_s/2-1;se>=0;--se){var Q=Z[J+0][K][O.BLKSIZE_s/2-se],ve=Z[J+0][K][O.BLKSIZE_s/2+se];P[K][O.BLKSIZE_s/2-se]=(Q*Q+ve*ve)*.5}}function X(F,L,z,U){var K=F.internal_flags;F.athaa_loudapprox==2&&z<2&&(K.loudness_sq[L][z]=K.loudness_sq_save[z],K.loudness_sq_save[z]=C(U,K))}var te=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];function ce(F,L,z,U,K,P,Z,J,G,se){for(var ee=un([2,576]),oe=F.internal_flags,Q=oe.channels_out,ve=F.mode==dt.JOINT_STEREO?4:Q,me=0;me<Q;me++){firbuf=L[me];for(var Pe=z+576-350-f+192,ne=0;ne<576;ne++){var Be,Ye;Be=firbuf[Pe+ne+10],Ye=0;for(var ye=0;ye<(f-1)/2-1;ye+=2)Be+=te[ye]*(firbuf[Pe+ne+ye]+firbuf[Pe+ne+f-ye]),Ye+=te[ye+1]*(firbuf[Pe+ne+ye+1]+firbuf[Pe+ne+f-ye-1]);ee[me][ne]=Be+Ye}K[U][me].en.assign(oe.en[me]),K[U][me].thm.assign(oe.thm[me]),ve>2&&(P[U][me].en.assign(oe.en[me+2]),P[U][me].thm.assign(oe.thm[me+2]))}for(var me=0;me<ve;me++){var Ne=Ft(12),we=Ft(12),Ue=[0,0,0,0],xt=ee[me&1],Fe=0,Qe=me==3?oe.nsPsy.attackthre_s:oe.nsPsy.attackthre,tt=1;if(me==2)for(var ne=0,ye=576;ye>0;++ne,--ye){var At=ee[0][ne],tn=ee[1][ne];ee[0][ne]=At+tn,ee[1][ne]=At-tn}for(var ne=0;ne<3;ne++)we[ne]=oe.nsPsy.last_en_subshort[me][ne+6],et(oe.nsPsy.last_en_subshort[me][ne+4]>0),Ne[ne]=we[ne]/oe.nsPsy.last_en_subshort[me][ne+4],Ue[0]+=we[ne];for(var ne=0;ne<9;ne++){for(var Ct=Fe+64,Et=1;Fe<Ct;Fe++)Et<Math.abs(xt[Fe])&&(Et=Math.abs(xt[Fe]));oe.nsPsy.last_en_subshort[me][ne]=we[ne+3]=Et,Ue[1+ne/3]+=Et,Et>we[ne+3-2]?(et(we[ne+3-2]>0),Et=Et/we[ne+3-2]):we[ne+3-2]>Et*10?Et=we[ne+3-2]/(Et*10):Et=0,Ne[ne+3]=Et}for(var ne=0;ne<3;++ne){var Wt=we[ne*3+3]+we[ne*3+4]+we[ne*3+5],nn=1;we[ne*3+5]*6<Wt&&(nn*=.5,we[ne*3+4]*6<Wt&&(nn*=.5)),J[me][ne]=nn}if(F.analysis){for(var rn=Ne[0],ne=1;ne<12;ne++)rn<Ne[ne]&&(rn=Ne[ne]);oe.pinfo.ers[U][me]=oe.pinfo.ers_save[me],oe.pinfo.ers_save[me]=rn}for(var ne=0;ne<12;ne++)G[me][ne/3]==0&&Ne[ne]>Qe&&(G[me][ne/3]=ne%3+1);for(var ne=1;ne<4;ne++){var vn=Ue[ne-1],_n=Ue[ne],Ht=Math.max(vn,_n);Ht<4e4&&vn<1.7*_n&&_n<1.7*vn&&(ne==1&&G[me][0]<=G[me][ne]&&(G[me][0]=0),G[me][ne]=0)}G[me][0]<=oe.nsPsy.lastAttacks[me]&&(G[me][0]=0),(oe.nsPsy.lastAttacks[me]==3||G[me][0]+G[me][1]+G[me][2]+G[me][3]!=0)&&(tt=0,G[me][1]!=0&&G[me][0]!=0&&(G[me][1]=0),G[me][2]!=0&&G[me][1]!=0&&(G[me][2]=0),G[me][3]!=0&&G[me][2]!=0&&(G[me][3]=0)),me<2?se[me]=tt:tt==0&&(se[0]=se[1]=0),Z[me]=oe.tot_ener[me]}}function ue(F,L,z){if(z==0)for(var U=0;U<F.npart_s;U++)F.nb_s2[L][U]=F.nb_s1[L][U],F.nb_s1[L][U]=0}function be(F,L){for(var z=0;z<F.npart_l;z++)F.nb_2[L][z]=F.nb_1[L][z],F.nb_1[L][z]=0}function Te(F,L,z,U){var K=A.length-1,P=0,Z=z[P]+z[P+1];if(Z>0){var J=L[P];J<L[P+1]&&(J=L[P+1]),et(F.numlines_s[P]+F.numlines_s[P+1]-1>0),Z=20*(J*2-Z)/(Z*(F.numlines_s[P]+F.numlines_s[P+1]-1));var G=0|Z;G>K&&(G=K),U[P]=G}else U[P]=0;for(P=1;P<F.npart_s-1;P++)if(Z=z[P-1]+z[P]+z[P+1],et(P+1<F.npart_s),Z>0){var J=L[P-1];J<L[P]&&(J=L[P]),J<L[P+1]&&(J=L[P+1]),et(F.numlines_s[P-1]+F.numlines_s[P]+F.numlines_s[P+1]-1>0),Z=20*(J*3-Z)/(Z*(F.numlines_s[P-1]+F.numlines_s[P]+F.numlines_s[P+1]-1));var G=0|Z;G>K&&(G=K),U[P]=G}else U[P]=0;if(et(P==F.npart_s-1),Z=z[P-1]+z[P],Z>0){var J=L[P-1];J<L[P]&&(J=L[P]),et(F.numlines_s[P-1]+F.numlines_s[P]-1>0),Z=20*(J*2-Z)/(Z*(F.numlines_s[P-1]+F.numlines_s[P]-1));var G=0|Z;G>K&&(G=K),U[P]=G}else U[P]=0;et(P==F.npart_s-1)}function ke(F,L,z,U,K,P){var Z=F.internal_flags,J=new float[O.CBANDS],G=Ft(O.CBANDS),se,ee,oe,Q=new int[O.CBANDS];for(oe=ee=0;oe<Z.npart_s;++oe){var ve=0,me=0,Pe=Z.numlines_s[oe];for(se=0;se<Pe;++se,++ee){var ne=L[P][ee];ve+=ne,me<ne&&(me=ne)}z[oe]=ve,J[oe]=me,G[oe]=ve/Pe,et(G[oe]>=0)}for(et(oe==Z.npart_s);oe<O.CBANDS;++oe)J[oe]=0,G[oe]=0;for(Te(Z,J,G,Q),ee=oe=0;oe<Z.npart_s;oe++){var Be=Z.s3ind_s[oe][0],Ye=Z.s3ind_s[oe][1],ye,Ne,we,Ue,xt;for(ye=Q[Be],Ne=1,Ue=Z.s3_ss[ee]*z[Be]*A[Q[Be]],++ee,++Be;Be<=Ye;)ye+=Q[Be],Ne+=1,we=Z.s3_ss[ee]*z[Be]*A[Q[Be]],Ue=k(Ue,we,Be-oe),++ee,++Be;ye=(1+2*ye)/(2*Ne),xt=A[ye]*.5,Ue*=xt,U[oe]=Ue,Z.nb_s2[K][oe]=Z.nb_s1[K][oe],Z.nb_s1[K][oe]=Ue,we=J[oe],we*=Z.minval_s[oe],we*=xt,U[oe]>we&&(U[oe]=we),Z.masking_lower>1&&(U[oe]*=Z.masking_lower),U[oe]>z[oe]&&(U[oe]=z[oe]),Z.masking_lower<1&&(U[oe]*=Z.masking_lower),et(U[oe]>=0)}for(;oe<O.CBANDS;++oe)z[oe]=0,U[oe]=0}function xe(F,L,z,U,K){var P=Ft(O.CBANDS),Z=Ft(O.CBANDS),J=_r(O.CBANDS+2),G;He(F,L,z,P,Z),Ee(F,P,Z,J);var se=0;for(G=0;G<F.npart_l;G++){var ee,oe,Q,ve,me=F.s3ind[G][0],Pe=F.s3ind[G][1],ne=0,Be=0;for(ne=J[me],Be+=1,oe=F.s3_ll[se]*z[me]*A[J[me]],++se,++me;me<=Pe;)ne+=J[me],Be+=1,ee=F.s3_ll[se]*z[me]*A[J[me]],ve=k(oe,ee,me-G),oe=ve,++se,++me;if(ne=(1+2*ne)/(2*Be),Q=A[ne]*.5,oe*=Q,F.blocktype_old[K&1]==O.SHORT_TYPE){var Ye=n*F.nb_1[K][G];Ye>0?U[G]=Math.min(oe,Ye):U[G]=Math.min(oe,z[G]*o)}else{var ye=r*F.nb_2[K][G],Ne=n*F.nb_1[K][G],Ye;ye<=0&&(ye=oe),Ne<=0&&(Ne=oe),F.blocktype_old[K&1]==O.NORM_TYPE?Ye=Math.min(Ne,ye):Ye=Ne,U[G]=Math.min(oe,Ye)}F.nb_2[K][G]=F.nb_1[K][G],F.nb_1[K][G]=oe,ee=P[G],ee*=F.minval_l[G],ee*=Q,U[G]>ee&&(U[G]=ee),F.masking_lower>1&&(U[G]*=F.masking_lower),U[G]>z[G]&&(U[G]=z[G]),F.masking_lower<1&&(U[G]*=F.masking_lower),et(U[G]>=0)}for(;G<O.CBANDS;++G)z[G]=0,U[G]=0}function pe(F,L){var z=F.internal_flags;F.short_blocks==jr.short_block_coupled&&!(L[0]!=0&&L[1]!=0)&&(L[0]=L[1]=0);for(var U=0;U<z.channels_out;U++)F.short_blocks==jr.short_block_dispensed&&(L[U]=1),F.short_blocks==jr.short_block_forced&&(L[U]=0)}function ze(F,L,z){for(var U=F.internal_flags,K=0;K<U.channels_out;K++){var P=O.NORM_TYPE;L[K]!=0?(et(U.blocktype_old[K]!=O.START_TYPE),U.blocktype_old[K]==O.SHORT_TYPE&&(P=O.STOP_TYPE)):(P=O.SHORT_TYPE,U.blocktype_old[K]==O.NORM_TYPE&&(U.blocktype_old[K]=O.START_TYPE),U.blocktype_old[K]==O.STOP_TYPE&&(U.blocktype_old[K]=O.SHORT_TYPE)),z[K]=U.blocktype_old[K],U.blocktype_old[K]=P}}function De(F,L,z,U,K,P,Z){for(var J=P*2,G=P>0?Math.pow(10,K):1,se,ee,oe=0;oe<Z;++oe){var Q=F[2][oe],ve=F[3][oe],me=L[0][oe],Pe=L[1][oe],ne=L[2][oe],Be=L[3][oe];if(me<=1.58*Pe&&Pe<=1.58*me){var Ye=z[oe]*ve,ye=z[oe]*Q;ee=Math.max(ne,Math.min(Be,Ye)),se=Math.max(Be,Math.min(ne,ye))}else ee=ne,se=Be;if(P>0){var Ne,we,Ue=U[oe]*G;if(Ne=Math.min(Math.max(me,Ue),Math.max(Pe,Ue)),ne=Math.max(ee,Ue),Be=Math.max(se,Ue),we=ne+Be,we>0&&Ne*J<we){var xt=Ne*J/we;ne*=xt,Be*=xt}ee=Math.min(ne,ee),se=Math.min(Be,se)}ee>Q&&(ee=Q),se>ve&&(se=ve),L[2][oe]=ee,L[3][oe]=se}}this.L3psycho_anal_vbr=function(F,L,z,U,K,P,Z,J,G,se){var ee=F.internal_flags,oe,Q,ve=Ft(O.HBLKSIZE),me=un([3,O.HBLKSIZE_s]),Pe=un([2,O.BLKSIZE]),ne=un([2,3,O.BLKSIZE_s]),Be=un([4,O.CBANDS]),Ye=un([4,O.CBANDS]),ye=un([4,3]),Ne=.6,we=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],Ue=_r(2),xt=F.mode==dt.JOINT_STEREO?4:ee.channels_out;ce(F,L,z,U,K,P,G,ye,we,Ue),pe(F,Ue);{for(var Fe=0;Fe<xt;Fe++){var Qe=Fe&1;oe=Pe,Xe(F,L,z,Fe,U,ve,oe,Qe),X(F,U,Fe,ve),Ue[Qe]!=0?xe(ee,ve,Be[Fe],Ye[Fe],Fe):be(ee,Fe)}Ue[0]+Ue[1]==2&&F.mode==dt.JOINT_STEREO&&De(Be,Ye,ee.mld_cb_l,ee.ATH.cb_l,F.ATHlower*ee.ATH.adjust,F.msfix,ee.npart_l);for(var Fe=0;Fe<xt;Fe++){var Qe=Fe&1;Ue[Qe]!=0&&d(ee,Be[Fe],Ye[Fe],Fe)}}{for(var tt=0;tt<3;tt++){for(var Fe=0;Fe<xt;++Fe){var Qe=Fe&1;Ue[Qe]!=0?ue(ee,Fe,tt):(Q=ne,V(F,L,z,Fe,tt,me,Q,Qe),ke(F,me,Be[Fe],Ye[Fe],Fe,tt))}Ue[0]+Ue[1]==0&&F.mode==dt.JOINT_STEREO&&De(Be,Ye,ee.mld_cb_s,ee.ATH.cb_s,F.ATHlower*ee.ATH.adjust,F.msfix,ee.npart_s);for(var Fe=0;Fe<xt;++Fe){var Qe=Fe&1;Ue[Qe]==0&&q(ee,Be[Fe],Ye[Fe],Fe,tt)}}for(var Fe=0;Fe<xt;Fe++){var Qe=Fe&1;if(Ue[Qe]==0)for(var At=0;At<O.SBMAX_s;At++){for(var tn=Ft(3),tt=0;tt<3;tt++){var Ct=ee.thm[Fe].s[At][tt];if(Ct*=u,we[Fe][tt]>=2||we[Fe][tt+1]==1){var Et=tt!=0?tt-1:2,Wt=B(ee.thm[Fe].s[At][Et],Ct,m*Ne);Ct=Math.min(Ct,Wt)}else if(we[Fe][tt]==1){var Et=tt!=0?tt-1:2,Wt=B(ee.thm[Fe].s[At][Et],Ct,o*Ne);Ct=Math.min(Ct,Wt)}else if(tt!=0&&we[Fe][tt-1]==3||tt==0&&ee.nsPsy.lastAttacks[Fe]==3){var Et=tt!=2?tt+1:0,Wt=B(ee.thm[Fe].s[At][Et],Ct,o*Ne);Ct=Math.min(Ct,Wt)}Ct*=ye[Fe][tt],tn[tt]=Ct}for(var tt=0;tt<3;tt++)ee.thm[Fe].s[At][tt]=tn[tt]}}}for(var Fe=0;Fe<xt;Fe++)ee.nsPsy.lastAttacks[Fe]=we[Fe][2];ze(F,Ue,se);for(var Fe=0;Fe<xt;Fe++){var nn,rn,vn,_n;Fe>1?(nn=J,rn=-2,vn=O.NORM_TYPE,(se[0]==O.SHORT_TYPE||se[1]==O.SHORT_TYPE)&&(vn=O.SHORT_TYPE),_n=P[U][Fe-2]):(nn=Z,rn=0,vn=se[Fe],_n=K[U][Fe]),vn==O.SHORT_TYPE?nn[rn+Fe]=Ae(_n,ee.masking_lower):nn[rn+Fe]=_e(_n,ee.masking_lower),F.analysis&&(ee.pinfo.pe[U][Fe]=nn[rn+Fe])}return 0};function je(F,L){var z=F,U;return z>=0?U=-z*27:U=z*L,U<=-72?0:Math.exp(U*g)}function Ve(F){var L=0,z=0;{var U=0,K,P;for(U=0;je(U,F)>1e-20;U-=1);for(K=U,P=0;Math.abs(P-K)>1e-12;)U=(P+K)/2,je(U,F)>0?P=U:K=U;L=K}{var U=0,K,P;for(U=0;je(U,F)>1e-20;U+=1);for(K=0,P=U;Math.abs(P-K)>1e-12;)U=(P+K)/2,je(U,F)>0?K=U:P=U;z=P}{var Z=0,J=1e3,G;for(G=0;G<=J;++G){var U=L+G*(z-L)/J,se=je(U,F);Z+=se}{var ee=(J+1)/(Z*(z-L));return ee}}}function qe(F){var L,z,U,K;return L=F,L>=0?L*=3:L*=1.5,L>=.5&&L<=2.5?(K=L-.5,z=8*(K*K-2*K)):z=0,L+=.474,U=15.811389+7.5*L-17.5*Math.sqrt(1+L*L),U<=-60?0:(L=Math.exp((z+U)*g),L/=.6609193,L)}function Ze(F){return F<0&&(F=0),F=F*.001,13*Math.atan(.76*F)+3.5*Math.atan(F*F/(7.5*7.5))}function de(F,L,z,U,K,P,Z,J,G,se,ee,oe){var Q=Ft(O.CBANDS+1),ve=J/(oe>15?2*576:384),me=_r(O.HBLKSIZE),Pe;J/=G;var ne=0,Be=0;for(Pe=0;Pe<O.CBANDS;Pe++){var Ye,ye;for(Ye=Ze(J*ne),Q[Pe]=J*ne,ye=ne;Ze(J*ye)-Ye<s&&ye<=G/2;ye++);for(F[Pe]=ye-ne,Be=Pe+1;ne<ye;)me[ne++]=Pe;if(ne>G/2){ne=G/2,++Pe;break}}Q[Pe]=J*ne;for(var Ne=0;Ne<oe;Ne++){var we,Ue,xt,Fe,Qe;xt=se[Ne],Fe=se[Ne+1],we=0|Math.floor(.5+ee*(xt-.5)),we<0&&(we=0),Ue=0|Math.floor(.5+ee*(Fe-.5)),Ue>G/2&&(Ue=G/2),z[Ne]=(me[we]+me[Ue])/2,L[Ne]=me[Ue];var tt=ve*Fe;Z[Ne]=(tt-Q[L[Ne]])/(Q[L[Ne]+1]-Q[L[Ne]]),Z[Ne]<0?Z[Ne]=0:Z[Ne]>1&&(Z[Ne]=1),Qe=Ze(J*se[Ne]*ee),Qe=Math.min(Qe,15.5)/15.5,P[Ne]=Math.pow(10,1.25*(1-Math.cos(Math.PI*Qe))-2.5)}ne=0;for(var At=0;At<Be;At++){var tn=F[At],Ye,Ct;Ye=Ze(J*ne),Ct=Ze(J*(ne+tn-1)),U[At]=.5*(Ye+Ct),Ye=Ze(J*(ne-.5)),Ct=Ze(J*(ne+tn-.5)),K[At]=Ct-Ye,ne+=tn}return Be}function Me(F,L,z,U,K,P){var Z=un([O.CBANDS,O.CBANDS]),J,G=0;if(P)for(var se=0;se<L;se++)for(J=0;J<L;J++){var ee=qe(z[se]-z[J])*U[J];Z[se][J]=ee*K[se]}else for(J=0;J<L;J++)for(var oe=15+Math.min(21/z[J],12),Q=Ve(oe),se=0;se<L;se++){var ee=Q*je(z[se]-z[J],oe)*U[J];Z[se][J]=ee*K[se]}for(var se=0;se<L;se++){for(J=0;J<L&&!(Z[se][J]>0);J++);for(F[se][0]=J,J=L-1;J>0&&!(Z[se][J]>0);J--);F[se][1]=J,G+=F[se][1]-F[se][0]+1}for(var ve=Ft(G),me=0,se=0;se<L;se++)for(J=F[se][0];J<=F[se][1];J++)ve[me++]=Z[se][J];return ve}function re(F){var L=Ze(F);return L=Math.min(L,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*L))-2.5)}this.psymodel_init=function(F){var L=F.internal_flags,z,U=!0,K=13,P=24,Z=0,J=0,G=-8.25,se=-4.5,ee=Ft(O.CBANDS),oe=Ft(O.CBANDS),Q=Ft(O.CBANDS),ve=F.out_samplerate;switch(F.experimentalZ){default:case 0:U=!0;break;case 1:U=!(F.VBR==Lr.vbr_mtrh||F.VBR==Lr.vbr_mt);break;case 2:U=!1;break;case 3:K=8,Z=-1.75,J=-.0125,G=-8.25,se=-2.25;break}for(L.ms_ener_ratio_old=.25,L.blocktype_old[0]=L.blocktype_old[1]=O.NORM_TYPE,z=0;z<4;++z){for(var ne=0;ne<O.CBANDS;++ne)L.nb_1[z][ne]=1e20,L.nb_2[z][ne]=1e20,L.nb_s1[z][ne]=L.nb_s2[z][ne]=1;for(var me=0;me<O.SBMAX_l;me++)L.en[z].l[me]=1e20,L.thm[z].l[me]=1e20;for(var ne=0;ne<3;++ne){for(var me=0;me<O.SBMAX_s;me++)L.en[z].s[me][ne]=1e20,L.thm[z].s[me][ne]=1e20;L.nsPsy.lastAttacks[z]=0}for(var ne=0;ne<9;ne++)L.nsPsy.last_en_subshort[z][ne]=10}for(L.loudness_sq_save[0]=L.loudness_sq_save[1]=0,L.npart_l=de(L.numlines_l,L.bo_l,L.bm_l,ee,oe,L.mld_l,L.PSY.bo_l_weight,ve,O.BLKSIZE,L.scalefac_band.l,O.BLKSIZE/(2*576),O.SBMAX_l),et(L.npart_l<O.CBANDS),z=0;z<L.npart_l;z++){var Pe=Z;ee[z]>=K&&(Pe=J*(ee[z]-K)/(P-K)+Z*(P-ee[z])/(P-K)),Q[z]=Math.pow(10,Pe/10),L.numlines_l[z]>0?L.rnumlines_l[z]=1/L.numlines_l[z]:L.rnumlines_l[z]=0}L.s3_ll=Me(L.s3ind,L.npart_l,ee,oe,Q,U);var ne=0;for(z=0;z<L.npart_l;z++){var Be;Be=dc.MAX_VALUE;for(var Ye=0;Ye<L.numlines_l[z];Ye++,ne++){var ye=ve*ne/(1e3*O.BLKSIZE),Ne;Ne=this.ATHformula(ye*1e3,F)-20,Ne=Math.pow(10,.1*Ne),Ne*=L.numlines_l[z],Be>Ne&&(Be=Ne)}L.ATH.cb_l[z]=Be,Be=-20+ee[z]*20/10,Be>6&&(Be=100),Be<-15&&(Be=-15),Be-=8,L.minval_l[z]=Math.pow(10,Be/10)*L.numlines_l[z]}for(L.npart_s=de(L.numlines_s,L.bo_s,L.bm_s,ee,oe,L.mld_s,L.PSY.bo_s_weight,ve,O.BLKSIZE_s,L.scalefac_band.s,O.BLKSIZE_s/384,O.SBMAX_s),et(L.npart_s<O.CBANDS),ne=0,z=0;z<L.npart_s;z++){var Be,Pe=G;ee[z]>=K&&(Pe=se*(ee[z]-K)/(P-K)+G*(P-ee[z])/(P-K)),Q[z]=Math.pow(10,Pe/10),Be=dc.MAX_VALUE;for(var Ye=0;Ye<L.numlines_s[z];Ye++,ne++){var ye=ve*ne/(1e3*O.BLKSIZE_s),Ne;Ne=this.ATHformula(ye*1e3,F)-20,Ne=Math.pow(10,.1*Ne),Ne*=L.numlines_s[z],Be>Ne&&(Be=Ne)}L.ATH.cb_s[z]=Be,Be=-7+ee[z]*7/12,ee[z]>12&&(Be*=1+Math.log(1+Be)*3.1),ee[z]<12&&(Be*=1+Math.log(1-Be)*2.3),Be<-15&&(Be=-15),Be-=8,L.minval_s[z]=Math.pow(10,Be/10)*L.numlines_s[z]}L.s3_ss=Me(L.s3ind_s,L.npart_s,ee,oe,Q,U),E(),e.init_fft(L),L.decay=Math.exp(-1*t/(v*ve/192));{var we;we=l,(F.exp_nspsytune&2)!=0&&(we=1),Math.abs(F.msfix)>0&&(we=F.msfix),F.msfix=we;for(var Ue=0;Ue<L.npart_l;Ue++)L.s3ind[Ue][1]>L.npart_l-1&&(L.s3ind[Ue][1]=L.npart_l-1)}var xt=576*L.mode_gr/ve;if(L.ATH.decay=Math.pow(10,-12/10*xt),L.ATH.adjust=.01,L.ATH.adjustLimit=1,et(L.bo_l[O.SBMAX_l-1]<=L.npart_l),et(L.bo_s[O.SBMAX_s-1]<=L.npart_s),F.ATHtype!=-1){var ye,Fe=F.out_samplerate/O.BLKSIZE,Qe=0;for(ye=0,z=0;z<O.BLKSIZE/2;++z)ye+=Fe,L.ATH.eql_w[z]=1/Math.pow(10,this.ATHformula(ye,F)/10),Qe+=L.ATH.eql_w[z];for(Qe=1/Qe,z=O.BLKSIZE/2;--z>=0;)L.ATH.eql_w[z]*=Qe}{for(var Ue=ne=0;Ue<L.npart_s;++Ue)for(z=0;z<L.numlines_s[Ue];++z)++ne;for(var Ue=ne=0;Ue<L.npart_l;++Ue)for(z=0;z<L.numlines_l[Ue];++z)++ne}for(ne=0,z=0;z<L.npart_l;z++){var ye=ve*(ne+L.numlines_l[z]/2)/(1*O.BLKSIZE);L.mld_cb_l[z]=re(ye),ne+=L.numlines_l[z]}for(;z<O.CBANDS;++z)L.mld_cb_l[z]=1;for(ne=0,z=0;z<L.npart_s;z++){var ye=ve*(ne+L.numlines_s[z]/2)/(1*O.BLKSIZE_s);L.mld_cb_s[z]=re(ye),ne+=L.numlines_s[z]}for(;z<O.CBANDS;++z)L.mld_cb_s[z]=1;return 0};function Le(F,L){F<-.3&&(F=3410),F/=1e3,F=Math.max(.1,F);var z=3.64*Math.pow(F,-.8)-6.8*Math.exp(-.6*Math.pow(F-3.4,2))+6*Math.exp(-.15*Math.pow(F-8.7,2))+(.6+.04*L)*.001*Math.pow(F,4);return z}this.ATHformula=function(F,L){var z;switch(L.ATHtype){case 0:z=Le(F,9);break;case 1:z=Le(F,-1);break;case 2:z=Le(F,0);break;case 3:z=Le(F,1)+6;break;case 4:z=Le(F,L.ATHcurve);break;default:z=Le(F,0);break}return z}}function cg(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=dt.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}var sr={};sr.SFBMAX=O.SBMAX_s*3;var ug=Re.new_float,pr=Re.new_int;function Aa(){this.xr=ug(576),this.l3_enc=pr(576),this.scalefac=pr(sr.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=pr(3),this.subblock_gain=pr(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=pr(sr.SFBMAX),this.window=pr(sr.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=pr(4),this.max_nonzero_coeff=0;var e=this;function t(r){return new Int32Array(r)}function n(r){return new Float32Array(r)}this.assign=function(r){e.xr=n(r.xr),e.l3_enc=t(r.l3_enc),e.scalefac=t(r.scalefac),e.xrpow_max=r.xrpow_max,e.part2_3_length=r.part2_3_length,e.big_values=r.big_values,e.count1=r.count1,e.global_gain=r.global_gain,e.scalefac_compress=r.scalefac_compress,e.block_type=r.block_type,e.mixed_block_flag=r.mixed_block_flag,e.table_select=t(r.table_select),e.subblock_gain=t(r.subblock_gain),e.region0_count=r.region0_count,e.region1_count=r.region1_count,e.preflag=r.preflag,e.scalefac_scale=r.scalefac_scale,e.count1table_select=r.count1table_select,e.part2_length=r.part2_length,e.sfb_lmax=r.sfb_lmax,e.sfb_smin=r.sfb_smin,e.psy_lmax=r.psy_lmax,e.sfbmax=r.sfbmax,e.psymax=r.psymax,e.sfbdivide=r.sfbdivide,e.width=t(r.width),e.window=t(r.window),e.count1bits=r.count1bits,e.sfb_partition_table=r.sfb_partition_table.slice(0),e.slen=t(r.slen),e.max_nonzero_coeff=r.max_nonzero_coeff}}var mc=Re.new_int;function dg(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[mc(4),mc(4)];for(var e=0;e<2;e++)for(var t=0;t<2;t++)this.tt[e][t]=new Aa}var na=Re.System,ra=Re.new_int;function Rn(e,t,n,r){this.l=ra(1+O.SBMAX_l),this.s=ra(1+O.SBMAX_s),this.psfb21=ra(1+O.PSFB21),this.psfb12=ra(1+O.PSFB12);var a=this.l,i=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],na.arraycopy(this.arrL,0,a,0,Math.min(this.arrL.length,this.l.length)),na.arraycopy(this.arrS,0,i,0,Math.min(this.arrS.length,this.s.length)),na.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),na.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}var gs=Re.new_float,mg=Re.new_float_n,hg=Re.new_int;function fg(){this.last_en_subshort=mg([4,9]),this.lastAttacks=hg(4),this.pefirbuf=gs(19),this.longfact=gs(O.SBMAX_l),this.shortfact=gs(O.SBMAX_s),this.attackthre=0,this.attackthre_s=0}function vg(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}var _g=Re.new_byte,pg=Re.new_double,dn=Re.new_float,gr=Re.new_float_n,pn=Re.new_int,ia=Re.new_int_n;ut.MFSIZE=3*1152+O.ENCDELAY-O.MDCTDELAY;ut.MAX_HEADER_BUF=256;ut.MAX_BITS_PER_CHANNEL=4095;ut.MAX_BITS_PER_GRANULE=7680;ut.BPC=320;function ut(){var e=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=gr([2,ut.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new dg,this.ms_ratio=dn(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=pn(2),this.CurrentStep=pn(2),this.masking_lower=0,this.bv_scf=pn(576),this.pseudohalf=pn(sr.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*ut.BPC+1),this.itime=pg(2),this.sideinfo_len=0,this.sb_sample=gr([2,2,18,O.SBLIMIT]),this.amp_filter=dn(32);function t(){this.write_timing=0,this.ptr=0,this.buf=_g(e)}this.header=new Array(ut.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new Rn,this.minval_l=dn(O.CBANDS),this.minval_s=dn(O.CBANDS),this.nb_1=gr([4,O.CBANDS]),this.nb_2=gr([4,O.CBANDS]),this.nb_s1=gr([4,O.CBANDS]),this.nb_s2=gr([4,O.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=dn(4),this.loudness_sq=gr([2,2]),this.loudness_sq_save=dn(2),this.mld_l=dn(O.SBMAX_l),this.mld_s=dn(O.SBMAX_s),this.bm_l=pn(O.SBMAX_l),this.bo_l=pn(O.SBMAX_l),this.bm_s=pn(O.SBMAX_s),this.bo_s=pn(O.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=ia([O.CBANDS,2]),this.s3ind_s=ia([O.CBANDS,2]),this.numlines_s=pn(O.CBANDS),this.numlines_l=pn(O.CBANDS),this.rnumlines_l=dn(O.CBANDS),this.mld_cb_l=dn(O.CBANDS),this.mld_cb_s=dn(O.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=dn(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=pn(2),this.nsPsy=new fg,this.VBR_seek_table=new vg,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=ia([16,5]),this.bitrate_blockType_Hist=ia([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var n=0;n<this.en.length;n++)this.en[n]=new Ma;for(var n=0;n<this.thm.length;n++)this.thm[n]=new Ma;for(var n=0;n<this.header.length;n++)this.header[n]=new t}var br=Re.new_float;function gg(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=br(O.SBMAX_l),this.s=br(O.SBMAX_s),this.psfb21=br(O.PSFB21),this.psfb12=br(O.PSFB12),this.cb_l=br(O.CBANDS),this.cb_s=br(O.CBANDS),this.eql_w=br(O.BLKSIZE/2)}var Jt=Re.System,hc=Re.Arrays;It.STEPS_per_dB=100;It.MAX_dB=120;It.GAIN_NOT_ENOUGH_SAMPLES=-24601;It.GAIN_ANALYSIS_ERROR=0;It.GAIN_ANALYSIS_OK=1;It.INIT_GAIN_ANALYSIS_ERROR=0;It.INIT_GAIN_ANALYSIS_OK=1;It.YULE_ORDER=10;It.MAX_ORDER=It.YULE_ORDER;It.MAX_SAMP_FREQ=48e3;It.RMS_WINDOW_TIME_NUMERATOR=1;It.RMS_WINDOW_TIME_DENOMINATOR=20;It.MAX_SAMPLES_PER_WINDOW=It.MAX_SAMP_FREQ*It.RMS_WINDOW_TIME_NUMERATOR/It.RMS_WINDOW_TIME_DENOMINATOR+1;function It(){var e=64.82,t=.95,n=It.RMS_WINDOW_TIME_NUMERATOR,r=It.RMS_WINDOW_TIME_DENOMINATOR,a=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],i=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function s(o,l,f,g,D,C){for(;D--!=0;)f[g]=1e-10+o[l+0]*C[0]-f[g-1]*C[1]+o[l-1]*C[2]-f[g-2]*C[3]+o[l-2]*C[4]-f[g-3]*C[5]+o[l-3]*C[6]-f[g-4]*C[7]+o[l-4]*C[8]-f[g-5]*C[9]+o[l-5]*C[10]-f[g-6]*C[11]+o[l-6]*C[12]-f[g-7]*C[13]+o[l-7]*C[14]-f[g-8]*C[15]+o[l-8]*C[16]-f[g-9]*C[17]+o[l-9]*C[18]-f[g-10]*C[19]+o[l-10]*C[20],++g,++l}function c(o,l,f,g,D,C){for(;D--!=0;)f[g]=o[l+0]*C[0]-f[g-1]*C[1]+o[l-1]*C[2]-f[g-2]*C[3]+o[l-2]*C[4],++g,++l}function v(o,l){for(var f=0;f<MAX_ORDER;f++)o.linprebuf[f]=o.lstepbuf[f]=o.loutbuf[f]=o.rinprebuf[f]=o.rstepbuf[f]=o.routbuf[f]=0;switch(0|l){case 48e3:o.reqindex=0;break;case 44100:o.reqindex=1;break;case 32e3:o.reqindex=2;break;case 24e3:o.reqindex=3;break;case 22050:o.reqindex=4;break;case 16e3:o.reqindex=5;break;case 12e3:o.reqindex=6;break;case 11025:o.reqindex=7;break;case 8e3:o.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return o.sampleWindow=0|(l*n+r-1)/r,o.lsum=0,o.rsum=0,o.totsamp=0,hc.ill(o.A,0),INIT_GAIN_ANALYSIS_OK}this.InitGainAnalysis=function(o,l){return v(o,l)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(o.linpre=MAX_ORDER,o.rinpre=MAX_ORDER,o.lstep=MAX_ORDER,o.rstep=MAX_ORDER,o.lout=MAX_ORDER,o.rout=MAX_ORDER,hc.fill(o.B,0),INIT_GAIN_ANALYSIS_OK)};function u(o){return o*o}this.AnalyzeSamples=function(o,l,f,g,D,C,M){var p,I,j,_,R,T,A;if(C==0)return GAIN_ANALYSIS_OK;switch(A=0,R=C,M){case 1:g=l,D=f;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(C<MAX_ORDER?(Jt.arraycopy(l,f,o.linprebuf,MAX_ORDER,C),Jt.arraycopy(g,D,o.rinprebuf,MAX_ORDER,C)):(Jt.arraycopy(l,f,o.linprebuf,MAX_ORDER,MAX_ORDER),Jt.arraycopy(g,D,o.rinprebuf,MAX_ORDER,MAX_ORDER));R>0;){T=R>o.sampleWindow-o.totsamp?o.sampleWindow-o.totsamp:R,A<MAX_ORDER?(p=o.linpre+A,I=o.linprebuf,j=o.rinpre+A,_=o.rinprebuf,T>MAX_ORDER-A&&(T=MAX_ORDER-A)):(p=f+A,I=l,j=D+A,_=g),s(I,p,o.lstepbuf,o.lstep+o.totsamp,T,a[o.reqindex]),s(_,j,o.rstepbuf,o.rstep+o.totsamp,T,a[o.reqindex]),c(o.lstepbuf,o.lstep+o.totsamp,o.loutbuf,o.lout+o.totsamp,T,i[o.reqindex]),c(o.rstepbuf,o.rstep+o.totsamp,o.routbuf,o.rout+o.totsamp,T,i[o.reqindex]),p=o.lout+o.totsamp,I=o.loutbuf,j=o.rout+o.totsamp,_=o.routbuf;for(var E=T%8;E--!=0;)o.lsum+=u(I[p++]),o.rsum+=u(_[j++]);for(E=T/8;E--!=0;)o.lsum+=u(I[p+0])+u(I[p+1])+u(I[p+2])+u(I[p+3])+u(I[p+4])+u(I[p+5])+u(I[p+6])+u(I[p+7]),p+=8,o.rsum+=u(_[j+0])+u(_[j+1])+u(_[j+2])+u(_[j+3])+u(_[j+4])+u(_[j+5])+u(_[j+6])+u(_[j+7]),j+=8;if(R-=T,A+=T,o.totsamp+=T,o.totsamp==o.sampleWindow){var h=It.STEPS_per_dB*10*Math.log10((o.lsum+o.rsum)/o.totsamp*.5+1e-37),y=h<=0?0:0|h;y>=o.A.length&&(y=o.A.length-1),o.A[y]++,o.lsum=o.rsum=0,Jt.arraycopy(o.loutbuf,o.totsamp,o.loutbuf,0,MAX_ORDER),Jt.arraycopy(o.routbuf,o.totsamp,o.routbuf,0,MAX_ORDER),Jt.arraycopy(o.lstepbuf,o.totsamp,o.lstepbuf,0,MAX_ORDER),Jt.arraycopy(o.rstepbuf,o.totsamp,o.rstepbuf,0,MAX_ORDER),o.totsamp=0}if(o.totsamp>o.sampleWindow)return GAIN_ANALYSIS_ERROR}return C<MAX_ORDER?(Jt.arraycopy(o.linprebuf,C,o.linprebuf,0,MAX_ORDER-C),Jt.arraycopy(o.rinprebuf,C,o.rinprebuf,0,MAX_ORDER-C),Jt.arraycopy(l,f,o.linprebuf,MAX_ORDER-C,C),Jt.arraycopy(g,D,o.rinprebuf,MAX_ORDER-C,C)):(Jt.arraycopy(l,f+C-MAX_ORDER,o.linprebuf,0,MAX_ORDER),Jt.arraycopy(g,D+C-MAX_ORDER,o.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK};function m(o,l){var f,g=0;for(f=0;f<l;f++)g+=o[f];if(g==0)return GAIN_NOT_ENOUGH_SAMPLES;var D=0|Math.ceil(g*(1-t));for(f=l;f-- >0&&!((D-=o[f])<=0););return e-f/It.STEPS_per_dB}this.GetTitleGain=function(o){for(var l=m(o.A,o.A.length),f=0;f<o.A.length;f++)o.B[f]+=o.A[f],o.A[f]=0;for(var f=0;f<MAX_ORDER;f++)o.linprebuf[f]=o.lstepbuf[f]=o.loutbuf[f]=o.rinprebuf[f]=o.rstepbuf[f]=o.routbuf[f]=0;return o.totsamp=0,o.lsum=o.rsum=0,l}}var Nr=Re.new_float,fc=Re.new_int;function bg(){this.linprebuf=Nr(void 0*2),this.linpre=0,this.lstepbuf=Nr(void 0+void 0),this.lstep=0,this.loutbuf=Nr(void 0+void 0),this.lout=0,this.rinprebuf=Nr(void 0*2),this.rinpre=0,this.rstepbuf=Nr(void 0+void 0),this.rstep=0,this.routbuf=Nr(void 0+void 0),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=fc(0|void 0*void 0),this.B=fc(0|void 0*void 0)}function W1(e){this.bits=e}var vc=Re.new_float,yg=Re.new_int,_c=Re.assert;function wg(e){var t=e;this.quantize=t,this.iteration_loop=function(n,r,a,i){var s=n.internal_flags,c=vc(sr.SFBMAX),v=vc(576),u=yg(2),m=0,o,l=s.l3_side,f=new W1(m);this.quantize.rv.ResvFrameBegin(n,f),m=f.bits;for(var g=0;g<s.mode_gr;g++){o=this.quantize.qupvt.on_pe(n,r,u,m,g,g),s.mode_ext==O.MPG_MD_MS_LR&&(this.quantize.ms_convert(s.l3_side,g),this.quantize.qupvt.reduce_side(u,a[g],m,o));for(var D=0;D<s.channels_out;D++){var C,M,p=l.tt[g][D];p.block_type!=O.SHORT_TYPE?(C=0,M=s.PSY.mask_adjust-C):(C=0,M=s.PSY.mask_adjust_short-C),s.masking_lower=Math.pow(10,M*.1),this.quantize.init_outer_loop(s,p),this.quantize.init_xrpow(s,p,v)&&(this.quantize.qupvt.calc_xmin(n,i[g][D],p,c),this.quantize.outer_loop(n,p,c,v,D,u[D])),this.quantize.iteration_finish_one(s,g,D),_c(p.part2_3_length<=ut.MAX_BITS_PER_CHANNEL),_c(p.part2_3_length<=u[D])}}this.quantize.rv.ResvFrameEnd(s,m)}}function ot(e,t,n,r){this.xlen=e,this.linmax=t,this.table=n,this.hlen=r}var ae={};ae.t1HB=[1,1,1,0];ae.t2HB=[1,2,1,3,1,1,3,2,0];ae.t3HB=[3,2,1,1,1,1,3,2,0];ae.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0];ae.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0];ae.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0];ae.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0];ae.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0];ae.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0];ae.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0];ae.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0];ae.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1];ae.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0];ae.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3];ae.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3];ae.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16];ae.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0];ae.t1l=[1,4,3,5];ae.t2l=[1,4,7,4,5,7,6,7,8];ae.t3l=[2,3,7,4,4,7,6,7,8];ae.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10];ae.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9];ae.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12];ae.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13];ae.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11];ae.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13];ae.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12];ae.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12];ae.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18];ae.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15];ae.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12];ae.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10];ae.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6];ae.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10];ae.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8];ae.ht=[new ot(0,0,null,null),new ot(2,0,ae.t1HB,ae.t1l),new ot(3,0,ae.t2HB,ae.t2l),new ot(3,0,ae.t3HB,ae.t3l),new ot(0,0,null,null),new ot(4,0,ae.t5HB,ae.t5l),new ot(4,0,ae.t6HB,ae.t6l),new ot(6,0,ae.t7HB,ae.t7l),new ot(6,0,ae.t8HB,ae.t8l),new ot(6,0,ae.t9HB,ae.t9l),new ot(8,0,ae.t10HB,ae.t10l),new ot(8,0,ae.t11HB,ae.t11l),new ot(8,0,ae.t12HB,ae.t12l),new ot(16,0,ae.t13HB,ae.t13l),new ot(0,0,null,ae.t16_5l),new ot(16,0,ae.t15HB,ae.t15l),new ot(1,1,ae.t16HB,ae.t16l),new ot(2,3,ae.t16HB,ae.t16l),new ot(3,7,ae.t16HB,ae.t16l),new ot(4,15,ae.t16HB,ae.t16l),new ot(6,63,ae.t16HB,ae.t16l),new ot(8,255,ae.t16HB,ae.t16l),new ot(10,1023,ae.t16HB,ae.t16l),new ot(13,8191,ae.t16HB,ae.t16l),new ot(4,15,ae.t24HB,ae.t24l),new ot(5,31,ae.t24HB,ae.t24l),new ot(6,63,ae.t24HB,ae.t24l),new ot(7,127,ae.t24HB,ae.t24l),new ot(8,255,ae.t24HB,ae.t24l),new ot(9,511,ae.t24HB,ae.t24l),new ot(11,2047,ae.t24HB,ae.t24l),new ot(13,8191,ae.t24HB,ae.t24l),new ot(0,0,ae.t32HB,ae.t32l),new ot(0,0,ae.t33HB,ae.t33l)];ae.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366];ae.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296];ae.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369];ae.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]];ae.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]];ae.scfsi_band=[0,6,11,16,21];var yr=Re.VbrMode,aa=Re.Float,bs=Re.Util,wr=Re.new_float,kg=Re.new_int,oi=Re.assert;Pt.Q_MAX=257;Pt.Q_MAX2=116;Pt.LARGE_BITS=1e5;Pt.IXMAX_VAL=8206;function Pt(){var e=null,t=null,n=null;this.setModules=function(p,I,j){e=p,t=I,n=j};function r(p){return o[p+Pt.Q_MAX2]}this.IPOW20=function(p){return l[p]};var a=2220446049250313e-31,i=Pt.IXMAX_VAL,s=i+2,c=Pt.Q_MAX,v=Pt.Q_MAX2,u=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var m=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=m,this.sfBandIndex=[new Rn([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Rn([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Rn([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Rn([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Rn([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Rn([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Rn([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Rn([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Rn([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var o=wr(c+v+1),l=wr(c),f=wr(s),g=wr(s);this.adj43=g;function D(p,I){var j=n.ATHformula(I,p);return j-=u,j=Math.pow(10,j/10+p.ATHlower),j}function C(p){for(var I=p.internal_flags.ATH.l,j=p.internal_flags.ATH.psfb21,_=p.internal_flags.ATH.s,R=p.internal_flags.ATH.psfb12,T=p.internal_flags,A=p.out_samplerate,E=0;E<O.SBMAX_l;E++){var h=T.scalefac_band.l[E],y=T.scalefac_band.l[E+1];I[E]=aa.MAX_VALUE;for(var b=h;b<y;b++){var w=b*A/1152,S=D(p,w);I[E]=Math.min(I[E],S)}}for(var E=0;E<O.PSFB21;E++){var h=T.scalefac_band.psfb21[E],y=T.scalefac_band.psfb21[E+1];j[E]=aa.MAX_VALUE;for(var b=h;b<y;b++){var w=b*A/1152,S=D(p,w);j[E]=Math.min(j[E],S)}}for(var E=0;E<O.SBMAX_s;E++){var h=T.scalefac_band.s[E],y=T.scalefac_band.s[E+1];_[E]=aa.MAX_VALUE;for(var b=h;b<y;b++){var w=b*A/384,S=D(p,w);_[E]=Math.min(_[E],S)}_[E]*=T.scalefac_band.s[E+1]-T.scalefac_band.s[E]}for(var E=0;E<O.PSFB12;E++){var h=T.scalefac_band.psfb12[E],y=T.scalefac_band.psfb12[E+1];R[E]=aa.MAX_VALUE;for(var b=h;b<y;b++){var w=b*A/384,S=D(p,w);R[E]=Math.min(R[E],S)}R[E]*=T.scalefac_band.s[13]-T.scalefac_band.s[12]}if(p.noATH){for(var E=0;E<O.SBMAX_l;E++)I[E]=1e-20;for(var E=0;E<O.PSFB21;E++)j[E]=1e-20;for(var E=0;E<O.SBMAX_s;E++)_[E]=1e-20;for(var E=0;E<O.PSFB12;E++)R[E]=1e-20}T.ATH.floor=10*Math.log10(D(p,-1))}this.iteration_init=function(p){var I=p.internal_flags,j=I.l3_side,_;if(I.iteration_init_init==0){for(I.iteration_init_init=1,j.main_data_begin=0,C(p),f[0]=0,_=1;_<s;_++)f[_]=Math.pow(_,4/3);for(_=0;_<s-1;_++)g[_]=_+1-Math.pow(.5*(f[_]+f[_+1]),.75);for(g[_]=.5,_=0;_<c;_++)l[_]=Math.pow(2,(_-210)*-.1875);for(_=0;_<=c+v;_++)o[_]=Math.pow(2,(_-210-v)*.25);e.huffman_init(I);{var R,T,A,E;for(_=p.exp_nspsytune>>2&63,_>=32&&(_-=64),R=Math.pow(10,_/4/10),_=p.exp_nspsytune>>8&63,_>=32&&(_-=64),T=Math.pow(10,_/4/10),_=p.exp_nspsytune>>14&63,_>=32&&(_-=64),A=Math.pow(10,_/4/10),_=p.exp_nspsytune>>20&63,_>=32&&(_-=64),E=A*Math.pow(10,_/4/10),_=0;_<O.SBMAX_l;_++){var h;_<=6?h=R:_<=13?h=T:_<=20?h=A:h=E,I.nsPsy.longfact[_]=h}for(_=0;_<O.SBMAX_s;_++){var h;_<=5?h=R:_<=10?h=T:_<=11?h=A:h=E,I.nsPsy.shortfact[_]=h}}}},this.on_pe=function(p,I,j,_,R,T){var A=p.internal_flags,E=0,h,y=kg(2),b,w=new W1(E),S=t.ResvMaxBits(p,_,w,T);E=w.bits;var k=E+S;for(k>ut.MAX_BITS_PER_GRANULE&&(k=ut.MAX_BITS_PER_GRANULE),h=0,b=0;b<A.channels_out;++b)j[b]=Math.min(ut.MAX_BITS_PER_CHANNEL,E/A.channels_out),y[b]=0|j[b]*I[R][b]/700-j[b],y[b]>_*3/4&&(y[b]=_*3/4),y[b]<0&&(y[b]=0),y[b]+j[b]>ut.MAX_BITS_PER_CHANNEL&&(y[b]=Math.max(0,ut.MAX_BITS_PER_CHANNEL-j[b])),h+=y[b];if(h>S)for(b=0;b<A.channels_out;++b)y[b]=S*y[b]/h;for(b=0;b<A.channels_out;++b)j[b]+=y[b],S-=y[b];for(h=0,b=0;b<A.channels_out;++b)h+=j[b];if(h>ut.MAX_BITS_PER_GRANULE){var N=0;for(b=0;b<A.channels_out;++b)j[b]*=ut.MAX_BITS_PER_GRANULE,j[b]/=h,N+=j[b]}return k},this.reduce_side=function(p,I,j,_){oi(p[0]+p[1]<=ut.MAX_BITS_PER_GRANULE);var R=.33*(.5-I)/.5;R<0&&(R=0),R>.5&&(R=.5);var T=0|R*.5*(p[0]+p[1]);T>ut.MAX_BITS_PER_CHANNEL-p[0]&&(T=ut.MAX_BITS_PER_CHANNEL-p[0]),T<0&&(T=0),p[1]>=125&&(p[1]-T>125?(p[0]<j&&(p[0]+=T),p[1]-=T):(p[0]+=p[1]-125,p[1]=125)),T=p[0]+p[1],T>_&&(p[0]=_*p[0]/T,p[1]=_*p[1]/T),oi(p[0]<=ut.MAX_BITS_PER_CHANNEL),oi(p[1]<=ut.MAX_BITS_PER_CHANNEL),oi(p[0]+p[1]<=ut.MAX_BITS_PER_GRANULE)},this.athAdjust=function(p,I,j){var _=90.30873362,R=94.82444863,T=bs.FAST_LOG10_X(I,10),A=p*p,E=0;return T-=j,A>1e-20&&(E=1+bs.FAST_LOG10_X(A,10/_)),E<0&&(E=0),T*=E,T+=j+_-R,Math.pow(10,.1*T)},this.calc_xmin=function(p,I,j,_){var R=0,T=p.internal_flags,A,E=0,h=0,y=T.ATH,b=j.xr,w=p.VBR==yr.vbr_mtrh?1:0,S=T.masking_lower;for((p.VBR==yr.vbr_mtrh||p.VBR==yr.vbr_mt)&&(S=1),A=0;A<j.psy_lmax;A++){var k,N,Y,H,q,d;p.VBR==yr.vbr_rh||p.VBR==yr.vbr_mtrh?N=athAdjust(y.adjust,y.l[A],y.floor):N=y.adjust*y.l[A],q=j.width[A],Y=N/q,H=a,d=q>>1,k=0;do{var x,W;x=b[E]*b[E],k+=x,H+=x<Y?x:Y,E++,W=b[E]*b[E],k+=W,H+=W<Y?W:Y,E++}while(--d>0);if(k>N&&h++,A==O.SBPSY_l){var B=N*T.nsPsy.longfact[A];H<B&&(H=B)}if(w!=0&&(N=H),!p.ATHonly){var he=I.en.l[A];if(he>0){var B;B=k*I.thm.l[A]*S/he,w!=0&&(B*=T.nsPsy.longfact[A]),N<B&&(N=B)}}w!=0?_[R++]=N:_[R++]=N*T.nsPsy.longfact[A]}var Ae=575;if(j.block_type!=O.SHORT_TYPE)for(var ge=576;ge--!=0&&mn.EQ(b[ge],0);)Ae=ge;j.max_nonzero_coeff=Ae;for(var _e=j.sfb_smin;A<j.psymax;_e++,A+=3){var q,He,Ee;for(p.VBR==yr.vbr_rh||p.VBR==yr.vbr_mtrh?Ee=athAdjust(y.adjust,y.s[_e],y.floor):Ee=y.adjust*y.s[_e],q=j.width[A],He=0;He<3;He++){var k=0,N,Y,H,d=q>>1;Y=Ee/q,H=a;do{var x,W;x=b[E]*b[E],k+=x,H+=x<Y?x:Y,E++,W=b[E]*b[E],k+=W,H+=W<Y?W:Y,E++}while(--d>0);if(k>Ee&&h++,_e==O.SBPSY_s){var B=Ee*T.nsPsy.shortfact[_e];H<B&&(H=B)}if(w!=0?N=H:N=Ee,!p.ATHonly&&!p.ATHshort){var he=I.en.s[_e][He];if(he>0){var B;B=k*I.thm.s[_e][He]*S/he,w!=0&&(B*=T.nsPsy.shortfact[_e]),N<B&&(N=B)}}w!=0?_[R++]=N:_[R++]=N*T.nsPsy.shortfact[_e]}p.useTemporal&&(_[R-3]>_[R-3+1]&&(_[R-3+1]+=(_[R-3]-_[R-3+1])*T.decay),_[R-3+1]>_[R-3+2]&&(_[R-3+2]+=(_[R-3+1]-_[R-3+2])*T.decay))}return h};function M(p){this.s=p}this.calc_noise_core=function(p,I,j,_){var R=0,T=I.s,A=p.l3_enc;if(T>p.count1)for(;j--!=0;){var E;E=p.xr[T],T++,R+=E*E,E=p.xr[T],T++,R+=E*E}else if(T>p.big_values){var h=wr(2);for(h[0]=0,h[1]=_;j--!=0;){var E;E=Math.abs(p.xr[T])-h[A[T]],T++,R+=E*E,E=Math.abs(p.xr[T])-h[A[T]],T++,R+=E*E}}else for(;j--!=0;){var E;E=Math.abs(p.xr[T])-f[A[T]]*_,T++,R+=E*E,E=Math.abs(p.xr[T])-f[A[T]]*_,T++,R+=E*E}return I.s=T,R},this.calc_noise=function(p,I,j,_,R){var T=0,A=0,E,h,y=0,b=0,w=0,S=-20,k=0,N=p.scalefac,Y=0;for(_.over_SSD=0,E=0;E<p.psymax;E++){var H=p.global_gain-(N[Y++]+(p.preflag!=0?m[E]:0)<<p.scalefac_scale+1)-p.subblock_gain[p.window[E]]*8,q=0;if(R!=null&&R.step[E]==H)q=R.noise[E],k+=p.width[E],j[T++]=q/I[A++],q=R.noise_log[E];else{var d=r(H);if(h=p.width[E]>>1,k+p.width[E]>p.max_nonzero_coeff){var x;x=p.max_nonzero_coeff-k+1,x>0?h=x>>1:h=0}var W=new M(k);q=this.calc_noise_core(p,W,h,d),k=W.s,R!=null&&(R.step[E]=H,R.noise[E]=q),q=j[T++]=q/I[A++],q=bs.FAST_LOG10(Math.max(q,1e-20)),R!=null&&(R.noise_log[E]=q)}if(R!=null&&(R.global_gain=p.global_gain),w+=q,q>0){var B;B=Math.max(0|q*10+.5,1),_.over_SSD+=B*B,y++,b+=q}S=Math.max(S,q)}return _.over_count=y,_.tot_noise=w,_.over_noise=b,_.max_noise=S,y},this.set_pinfo=function(p,I,j,_,R){var T=p.internal_flags,A,E,h,y,b,w=I.scalefac_scale==0?.5:1,S=I.scalefac,k=wr(L3Side.SFBMAX),N=wr(L3Side.SFBMAX),Y=new CalcNoiseResult;calc_xmin(p,j,I,k),calc_noise(I,k,N,Y,null);var H=0;for(E=I.sfb_lmax,I.block_type!=O.SHORT_TYPE&&I.mixed_block_flag==0&&(E=22),A=0;A<E;A++){var q=T.scalefac_band.l[A],d=T.scalefac_band.l[A+1],x=d-q;for(y=0;H<d;H++)y+=I.xr[H]*I.xr[H];y/=x,b=1e15,T.pinfo.en[_][R][A]=b*y,T.pinfo.xfsf[_][R][A]=b*k[A]*N[A]/x,j.en.l[A]>0&&!p.ATHonly?y=y/j.en.l[A]:y=0,T.pinfo.thr[_][R][A]=b*Math.max(y*j.thm.l[A],T.ATH.l[A]),T.pinfo.LAMEsfb[_][R][A]=0,I.preflag!=0&&A>=11&&(T.pinfo.LAMEsfb[_][R][A]=-w*m[A]),A<O.SBPSY_l&&(oi(S[A]>=0),T.pinfo.LAMEsfb[_][R][A]-=w*S[A])}if(I.block_type==O.SHORT_TYPE)for(E=A,A=I.sfb_smin;A<O.SBMAX_s;A++)for(var q=T.scalefac_band.s[A],d=T.scalefac_band.s[A+1],x=d-q,W=0;W<3;W++){for(y=0,h=q;h<d;h++)y+=I.xr[H]*I.xr[H],H++;y=Math.max(y/x,1e-20),b=1e15,T.pinfo.en_s[_][R][3*A+W]=b*y,T.pinfo.xfsf_s[_][R][3*A+W]=b*k[E]*N[E]/x,j.en.s[A][W]>0?y=y/j.en.s[A][W]:y=0,(p.ATHonly||p.ATHshort)&&(y=0),T.pinfo.thr_s[_][R][3*A+W]=b*Math.max(y*j.thm.s[A][W],T.ATH.s[A]),T.pinfo.LAMEsfb_s[_][R][3*A+W]=-2*I.subblock_gain[W],A<O.SBPSY_s&&(T.pinfo.LAMEsfb_s[_][R][3*A+W]-=w*S[E]),E++}T.pinfo.LAMEqss[_][R]=I.global_gain,T.pinfo.LAMEmainbits[_][R]=I.part2_3_length+I.part2_length,T.pinfo.LAMEsfbits[_][R]=I.part2_length,T.pinfo.over[_][R]=Y.over_count,T.pinfo.max_noise[_][R]=Y.max_noise*10,T.pinfo.over_noise[_][R]=Y.over_noise*10,T.pinfo.tot_noise[_][R]=Y.tot_noise*10,T.pinfo.over_SSD[_][R]=Y.over_SSD}}var Sg=Re.System,xg=Re.Arrays,li=Re.new_int,ys=Re.assert;function Ci(){var e=null;this.qupvt=null,this.setModules=function(h){this.qupvt=h,e=h};function t(h){this.bits=0|h}var n=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function r(h,y,b,w,S,k){var N=.5946/y;for(h=h>>1;h--!=0;)S[k++]=N>b[w++]?0:1,S[k++]=N>b[w++]?0:1}function a(h,y,b,w,S,k){h=h>>1;var N=h%2;for(h=h>>1;h--!=0;){var Y,H,q,d,x,W,B,he;Y=b[w++]*y,H=b[w++]*y,x=0|Y,q=b[w++]*y,W=0|H,d=b[w++]*y,B=0|q,Y+=e.adj43[x],he=0|d,H+=e.adj43[W],S[k++]=0|Y,q+=e.adj43[B],S[k++]=0|H,d+=e.adj43[he],S[k++]=0|q,S[k++]=0|d}if(N!=0){var Y,H,x,W;Y=b[w++]*y,H=b[w++]*y,x=0|Y,W=0|H,Y+=e.adj43[x],H+=e.adj43[W],S[k++]=0|Y,S[k++]=0|H}}function i(h,y,b,w,S){var k,N,Y=0,H,q=0,d=0,x=0,W=y,B=0,he=W,Ae=0,ge=h,_e=0;for(H=S!=null&&w.global_gain==S.global_gain,w.block_type==O.SHORT_TYPE?N=38:N=21,k=0;k<=N;k++){var He=-1;if((H||w.block_type==O.NORM_TYPE)&&(He=w.global_gain-(w.scalefac[k]+(w.preflag!=0?e.pretab[k]:0)<<w.scalefac_scale+1)-w.subblock_gain[w.window[k]]*8),ys(w.width[k]>=0),H&&S.step[k]==He)q!=0&&(a(q,b,ge,_e,he,Ae),q=0),d!=0&&(r(d,b,ge,_e,he,Ae),d=0);else{var Ee=w.width[k];if(Y+w.width[k]>w.max_nonzero_coeff){var fe;fe=w.max_nonzero_coeff-Y+1,xg.fill(y,w.max_nonzero_coeff,576,0),Ee=fe,Ee<0&&(Ee=0),k=N+1}if(q==0&&d==0&&(he=W,Ae=B,ge=h,_e=x),S!=null&&S.sfb_count1>0&&k>=S.sfb_count1&&S.step[k]>0&&He>=S.step[k]?(q!=0&&(a(q,b,ge,_e,he,Ae),q=0,he=W,Ae=B,ge=h,_e=x),d+=Ee):(d!=0&&(r(d,b,ge,_e,he,Ae),d=0,he=W,Ae=B,ge=h,_e=x),q+=Ee),Ee<=0){d!=0&&(r(d,b,ge,_e,he,Ae),d=0),q!=0&&(a(q,b,ge,_e,he,Ae),q=0);break}}k<=N&&(B+=w.width[k],x+=w.width[k],Y+=w.width[k])}q!=0&&(a(q,b,ge,_e,he,Ae),q=0),d!=0&&(r(d,b,ge,_e,he,Ae),d=0)}function s(h,y,b){var w=0,S=0;do{var k=h[y++],N=h[y++];w<k&&(w=k),S<N&&(S=N)}while(y<b);return w<S&&(w=S),w}function c(h,y,b,w,S,k){var N=ae.ht[w].xlen*65536+ae.ht[S].xlen,Y=0,H;do{var q=h[y++],d=h[y++];q!=0&&(q>14&&(q=15,Y+=N),q*=16),d!=0&&(d>14&&(d=15,Y+=N),q+=d),Y+=ae.largetbl[q]}while(y<b);return H=Y&65535,Y>>=16,Y>H&&(Y=H,w=S),k.bits+=Y,w}function v(h,y,b,w){var S=0,k=ae.ht[1].hlen;do{var N=h[y+0]*2+h[y+1];y+=2,S+=k[N]}while(y<b);return w.bits+=S,1}function u(h,y,b,w,S){var k=0,N,Y=ae.ht[w].xlen,H;w==2?H=ae.table23:H=ae.table56;do{var q=h[y+0]*Y+h[y+1];y+=2,k+=H[q]}while(y<b);return N=k&65535,k>>=16,k>N&&(k=N,w++),S.bits+=k,w}function m(h,y,b,w,S){var k=0,N=0,Y=0,H=ae.ht[w].xlen,q=ae.ht[w].hlen,d=ae.ht[w+1].hlen,x=ae.ht[w+2].hlen;do{var W=h[y+0]*H+h[y+1];y+=2,k+=q[W],N+=d[W],Y+=x[W]}while(y<b);var B=w;return k>N&&(k=N,B++),k>Y&&(k=Y,B=w+2),S.bits+=k,B}var o=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function l(h,y,b,w){var S=s(h,y,b);switch(S){case 0:return S;case 1:return v(h,y,b,w);case 2:case 3:return u(h,y,b,o[S-1],w);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return m(h,y,b,o[S-1],w);default:if(S>Pt.IXMAX_VAL)return w.bits=Pt.LARGE_BITS,-1;S-=15;var k;for(k=24;k<32&&!(ae.ht[k].linmax>=S);k++);var N;for(N=k-8;N<24&&!(ae.ht[N].linmax>=S);N++);return c(h,y,b,N,k,w)}}this.noquant_count_bits=function(h,y,b){var w=y.l3_enc,S=Math.min(576,y.max_nonzero_coeff+2>>1<<1);for(b!=null&&(b.sfb_count1=0);S>1&&(w[S-1]|w[S-2])==0;S-=2);y.count1=S;for(var k=0,N=0;S>3;S-=4){var Y;if(((w[S-1]|w[S-2]|w[S-3]|w[S-4])&2147483647)>1)break;Y=((w[S-4]*2+w[S-3])*2+w[S-2])*2+w[S-1],k+=ae.t32l[Y],N+=ae.t33l[Y]}var H=k;if(y.count1table_select=0,k>N&&(H=N,y.count1table_select=1),y.count1bits=H,y.big_values=S,S==0)return H;if(y.block_type==O.SHORT_TYPE)k=3*h.scalefac_band.s[3],k>y.big_values&&(k=y.big_values),N=y.big_values;else if(y.block_type==O.NORM_TYPE){if(k=y.region0_count=h.bv_scf[S-2],N=y.region1_count=h.bv_scf[S-1],N=h.scalefac_band.l[k+N+2],k=h.scalefac_band.l[k+1],N<S){var q=new t(H);y.table_select[2]=l(w,N,S,q),H=q.bits}}else y.region0_count=7,y.region1_count=O.SBMAX_l-1-7-1,k=h.scalefac_band.l[8],N=S,k>N&&(k=N);if(k=Math.min(k,S),N=Math.min(N,S),k>0){var q=new t(H);y.table_select[0]=l(w,0,k,q),H=q.bits}if(k<N){var q=new t(H);y.table_select[1]=l(w,k,N,q),H=q.bits}if(h.use_best_huffman==2&&(y.part2_3_length=H,best_huffman_divide(h,y),H=y.part2_3_length),b!=null&&y.block_type==O.NORM_TYPE){for(var d=0;h.scalefac_band.l[d]<y.big_values;)d++;b.sfb_count1=d}return H},this.count_bits=function(h,y,b,w){var S=b.l3_enc,k=Pt.IXMAX_VAL/e.IPOW20(b.global_gain);if(b.xrpow_max>k)return Pt.LARGE_BITS;if(i(y,S,e.IPOW20(b.global_gain),b,w),(h.substep_shaping&2)!=0)for(var N=0,Y=b.global_gain+b.scalefac_scale,H=.634521682242439/e.IPOW20(Y),q=0;q<b.sfbmax;q++){var d=b.width[q];if(h.pseudohalf[q]==0)N+=d;else{var x;for(x=N,N+=d;x<N;++x)S[x]=y[x]>=H?S[x]:0}}return this.noquant_count_bits(h,b,w)};function f(h,y,b,w,S,k,N){for(var Y=y.big_values,H=0;H<=22;H++)w[H]=Pt.LARGE_BITS;for(var H=0;H<16;H++){var q=h.scalefac_band.l[H+1];if(q>=Y)break;var d=0,x=new t(d),W=l(b,0,q,x);d=x.bits;for(var B=0;B<8;B++){var he=h.scalefac_band.l[H+B+2];if(he>=Y)break;var Ae=d;x=new t(Ae);var ge=l(b,q,he,x);Ae=x.bits,w[H+B]>Ae&&(w[H+B]=Ae,S[H+B]=H,k[H+B]=W,N[H+B]=ge)}}}function g(h,y,b,w,S,k,N,Y){for(var H=y.big_values,q=2;q<O.SBMAX_l+1;q++){var d=h.scalefac_band.l[q];if(d>=H)break;var x=S[q-2]+y.count1bits;if(b.part2_3_length<=x)break;var W=new t(x),B=l(w,d,H,W);x=W.bits,!(b.part2_3_length<=x)&&(b.assign(y),b.part2_3_length=x,b.region0_count=k[q-2],b.region1_count=q-2-k[q-2],b.table_select[0]=N[q-2],b.table_select[1]=Y[q-2],b.table_select[2]=B)}}this.best_huffman_divide=function(h,y){var b=new Aa,w=y.l3_enc,S=li(23),k=li(23),N=li(23),Y=li(23);if(!(y.block_type==O.SHORT_TYPE&&h.mode_gr==1)){b.assign(y),y.block_type==O.NORM_TYPE&&(f(h,y,w,S,k,N,Y),g(h,b,y,w,S,k,N,Y));var H=b.big_values;if(!(H==0||(w[H-2]|w[H-1])>1)&&(H=y.count1+2,!(H>576))){b.assign(y),b.count1=H;for(var q=0,d=0;H>b.big_values;H-=4){var x=((w[H-4]*2+w[H-3])*2+w[H-2])*2+w[H-1];q+=ae.t32l[x],d+=ae.t33l[x]}if(b.big_values=H,b.count1table_select=0,q>d&&(q=d,b.count1table_select=1),b.count1bits=q,b.block_type==O.NORM_TYPE)g(h,b,y,w,S,k,N,Y);else{if(b.part2_3_length=q,q=h.scalefac_band.l[8],q>H&&(q=H),q>0){var W=new t(b.part2_3_length);b.table_select[0]=l(w,0,q,W),b.part2_3_length=W.bits}if(H>q){var W=new t(b.part2_3_length);b.table_select[1]=l(w,q,H,W),b.part2_3_length=W.bits}y.part2_3_length>b.part2_3_length&&y.assign(b)}}}};var D=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],C=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],M=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],p=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];Ci.slen1_tab=M,Ci.slen2_tab=p;function I(h,y){for(var b,w=y.tt[1][h],S=y.tt[0][h],k=0;k<ae.scfsi_band.length-1;k++){for(b=ae.scfsi_band[k];b<ae.scfsi_band[k+1]&&!(S.scalefac[b]!=w.scalefac[b]&&w.scalefac[b]>=0);b++);if(b==ae.scfsi_band[k+1]){for(b=ae.scfsi_band[k];b<ae.scfsi_band[k+1];b++)w.scalefac[b]=-1;y.scfsi[h][k]=1}}var N=0,Y=0;for(b=0;b<11;b++)w.scalefac[b]!=-1&&(Y++,N<w.scalefac[b]&&(N=w.scalefac[b]));for(var H=0,q=0;b<O.SBPSY_l;b++)w.scalefac[b]!=-1&&(q++,H<w.scalefac[b]&&(H=w.scalefac[b]));for(var k=0;k<16;k++)if(N<D[k]&&H<C[k]){var d=M[k]*Y+p[k]*q;w.part2_length>d&&(w.part2_length=d,w.scalefac_compress=k)}}this.best_scalefac_store=function(h,y,b,w){var S=w.tt[y][b],k,N,Y,H,q=0;for(Y=0,k=0;k<S.sfbmax;k++){var d=S.width[k];for(Y+=d,H=-d;H<0&&S.l3_enc[H+Y]==0;H++);H==0&&(S.scalefac[k]=q=-2)}if(S.scalefac_scale==0&&S.preflag==0){var x=0;for(k=0;k<S.sfbmax;k++)S.scalefac[k]>0&&(x|=S.scalefac[k]);if((x&1)==0&&x!=0){for(k=0;k<S.sfbmax;k++)S.scalefac[k]>0&&(S.scalefac[k]>>=1);S.scalefac_scale=q=1}}if(S.preflag==0&&S.block_type!=O.SHORT_TYPE&&h.mode_gr==2){for(k=11;k<O.SBPSY_l&&!(S.scalefac[k]<e.pretab[k]&&S.scalefac[k]!=-2);k++);if(k==O.SBPSY_l){for(k=11;k<O.SBPSY_l;k++)S.scalefac[k]>0&&(S.scalefac[k]-=e.pretab[k]);S.preflag=q=1}}for(N=0;N<4;N++)w.scfsi[b][N]=0;for(h.mode_gr==2&&y==1&&w.tt[0][b].block_type!=O.SHORT_TYPE&&w.tt[1][b].block_type!=O.SHORT_TYPE&&(I(b,w),q=0),k=0;k<S.sfbmax;k++)S.scalefac[k]==-2&&(S.scalefac[k]=0);q!=0&&(h.mode_gr==2?this.scale_bitcount(S):this.scale_bitcount_lsf(h,S))};function j(h,y){for(var b=0;b<y;++b)if(h[b]<0)return!1;return!0}var _=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],R=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],T=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(h){var y,b,w=0,S=0,k,N=h.scalefac;if(ys(j(N,h.sfbmax)),h.block_type==O.SHORT_TYPE)k=_,h.mixed_block_flag!=0&&(k=R);else if(k=T,h.preflag==0){for(b=11;b<O.SBPSY_l&&!(N[b]<e.pretab[b]);b++);if(b==O.SBPSY_l)for(h.preflag=1,b=11;b<O.SBPSY_l;b++)N[b]-=e.pretab[b]}for(b=0;b<h.sfbdivide;b++)w<N[b]&&(w=N[b]);for(;b<h.sfbmax;b++)S<N[b]&&(S=N[b]);for(h.part2_length=Pt.LARGE_BITS,y=0;y<16;y++)w<D[y]&&S<C[y]&&h.part2_length>k[y]&&(h.part2_length=k[y],h.scalefac_compress=y);return h.part2_length==Pt.LARGE_BITS};var A=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(h,y){var b,w,S,k,N,Y,H,q,d=li(4),x=y.scalefac;for(y.preflag!=0?b=2:b=0,H=0;H<4;H++)d[H]=0;if(y.block_type==O.SHORT_TYPE){w=1;var W=e.nr_of_sfb_block[b][w];for(q=0,S=0;S<4;S++)for(k=W[S]/3,H=0;H<k;H++,q++)for(N=0;N<3;N++)x[q*3+N]>d[S]&&(d[S]=x[q*3+N])}else{w=0;var W=e.nr_of_sfb_block[b][w];for(q=0,S=0;S<4;S++)for(k=W[S],H=0;H<k;H++,q++)x[q]>d[S]&&(d[S]=x[q])}for(Y=!1,S=0;S<4;S++)d[S]>A[b][S]&&(Y=!0);if(!Y){var B,he,Ae,ge;for(y.sfb_partition_table=e.nr_of_sfb_block[b][w],S=0;S<4;S++)y.slen[S]=E[d[S]];switch(B=y.slen[0],he=y.slen[1],Ae=y.slen[2],ge=y.slen[3],b){case 0:y.scalefac_compress=(B*5+he<<4)+(Ae<<2)+ge;break;case 1:y.scalefac_compress=400+(B*5+he<<2)+Ae;break;case 2:y.scalefac_compress=500+B*3+he;break;default:Sg.err.printf(`intensity stereo not implemented yet
`);break}}if(!Y)for(ys(y.sfb_partition_table!=null),y.part2_length=0,S=0;S<4;S++)y.part2_length+=y.slen[S]*y.sfb_partition_table[S];return Y};var E=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(h){for(var y=2;y<=576;y+=2){for(var b=0,w;h.scalefac_band.l[++b]<y;);for(w=n[b][0];h.scalefac_band.l[w+1]>y;)w--;for(w<0&&(w=n[b][0]),h.bv_scf[y-2]=w,w=n[b][1];h.scalefac_band.l[w+h.bv_scf[y-2]+2]>y;)w--;w<0&&(w=n[b][1]),h.bv_scf[y-1]=w}}}var An=Re.System,Mg=Re.Arrays,Ag=Re.new_byte,Eg=Re.new_float_n,Tg=Re.new_int,Ot=Re.assert;mn.EQ=function(e,t){return Math.abs(e)>Math.abs(t)?Math.abs(e-t)<=Math.abs(e)*1e-6:Math.abs(e-t)<=Math.abs(t)*1e-6};mn.NEQ=function(e,t){return!mn.EQ(e,t)};function mn(){var e=this,t=32773,n=null,r=null,a=null,i=null;this.setModules=function(A,E,h,y){n=A,r=E,a=h,i=y};var s=null,c=0,v=0,u=0;this.getframebits=function(A){var E=A.internal_flags,h;E.bitrate_index!=0?h=ae.bitrate_table[A.version][E.bitrate_index]:h=A.brate;var y=0|(A.version+1)*72e3*h/A.out_samplerate+E.padding;return 8*y};function m(A){An.arraycopy(A.header[A.w_ptr].buf,0,s,v,A.sideinfo_len),v+=A.sideinfo_len,c+=A.sideinfo_len*8,A.w_ptr=A.w_ptr+1&ut.MAX_HEADER_BUF-1}function o(A,E,h){for(;h>0;){var y;u==0&&(u=8,v++,Ot(A.header[A.w_ptr].write_timing>=c),A.header[A.w_ptr].write_timing==c&&m(A),s[v]=0),y=Math.min(h,u),h-=y,u-=y,s[v]|=E>>h<<u,c+=y}}function l(A,E,h){for(;h>0;){var y;u==0&&(u=8,v++,s[v]=0),y=Math.min(h,u),h-=y,u-=y,s[v]|=E>>h<<u,c+=y}}function f(A,E){var h=A.internal_flags,y;if(E>=8&&(o(h,76,8),E-=8),E>=8&&(o(h,65,8),E-=8),E>=8&&(o(h,77,8),E-=8),E>=8&&(o(h,69,8),E-=8),E>=32){var b=a.getLameShortVersion();if(E>=32)for(y=0;y<b.length&&E>=8;++y)E-=8,o(h,b.charAt(y),8)}for(;E>=1;E-=1)o(h,h.ancillary_flag,1),h.ancillary_flag^=A.disable_reservoir?0:1}function g(A,E,h){for(var y=A.header[A.h_ptr].ptr;h>0;){var b=Math.min(h,8-(y&7));h-=b,A.header[A.h_ptr].buf[y>>3]|=E>>h<<8-(y&7)-b,y+=b}A.header[A.h_ptr].ptr=y}function D(A,E){A<<=8;for(var h=0;h<8;h++)A<<=1,E<<=1,((E^A)&65536)!=0&&(E^=t);return E}this.CRC_writeheader=function(A,E){var h=65535;h=D(E[2]&255,h),h=D(E[3]&255,h);for(var y=6;y<A.sideinfo_len;y++)h=D(E[y]&255,h);E[4]=byte(h>>8),E[5]=byte(h&255)};function C(A,E){var h=A.internal_flags,y,b,w;if(y=h.l3_side,h.header[h.h_ptr].ptr=0,Mg.fill(h.header[h.h_ptr].buf,0,h.sideinfo_len,0),A.out_samplerate<16e3?g(h,4094,12):g(h,4095,12),g(h,A.version,1),g(h,1,2),g(h,A.error_protection?0:1,1),g(h,h.bitrate_index,4),g(h,h.samplerate_index,2),g(h,h.padding,1),g(h,A.extension,1),g(h,A.mode.ordinal(),2),g(h,h.mode_ext,2),g(h,A.copyright,1),g(h,A.original,1),g(h,A.emphasis,2),A.error_protection&&g(h,0,16),A.version==1){for(Ot(y.main_data_begin>=0),g(h,y.main_data_begin,9),h.channels_out==2?g(h,y.private_bits,3):g(h,y.private_bits,5),w=0;w<h.channels_out;w++){var S;for(S=0;S<4;S++)g(h,y.scfsi[w][S],1)}for(b=0;b<2;b++)for(w=0;w<h.channels_out;w++){var k=y.tt[b][w];g(h,k.part2_3_length+k.part2_length,12),g(h,k.big_values/2,9),g(h,k.global_gain,8),g(h,k.scalefac_compress,4),k.block_type!=O.NORM_TYPE?(g(h,1,1),g(h,k.block_type,2),g(h,k.mixed_block_flag,1),k.table_select[0]==14&&(k.table_select[0]=16),g(h,k.table_select[0],5),k.table_select[1]==14&&(k.table_select[1]=16),g(h,k.table_select[1],5),g(h,k.subblock_gain[0],3),g(h,k.subblock_gain[1],3),g(h,k.subblock_gain[2],3)):(g(h,0,1),k.table_select[0]==14&&(k.table_select[0]=16),g(h,k.table_select[0],5),k.table_select[1]==14&&(k.table_select[1]=16),g(h,k.table_select[1],5),k.table_select[2]==14&&(k.table_select[2]=16),g(h,k.table_select[2],5),Ot(k.region0_count>=0&&k.region0_count<16),Ot(k.region1_count>=0&&k.region1_count<8),g(h,k.region0_count,4),g(h,k.region1_count,3)),g(h,k.preflag,1),g(h,k.scalefac_scale,1),g(h,k.count1table_select,1)}}else for(Ot(y.main_data_begin>=0),g(h,y.main_data_begin,8),g(h,y.private_bits,h.channels_out),b=0,w=0;w<h.channels_out;w++){var k=y.tt[b][w];g(h,k.part2_3_length+k.part2_length,12),g(h,k.big_values/2,9),g(h,k.global_gain,8),g(h,k.scalefac_compress,9),k.block_type!=O.NORM_TYPE?(g(h,1,1),g(h,k.block_type,2),g(h,k.mixed_block_flag,1),k.table_select[0]==14&&(k.table_select[0]=16),g(h,k.table_select[0],5),k.table_select[1]==14&&(k.table_select[1]=16),g(h,k.table_select[1],5),g(h,k.subblock_gain[0],3),g(h,k.subblock_gain[1],3),g(h,k.subblock_gain[2],3)):(g(h,0,1),k.table_select[0]==14&&(k.table_select[0]=16),g(h,k.table_select[0],5),k.table_select[1]==14&&(k.table_select[1]=16),g(h,k.table_select[1],5),k.table_select[2]==14&&(k.table_select[2]=16),g(h,k.table_select[2],5),Ot(k.region0_count>=0&&k.region0_count<16),Ot(k.region1_count>=0&&k.region1_count<8),g(h,k.region0_count,4),g(h,k.region1_count,3)),g(h,k.scalefac_scale,1),g(h,k.count1table_select,1)}A.error_protection&&CRC_writeheader(h,h.header[h.h_ptr].buf);{var N=h.h_ptr;Ot(h.header[N].ptr==h.sideinfo_len*8),h.h_ptr=N+1&ut.MAX_HEADER_BUF-1,h.header[h.h_ptr].write_timing=h.header[N].write_timing+E,h.h_ptr==h.w_ptr&&An.err.println(`Error: MAX_HEADER_BUF too small in bitstream.c 
`)}}function M(A,E){var h=ae.ht[E.count1table_select+32],y,b=0,w=E.big_values,S=E.big_values;for(Ot(E.count1table_select<2),y=(E.count1-E.big_values)/4;y>0;--y){var k=0,N=0,Y;Y=E.l3_enc[w+0],Y!=0&&(N+=8,E.xr[S+0]<0&&k++),Y=E.l3_enc[w+1],Y!=0&&(N+=4,k*=2,E.xr[S+1]<0&&k++),Y=E.l3_enc[w+2],Y!=0&&(N+=2,k*=2,E.xr[S+2]<0&&k++),Y=E.l3_enc[w+3],Y!=0&&(N++,k*=2,E.xr[S+3]<0&&k++),w+=4,S+=4,o(A,k+h.table[N],h.hlen[N]),b+=h.hlen[N]}return b}function p(A,E,h,y,b){var w=ae.ht[E],S=0;if(E==0)return S;for(var k=h;k<y;k+=2){var N=0,Y=0,H=w.xlen,q=w.xlen,d=0,x=b.l3_enc[k],W=b.l3_enc[k+1];if(x!=0&&(b.xr[k]<0&&d++,N--),E>15){if(x>14){var B=x-15;Ot(B<=w.linmax),d|=B<<1,Y=H,x=15}if(W>14){var he=W-15;Ot(he<=w.linmax),d<<=H,d|=he,Y+=H,W=15}q=16}W!=0&&(d<<=1,b.xr[k+1]<0&&d++,N--),x=x*q+W,Y-=N,N+=w.hlen[x],o(A,w.table[x],N),o(A,d,Y),S+=N+Y}return S}function I(A,E){var h=3*A.scalefac_band.s[3];h>E.big_values&&(h=E.big_values);var y=p(A,E.table_select[0],0,h,E);return y+=p(A,E.table_select[1],h,E.big_values,E),y}function j(A,E){var h,y,b,w;h=E.big_values;var S=E.region0_count+1;return Ot(S<A.scalefac_band.l.length),b=A.scalefac_band.l[S],S+=E.region1_count+1,Ot(S<A.scalefac_band.l.length),w=A.scalefac_band.l[S],b>h&&(b=h),w>h&&(w=h),y=p(A,E.table_select[0],0,b,E),y+=p(A,E.table_select[1],b,w,E),y+=p(A,E.table_select[2],w,h,E),y}function _(A){var E,h,y,b,w=0,S=A.internal_flags,k=S.l3_side;if(A.version==1)for(E=0;E<2;E++)for(h=0;h<S.channels_out;h++){var N=k.tt[E][h],Y=Ci.slen1_tab[N.scalefac_compress],H=Ci.slen2_tab[N.scalefac_compress];for(b=0,y=0;y<N.sfbdivide;y++)N.scalefac[y]!=-1&&(o(S,N.scalefac[y],Y),b+=Y);for(;y<N.sfbmax;y++)N.scalefac[y]!=-1&&(o(S,N.scalefac[y],H),b+=H);Ot(b==N.part2_length),N.block_type==O.SHORT_TYPE?b+=I(S,N):b+=j(S,N),b+=M(S,N),Ot(b==N.part2_3_length+N.part2_length),w+=b}else for(E=0,h=0;h<S.channels_out;h++){var N=k.tt[E][h],q,d,x=0;if(Ot(N.sfb_partition_table!=null),b=0,y=0,d=0,N.block_type==O.SHORT_TYPE){for(;d<4;d++){var W=N.sfb_partition_table[d]/3,B=N.slen[d];for(q=0;q<W;q++,y++)o(S,Math.max(N.scalefac[y*3+0],0),B),o(S,Math.max(N.scalefac[y*3+1],0),B),o(S,Math.max(N.scalefac[y*3+2],0),B),x+=3*B}b+=I(S,N)}else{for(;d<4;d++){var W=N.sfb_partition_table[d],B=N.slen[d];for(q=0;q<W;q++,y++)o(S,Math.max(N.scalefac[y],0),B),x+=B}b+=j(S,N)}b+=M(S,N),Ot(b==N.part2_3_length),Ot(x==N.part2_length),w+=x+b}return w}function R(){this.total=0}function T(A,E){var h=A.internal_flags,y,b,w,S,k;return k=h.w_ptr,S=h.h_ptr-1,S==-1&&(S=ut.MAX_HEADER_BUF-1),y=h.header[S].write_timing-c,E.total=y,y>=0&&(b=1+S-k,S<k&&(b=1+S-k+ut.MAX_HEADER_BUF),y-=b*8*h.sideinfo_len),w=e.getframebits(A),y+=w,E.total+=w,E.total%8!=0?E.total=1+E.total/8:E.total=E.total/8,E.total+=v+1,y<0&&An.err.println(`strange error flushing buffer ... 
`),y}this.flush_bitstream=function(A){var E=A.internal_flags,h,y,b=E.h_ptr-1;if(b==-1&&(b=ut.MAX_HEADER_BUF-1),h=E.l3_side,!((y=T(A,new R))<0)){if(f(A,y),Ot(E.header[b].write_timing+this.getframebits(A)==c),E.ResvSize=0,h.main_data_begin=0,E.findReplayGain){var w=n.GetTitleGain(E.rgdata);Ot(NEQ(w,GainAnalysis.GAIN_NOT_ENOUGH_SAMPLES)),E.RadioGain=Math.floor(w*10+.5)|0}E.findPeakSample&&(E.noclipGainChange=Math.ceil(Math.log10(E.PeakSample/32767)*20*10)|0,E.noclipGainChange>0&&(EQ(A.scale,1)||EQ(A.scale,0))?E.noclipScale=Math.floor(32767/E.PeakSample*100)/100:E.noclipScale=-1)}},this.add_dummy_byte=function(A,E,h){for(var y=A.internal_flags,b;h-- >0;)for(l(y,E,8),b=0;b<ut.MAX_HEADER_BUF;++b)y.header[b].write_timing+=8},this.format_bitstream=function(A){var E=A.internal_flags,h;h=E.l3_side;var y=this.getframebits(A);f(A,h.resvDrain_pre),C(A,y);var b=8*E.sideinfo_len;if(b+=_(A),f(A,h.resvDrain_post),b+=h.resvDrain_post,h.main_data_begin+=(y-b)/8,T(A,new R)!=E.ResvSize&&An.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),h.main_data_begin*8!=E.ResvSize&&(An.err.printf(`bit reservoir error: 
l3_side.main_data_begin: %d 
Resvoir size:             %d 
resv drain (post)         %d 
resv drain (pre)          %d 
header and sideinfo:      %d 
data bits:                %d 
total bits:               %d (remainder: %d) 
bitsperframe:             %d 
`,8*h.main_data_begin,E.ResvSize,h.resvDrain_post,h.resvDrain_pre,8*E.sideinfo_len,b-h.resvDrain_post-8*E.sideinfo_len,b,b%8,y),An.err.println("This is a fatal error.  It has several possible causes:"),An.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),An.err.println(" 9%%  Your system is overclocked"),An.err.println(" 1%%  bug in LAME encoding library"),E.ResvSize=h.main_data_begin*8),c>1e9){var w;for(w=0;w<ut.MAX_HEADER_BUF;++w)E.header[w].write_timing-=c;c=0}return 0},this.copy_buffer=function(A,E,h,y,b){var w=v+1;if(w<=0)return 0;if(y!=0&&w>y)return-1;if(An.arraycopy(s,0,E,h,w),v=-1,u=0,b!=0){var S=Tg(1);if(S[0]=A.nMusicCRC,i.updateMusicCRC(S,E,h,w),A.nMusicCRC=S[0],w>0&&(A.VBR_seek_table.nBytesWritten+=w),A.decode_on_the_fly){for(var k=Eg([2,1152]),N=w,Y=-1,H;Y!=0;)if(Y=r.hip_decode1_unclipped(A.hip,E,h,N,k[0],k[1]),N=0,Y==-1&&(Y=0),Y>0){if(A.findPeakSample){for(H=0;H<Y;H++)k[0][H]>A.PeakSample?A.PeakSample=k[0][H]:-k[0][H]>A.PeakSample&&(A.PeakSample=-k[0][H]);if(A.channels_out>1)for(H=0;H<Y;H++)k[1][H]>A.PeakSample?A.PeakSample=k[1][H]:-k[1][H]>A.PeakSample&&(A.PeakSample=-k[1][H])}if(A.findReplayGain&&n.AnalyzeSamples(A.rgdata,k[0],0,k[1],0,Y,A.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6}}}return w},this.init_bit_stream_w=function(A){s=Ag(Je.LAME_MAXMP3BUFFER),A.h_ptr=A.w_ptr=0,A.header[A.h_ptr].write_timing=0,v=-1,u=0,c=0}}var Rg=Re.System,bt=Re.VbrMode,ws=Re.ShortBlock,kr=Re.new_float,pc=Re.new_int_n,Ig=Re.new_short_n,Jn=Re.assert;function Je(){var e=this,t=128*1024;Je.V9=410,Je.V8=420,Je.V7=430,Je.V6=440,Je.V5=450,Je.V4=460,Je.V3=470,Je.V2=480,Je.V1=490,Je.V0=500,Je.R3MIX=1e3,Je.STANDARD=1001,Je.EXTREME=1002,Je.INSANE=1003,Je.STANDARD_FAST=1004,Je.EXTREME_FAST=1005,Je.MEDIUM=1006,Je.MEDIUM_FAST=1007;var n=16384+t;Je.LAME_MAXMP3BUFFER=n;var r,a,i,s,c,v=new ps,u,m,o;this.enc=new O,this.setModules=function(d,x,W,B,he,Ae,ge,_e,He){r=d,a=x,i=W,s=B,c=he,u=Ae,m=_e,o=He,this.enc.setModules(a,v,s,u)};function l(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=kr(O.SBMAX_l),this.bo_s_weight=kr(O.SBMAX_s)}function f(){this.lowerlimit=0}function g(d,x){this.lowpass=x}var D=4294479419;function C(d){var x;return d.class_id=D,x=d.internal_flags=new ut,d.mode=dt.NOT_SET,d.original=1,d.in_samplerate=44100,d.num_channels=2,d.num_samples=-1,d.bWriteVbrTag=!0,d.quality=-1,d.short_blocks=null,x.subblock_gain=-1,d.lowpassfreq=0,d.highpassfreq=0,d.lowpasswidth=-1,d.highpasswidth=-1,d.VBR=bt.vbr_off,d.VBR_q=4,d.ATHcurve=-1,d.VBR_mean_bitrate_kbps=128,d.VBR_min_bitrate_kbps=0,d.VBR_max_bitrate_kbps=0,d.VBR_hard_min=0,x.VBR_min_bitrate=1,x.VBR_max_bitrate=13,d.quant_comp=-1,d.quant_comp_short=-1,d.msfix=-1,x.resample_ratio=1,x.OldValue[0]=180,x.OldValue[1]=180,x.CurrentStep[0]=4,x.CurrentStep[1]=4,x.masking_lower=1,x.nsPsy.attackthre=-1,x.nsPsy.attackthre_s=-1,d.scale=-1,d.athaa_type=-1,d.ATHtype=-1,d.athaa_loudapprox=-1,d.athaa_sensitivity=0,d.useTemporal=null,d.interChRatio=-1,x.mf_samples_to_encode=O.ENCDELAY+O.POSTDELAY,d.encoder_padding=0,x.mf_size=O.ENCDELAY-O.MDCTDELAY,d.findReplayGain=!1,d.decode_on_the_fly=!1,x.decode_on_the_fly=!1,x.findReplayGain=!1,x.findPeakSample=!1,x.RadioGain=0,x.AudiophileGain=0,x.noclipGainChange=0,x.noclipScale=-1,d.preset=0,d.write_id3tag_automatic=!0,0}this.lame_init=function(){var d=new cg;return C(d),d.lame_allocated_gfp=1,d};function M(d){return d>1?0:d<=0?1:Math.cos(Math.PI/2*d)}this.nearestBitrateFullIndex=function(d){var x=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],W=0,B=0,he=0,Ae=0;Ae=x[16],he=16,B=x[16],W=16;for(var ge=0;ge<16;ge++)if(Math.max(d,x[ge+1])!=d){Ae=x[ge+1],he=ge+1,B=x[ge],W=ge;break}return Ae-d>d-B?W:he};function p(d,x){var W=44100;return x>=48e3?W=48e3:x>=44100?W=44100:x>=32e3?W=32e3:x>=24e3?W=24e3:x>=22050?W=22050:x>=16e3?W=16e3:x>=12e3?W=12e3:x>=11025?W=11025:x>=8e3&&(W=8e3),d==-1?W:(d<=15960&&(W=44100),d<=15250&&(W=32e3),d<=11220&&(W=24e3),d<=9970&&(W=22050),d<=7230&&(W=16e3),d<=5420&&(W=12e3),d<=4510&&(W=11025),d<=3970&&(W=8e3),x<W?x>44100?48e3:x>32e3?44100:x>24e3?32e3:x>22050?24e3:x>16e3?22050:x>12e3?16e3:x>11025?12e3:x>8e3?11025:8e3:W)}function I(d,x){switch(d){case 44100:return x.version=1,0;case 48e3:return x.version=1,1;case 32e3:return x.version=1,2;case 22050:return x.version=0,0;case 24e3:return x.version=0,1;case 16e3:return x.version=0,2;case 11025:return x.version=0,0;case 12e3:return x.version=0,1;case 8e3:return x.version=0,2;default:return x.version=0,-1}}function j(d,x,W){W<16e3&&(x=2);for(var B=ae.bitrate_table[x][1],he=2;he<=14;he++)ae.bitrate_table[x][he]>0&&Math.abs(ae.bitrate_table[x][he]-d)<Math.abs(B-d)&&(B=ae.bitrate_table[x][he]);return B}function _(d,x,W){W<16e3&&(x=2);for(var B=0;B<=14;B++)if(ae.bitrate_table[x][B]>0&&ae.bitrate_table[x][B]==d)return B;return-1}function R(d,x){var W=[new g(8,2e3),new g(16,3700),new g(24,3900),new g(32,5500),new g(40,7e3),new g(48,7500),new g(56,1e4),new g(64,11e3),new g(80,13500),new g(96,15100),new g(112,15600),new g(128,17e3),new g(160,17500),new g(192,18600),new g(224,19400),new g(256,19700),new g(320,20500)],B=e.nearestBitrateFullIndex(x);d.lowerlimit=W[B].lowpass}function T(d){var x=d.internal_flags,W=32,B=-1;if(x.lowpass1>0){for(var he=999,Ae=0;Ae<=31;Ae++){var ge=Ae/31;ge>=x.lowpass2&&(W=Math.min(W,Ae)),x.lowpass1<ge&&ge<x.lowpass2&&(he=Math.min(he,Ae))}he==999?x.lowpass1=(W-.75)/31:x.lowpass1=(he-.75)/31,x.lowpass2=W/31}if(x.highpass2>0&&x.highpass2<.9*(.75/31)&&(x.highpass1=0,x.highpass2=0,Rg.err.println(`Warning: highpass filter disabled.  highpass frequency too small
`)),x.highpass2>0){for(var _e=-1,Ae=0;Ae<=31;Ae++){var ge=Ae/31;ge<=x.highpass1&&(B=Math.max(B,Ae)),x.highpass1<ge&&ge<x.highpass2&&(_e=Math.max(_e,Ae))}x.highpass1=B/31,_e==-1?x.highpass2=(B+.75)/31:x.highpass2=(_e+.75)/31}for(var Ae=0;Ae<32;Ae++){var He,Ee,ge=Ae/31;x.highpass2>x.highpass1?He=M((x.highpass2-ge)/(x.highpass2-x.highpass1+1e-20)):He=1,x.lowpass2>x.lowpass1?Ee=M((ge-x.lowpass1)/(x.lowpass2-x.lowpass1+1e-20)):Ee=1,x.amp_filter[Ae]=He*Ee}}function A(d){var x=d.internal_flags;switch(d.quality){default:case 9:x.psymodel=0,x.noise_shaping=0,x.noise_shaping_amp=0,x.noise_shaping_stop=0,x.use_best_huffman=0,x.full_outer_loop=0;break;case 8:d.quality=7;case 7:x.psymodel=1,x.noise_shaping=0,x.noise_shaping_amp=0,x.noise_shaping_stop=0,x.use_best_huffman=0,x.full_outer_loop=0;break;case 6:x.psymodel=1,x.noise_shaping==0&&(x.noise_shaping=1),x.noise_shaping_amp=0,x.noise_shaping_stop=0,x.subblock_gain==-1&&(x.subblock_gain=1),x.use_best_huffman=0,x.full_outer_loop=0;break;case 5:x.psymodel=1,x.noise_shaping==0&&(x.noise_shaping=1),x.noise_shaping_amp=0,x.noise_shaping_stop=0,x.subblock_gain==-1&&(x.subblock_gain=1),x.use_best_huffman=0,x.full_outer_loop=0;break;case 4:x.psymodel=1,x.noise_shaping==0&&(x.noise_shaping=1),x.noise_shaping_amp=0,x.noise_shaping_stop=0,x.subblock_gain==-1&&(x.subblock_gain=1),x.use_best_huffman=1,x.full_outer_loop=0;break;case 3:x.psymodel=1,x.noise_shaping==0&&(x.noise_shaping=1),x.noise_shaping_amp=1,x.noise_shaping_stop=1,x.subblock_gain==-1&&(x.subblock_gain=1),x.use_best_huffman=1,x.full_outer_loop=0;break;case 2:x.psymodel=1,x.noise_shaping==0&&(x.noise_shaping=1),x.substep_shaping==0&&(x.substep_shaping=2),x.noise_shaping_amp=1,x.noise_shaping_stop=1,x.subblock_gain==-1&&(x.subblock_gain=1),x.use_best_huffman=1,x.full_outer_loop=0;break;case 1:x.psymodel=1,x.noise_shaping==0&&(x.noise_shaping=1),x.substep_shaping==0&&(x.substep_shaping=2),x.noise_shaping_amp=2,x.noise_shaping_stop=1,x.subblock_gain==-1&&(x.subblock_gain=1),x.use_best_huffman=1,x.full_outer_loop=0;break;case 0:x.psymodel=1,x.noise_shaping==0&&(x.noise_shaping=1),x.substep_shaping==0&&(x.substep_shaping=2),x.noise_shaping_amp=2,x.noise_shaping_stop=1,x.subblock_gain==-1&&(x.subblock_gain=1),x.use_best_huffman=1,x.full_outer_loop=0;break}}function E(d){var x=d.internal_flags;d.frameNum=0,d.write_id3tag_automatic&&m.id3tag_write_v2(d),x.bitrate_stereoMode_Hist=pc([16,5]),x.bitrate_blockType_Hist=pc([16,6]),x.PeakSample=0,d.bWriteVbrTag&&u.InitVbrTag(d)}this.lame_init_params=function(d){var x=d.internal_flags;if(x.Class_ID=0,x.ATH==null&&(x.ATH=new gg),x.PSY==null&&(x.PSY=new l),x.rgdata==null&&(x.rgdata=new bg),x.channels_in=d.num_channels,x.channels_in==1&&(d.mode=dt.MONO),x.channels_out=d.mode==dt.MONO?1:2,x.mode_ext=O.MPG_MD_MS_LR,d.mode==dt.MONO&&(d.force_ms=!1),d.VBR==bt.vbr_off&&d.VBR_mean_bitrate_kbps!=128&&d.brate==0&&(d.brate=d.VBR_mean_bitrate_kbps),d.VBR==bt.vbr_off||d.VBR==bt.vbr_mtrh||d.VBR==bt.vbr_mt||(d.free_format=!1),d.VBR==bt.vbr_off&&d.brate==0&&mn.EQ(d.compression_ratio,0)&&(d.compression_ratio=11.025),d.VBR==bt.vbr_off&&d.compression_ratio>0&&(d.out_samplerate==0&&(d.out_samplerate=map2MP3Frequency(int(.97*d.in_samplerate))),d.brate=0|d.out_samplerate*16*x.channels_out/(1e3*d.compression_ratio),x.samplerate_index=I(d.out_samplerate,d),d.free_format||(d.brate=j(d.brate,d.version,d.out_samplerate))),d.out_samplerate!=0&&(d.out_samplerate<16e3?(d.VBR_mean_bitrate_kbps=Math.max(d.VBR_mean_bitrate_kbps,8),d.VBR_mean_bitrate_kbps=Math.min(d.VBR_mean_bitrate_kbps,64)):d.out_samplerate<32e3?(d.VBR_mean_bitrate_kbps=Math.max(d.VBR_mean_bitrate_kbps,8),d.VBR_mean_bitrate_kbps=Math.min(d.VBR_mean_bitrate_kbps,160)):(d.VBR_mean_bitrate_kbps=Math.max(d.VBR_mean_bitrate_kbps,32),d.VBR_mean_bitrate_kbps=Math.min(d.VBR_mean_bitrate_kbps,320))),d.lowpassfreq==0){var W=16e3;switch(d.VBR){case bt.vbr_off:{var B=new f;R(B,d.brate),W=B.lowerlimit;break}case bt.vbr_abr:{var B=new f;R(B,d.VBR_mean_bitrate_kbps),W=B.lowerlimit;break}case bt.vbr_rh:{var he=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(d.VBR_q>=0&&d.VBR_q<=9){var Ae=he[d.VBR_q],ge=he[d.VBR_q+1],_e=d.VBR_q_frac;W=linear_int(Ae,ge,_e)}else W=19500;break}default:{var he=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];if(d.VBR_q>=0&&d.VBR_q<=9){var Ae=he[d.VBR_q],ge=he[d.VBR_q+1],_e=d.VBR_q_frac;W=linear_int(Ae,ge,_e)}else W=19500}}d.mode==dt.MONO&&(d.VBR==bt.vbr_off||d.VBR==bt.vbr_abr)&&(W*=1.5),d.lowpassfreq=W|0}if(d.out_samplerate==0&&(2*d.lowpassfreq>d.in_samplerate&&(d.lowpassfreq=d.in_samplerate/2),d.out_samplerate=p(d.lowpassfreq|0,d.in_samplerate)),d.lowpassfreq=Math.min(20500,d.lowpassfreq),d.lowpassfreq=Math.min(d.out_samplerate/2,d.lowpassfreq),d.VBR==bt.vbr_off&&(d.compression_ratio=d.out_samplerate*16*x.channels_out/(1e3*d.brate)),d.VBR==bt.vbr_abr&&(d.compression_ratio=d.out_samplerate*16*x.channels_out/(1e3*d.VBR_mean_bitrate_kbps)),d.bWriteVbrTag||(d.findReplayGain=!1,d.decode_on_the_fly=!1,x.findPeakSample=!1),x.findReplayGain=d.findReplayGain,x.decode_on_the_fly=d.decode_on_the_fly,x.decode_on_the_fly&&(x.findPeakSample=!0),x.findReplayGain&&r.InitGainAnalysis(x.rgdata,d.out_samplerate)==GainAnalysis.INIT_GAIN_ANALYSIS_ERROR)return d.internal_flags=null,-6;switch(x.decode_on_the_fly&&!d.decode_only&&(x.hip!=null&&o.hip_decode_exit(x.hip),x.hip=o.hip_decode_init()),x.mode_gr=d.out_samplerate<=24e3?1:2,d.framesize=576*x.mode_gr,d.encoder_delay=O.ENCDELAY,x.resample_ratio=d.in_samplerate/d.out_samplerate,d.VBR){case bt.vbr_mt:case bt.vbr_rh:case bt.vbr_mtrh:{var He=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];d.compression_ratio=He[d.VBR_q]}break;case bt.vbr_abr:d.compression_ratio=d.out_samplerate*16*x.channels_out/(1e3*d.VBR_mean_bitrate_kbps);break;default:d.compression_ratio=d.out_samplerate*16*x.channels_out/(1e3*d.brate);break}if(d.mode==dt.NOT_SET&&(d.mode=dt.JOINT_STEREO),d.highpassfreq>0?(x.highpass1=2*d.highpassfreq,d.highpasswidth>=0?x.highpass2=2*(d.highpassfreq+d.highpasswidth):x.highpass2=2*d.highpassfreq,x.highpass1/=d.out_samplerate,x.highpass2/=d.out_samplerate):(x.highpass1=0,x.highpass2=0),d.lowpassfreq>0?(x.lowpass2=2*d.lowpassfreq,d.lowpasswidth>=0?(x.lowpass1=2*(d.lowpassfreq-d.lowpasswidth),x.lowpass1<0&&(x.lowpass1=0)):x.lowpass1=2*d.lowpassfreq,x.lowpass1/=d.out_samplerate,x.lowpass2/=d.out_samplerate):(x.lowpass1=0,x.lowpass2=0),T(d),x.samplerate_index=I(d.out_samplerate,d),x.samplerate_index<0)return d.internal_flags=null,-1;if(d.VBR==bt.vbr_off){if(d.free_format)x.bitrate_index=0;else if(d.brate=j(d.brate,d.version,d.out_samplerate),x.bitrate_index=_(d.brate,d.version,d.out_samplerate),x.bitrate_index<=0)return d.internal_flags=null,-1}else x.bitrate_index=1;d.analysis&&(d.bWriteVbrTag=!1),x.pinfo!=null&&(d.bWriteVbrTag=!1),a.init_bit_stream_w(x);for(var Ee=x.samplerate_index+3*d.version+6*(d.out_samplerate<16e3?1:0),fe=0;fe<O.SBMAX_l+1;fe++)x.scalefac_band.l[fe]=s.sfBandIndex[Ee].l[fe];for(var fe=0;fe<O.PSFB21+1;fe++){var Xe=(x.scalefac_band.l[22]-x.scalefac_band.l[21])/O.PSFB21,V=x.scalefac_band.l[21]+fe*Xe;x.scalefac_band.psfb21[fe]=V}x.scalefac_band.psfb21[O.PSFB21]=576;for(var fe=0;fe<O.SBMAX_s+1;fe++)x.scalefac_band.s[fe]=s.sfBandIndex[Ee].s[fe];for(var fe=0;fe<O.PSFB12+1;fe++){var Xe=(x.scalefac_band.s[13]-x.scalefac_band.s[12])/O.PSFB12,V=x.scalefac_band.s[12]+fe*Xe;x.scalefac_band.psfb12[fe]=V}x.scalefac_band.psfb12[O.PSFB12]=192,d.version==1?x.sideinfo_len=x.channels_out==1?21:36:x.sideinfo_len=x.channels_out==1?13:21,d.error_protection&&(x.sideinfo_len+=2),E(d),x.Class_ID=D;{var X;for(X=0;X<19;X++)x.nsPsy.pefirbuf[X]=700*x.mode_gr*x.channels_out;d.ATHtype==-1&&(d.ATHtype=4)}switch(Jn(d.VBR_q<=9),Jn(d.VBR_q>=0),d.VBR){case bt.vbr_mt:d.VBR=bt.vbr_mtrh;case bt.vbr_mtrh:{d.useTemporal==null&&(d.useTemporal=!1),i.apply_preset(d,500-d.VBR_q*10,0),d.quality<0&&(d.quality=LAME_DEFAULT_QUALITY),d.quality<5&&(d.quality=0),d.quality>5&&(d.quality=5),x.PSY.mask_adjust=d.maskingadjust,x.PSY.mask_adjust_short=d.maskingadjust_short,d.experimentalY?x.sfb21_extra=!1:x.sfb21_extra=d.out_samplerate>44e3,x.iteration_loop=new VBRNewIterationLoop(c);break}case bt.vbr_rh:{i.apply_preset(d,500-d.VBR_q*10,0),x.PSY.mask_adjust=d.maskingadjust,x.PSY.mask_adjust_short=d.maskingadjust_short,d.experimentalY?x.sfb21_extra=!1:x.sfb21_extra=d.out_samplerate>44e3,d.quality>6&&(d.quality=6),d.quality<0&&(d.quality=LAME_DEFAULT_QUALITY),x.iteration_loop=new VBROldIterationLoop(c);break}default:{var te;x.sfb21_extra=!1,d.quality<0&&(d.quality=LAME_DEFAULT_QUALITY),te=d.VBR,te==bt.vbr_off&&(d.VBR_mean_bitrate_kbps=d.brate),i.apply_preset(d,d.VBR_mean_bitrate_kbps,0),d.VBR=te,x.PSY.mask_adjust=d.maskingadjust,x.PSY.mask_adjust_short=d.maskingadjust_short,te==bt.vbr_off?x.iteration_loop=new wg(c):x.iteration_loop=new ABRIterationLoop(c);break}}if(Jn(d.scale>=0),d.VBR!=bt.vbr_off){if(x.VBR_min_bitrate=1,x.VBR_max_bitrate=14,d.out_samplerate<16e3&&(x.VBR_max_bitrate=8),d.VBR_min_bitrate_kbps!=0&&(d.VBR_min_bitrate_kbps=j(d.VBR_min_bitrate_kbps,d.version,d.out_samplerate),x.VBR_min_bitrate=_(d.VBR_min_bitrate_kbps,d.version,d.out_samplerate),x.VBR_min_bitrate<0)||d.VBR_max_bitrate_kbps!=0&&(d.VBR_max_bitrate_kbps=j(d.VBR_max_bitrate_kbps,d.version,d.out_samplerate),x.VBR_max_bitrate=_(d.VBR_max_bitrate_kbps,d.version,d.out_samplerate),x.VBR_max_bitrate<0))return-1;d.VBR_min_bitrate_kbps=ae.bitrate_table[d.version][x.VBR_min_bitrate],d.VBR_max_bitrate_kbps=ae.bitrate_table[d.version][x.VBR_max_bitrate],d.VBR_mean_bitrate_kbps=Math.min(ae.bitrate_table[d.version][x.VBR_max_bitrate],d.VBR_mean_bitrate_kbps),d.VBR_mean_bitrate_kbps=Math.max(ae.bitrate_table[d.version][x.VBR_min_bitrate],d.VBR_mean_bitrate_kbps)}return d.tune&&(x.PSY.mask_adjust+=d.tune_value_a,x.PSY.mask_adjust_short+=d.tune_value_a),A(d),Jn(d.scale>=0),d.athaa_type<0?x.ATH.useAdjust=3:x.ATH.useAdjust=d.athaa_type,x.ATH.aaSensitivityP=Math.pow(10,d.athaa_sensitivity/-10),d.short_blocks==null&&(d.short_blocks=ws.short_block_allowed),d.short_blocks==ws.short_block_allowed&&(d.mode==dt.JOINT_STEREO||d.mode==dt.STEREO)&&(d.short_blocks=ws.short_block_coupled),d.quant_comp<0&&(d.quant_comp=1),d.quant_comp_short<0&&(d.quant_comp_short=0),d.msfix<0&&(d.msfix=0),d.exp_nspsytune=d.exp_nspsytune|1,d.internal_flags.nsPsy.attackthre<0&&(d.internal_flags.nsPsy.attackthre=ps.NSATTACKTHRE),d.internal_flags.nsPsy.attackthre_s<0&&(d.internal_flags.nsPsy.attackthre_s=ps.NSATTACKTHRE_S),Jn(d.scale>=0),d.scale<0&&(d.scale=1),d.ATHtype<0&&(d.ATHtype=4),d.ATHcurve<0&&(d.ATHcurve=4),d.athaa_loudapprox<0&&(d.athaa_loudapprox=2),d.interChRatio<0&&(d.interChRatio=0),d.useTemporal==null&&(d.useTemporal=!0),x.slot_lag=x.frac_SpF=0,d.VBR==bt.vbr_off&&(x.slot_lag=x.frac_SpF=(d.version+1)*72e3*d.brate%d.out_samplerate|0),s.iteration_init(d),v.psymodel_init(d),Jn(d.scale>=0),0};function h(d,x){(d.in_buffer_0==null||d.in_buffer_nsamples<x)&&(d.in_buffer_0=kr(x),d.in_buffer_1=kr(x),d.in_buffer_nsamples=x)}this.lame_encode_flush=function(d,x,W,B){var he=d.internal_flags,Ae=Ig([2,1152]),ge=0,_e,He,Ee,fe,Xe=he.mf_samples_to_encode-O.POSTDELAY,V=y(d);if(he.mf_samples_to_encode<1)return 0;for(_e=0,d.in_samplerate!=d.out_samplerate&&(Xe+=16*d.out_samplerate/d.in_samplerate),Ee=d.framesize-Xe%d.framesize,Ee<576&&(Ee+=d.framesize),d.encoder_padding=Ee,fe=(Xe+Ee)/d.framesize;fe>0&&ge>=0;){var X=V-he.mf_size,te=d.frameNum;X*=d.in_samplerate,X/=d.out_samplerate,X>1152&&(X=1152),X<1&&(X=1),He=B-_e,B==0&&(He=0),ge=this.lame_encode_buffer(d,Ae[0],Ae[1],X,x,W,He),W+=ge,_e+=ge,fe-=te!=d.frameNum?1:0}if(he.mf_samples_to_encode=0,ge<0||(He=B-_e,B==0&&(He=0),a.flush_bitstream(d),ge=a.copy_buffer(he,x,W,He,1),ge<0))return ge;if(W+=ge,_e+=ge,He=B-_e,B==0&&(He=0),d.write_id3tag_automatic){if(m.id3tag_write_v1(d),ge=a.copy_buffer(he,x,W,He,0),ge<0)return ge;_e+=ge}return _e},this.lame_encode_buffer=function(d,x,W,B,he,Ae,ge){var _e=d.internal_flags,He=[null,null];if(_e.Class_ID!=D)return-3;if(B==0)return 0;h(_e,B),He[0]=_e.in_buffer_0,He[1]=_e.in_buffer_1;for(var Ee=0;Ee<B;Ee++)He[0][Ee]=x[Ee],_e.channels_in>1&&(He[1][Ee]=W[Ee]);return b(d,He[0],He[1],B,he,Ae,ge)};function y(d){var x=O.BLKSIZE+d.framesize-O.FFTOFFSET;return x=Math.max(x,512+d.framesize-32),x}function b(d,x,W,B,he,Ae,ge){var _e=d.internal_flags,He=0,Ee,fe,Xe,V,X,te=[null,null],ce=[null,null];if(_e.Class_ID!=D)return-3;if(B==0)return 0;if(X=a.copy_buffer(_e,he,Ae,ge,0),X<0)return X;if(Ae+=X,He+=X,ce[0]=x,ce[1]=W,mn.NEQ(d.scale,0)&&mn.NEQ(d.scale,1))for(fe=0;fe<B;++fe)ce[0][fe]*=d.scale,_e.channels_out==2&&(ce[1][fe]*=d.scale);if(mn.NEQ(d.scale_left,0)&&mn.NEQ(d.scale_left,1))for(fe=0;fe<B;++fe)ce[0][fe]*=d.scale_left;if(mn.NEQ(d.scale_right,0)&&mn.NEQ(d.scale_right,1))for(fe=0;fe<B;++fe)ce[1][fe]*=d.scale_right;if(d.num_channels==2&&_e.channels_out==1)for(fe=0;fe<B;++fe)ce[0][fe]=.5*(ce[0][fe]+ce[1][fe]),ce[1][fe]=0;V=y(d),te[0]=_e.mfbuf[0],te[1]=_e.mfbuf[1];for(var ue=0;B>0;){var be=[null,null],Te=0,ke=0;be[0]=ce[0],be[1]=ce[1];var xe=new S;if(q(d,te,be,ue,B,xe),Te=xe.n_in,ke=xe.n_out,_e.findReplayGain&&!_e.decode_on_the_fly&&r.AnalyzeSamples(_e.rgdata,te[0],_e.mf_size,te[1],_e.mf_size,ke,_e.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6;if(B-=Te,ue+=Te,_e.channels_out==2,_e.mf_size+=ke,Jn(_e.mf_size<=ut.MFSIZE),_e.mf_samples_to_encode<1&&(_e.mf_samples_to_encode=O.ENCDELAY+O.POSTDELAY),_e.mf_samples_to_encode+=ke,_e.mf_size>=V){var pe=ge-He;if(ge==0&&(pe=0),Ee=w(d,te[0],te[1],he,Ae,pe),Ee<0)return Ee;for(Ae+=Ee,He+=Ee,_e.mf_size-=d.framesize,_e.mf_samples_to_encode-=d.framesize,Xe=0;Xe<_e.channels_out;Xe++)for(fe=0;fe<_e.mf_size;fe++)te[Xe][fe]=te[Xe][fe+d.framesize]}}return He}function w(d,x,W,B,he,Ae){var ge=e.enc.lame_encode_mp3_frame(d,x,W,B,he,Ae);return d.frameNum++,ge}function S(){this.n_in=0,this.n_out=0}function k(){this.num_used=0}function N(d,x){return x!=0?N(x,d%x):d}function Y(d,x,W){var B=Math.PI*x;d/=W,d<0&&(d=0),d>1&&(d=1);var he=d-.5,Ae=.42-.5*Math.cos(2*d*Math.PI)+.08*Math.cos(4*d*Math.PI);return Math.abs(he)<1e-9?B/Math.PI:Ae*Math.sin(W*B*he)/(Math.PI*W*he)}function H(d,x,W,B,he,Ae,ge,_e,He){var Ee=d.internal_flags,fe,Xe=0,V,X=d.out_samplerate/N(d.out_samplerate,d.in_samplerate);X>ut.BPC&&(X=ut.BPC);var te=Math.abs(Ee.resample_ratio-Math.floor(.5+Ee.resample_ratio))<1e-4?1:0,ce=1/Ee.resample_ratio;ce>1&&(ce=1);var ue=31;ue%2==0&&--ue,ue+=te;var be=ue+1;if(Ee.fill_buffer_resample_init==0){for(Ee.inbuf_old[0]=kr(be),Ee.inbuf_old[1]=kr(be),fe=0;fe<=2*X;++fe)Ee.blackfilt[fe]=kr(be);for(Ee.itime[0]=0,Ee.itime[1]=0,Xe=0;Xe<=2*X;Xe++){var Te=0,ke=(Xe-X)/(2*X);for(fe=0;fe<=ue;fe++)Te+=Ee.blackfilt[Xe][fe]=Y(fe-ke,ce,ue);for(fe=0;fe<=ue;fe++)Ee.blackfilt[Xe][fe]/=Te}Ee.fill_buffer_resample_init=1}var xe=Ee.inbuf_old[He];for(V=0;V<B;V++){var pe,ze;if(pe=V*Ee.resample_ratio,Xe=0|Math.floor(pe-Ee.itime[He]),ue+Xe-ue/2>=ge)break;var ke=pe-Ee.itime[He]-(Xe+.5*(ue%2));ze=0|Math.floor(ke*2*X+X+.5);var De=0;for(fe=0;fe<=ue;++fe){var je=0|fe+Xe-ue/2,Ve;Ve=je<0?xe[be+je]:he[Ae+je],De+=Ve*Ee.blackfilt[ze][fe]}x[W+V]=De}if(_e.num_used=Math.min(ge,ue+Xe-ue/2),Ee.itime[He]+=_e.num_used-V*Ee.resample_ratio,_e.num_used>=be)for(fe=0;fe<be;fe++)xe[fe]=he[Ae+_e.num_used+fe-be];else{var qe=be-_e.num_used;for(fe=0;fe<qe;++fe)xe[fe]=xe[fe+_e.num_used];for(Xe=0;fe<be;++fe,++Xe)xe[fe]=he[Ae+Xe];Jn(Xe==_e.num_used)}return V}function q(d,x,W,B,he,Ae){var ge=d.internal_flags;if(ge.resample_ratio<.9999||ge.resample_ratio>1.0001)for(var _e=0;_e<ge.channels_out;_e++){var He=new k;Ae.n_out=H(d,x[_e],ge.mf_size,d.framesize,W[_e],B,he,He,_e),Ae.n_in=He.num_used}else{Ae.n_out=Math.min(d.framesize,he),Ae.n_in=Ae.n_out;for(var Ee=0;Ee<Ae.n_out;++Ee)x[0][ge.mf_size+Ee]=W[0][B+Ee],ge.channels_out==2&&(x[1][ge.mf_size+Ee]=W[1][B+Ee])}}}var En=Re.VbrMode;function Cg(){function e(u,m,o,l,f,g,D,C,M,p,I,j,_,R,T){this.vbr_q=u,this.quant_comp=m,this.quant_comp_s=o,this.expY=l,this.st_lrm=f,this.st_s=g,this.masking_adj=D,this.masking_adj_short=C,this.ath_lower=M,this.ath_curve=p,this.ath_sensitivity=I,this.interch=j,this.safejoint=_,this.sfb21mod=R,this.msfix=T}function t(u,m,o,l,f,g,D,C,M,p,I,j,_,R){this.quant_comp=m,this.quant_comp_s=o,this.safejoint=l,this.nsmsfix=f,this.st_lrm=g,this.st_s=D,this.nsbass=C,this.scale=M,this.masking_adj=p,this.ath_lower=I,this.ath_curve=j,this.interch=_,this.sfscale=R}var n;this.setModules=function(u){n=u};var r=[new e(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new e(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new e(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new e(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new e(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new e(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new e(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new e(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new e(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new e(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new e(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],a=[new e(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new e(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new e(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new e(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new e(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new e(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new e(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new e(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new e(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new e(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new e(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function i(u,m,o){var l=u.VBR==En.vbr_rh?r:a,f=u.VBR_q_frac,g=l[m],D=l[m+1],C=g;g.st_lrm=g.st_lrm+f*(D.st_lrm-g.st_lrm),g.st_s=g.st_s+f*(D.st_s-g.st_s),g.masking_adj=g.masking_adj+f*(D.masking_adj-g.masking_adj),g.masking_adj_short=g.masking_adj_short+f*(D.masking_adj_short-g.masking_adj_short),g.ath_lower=g.ath_lower+f*(D.ath_lower-g.ath_lower),g.ath_curve=g.ath_curve+f*(D.ath_curve-g.ath_curve),g.ath_sensitivity=g.ath_sensitivity+f*(D.ath_sensitivity-g.ath_sensitivity),g.interch=g.interch+f*(D.interch-g.interch),g.msfix=g.msfix+f*(D.msfix-g.msfix),v(u,C.vbr_q),o!=0?u.quant_comp=C.quant_comp:Math.abs(u.quant_comp- -1)>0||(u.quant_comp=C.quant_comp),o!=0?u.quant_comp_short=C.quant_comp_s:Math.abs(u.quant_comp_short- -1)>0||(u.quant_comp_short=C.quant_comp_s),C.expY!=0&&(u.experimentalY=C.expY!=0),o!=0?u.internal_flags.nsPsy.attackthre=C.st_lrm:Math.abs(u.internal_flags.nsPsy.attackthre- -1)>0||(u.internal_flags.nsPsy.attackthre=C.st_lrm),o!=0?u.internal_flags.nsPsy.attackthre_s=C.st_s:Math.abs(u.internal_flags.nsPsy.attackthre_s- -1)>0||(u.internal_flags.nsPsy.attackthre_s=C.st_s),o!=0?u.maskingadjust=C.masking_adj:Math.abs(u.maskingadjust-0)>0||(u.maskingadjust=C.masking_adj),o!=0?u.maskingadjust_short=C.masking_adj_short:Math.abs(u.maskingadjust_short-0)>0||(u.maskingadjust_short=C.masking_adj_short),o!=0?u.ATHlower=-C.ath_lower/10:Math.abs(-u.ATHlower*10-0)>0||(u.ATHlower=-C.ath_lower/10),o!=0?u.ATHcurve=C.ath_curve:Math.abs(u.ATHcurve- -1)>0||(u.ATHcurve=C.ath_curve),o!=0?u.athaa_sensitivity=C.ath_sensitivity:Math.abs(u.athaa_sensitivity- -1)>0||(u.athaa_sensitivity=C.ath_sensitivity),C.interch>0&&(o!=0?u.interChRatio=C.interch:Math.abs(u.interChRatio- -1)>0||(u.interChRatio=C.interch)),C.safejoint>0&&(u.exp_nspsytune=u.exp_nspsytune|C.safejoint),C.sfb21mod>0&&(u.exp_nspsytune=u.exp_nspsytune|C.sfb21mod<<20),o!=0?u.msfix=C.msfix:Math.abs(u.msfix- -1)>0||(u.msfix=C.msfix),o==0&&(u.VBR_q=m,u.VBR_q_frac=f)}var s=[new t(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new t(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new t(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new t(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new t(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new t(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new t(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new t(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new t(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new t(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new t(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new t(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new t(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new t(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new t(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new t(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new t(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function c(u,m,o){var l=m,f=n.nearestBitrateFullIndex(m);if(u.VBR=En.vbr_abr,u.VBR_mean_bitrate_kbps=l,u.VBR_mean_bitrate_kbps=Math.min(u.VBR_mean_bitrate_kbps,320),u.VBR_mean_bitrate_kbps=Math.max(u.VBR_mean_bitrate_kbps,8),u.brate=u.VBR_mean_bitrate_kbps,u.VBR_mean_bitrate_kbps>320&&(u.disable_reservoir=!0),s[f].safejoint>0&&(u.exp_nspsytune=u.exp_nspsytune|2),s[f].sfscale>0&&(u.internal_flags.noise_shaping=2),Math.abs(s[f].nsbass)>0){var g=int(s[f].nsbass*4);g<0&&(g+=64),u.exp_nspsytune=u.exp_nspsytune|g<<2}return o!=0?u.quant_comp=s[f].quant_comp:Math.abs(u.quant_comp- -1)>0||(u.quant_comp=s[f].quant_comp),o!=0?u.quant_comp_short=s[f].quant_comp_s:Math.abs(u.quant_comp_short- -1)>0||(u.quant_comp_short=s[f].quant_comp_s),o!=0?u.msfix=s[f].nsmsfix:Math.abs(u.msfix- -1)>0||(u.msfix=s[f].nsmsfix),o!=0?u.internal_flags.nsPsy.attackthre=s[f].st_lrm:Math.abs(u.internal_flags.nsPsy.attackthre- -1)>0||(u.internal_flags.nsPsy.attackthre=s[f].st_lrm),o!=0?u.internal_flags.nsPsy.attackthre_s=s[f].st_s:Math.abs(u.internal_flags.nsPsy.attackthre_s- -1)>0||(u.internal_flags.nsPsy.attackthre_s=s[f].st_s),o!=0?u.scale=s[f].scale:Math.abs(u.scale- -1)>0||(u.scale=s[f].scale),o!=0?u.maskingadjust=s[f].masking_adj:Math.abs(u.maskingadjust-0)>0||(u.maskingadjust=s[f].masking_adj),s[f].masking_adj>0?o!=0?u.maskingadjust_short=s[f].masking_adj*.9:Math.abs(u.maskingadjust_short-0)>0||(u.maskingadjust_short=s[f].masking_adj*.9):o!=0?u.maskingadjust_short=s[f].masking_adj*1.1:Math.abs(u.maskingadjust_short-0)>0||(u.maskingadjust_short=s[f].masking_adj*1.1),o!=0?u.ATHlower=-s[f].ath_lower/10:Math.abs(-u.ATHlower*10-0)>0||(u.ATHlower=-s[f].ath_lower/10),o!=0?u.ATHcurve=s[f].ath_curve:Math.abs(u.ATHcurve- -1)>0||(u.ATHcurve=s[f].ath_curve),o!=0?u.interChRatio=s[f].interch:Math.abs(u.interChRatio- -1)>0||(u.interChRatio=s[f].interch),m}this.apply_preset=function(u,m,o){switch(m){case Je.R3MIX:{m=Je.V3,u.VBR=En.vbr_mtrh;break}case Je.MEDIUM:{m=Je.V4,u.VBR=En.vbr_rh;break}case Je.MEDIUM_FAST:{m=Je.V4,u.VBR=En.vbr_mtrh;break}case Je.STANDARD:{m=Je.V2,u.VBR=En.vbr_rh;break}case Je.STANDARD_FAST:{m=Je.V2,u.VBR=En.vbr_mtrh;break}case Je.EXTREME:{m=Je.V0,u.VBR=En.vbr_rh;break}case Je.EXTREME_FAST:{m=Je.V0,u.VBR=En.vbr_mtrh;break}case Je.INSANE:return m=320,u.preset=m,c(u,m,o),u.VBR=En.vbr_off,m}switch(u.preset=m,m){case Je.V9:return i(u,9,o),m;case Je.V8:return i(u,8,o),m;case Je.V7:return i(u,7,o),m;case Je.V6:return i(u,6,o),m;case Je.V5:return i(u,5,o),m;case Je.V4:return i(u,4,o),m;case Je.V3:return i(u,3,o),m;case Je.V2:return i(u,2,o),m;case Je.V1:return i(u,1,o),m;case Je.V0:return i(u,0,o),m}return m>=8&&m<=320?c(u,m,o):(u.preset=0,m)};function v(u,m){var o=0;return m<0&&(o=-1,m=0),m>9&&(o=-1,m=9),u.VBR_q=m,u.VBR_q_frac=0,o}}function Bg(){this.setModules=function(e,t){}}function ks(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}var gc=Re.new_float,Fg=Re.new_int;function Og(){this.global_gain=0,this.sfb_count1=0,this.step=Fg(39),this.noise=gc(39),this.noise_log=gc(39)}var $n=Re.System,bc=Re.VbrMode,Ss=Re.Util,Dr=Re.Arrays,ci=Re.new_float,ui=Re.assert;function Lg(){var e;this.rv=null;var t;this.qupvt=null;var n,r=new Bg,a;this.setModules=function(M,p,I,j){e=M,t=p,this.rv=p,n=I,this.qupvt=I,a=j,r.setModules(n,a)},this.ms_convert=function(M,p){for(var I=0;I<576;++I){var j=M.tt[p][0].xr[I],_=M.tt[p][1].xr[I];M.tt[p][0].xr[I]=(j+_)*(Ss.SQRT2*.5),M.tt[p][1].xr[I]=(j-_)*(Ss.SQRT2*.5)}};function i(M,p,I,j){j=0;for(var _=0;_<=I;++_){var R=Math.abs(M.xr[_]);j+=R,p[_]=Math.sqrt(R*Math.sqrt(R)),p[_]>M.xrpow_max&&(M.xrpow_max=p[_])}return j}this.init_xrpow=function(M,p,I){var j=0,_=0|p.max_nonzero_coeff;if(p.xrpow_max=0,Dr.fill(I,_,576,0),j=i(p,I,_,j),j>1e-20){var R=0;(M.substep_shaping&2)!=0&&(R=1);for(var T=0;T<p.psymax;T++)M.pseudohalf[T]=R;return!0}return Dr.fill(p.l3_enc,0,576,0),!1};function s(M,p){var I=M.ATH,j=p.xr;if(p.block_type!=O.SHORT_TYPE)for(var _=!1,R=O.PSFB21-1;R>=0&&!_;R--){var T=M.scalefac_band.psfb21[R],A=M.scalefac_band.psfb21[R+1],E=n.athAdjust(I.adjust,I.psfb21[R],I.floor);M.nsPsy.longfact[21]>1e-12&&(E*=M.nsPsy.longfact[21]);for(var h=A-1;h>=T;h--)if(Math.abs(j[h])<E)j[h]=0;else{_=!0;break}}else for(var y=0;y<3;y++)for(var _=!1,R=O.PSFB12-1;R>=0&&!_;R--){var T=M.scalefac_band.s[12]*3+(M.scalefac_band.s[13]-M.scalefac_band.s[12])*y+(M.scalefac_band.psfb12[R]-M.scalefac_band.psfb12[0]),A=T+(M.scalefac_band.psfb12[R+1]-M.scalefac_band.psfb12[R]),b=n.athAdjust(I.adjust,I.psfb12[R],I.floor);M.nsPsy.shortfact[12]>1e-12&&(b*=M.nsPsy.shortfact[12]);for(var h=A-1;h>=T;h--)if(Math.abs(j[h])<b)j[h]=0;else{_=!0;break}}}this.init_outer_loop=function(M,p){p.part2_3_length=0,p.big_values=0,p.count1=0,p.global_gain=210,p.scalefac_compress=0,p.table_select[0]=0,p.table_select[1]=0,p.table_select[2]=0,p.subblock_gain[0]=0,p.subblock_gain[1]=0,p.subblock_gain[2]=0,p.subblock_gain[3]=0,p.region0_count=0,p.region1_count=0,p.preflag=0,p.scalefac_scale=0,p.count1table_select=0,p.part2_length=0,p.sfb_lmax=O.SBPSY_l,p.sfb_smin=O.SBPSY_s,p.psy_lmax=M.sfb21_extra?O.SBMAX_l:O.SBPSY_l,p.psymax=p.psy_lmax,p.sfbmax=p.sfb_lmax,p.sfbdivide=11;for(var I=0;I<O.SBMAX_l;I++)p.width[I]=M.scalefac_band.l[I+1]-M.scalefac_band.l[I],p.window[I]=3;if(p.block_type==O.SHORT_TYPE){var j=ci(576);p.sfb_smin=0,p.sfb_lmax=0,p.mixed_block_flag!=0&&(p.sfb_smin=3,p.sfb_lmax=M.mode_gr*2+4),p.psymax=p.sfb_lmax+3*((M.sfb21_extra?O.SBMAX_s:O.SBPSY_s)-p.sfb_smin),p.sfbmax=p.sfb_lmax+3*(O.SBPSY_s-p.sfb_smin),p.sfbdivide=p.sfbmax-18,p.psy_lmax=p.sfb_lmax;var _=M.scalefac_band.l[p.sfb_lmax];$n.arraycopy(p.xr,0,j,0,576);for(var I=p.sfb_smin;I<O.SBMAX_s;I++)for(var R=M.scalefac_band.s[I],T=M.scalefac_band.s[I+1],A=0;A<3;A++)for(var E=R;E<T;E++)p.xr[_++]=j[3*E+A];for(var h=p.sfb_lmax,I=p.sfb_smin;I<O.SBMAX_s;I++)p.width[h]=p.width[h+1]=p.width[h+2]=M.scalefac_band.s[I+1]-M.scalefac_band.s[I],p.window[h]=0,p.window[h+1]=1,p.window[h+2]=2,h+=3}p.count1bits=0,p.sfb_partition_table=n.nr_of_sfb_block[0][0],p.slen[0]=0,p.slen[1]=0,p.slen[2]=0,p.slen[3]=0,p.max_nonzero_coeff=575,Dr.fill(p.scalefac,0),s(M,p)};function c(M){this.ordinal=M}c.BINSEARCH_NONE=new c(0),c.BINSEARCH_UP=new c(1),c.BINSEARCH_DOWN=new c(2);function v(M,p,I,j,_){var R,T=M.CurrentStep[j],A=!1,E=M.OldValue[j],h=c.BINSEARCH_NONE;for(p.global_gain=E,I-=p.part2_length;;){var y;if(R=a.count_bits(M,_,p,null),T==1||R==I)break;R>I?(h==c.BINSEARCH_DOWN&&(A=!0),A&&(T/=2),h=c.BINSEARCH_UP,y=T):(h==c.BINSEARCH_UP&&(A=!0),A&&(T/=2),h=c.BINSEARCH_DOWN,y=-T),p.global_gain+=y,p.global_gain<0&&(p.global_gain=0,A=!0),p.global_gain>255&&(p.global_gain=255,A=!0)}for(ui(p.global_gain>=0),ui(p.global_gain<256);R>I&&p.global_gain<255;)p.global_gain++,R=a.count_bits(M,_,p,null);return M.CurrentStep[j]=E-p.global_gain>=4?4:2,M.OldValue[j]=p.global_gain,p.part2_3_length=R,R}this.trancate_smallspectrums=function(M,p,I,j){var _=ci(sr.SFBMAX);if(!((M.substep_shaping&4)==0&&p.block_type==O.SHORT_TYPE||(M.substep_shaping&128)!=0)){n.calc_noise(p,I,_,new ks,null);for(var T=0;T<576;T++){var R=0;p.l3_enc[T]!=0&&(R=Math.abs(p.xr[T])),j[T]=R}var T=0,A=8;p.block_type==O.SHORT_TYPE&&(A=6);do{var E,h,y,b,w=p.width[A];if(T+=w,!(_[A]>=1)&&(Dr.sort(j,T-w,w),!BitStream.EQ(j[T-1],0))){E=(1-_[A])*I[A],h=0,b=0;do{var S;for(y=1;b+y<w&&!BitStream.NEQ(j[b+T-w],j[b+T+y-w]);y++);if(S=j[b+T-w]*j[b+T-w]*y,E<S){b!=0&&(h=j[b+T-w-1]);break}E-=S,b+=y}while(b<w);if(!BitStream.EQ(h,0))do Math.abs(p.xr[T-w])<=h&&(p.l3_enc[T-w]=0);while(--w>0)}}while(++A<p.psymax);p.part2_3_length=a.noquant_count_bits(M,p,null)}};function u(M){for(var p=0;p<M.sfbmax;p++)if(M.scalefac[p]+M.subblock_gain[M.window[p]]==0)return!1;return!0}function m(M){return Ss.FAST_LOG10(.368+.632*M*M*M)}function o(M,p){for(var I=1e-37,j=0;j<p.psymax;j++)I+=m(M[j]);return Math.max(1e-20,I)}function l(M,p,I,j,_){var R;switch(M){default:case 9:{p.over_count>0?(R=I.over_SSD<=p.over_SSD,I.over_SSD==p.over_SSD&&(R=I.bits<p.bits)):R=I.max_noise<0&&I.max_noise*10+I.bits<=p.max_noise*10+p.bits;break}case 0:R=I.over_count<p.over_count||I.over_count==p.over_count&&I.over_noise<p.over_noise||I.over_count==p.over_count&&BitStream.EQ(I.over_noise,p.over_noise)&&I.tot_noise<p.tot_noise;break;case 8:I.max_noise=o(_,j);case 1:R=I.max_noise<p.max_noise;break;case 2:R=I.tot_noise<p.tot_noise;break;case 3:R=I.tot_noise<p.tot_noise&&I.max_noise<p.max_noise;break;case 4:R=I.max_noise<=0&&p.max_noise>.2||I.max_noise<=0&&p.max_noise<0&&p.max_noise>I.max_noise-.2&&I.tot_noise<p.tot_noise||I.max_noise<=0&&p.max_noise>0&&p.max_noise>I.max_noise-.2&&I.tot_noise<p.tot_noise+p.over_noise||I.max_noise>0&&p.max_noise>-.05&&p.max_noise>I.max_noise-.1&&I.tot_noise+I.over_noise<p.tot_noise+p.over_noise||I.max_noise>0&&p.max_noise>-.1&&p.max_noise>I.max_noise-.15&&I.tot_noise+I.over_noise+I.over_noise<p.tot_noise+p.over_noise+p.over_noise;break;case 5:R=I.over_noise<p.over_noise||BitStream.EQ(I.over_noise,p.over_noise)&&I.tot_noise<p.tot_noise;break;case 6:R=I.over_noise<p.over_noise||BitStream.EQ(I.over_noise,p.over_noise)&&(I.max_noise<p.max_noise||BitStream.EQ(I.max_noise,p.max_noise)&&I.tot_noise<=p.tot_noise);break;case 7:R=I.over_count<p.over_count||I.over_noise<p.over_noise;break}return p.over_count==0&&(R=R&&I.bits<p.bits),R}function f(M,p,I,j,_){var R=M.internal_flags,T;p.scalefac_scale==0?T=1.2968395546510096:T=1.6817928305074292;for(var A=0,E=0;E<p.sfbmax;E++)A<I[E]&&(A=I[E]);var h=R.noise_shaping_amp;switch(h==3&&(_?h=2:h=1),h){case 2:break;case 1:A>1?A=Math.pow(A,.5):A*=.95;break;case 0:default:A>1?A=1:A*=.95;break}for(var y=0,E=0;E<p.sfbmax;E++){var b=p.width[E],w;if(y+=b,!(I[E]<A)){if((R.substep_shaping&2)!=0&&(R.pseudohalf[E]=R.pseudohalf[E]==0?1:0,R.pseudohalf[E]==0&&R.noise_shaping_amp==2))return;for(p.scalefac[E]++,w=-b;w<0;w++)j[y+w]*=T,j[y+w]>p.xrpow_max&&(p.xrpow_max=j[y+w]);if(R.noise_shaping_amp==2)return}}}function g(M,p){for(var I=1.2968395546510096,j=0,_=0;_<M.sfbmax;_++){var R=M.width[_],T=M.scalefac[_];if(M.preflag!=0&&(T+=n.pretab[_]),j+=R,(T&1)!=0){T++;for(var A=-R;A<0;A++)p[j+A]*=I,p[j+A]>M.xrpow_max&&(M.xrpow_max=p[j+A])}M.scalefac[_]=T>>1}M.preflag=0,M.scalefac_scale=1}function D(M,p,I){var j,_=p.scalefac;for(j=0;j<p.sfb_lmax;j++)if(_[j]>=16)return!0;for(var R=0;R<3;R++){var T=0,A=0;for(j=p.sfb_lmax+R;j<p.sfbdivide;j+=3)T<_[j]&&(T=_[j]);for(;j<p.sfbmax;j+=3)A<_[j]&&(A=_[j]);if(!(T<16&&A<8)){if(p.subblock_gain[R]>=7)return!0;p.subblock_gain[R]++;var E=M.scalefac_band.l[p.sfb_lmax];for(j=p.sfb_lmax+R;j<p.sfbmax;j+=3){var h,y=p.width[j],b=_[j];if(b=b-(4>>p.scalefac_scale),b>=0){_[j]=b,E+=y*3;continue}_[j]=0;{var w=210+(b<<p.scalefac_scale+1);h=n.IPOW20(w)}E+=y*(R+1);for(var S=-y;S<0;S++)I[E+S]*=h,I[E+S]>p.xrpow_max&&(p.xrpow_max=I[E+S]);E+=y*(3-R-1)}{var h=n.IPOW20(202);E+=p.width[j]*(R+1);for(var S=-p.width[j];S<0;S++)I[E+S]*=h,I[E+S]>p.xrpow_max&&(p.xrpow_max=I[E+S])}}}return!1}function C(M,p,I,j,_){var R=M.internal_flags;f(M,p,I,j,_);var T=u(p);return T?!1:(R.mode_gr==2?T=a.scale_bitcount(p):T=a.scale_bitcount_lsf(R,p),T?(R.noise_shaping>1&&(Dr.fill(R.pseudohalf,0),p.scalefac_scale==0?(g(p,j),T=!1):p.block_type==O.SHORT_TYPE&&R.subblock_gain>0&&(T=D(R,p,j)||u(p))),T||(R.mode_gr==2?T=a.scale_bitcount(p):T=a.scale_bitcount_lsf(R,p)),!T):!0)}this.outer_loop=function(M,p,I,j,_,R){var T=M.internal_flags,A=new Aa,E=ci(576),h=ci(sr.SFBMAX),y=new ks,b,w=new Og,S=9999999,k=!1,N=!1,Y=0;if(v(T,p,R,_,j),T.noise_shaping==0)return 100;n.calc_noise(p,I,h,y,w),y.bits=p.part2_3_length,A.assign(p);var H=0;for($n.arraycopy(j,0,E,0,576);!k;){do{var q=new ks,d,x=255;if((T.substep_shaping&2)!=0?d=20:d=3,T.sfb21_extra&&(h[A.sfbmax]>1||A.block_type==O.SHORT_TYPE&&(h[A.sfbmax+1]>1||h[A.sfbmax+2]>1))||!C(M,A,h,j,N))break;A.scalefac_scale!=0&&(x=254);var W=R-A.part2_length;if(W<=0)break;for(;(A.part2_3_length=a.count_bits(T,j,A,w))>W&&A.global_gain<=x;)A.global_gain++;if(A.global_gain>x)break;if(y.over_count==0){for(;(A.part2_3_length=a.count_bits(T,j,A,w))>S&&A.global_gain<=x;)A.global_gain++;if(A.global_gain>x)break}if(n.calc_noise(A,I,h,q,w),q.bits=A.part2_3_length,p.block_type!=O.SHORT_TYPE?b=M.quant_comp:b=M.quant_comp_short,b=l(b,y,q,A,h)?1:0,b!=0)S=p.part2_3_length,y=q,p.assign(A),H=0,$n.arraycopy(j,0,E,0,576);else if(T.full_outer_loop==0&&(++H>d&&y.over_count==0||T.noise_shaping_amp==3&&N&&H>30||T.noise_shaping_amp==3&&N&&A.global_gain-Y>15))break}while(A.global_gain+A.scalefac_scale<255);T.noise_shaping_amp==3?N?k=!0:(A.assign(p),$n.arraycopy(E,0,j,0,576),H=0,Y=A.global_gain,N=!0):k=!0}return ui(p.global_gain+p.scalefac_scale<=255),M.VBR==bc.vbr_rh||M.VBR==bc.vbr_mtrh?$n.arraycopy(E,0,j,0,576):(T.substep_shaping&1)!=0&&trancate_smallspectrums(T,p,I,j),y.over_count},this.iteration_finish_one=function(M,p,I){var j=M.l3_side,_=j.tt[p][I];a.best_scalefac_store(M,p,I,j),M.use_best_huffman==1&&a.best_huffman_divide(M,_),t.ResvAdjust(M,_)},this.VBR_encode_granule=function(M,p,I,j,_,R,T){var A=M.internal_flags,E=new Aa,h=ci(576),y=T,b=T+1,w=(T+R)/2,S,k,N=0,Y=A.sfb21_extra;ui(y<=LameInternalFlags.MAX_BITS_PER_CHANNEL),Dr.fill(E.l3_enc,0);do w>y-42?A.sfb21_extra=!1:A.sfb21_extra=Y,k=outer_loop(M,p,I,j,_,w),k<=0?(N=1,b=p.part2_3_length,E.assign(p),$n.arraycopy(j,0,h,0,576),T=b-32,S=T-R,w=(T+R)/2):(R=w+32,S=T-R,w=(T+R)/2,N!=0&&(N=2,p.assign(E),$n.arraycopy(h,0,j,0,576)));while(S>12);A.sfb21_extra=Y,N==2&&$n.arraycopy(E.l3_enc,0,p.l3_enc,0,576),ui(p.part2_3_length<=y)},this.get_framebits=function(M,p){var I=M.internal_flags;I.bitrate_index=I.VBR_min_bitrate;var j=e.getframebits(M);I.bitrate_index=1,j=e.getframebits(M);for(var _=1;_<=I.VBR_max_bitrate;_++){I.bitrate_index=_;var R=new MeanBits(j);p[_]=t.ResvFrameBegin(M,R),j=R.bits}},this.VBR_old_prepare=function(M,p,I,j,_,R,T,A,E){var h=M.internal_flags,y,b=0,w=1,S=0;h.bitrate_index=h.VBR_max_bitrate;var k=t.ResvFrameBegin(M,new MeanBits(0))/h.mode_gr;get_framebits(M,R);for(var N=0;N<h.mode_gr;N++){var Y=n.on_pe(M,p,A[N],k,N,0);h.mode_ext==O.MPG_MD_MS_LR&&(ms_convert(h.l3_side,N),n.reduce_side(A[N],I[N],k,Y));for(var H=0;H<h.channels_out;++H){var q=h.l3_side.tt[N][H];q.block_type!=O.SHORT_TYPE?(b=1.28/(1+Math.exp(3.5-p[N][H]/300))-.05,y=h.PSY.mask_adjust-b):(b=2.56/(1+Math.exp(3.5-p[N][H]/300))-.14,y=h.PSY.mask_adjust_short-b),h.masking_lower=Math.pow(10,y*.1),init_outer_loop(h,q),E[N][H]=n.calc_xmin(M,j[N][H],q,_[N][H]),E[N][H]!=0&&(w=0),T[N][H]=126,S+=A[N][H]}}for(var N=0;N<h.mode_gr;N++)for(var H=0;H<h.channels_out;H++)S>R[h.VBR_max_bitrate]&&(A[N][H]*=R[h.VBR_max_bitrate],A[N][H]/=S),T[N][H]>A[N][H]&&(T[N][H]=A[N][H]);return w},this.bitpressure_strategy=function(M,p,I,j){for(var _=0;_<M.mode_gr;_++)for(var R=0;R<M.channels_out;R++){for(var T=M.l3_side.tt[_][R],A=p[_][R],E=0,h=0;h<T.psy_lmax;h++)A[E++]*=1+.029*h*h/O.SBMAX_l/O.SBMAX_l;if(T.block_type==O.SHORT_TYPE)for(var h=T.sfb_smin;h<O.SBMAX_s;h++)A[E++]*=1+.029*h*h/O.SBMAX_s/O.SBMAX_s,A[E++]*=1+.029*h*h/O.SBMAX_s/O.SBMAX_s,A[E++]*=1+.029*h*h/O.SBMAX_s/O.SBMAX_s;j[_][R]=0|Math.max(I[_][R],.9*j[_][R])}},this.VBR_new_prepare=function(M,p,I,j,_,R){var T=M.internal_flags,A=1,E=0,h=0,y;if(M.free_format){T.bitrate_index=0;var b=new MeanBits(E);y=t.ResvFrameBegin(M,b),E=b.bits,_[0]=y}else{T.bitrate_index=T.VBR_max_bitrate;var b=new MeanBits(E);t.ResvFrameBegin(M,b),E=b.bits,get_framebits(M,_),y=_[T.VBR_max_bitrate]}for(var w=0;w<T.mode_gr;w++){n.on_pe(M,p,R[w],E,w,0),T.mode_ext==O.MPG_MD_MS_LR&&ms_convert(T.l3_side,w);for(var S=0;S<T.channels_out;++S){var k=T.l3_side.tt[w][S];T.masking_lower=Math.pow(10,T.PSY.mask_adjust*.1),init_outer_loop(T,k),n.calc_xmin(M,I[w][S],k,j[w][S])!=0&&(A=0),h+=R[w][S]}}for(var w=0;w<T.mode_gr;w++)for(var S=0;S<T.channels_out;S++)h>y&&(R[w][S]*=y,R[w][S]/=h);return A},this.calc_target_bits=function(M,p,I,j,_,R){var T=M.internal_flags,A=T.l3_side,E,h,y,b,w=0;T.bitrate_index=T.VBR_max_bitrate;var S=new MeanBits(w);for(R[0]=t.ResvFrameBegin(M,S),w=S.bits,T.bitrate_index=1,w=e.getframebits(M)-T.sideinfo_len*8,_[0]=w/(T.mode_gr*T.channels_out),w=M.VBR_mean_bitrate_kbps*M.framesize*1e3,(T.substep_shaping&1)!=0&&(w*=1.09),w/=M.out_samplerate,w-=T.sideinfo_len*8,w/=T.mode_gr*T.channels_out,E=.93+.07*(11-M.compression_ratio)/(11-5.5),E<.9&&(E=.9),E>1&&(E=1),h=0;h<T.mode_gr;h++){var k=0;for(y=0;y<T.channels_out;y++){if(j[h][y]=int(E*w),p[h][y]>700){var N=int((p[h][y]-700)/1.4),Y=A.tt[h][y];j[h][y]=int(E*w),Y.block_type==O.SHORT_TYPE&&N<w/2&&(N=w/2),N>w*3/2?N=w*3/2:N<0&&(N=0),j[h][y]+=N}j[h][y]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(j[h][y]=LameInternalFlags.MAX_BITS_PER_CHANNEL),k+=j[h][y]}if(k>LameInternalFlags.MAX_BITS_PER_GRANULE)for(y=0;y<T.channels_out;++y)j[h][y]*=LameInternalFlags.MAX_BITS_PER_GRANULE,j[h][y]/=k}if(T.mode_ext==O.MPG_MD_MS_LR)for(h=0;h<T.mode_gr;h++)n.reduce_side(j[h],I[h],w*T.channels_out,LameInternalFlags.MAX_BITS_PER_GRANULE);for(b=0,h=0;h<T.mode_gr;h++)for(y=0;y<T.channels_out;y++)j[h][y]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(j[h][y]=LameInternalFlags.MAX_BITS_PER_CHANNEL),b+=j[h][y];if(b>R[0])for(h=0;h<T.mode_gr;h++)for(y=0;y<T.channels_out;y++)j[h][y]*=R[0],j[h][y]/=b}}var yc=Re.assert;function jg(){var e;this.setModules=function(t){e=t},this.ResvFrameBegin=function(t,n){var r=t.internal_flags,a,i=r.l3_side,s=e.getframebits(t);n.bits=(s-r.sideinfo_len*8)/r.mode_gr;var c=8*256*r.mode_gr-8;t.brate>320?a=8*int(t.brate*1e3/(t.out_samplerate/1152)/8+.5):(a=8*1440,t.strict_ISO&&(a=8*int(32e4/(t.out_samplerate/1152)/8+.5))),r.ResvMax=a-s,r.ResvMax>c&&(r.ResvMax=c),(r.ResvMax<0||t.disable_reservoir)&&(r.ResvMax=0);var v=n.bits*r.mode_gr+Math.min(r.ResvSize,r.ResvMax);return v>a&&(v=a),yc(r.ResvMax%8==0),yc(r.ResvMax>=0),i.resvDrain_pre=0,r.pinfo!=null&&(r.pinfo.mean_bits=n.bits/2,r.pinfo.resvsize=r.ResvSize),v},this.ResvMaxBits=function(t,n,r,a){var i=t.internal_flags,s,c=i.ResvSize,v=i.ResvMax;a!=0&&(c+=n),(i.substep_shaping&1)!=0&&(v*=.9),r.bits=n,c*10>v*9?(s=c-v*9/10,r.bits+=s,i.substep_shaping|=128):(s=0,i.substep_shaping&=127,!t.disable_reservoir&&(i.substep_shaping&1)==0&&(r.bits-=.1*n));var u=c<i.ResvMax*6/10?c:i.ResvMax*6/10;return u-=s,u<0&&(u=0),u},this.ResvAdjust=function(t,n){t.ResvSize-=n.part2_3_length+n.part2_length},this.ResvFrameEnd=function(t,n){var r,a=t.l3_side;t.ResvSize+=n*t.mode_gr;var i=0;a.resvDrain_post=0,a.resvDrain_pre=0,(r=t.ResvSize%8)!=0&&(i+=r),r=t.ResvSize-i-t.ResvMax,r>0&&(i+=r);{var s=Math.min(a.main_data_begin*8,i)/8;a.resvDrain_pre+=8*s,i-=8*s,t.ResvSize-=8*s,a.main_data_begin-=s}a.resvDrain_post+=i,t.ResvSize-=i}}function Ng(){var e="http://www.mp3dev.org/",t=3,n=98,r=4,a=0,i=93;this.getLameVersion=function(){return t+"."+n+"."+r},this.getLameShortVersion=function(){return t+"."+n+"."+r},this.getLameVeryShortVersion=function(){return"LAME"+t+"."+n+"r"},this.getPsyVersion=function(){return a+"."+i},this.getLameUrl=function(){return e},this.getLameOsBitness=function(){return"32bits"}}var Dg=Re.System,xs=Re.VbrMode,wc=Re.ShortBlock,Hg=Re.Arrays,sa=Re.new_byte,Pg=Re.assert;Bi.NUMTOCENTRIES=100;Bi.MAXFRAMESIZE=2880;function Bi(){var e,t,n;this.setModules=function(w,S,k){e=w,t=S,n=k};var r=1,a=2,i=4,s=8,c=Bi.NUMTOCENTRIES,v=Bi.MAXFRAMESIZE,u=c+4+4+4+4+4,m=u+9+1+1+8+1+1+3+1+1+2+4+2+2,o=128,l=64,f=32,g=null,D="Xing",C="Info",M=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function p(w,S){if(w.nVbrNumFrames++,w.sum+=S,w.seen++,!(w.seen<w.want)&&(w.pos<w.size&&(w.bag[w.pos]=w.sum,w.pos++,w.seen=0),w.pos==w.size)){for(var k=1;k<w.size;k+=2)w.bag[k/2]=w.bag[k];w.want*=2,w.pos/=2}}function I(w,S){if(!(w.pos<=0))for(var k=1;k<c;++k){var N=k/c,Y,H,q=0|Math.floor(N*w.pos);q>w.pos-1&&(q=w.pos-1),Y=w.bag[q],H=w.sum;var d=0|256*Y/H;d>255&&(d=255),S[k]=255&d}}this.addVbrFrame=function(w){var S=w.internal_flags,k=Tables.bitrate_table[w.version][S.bitrate_index];Pg(S.VBR_seek_table.bag!=null),p(S.VBR_seek_table,k)};function j(w,S){var k=w[S+0]&255;return k<<=8,k|=w[S+1]&255,k<<=8,k|=w[S+2]&255,k<<=8,k|=w[S+3]&255,k}function _(w,S,k){w[S+0]=255&(k>>24&255),w[S+1]=255&(k>>16&255),w[S+2]=255&(k>>8&255),w[S+3]=255&(k&255)}function R(w,S,k){w[S+0]=255&(k>>8&255),w[S+1]=255&(k&255)}function T(w,S){return new String(w,S,D.length(),g).equals(D)||new String(w,S,C.length(),g).equals(C)}function A(w,S,k){return 255&(w<<S|k&~(-1<<S))}function E(w,S){var k=w.internal_flags;S[0]=A(S[0],8,255),S[1]=A(S[1],3,7),S[1]=A(S[1],1,w.out_samplerate<16e3?0:1),S[1]=A(S[1],1,w.version),S[1]=A(S[1],2,1),S[1]=A(S[1],1,w.error_protection?0:1),S[2]=A(S[2],4,k.bitrate_index),S[2]=A(S[2],2,k.samplerate_index),S[2]=A(S[2],1,0),S[2]=A(S[2],1,w.extension),S[3]=A(S[3],2,w.mode.ordinal()),S[3]=A(S[3],2,k.mode_ext),S[3]=A(S[3],1,w.copyright),S[3]=A(S[3],1,w.original),S[3]=A(S[3],2,w.emphasis),S[0]=255;var N=255&(S[1]&241),Y;w.version==1?Y=o:w.out_samplerate<16e3?Y=f:Y=l,w.VBR==xs.vbr_off&&(Y=w.brate);var H;w.free_format?H=0:H=255&16*e.BitrateIndex(Y,w.version,w.out_samplerate),w.version==1?(S[1]=255&(N|10),N=255&(S[2]&13),S[2]=255&(H|N)):(S[1]=255&(N|2),N=255&(S[2]&13),S[2]=255&(H|N))}this.getVbrTag=function(w){var S=new VBRTagData,k=0;S.flags=0;var N=w[k+1]>>3&1,Y=w[k+2]>>2&3,H=w[k+3]>>6&3,q=w[k+2]>>4&15;if(q=Tables.bitrate_table[N][q],w[k+1]>>4==14?S.samprate=Tables.samplerate_table[2][Y]:S.samprate=Tables.samplerate_table[N][Y],N!=0?H!=3?k+=36:k+=21:H!=3?k+=21:k+=13,!T(w,k))return null;k+=4,S.hId=N;var d=S.flags=j(w,k);if(k+=4,(d&r)!=0&&(S.frames=j(w,k),k+=4),(d&a)!=0&&(S.bytes=j(w,k),k+=4),(d&i)!=0){if(S.toc!=null)for(var x=0;x<c;x++)S.toc[x]=w[k+x];k+=c}S.vbrScale=-1,(d&s)!=0&&(S.vbrScale=j(w,k),k+=4),S.headersize=(N+1)*72e3*q/S.samprate,k+=21;var W=w[k+0]<<4;W+=w[k+1]>>4;var B=(w[k+1]&15)<<8;return B+=w[k+2]&255,(W<0||W>3e3)&&(W=-1),(B<0||B>3e3)&&(B=-1),S.encDelay=W,S.encPadding=B,S},this.InitVbrTag=function(w){var S=w.internal_flags,k;w.version==1?k=o:w.out_samplerate<16e3?k=f:k=l,w.VBR==xs.vbr_off&&(k=w.brate);var N=(w.version+1)*72e3*k/w.out_samplerate,Y=S.sideinfo_len+m;if(S.VBR_seek_table.TotalFrameSize=N,N<Y||N>v){w.bWriteVbrTag=!1;return}S.VBR_seek_table.nVbrNumFrames=0,S.VBR_seek_table.nBytesWritten=0,S.VBR_seek_table.sum=0,S.VBR_seek_table.seen=0,S.VBR_seek_table.want=1,S.VBR_seek_table.pos=0,S.VBR_seek_table.bag==null&&(S.VBR_seek_table.bag=new int[400],S.VBR_seek_table.size=400);var H=sa(v);E(w,H);for(var q=S.VBR_seek_table.TotalFrameSize,d=0;d<q;++d)t.add_dummy_byte(w,H[d]&255,1)};function h(w,S){var k=S^w;return S=S>>8^M[k&255],S}this.updateMusicCRC=function(w,S,k,N){for(var Y=0;Y<N;++Y)w[0]=h(S[k+Y],w[0])};function y(w,S,k,N,Y){var H=w.internal_flags,q=0,d=w.encoder_delay,x=w.encoder_padding,W=100-10*w.VBR_q-w.quality,B=n.getLameVeryShortVersion(),he,Ae=0,ge,_e=[1,5,3,2,4,0,3],He=0|(w.lowpassfreq/100+.5>255?255:w.lowpassfreq/100+.5),Ee=0,fe=0,Xe=0,V=w.internal_flags.noise_shaping,X=0,te=0,ce=0,ue=0,be=0,Te=(w.exp_nspsytune&1)!=0,ke=(w.exp_nspsytune&2)!=0,xe=!1,pe=!1,ze=w.internal_flags.nogap_total,De=w.internal_flags.nogap_current,je=w.ATHtype,Ve=0,qe;switch(w.VBR){case vbr_abr:qe=w.VBR_mean_bitrate_kbps;break;case vbr_off:qe=w.brate;break;default:qe=w.VBR_min_bitrate_kbps}switch(w.VBR.ordinal()<_e.length?he=_e[w.VBR.ordinal()]:he=0,ge=16*Ae+he,H.findReplayGain&&(H.RadioGain>510&&(H.RadioGain=510),H.RadioGain<-510&&(H.RadioGain=-510),fe=8192,fe|=3072,H.RadioGain>=0?fe|=H.RadioGain:(fe|=512,fe|=-H.RadioGain)),H.findPeakSample&&(Ee=Math.abs(0|H.PeakSample/32767*Math.pow(2,23)+.5)),ze!=-1&&(De>0&&(pe=!0),De<ze-1&&(xe=!0)),Ve=je+((Te?1:0)<<4)+((ke?1:0)<<5)+((xe?1:0)<<6)+((pe?1:0)<<7),W<0&&(W=0),w.mode){case MONO:X=0;break;case STEREO:X=1;break;case DUAL_CHANNEL:X=2;break;case JOINT_STEREO:w.force_ms?X=4:X=3;break;case NOT_SET:default:X=7;break}w.in_samplerate<=32e3?ce=0:w.in_samplerate==48e3?ce=2:w.in_samplerate>48e3?ce=3:ce=1,(w.short_blocks==wc.short_block_forced||w.short_blocks==wc.short_block_dispensed||w.lowpassfreq==-1&&w.highpassfreq==-1||w.scale_left<w.scale_right||w.scale_left>w.scale_right||w.disable_reservoir&&w.brate<320||w.noATH||w.ATHonly||je==0||w.in_samplerate<=32e3)&&(te=1),ue=V+(X<<2)+(te<<5)+(ce<<6),be=H.nMusicCRC,_(k,N+q,W),q+=4;for(var Ze=0;Ze<9;Ze++)k[N+q+Ze]=255&B.charAt(Ze);q+=9,k[N+q]=255&ge,q++,k[N+q]=255&He,q++,_(k,N+q,Ee),q+=4,R(k,N+q,fe),q+=2,R(k,N+q,Xe),q+=2,k[N+q]=255&Ve,q++,qe>=255?k[N+q]=255:k[N+q]=255&qe,q++,k[N+q]=255&d>>4,k[N+q+1]=255&(d<<4)+(x>>8),k[N+q+2]=255&x,q+=3,k[N+q]=255&ue,q++,k[N+q++]=0,R(k,N+q,w.preset),q+=2,_(k,N+q,S),q+=4,R(k,N+q,be),q+=2;for(var de=0;de<q;de++)Y=h(k[N+de],Y);return R(k,N+q,Y),q+=2,q}function b(w){w.seek(0);var S=sa(10);w.readFully(S);var k;return new String(S,"ISO-8859-1").startsWith("ID3")?k=0:k=((S[6]&127)<<21|(S[7]&127)<<14|(S[8]&127)<<7|S[9]&127)+S.length,k}this.getLameTagFrame=function(w,S){var k=w.internal_flags;if(!w.bWriteVbrTag||k.Class_ID!=Lame.LAME_ID||k.VBR_seek_table.pos<=0)return 0;if(S.length<k.VBR_seek_table.TotalFrameSize)return k.VBR_seek_table.TotalFrameSize;Hg.fill(S,0,k.VBR_seek_table.TotalFrameSize,0),E(w,S);var N=sa(c);if(w.free_format)for(var Y=1;Y<c;++Y)N[Y]=255&255*Y/100;else I(k.VBR_seek_table,N);var H=k.sideinfo_len;w.error_protection&&(H-=2),w.VBR==xs.vbr_off?(S[H++]=255&C.charAt(0),S[H++]=255&C.charAt(1),S[H++]=255&C.charAt(2),S[H++]=255&C.charAt(3)):(S[H++]=255&D.charAt(0),S[H++]=255&D.charAt(1),S[H++]=255&D.charAt(2),S[H++]=255&D.charAt(3)),_(S,H,r+a+i+s),H+=4,_(S,H,k.VBR_seek_table.nVbrNumFrames),H+=4;var q=k.VBR_seek_table.nBytesWritten+k.VBR_seek_table.TotalFrameSize;_(S,H,0|q),H+=4,Dg.arraycopy(N,0,S,H,N.length),H+=N.length,w.error_protection&&t.CRC_writeheader(k,S);for(var d=0,Y=0;Y<H;Y++)d=h(S[Y],d);return H+=y(w,q,S,H,d),k.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(w,S){var k=w.internal_flags;if(k.VBR_seek_table.pos<=0||(S.seek(S.length()),S.length()==0))return-1;var N=b(S);S.seek(N);var Y=sa(v),H=getLameTagFrame(w,Y);return H>Y.length?-1:(H<1||S.write(Y,0,H),0)}}var kc=Re.new_byte,zg=Re.assert;function Vg(){this.setModules=function(e,t){}}function Ug(){this.setModules=function(e,t,n){}}function qg(){}function Xg(){this.setModules=function(e,t){}}function Yg(e,t,n){arguments.length!=3&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),e=1,t=44100,n=128);var r=new Je,a=new Vg,i=new It,s=new mn,c=new Cg,v=new Pt,u=new Lg,m=new Bi,o=new Ng,l=new Xg,f=new jg,g=new Ci,D=new Ug,C=new qg;r.setModules(i,s,c,v,u,m,o,l,C),s.setModules(i,C,o,m),l.setModules(s,o),c.setModules(r),u.setModules(s,f,v,g),v.setModules(g,f,r.enc.psy),f.setModules(s),g.setModules(v),m.setModules(r,s,o),a.setModules(D,C),D.setModules(o,l,c);var M=r.lame_init();M.num_channels=e,M.in_samplerate=t,M.brate=n,M.mode=dt.STEREO,M.quality=3,M.bWriteVbrTag=!1,M.disable_reservoir=!0,M.write_id3tag_automatic=!1,r.lame_init_params(M);var p=1152,I=0|1.25*p+7200,j=kc(I);this.encodeBuffer=function(_,R){e==1&&(R=_),zg(_.length==R.length),_.length>p&&(p=_.length,I=0|1.25*p+7200,j=kc(I));var T=r.lame_encode_buffer(M,_,R,_.length,j,0,I);return new Int8Array(j.subarray(0,T))},this.flush=function(){var _=r.lame_encode_flush(M,j,0,I);return new Int8Array(j.subarray(0,_))}}function Ya(e){return e.charCodeAt(0)<<24|e.charCodeAt(1)<<16|e.charCodeAt(2)<<8|e.charCodeAt(3)}Ya("RIFF");Ya("WAVE");Ya("fmt ");Ya("data");class Kg{constructor(t){this.bitRate=t.bitRate,this.sampleRate=t.sampleRate,this.dataBuffer=[],this.encoder=new Yg(1,this.sampleRate,this.bitRate)}encode(t){const r=this._convertBuffer(t);let a=r.length;for(let i=0;a>=0;i+=1152){const s=r.subarray(i,i+1152),c=this.encoder.encodeBuffer(s);this.dataBuffer.push(new Int8Array(c)),a-=1152}}finish(){this.dataBuffer.push(this.encoder.flush());const t=new Blob(this.dataBuffer,{type:"audio/mp3"});return this.dataBuffer=[],{id:Date.now(),blob:t,url:URL.createObjectURL(t)}}_floatTo16BitPCM(t,n){for(let r=0;r<t.length;r++){const a=Math.max(-1,Math.min(1,t[r]));n[r]=a<0?a*32768:a*32767}}_convertBuffer(t){const n=new Float32Array(t),r=new Int16Array(t.length);return this._floatTo16BitPCM(n,r),r}}class Gg{constructor(t={}){this.beforeRecording=t.beforeRecording,this.pauseRecording=t.pauseRecording,this.afterRecording=t.afterRecording,this.micFailed=t.micFailed,this.encoderOptions={bitRate:t.bitRate,sampleRate:t.sampleRate},this.bufferSize=4096,this.records=[],this.isPause=!1,this.isRecording=!1,this.duration=0,this.volume=0,this._duration=0}start(){const t={video:!1,audio:{channelCount:1,echoCancellation:!1}};this.beforeRecording&&this.beforeRecording("start recording"),navigator.mediaDevices.getUserMedia(t).then(this._micCaptured.bind(this)).catch(this._micError.bind(this)),this.isPause=!1,this.isRecording=!0,this.lameEncoder||(this.lameEncoder=new Kg(this.encoderOptions))}stop(){this.stream.getTracks().forEach(n=>n.stop()),this.input.disconnect(),this.processor.disconnect(),this.context.close();let t=null;t=this.lameEncoder.finish(),t.duration=this.duration,this.records.push(t),this._duration=0,this.duration=0,this.isPause=!1,this.isRecording=!1,this.afterRecording&&this.afterRecording(t)}pause(){this.stream.getTracks().forEach(t=>t.stop()),this.input.disconnect(),this.processor.disconnect(),this._duration=this.duration,this.isPause=!0,this.pauseRecording&&this.pauseRecording("pause recording")}_micCaptured(t){this.context=new(window.AudioContext||window.webkitAudioContext),this.duration=this._duration,this.input=this.context.createMediaStreamSource(t),this.processor=this.context.createScriptProcessor(this.bufferSize,1,1),this.stream=t,this.processor.onaudioprocess=n=>{const r=n.inputBuffer.getChannelData(0);let a=0;this.lameEncoder&&this.lameEncoder.encode(r);for(let i=0;i<r.length;++i)a+=r[i]*r[i];this.duration=parseFloat(this._duration)+parseFloat(this.context.currentTime.toFixed(2)),this.volume=Math.sqrt(a/r.length).toFixed(2)},this.input.connect(this.processor),this.processor.connect(this.context.destination)}_micError(t){this.micFailed&&this.micFailed(t)}}var Sc=window.chrome,No=window.navigator,Wg=No.vendor,Zg=typeof window.opr<"u",Qg=No.userAgent.indexOf("Edg")>-1,Jg=No.userAgent.match("CriOS");function $g(){return Jg?!0:Sc!==null&&typeof Sc<"u"&&Wg==="Google Inc."&&Zg===!1&&Qg===!1}function xc(){var e=e4(),t=e.substr(0,4);return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw(n|u)|c55\/|capi|ccwa|cdm|cell|chtm|cldc|cmd|co(mp|nd)|craw|da(it|ll|ng)|dbte|dcs|devi|dica|dmob|do(c|p)o|ds(12|d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(|_)|g1 u|g560|gene|gf5|gmo|go(\.w|od)|gr(ad|un)|haie|hcit|hd(m|p|t)|hei|hi(pt|ta)|hp( i|ip)|hsc|ht(c(| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i(20|go|ma)|i230|iac( ||\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|[a-w])|libw|lynx|m1w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|mcr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|([1-8]|c))|phil|pire|pl(ay|uc)|pn2|po(ck|rt|se)|prox|psio|ptg|qaa|qc(07|12|21|32|60|[2-7]|i)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h|oo|p)|sdk\/|se(c(|0|1)|47|mc|nd|ri)|sgh|shar|sie(|m)|sk0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h|v|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl|tdg|tel(i|m)|tim|tmo|to(pl|sh)|ts(70|m|m3|m5)|tx9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas|your|zeto|zte/i.test(t)}function e4(){var e=navigator.userAgent||navigator.vendor||window.opera||null;if(!e)throw new Error("Failed to look for user agent information.");return e}const t4={name:"RoomFooter",components:{SvgIcon:Dt,EmojiPickerContainer:P1,RoomFiles:r3,RoomMessageReply:E3,RoomUsersTag:O3,RoomEmojis:H3,RoomTemplatesText:K3},directives:{clickOutside:Ua},props:{room:{type:Object,required:!0},roomId:{type:[String,Number],required:!0},roomMessage:{type:String,default:null},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},textMessages:{type:Object,required:!0},showSendIcon:{type:Boolean,required:!0},showFiles:{type:Boolean,required:!0},showAudio:{type:Boolean,required:!0},showEmojis:{type:Boolean,required:!0},showFooter:{type:Boolean,required:!0},acceptedFiles:{type:String,required:!0},multipleFiles:{type:Boolean,default:!0},captureFiles:{type:String,required:!0},textareaActionEnabled:{type:Boolean,required:!0},textareaAutoFocus:{type:Boolean,required:!0},userTagsEnabled:{type:Boolean,required:!0},emojisSuggestionEnabled:{type:Boolean,required:!0},templatesText:{type:Array,default:null},audioBitRate:{type:Number,required:!0},audioSampleRate:{type:Number,required:!0},initReplyMessage:{type:Object,default:null},initEditMessage:{type:Object,default:null},droppedFiles:{type:Array,default:null},emojiDataSource:{type:String,default:void 0}},emits:["edit-message","send-message","update-edited-message-id","textarea-action-handler","typing-message"],data(){return{message:"",editedMessage:{},messageReply:null,cursorRangePosition:null,files:[],fileDialog:!1,selectUsersTagItem:null,selectEmojiItem:null,selectTemplatesTextItem:null,format:"mp3",activeUpOrDownEmojis:null,activeUpOrDownUsersTag:null,activeUpOrDownTemplatesText:null,emojisDB:new A1({dataSource:this.emojiDataSource}),emojiOpened:!1,keepKeyboardOpen:!1,filteredEmojis:[],filteredUsersTag:[],selectedUsersTag:[],filteredTemplatesText:[],recorder:this.initRecorder(),isRecording:!1}},computed:{isMessageEmpty(){return!this.files.length&&!this.message.trim()},isFileLoading(){return this.files.some(e=>e.loading)},recordedTime(){return new Date(this.recorder.duration*1e3).toISOString().substr(14,5)},shadowFooter(){return!!this.filteredEmojis.length||!!this.filteredUsersTag.length||!!this.filteredTemplatesText.length||!!this.files.length||!!this.messageReply}},watch:{roomId(){this.resetMessage(!0,!0),this.roomMessage&&(this.message=this.roomMessage,setTimeout(()=>this.onChangeInput()))},message(e){this.getTextareaRef().value=e},roomMessage:{immediate:!0,handler(e){e&&(this.message=this.roomMessage)}},editedMessage(e){this.$emit("update-edited-message-id",e._id)},initReplyMessage(e){e&&this.replyMessage(e)},initEditMessage(e){e&&this.editMessage(e)},droppedFiles(e){e&&this.onFileChange(e)}},mounted(){const e=xc();let t=!0;this.getTextareaRef().addEventListener("keyup",n=>{n.key==="Enter"&&!n.shiftKey&&!this.fileDialog&&(e?(this.message=this.message+`
`,setTimeout(()=>this.onChangeInput())):t&&!this.filteredEmojis.length&&!this.filteredUsersTag.length&&!this.filteredTemplatesText.length&&this.sendMessage()),t=!n.isComposing,setTimeout(()=>{this.updateFooterLists()},60)}),this.getTextareaRef().addEventListener("click",()=>{e&&(this.keepKeyboardOpen=!0),this.updateFooterLists()}),this.getTextareaRef().addEventListener("blur",()=>{setTimeout(()=>{this.resetFooterList()},100),e&&setTimeout(()=>this.keepKeyboardOpen=!1)})},beforeUnmount(){this.stopRecorder()},methods:{getTextareaRef(){return this.$refs.roomTextarea},focusTextarea(e){xc()&&e||this.getTextareaRef()&&(this.getTextareaRef().focus(),this.cursorRangePosition&&setTimeout(()=>{const t=$g()?0:1;this.getTextareaRef().setSelectionRange(this.cursorRangePosition+t,this.cursorRangePosition+t),this.cursorRangePosition=null}))},onChangeInput(){var e,t,n;((e=this.getTextareaRef())!=null&&e.value||((t=this.getTextareaRef())==null?void 0:t.value)==="")&&(this.message=(n=this.getTextareaRef())==null?void 0:n.value),this.keepKeyboardOpen=!0,this.resizeTextarea(),this.$emit("typing-message",this.message)},resizeTextarea(){const e=this.getTextareaRef();if(!e)return;const t=window.getComputedStyle(e,null).getPropertyValue("padding-top").replace("px","");e.style.height=0,e.style.height=e.scrollHeight-t*2+"px"},escapeTextarea(){this.filteredEmojis.length?this.filteredEmojis=[]:this.filteredUsersTag.length?this.filteredUsersTag=[]:this.filteredTemplatesText.length?this.filteredTemplatesText=[]:this.resetMessage()},onPasteImage(e){var t;const n=(t=e.clipboardData)==null?void 0:t.items;n&&Array.from(n).forEach(r=>{if(r.type.includes("image")){const a=r.getAsFile();this.onFileChange([a])}})},updateActiveUpOrDown(e,t){this.filteredEmojis.length?(this.activeUpOrDownEmojis=t,e.preventDefault()):this.filteredUsersTag.length?(this.activeUpOrDownUsersTag=t,e.preventDefault()):this.filteredTemplatesText.length&&(this.activeUpOrDownTemplatesText=t,e.preventDefault())},selectItem(){this.filteredEmojis.length?this.selectEmojiItem=!0:this.filteredUsersTag.length?this.selectUsersTagItem=!0:this.filteredTemplatesText.length&&(this.selectTemplatesTextItem=!0)},selectEmoji(e){if(this.selectEmojiItem=!1,!e)return;const{position:t,endPosition:n}=this.getCharPosition(":");this.message=this.message.substr(0,t-1)+e+this.message.substr(n,this.message.length-1),this.cursorRangePosition=t,this.focusTextarea()},selectTemplateText(e){if(this.selectTemplatesTextItem=!1,!e)return;const{position:t,endPosition:n}=this.getCharPosition("/"),r=this.message.substr(n,n).length?"":" ";this.message=this.message.substr(0,t-1)+e.text+r+this.message.substr(n,this.message.length-1),this.cursorRangePosition=t+e.text.length+r.length+1,this.focusTextarea()},addEmoji(e){this.message+=e.unicode,this.focusTextarea(!0)},launchFilePicker(){this.$refs.file.value="",this.$refs.file.click()},async onFileChange(e){this.fileDialog=!0,this.focusTextarea(),Array.from(e).forEach(async t=>{const n=URL.createObjectURL(t),r=t.name.lastIndexOf(".");this.files.push({loading:!0,name:t.name.substring(0,r),size:t.size,type:t.type,extension:t.name.substring(r+1),localUrl:n});const a=await fetch(n).then(s=>s.blob());let i=this.files.find(s=>s.localUrl===n);i&&(i.blob=a,i.loading=!1,delete i.loading)}),setTimeout(()=>this.fileDialog=!1,500)},removeFile(e){this.files.splice(e,1),this.focusTextarea()},toggleRecorder(e){if(this.isRecording=e,!this.recorder.isRecording)setTimeout(()=>this.recorder.start(),200);else try{this.recorder.stop();const t=this.recorder.records[0];this.files.push({blob:t.blob,name:`audio.${this.format}`,size:t.blob.size,duration:t.duration,type:t.blob.type,audio:!0,localUrl:URL.createObjectURL(t.blob)}),this.recorder=this.initRecorder(),this.sendMessage()}catch{setTimeout(()=>this.stopRecorder(),100)}},stopRecorder(){if(this.recorder.isRecording)try{this.recorder.stop(),this.recorder=this.initRecorder()}catch{setTimeout(()=>this.stopRecorder(),100)}},textareaActionHandler(){this.$emit("textarea-action-handler",this.message)},sendMessage(){var e;let t=this.message.trim();if(!this.files.length&&!t||this.isFileLoading)return;this.selectedUsersTag.forEach(r=>{t=t.replace(`@${r.username}`,`<usertag>${r._id}</usertag>`)});const n=this.files.length?this.files:null;this.editedMessage._id?(this.editedMessage.content!==t||(e=this.editedMessage.files)!=null&&e.length||this.files.length)&&this.$emit("edit-message",{messageId:this.editedMessage._id,newContent:t,files:n,replyMessage:this.messageReply,usersTag:this.selectedUsersTag}):this.$emit("send-message",{content:t,files:n,replyMessage:this.messageReply,usersTag:this.selectedUsersTag}),this.resetMessage(!0)},editMessage(e){this.resetMessage(),this.editedMessage={...e};let t=e.content;const n=t,r="<usertag>",a="</usertag>";[...t.matchAll(new RegExp(r,"gi"))].map(s=>s.index).forEach(s=>{const c=n.substring(s+r.length,n.indexOf(a,s)),v=this.room.users.find(u=>u._id===c);t=t.replace(`${r}${c}${a}`,`@${v?.username||"unknown"}`),this.selectUserTag(v,!0)}),this.message=t,e.files&&(this.files=[...e.files]),setTimeout(()=>this.resizeTextarea())},replyMessage(e){this.editedMessage={},this.messageReply=e,this.focusTextarea()},updateFooterLists(){this.updateFooterList("@"),this.updateFooterList(":"),this.updateFooterList("/")},updateFooterList(e){if(!this.getTextareaRef()||e===":"&&!this.emojisSuggestionEnabled||e==="@"&&(!this.userTagsEnabled||!this.room.users)||e==="/"&&!this.templatesText)return;const t=this.getTextareaRef().selectionStart;let n=t;for(;n>0&&this.message.charAt(n-1)!==e&&(this.message.charAt(n-1)!==" "||e!==":");)n--;const r=this.message.charAt(n-2),a=!r.match(/^[0-9a-zA-Z]+$/);if(this.message.charAt(n-1)===e&&(!r||r===" "||a)){const i=this.message.substring(n,t);e===":"?this.updateEmojis(i):e==="@"?this.updateShowUsersTag(i):e==="/"&&this.updateShowTemplatesText(i)}else this.resetFooterList(e)},updateShowUsersTag(e){this.filteredUsersTag=wa(this.room.users,"username",e,!0).filter(t=>t._id!==this.currentUserId)},selectUserTag(e,t=!1){if(this.selectUsersTagItem=!1,!e)return;const{position:n,endPosition:r}=this.getCharPosition("@"),a=this.message.substr(r,r).length?"":" ";this.message=this.message.substr(0,n)+e.username+a+this.message.substr(r,this.message.length-1),this.selectedUsersTag=[...this.selectedUsersTag,{...e}],t||(this.cursorRangePosition=n+e.username.length+a.length+1),this.focusTextarea()},updateShowTemplatesText(e){this.filteredTemplatesText=wa(this.templatesText,"tag",e,!0)},getCharPosition(e){let n=this.getTextareaRef().selectionStart;for(;n>0&&this.message.charAt(n-1)!==e;)n--;const r=this.getTextareaRef().selectionEnd;return{position:n,endPosition:r}},async updateEmojis(e){if(!e)return;const t=await this.emojisDB.getEmojiBySearchQuery(e);this.filteredEmojis=t.map(n=>n.unicode)},resetFooterList(e=null){e===":"?this.filteredEmojis=[]:e==="@"?this.filteredUsersTag=[]:e==="/"?this.filteredTemplatesText=[]:(this.filteredEmojis=[],this.filteredUsersTag=[],this.filteredTemplatesText=[])},resetMessage(e=!1,t=!1){t||this.$emit("typing-message",null),this.selectedUsersTag=[],this.resetFooterList(),this.resetTextareaSize(),this.message="",this.editedMessage={},this.messageReply=null,this.files=[],this.emojiOpened=!1,this.preventKeyboardFromClosing(),(this.textareaAutoFocus||!t)&&setTimeout(()=>this.focusTextarea(e))},resetTextareaSize(){this.getTextareaRef()&&(this.getTextareaRef().style.height="20px")},preventKeyboardFromClosing(){this.keepKeyboardOpen&&this.getTextareaRef().focus()},initRecorder(){return this.isRecording=!1,new Gg({bitRate:Number(this.audioBitRate),sampleRate:Number(this.audioSampleRate),beforeRecording:null,afterRecording:null,pauseRecording:null,micFailed:this.micFailed})},micFailed(){this.isRecording=!1,this.recorder=this.initRecorder()}}},n4={key:0,class:"vac-icon-textarea-left"},r4=Se("div",{class:"vac-dot-audio-record"},null,-1),i4={class:"vac-dot-audio-record-time"},a4=["placeholder"],s4={class:"vac-icon-textarea"},o4={key:1},l4=["multiple","accept","capture"];function c4(e,t,n,r,a,i){const s=Ke("room-emojis"),c=Ke("room-users-tag"),v=Ke("room-templates-text"),u=Ke("room-message-reply"),m=Ke("room-files"),o=Ke("svg-icon"),l=Ke("emoji-picker-container"),f=Na("click-outside");return zn(($(),le("div",{id:"room-footer",class:rt(["vac-room-footer",{"vac-app-box-shadow":i.shadowFooter}])},[Oe(s,{"filtered-emojis":a.filteredEmojis,"select-item":a.selectEmojiItem,"active-up-or-down":a.activeUpOrDownEmojis,onSelectEmoji:t[0]||(t[0]=g=>i.selectEmoji(g)),onActivateItem:t[1]||(t[1]=g=>a.activeUpOrDownEmojis=0)},null,8,["filtered-emojis","select-item","active-up-or-down"]),Oe(c,{"filtered-users-tag":a.filteredUsersTag,"select-item":a.selectUsersTagItem,"active-up-or-down":a.activeUpOrDownUsersTag,onSelectUserTag:t[2]||(t[2]=g=>i.selectUserTag(g)),onActivateItem:t[3]||(t[3]=g=>a.activeUpOrDownUsersTag=0)},null,8,["filtered-users-tag","select-item","active-up-or-down"]),Oe(v,{"filtered-templates-text":a.filteredTemplatesText,"select-item":a.selectTemplatesTextItem,"active-up-or-down":a.activeUpOrDownTemplatesText,onSelectTemplateText:t[4]||(t[4]=g=>i.selectTemplateText(g)),onActivateItem:t[5]||(t[5]=g=>a.activeUpOrDownTemplatesText=0)},null,8,["filtered-templates-text","select-item","active-up-or-down"]),Oe(u,{room:n.room,"message-reply":a.messageReply,"text-formatting":n.textFormatting,"link-options":n.linkOptions,onResetMessage:i.resetMessage},gt({_:2},[nt(e.$slots,(g,D)=>({name:D,fn:Ge(C=>[Ce(e.$slots,D,pt(vt(C)))])}))]),1032,["room","message-reply","text-formatting","link-options","onResetMessage"]),Oe(m,{files:a.files,onRemoveFile:i.removeFile,onResetMessage:i.resetMessage},gt({_:2},[nt(e.$slots,(g,D)=>({name:D,fn:Ge(C=>[Ce(e.$slots,D,pt(vt(C)))])}))]),1032,["files","onRemoveFile","onResetMessage"]),Se("div",{class:rt(["vac-box-footer",{"vac-box-footer-border":!a.files.length}])},[n.showAudio&&!a.files.length?($(),le("div",n4,[a.isRecording?($(),le(st,{key:0},[Se("div",{class:"vac-svg-button vac-icon-audio-stop",onClick:t[6]||(t[6]=(...g)=>i.stopRecorder&&i.stopRecorder(...g))},[Ce(e.$slots,"audio-stop-icon",{},()=>[Oe(o,{name:"close-outline"})])]),r4,Se("div",i4,$e(i.recordedTime),1),Se("div",{class:"vac-svg-button vac-icon-audio-confirm",onClick:t[7]||(t[7]=g=>i.toggleRecorder(!1))},[Ce(e.$slots,"audio-check-icon",{},()=>[Oe(o,{name:"checkmark"})])])],64)):($(),le("div",{key:1,class:"vac-svg-button",onClick:t[8]||(t[8]=g=>i.toggleRecorder(!0))},[Ce(e.$slots,"microphone-icon",{},()=>[Oe(o,{name:"microphone",class:"vac-icon-microphone"})])]))])):Ie("",!0),Se("textarea",{id:"roomTextarea",ref:"roomTextarea",placeholder:n.textMessages.TYPE_MESSAGE,class:rt(["vac-textarea",{"vac-textarea-outline":a.editedMessage._id}]),style:{"min-height":"20px","padding-left":"12px"},onInput:t[9]||(t[9]=(...g)=>i.onChangeInput&&i.onChangeInput(...g)),onKeydown:[t[10]||(t[10]=xr((...g)=>i.escapeTextarea&&i.escapeTextarea(...g),["esc"])),t[11]||(t[11]=xr(Fn((...g)=>i.selectItem&&i.selectItem(...g),["exact","prevent"]),["enter"])),t[13]||(t[13]=xr(Fn(()=>{},["exact","prevent"]),["tab"])),t[14]||(t[14]=xr((...g)=>i.selectItem&&i.selectItem(...g),["tab"])),t[15]||(t[15]=xr(g=>i.updateActiveUpOrDown(g,-1),["up"])),t[16]||(t[16]=xr(g=>i.updateActiveUpOrDown(g,1),["down"]))],onPaste:t[12]||(t[12]=(...g)=>i.onPasteImage&&i.onPasteImage(...g))},null,42,a4),Se("div",s4,[a.editedMessage._id?($(),le("div",{key:0,class:"vac-svg-button",onClick:t[17]||(t[17]=(...g)=>i.resetMessage&&i.resetMessage(...g))},[Ce(e.$slots,"edit-close-icon",{},()=>[Oe(o,{name:"close-outline"})])])):Ie("",!0),n.showEmojis?zn(($(),le("div",o4,[Ce(e.$slots,"emoji-picker",wo({emojiOpened:a.emojiOpened},{addEmoji:i.addEmoji}),()=>[Oe(l,{"emoji-opened":a.emojiOpened,"position-top":!0,"emoji-data-source":n.emojiDataSource,onAddEmoji:i.addEmoji,onOpenEmoji:t[18]||(t[18]=g=>a.emojiOpened=g)},{"emoji-picker-icon":Ge(()=>[Ce(e.$slots,"emoji-picker-icon")]),_:3},8,["emoji-opened","emoji-data-source","onAddEmoji"])])])),[[f,()=>a.emojiOpened=!1]]):Ie("",!0),n.showFiles?($(),le("div",{key:2,class:"vac-svg-button",onClick:t[19]||(t[19]=(...g)=>i.launchFilePicker&&i.launchFilePicker(...g))},[Ce(e.$slots,"paperclip-icon",{},()=>[Oe(o,{name:"paperclip"})])])):Ie("",!0),n.textareaActionEnabled?($(),le("div",{key:3,class:"vac-svg-button",onClick:t[20]||(t[20]=(...g)=>i.textareaActionHandler&&i.textareaActionHandler(...g))},[Ce(e.$slots,"custom-action-icon",{},()=>[Oe(o,{name:"deleted"})])])):Ie("",!0),n.showFiles?($(),le("input",{key:4,ref:"file",type:"file",multiple:n.multipleFiles?!0:null,accept:n.acceptedFiles,capture:n.captureFiles,style:{display:"none"},onChange:t[21]||(t[21]=g=>i.onFileChange(g.target.files))},null,40,l4)):Ie("",!0),n.showSendIcon?($(),le("div",{key:5,class:rt(["vac-svg-button",{"vac-send-disabled":i.isMessageEmpty}]),onClick:t[22]||(t[22]=(...g)=>i.sendMessage&&i.sendMessage(...g))},[Ce(e.$slots,"send-icon",{},()=>[Oe(o,{name:"send",param:i.isMessageEmpty||i.isFileLoading?"disabled":""},null,8,["param"])])],2)):Ie("",!0)])],2)],2)),[[Pa,Object.keys(n.room).length&&n.showFooter]])}var u4=St(t4,[["render",c4]]);const d4={name:"MessageReply",components:{AudioPlayer:jo,SvgIcon:Dt,FormatMessage:ji},props:{message:{type:Object,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},roomUsers:{type:Array,required:!0}},computed:{replyUsername(){const{senderId:e}=this.message.replyMessage,t=this.roomUsers.find(n=>n._id===e);return t?t.username:""},firstFile(){var e,t;return(t=(e=this.message.replyMessage)==null?void 0:e.files)!=null&&t.length?this.message.replyMessage.files[0]:{}},isAudio(){return qa(this.firstFile)},isImage(){return Wr(this.firstFile)},isVideo(){return Ni(this.firstFile)},isOtherFile(){var e;return((e=this.message.replyMessage.files)==null?void 0:e.length)&&!this.isAudio&&!this.isVideo&&!this.isImage}}},m4={class:"vac-reply-message"},h4={class:"vac-reply-username"},f4={key:0,class:"vac-image-reply-container"},v4={key:1,class:"vac-video-reply-container"},_4={controls:""},p4=["src"],g4={key:3,class:"vac-file-container"},b4={class:"vac-text-ellipsis"},y4={key:0,class:"vac-text-ellipsis vac-text-extension"},w4={class:"vac-reply-content"};function k4(e,t,n,r,a,i){const s=Ke("audio-player"),c=Ke("svg-icon"),v=Ke("format-message");return $(),le("div",m4,[Se("div",h4,$e(i.replyUsername),1),i.isImage?($(),le("div",f4,[Se("div",{class:"vac-message-image vac-message-image-reply",style:Mt({"background-image":`url('${i.firstFile.url}')`})},null,4)])):i.isVideo?($(),le("div",v4,[Se("video",_4,[Se("source",{src:i.firstFile.url},null,8,p4)])])):i.isAudio?($(),ft(s,{key:2,src:i.firstFile.url,"message-selection-enabled":!1,onUpdateProgressTime:t[0]||(t[0]=u=>e.progressTime=u),onHoverAudioProgress:t[1]||(t[1]=u=>e.hoverAudioProgress=u)},gt({_:2},[nt(e.$slots,(u,m)=>({name:m,fn:Ge(o=>[Ce(e.$slots,m,pt(vt(o)))])}))]),1032,["src"])):i.isOtherFile?($(),le("div",g4,[Se("div",null,[Ce(e.$slots,"file-icon",{},()=>[Oe(c,{name:"file"})])]),Se("div",b4,$e(i.firstFile.name),1),i.firstFile.extension?($(),le("div",y4,$e(i.firstFile.extension),1)):Ie("",!0)])):Ie("",!0),Se("div",w4,[Oe(v,{"message-id":n.message.replyMessage._id,content:n.message.replyMessage.content,users:n.roomUsers,"text-formatting":n.textFormatting,"link-options":n.linkOptions,reply:!0},null,8,["message-id","content","users","text-formatting","link-options"])])])}var S4=St(d4,[["render",k4]]);const x4={name:"ProgressBar",props:{progress:{type:Number,default:0}},data(){return{radius:35,stroke:4,normalizedRadius:27,circumference:54*Math.PI}},computed:{strokeDashoffset(){return this.circumference-this.progress/100*this.circumference}}},M4={ref:"progress",class:"vac-progress-wrapper"},A4=["height","width"],E4=["stroke-dasharray","stroke-width","r","cx","cy"],T4={class:"vac-progress-text"},R4=Se("span",{class:"vac-progress-pourcent"},"%",-1);function I4(e,t,n,r,a,i){return $(),ft(Bt,{name:"vac-fade-spinner",appear:""},{default:Ge(()=>[Se("div",M4,[($(),le("svg",{height:a.radius*2,width:a.radius*2},[Se("circle",{stroke:"rgba(255, 255, 255, 0.7)","stroke-dasharray":a.circumference+" "+a.circumference,style:Mt({strokeDashoffset:i.strokeDashoffset,strokeLinecap:"round"}),"stroke-width":a.stroke,fill:"transparent",r:a.normalizedRadius,cx:a.radius,cy:a.radius},null,12,E4)],8,A4)),Se("div",{class:"vac-progress-content",style:Mt({height:a.radius*2-19+"px",width:a.radius*2-19+"px"})},[Se("div",T4,[Vn($e(n.progress),1),R4])],4)],512)]),_:1})}var Z1=St(x4,[["render",I4]]);const C4={name:"MessageFile",components:{SvgIcon:Dt,Loader:za,ProgressBar:Z1},props:{currentUserId:{type:[String,Number],required:!0},message:{type:Object,required:!0},file:{type:Object,required:!0},index:{type:Number,required:!0},messageSelectionEnabled:{type:Boolean,required:!0}},emits:["open-file"],data(){return{imageResponsive:"",imageLoading:!1,imageHover:!1}},computed:{isImageLoading(){return this.file.url.indexOf("blob:http")!==-1||this.imageLoading},isImage(){return Wr(this.file)},isVideo(){return Ni(this.file)}},watch:{file:{immediate:!0,handler(){this.checkImgLoad()}}},mounted(){const e=this.$refs["imageRef"+this.index];e&&(this.imageResponsive={maxHeight:e.clientWidth-18,loaderTop:e.clientHeight/2-9})},methods:{checkImgLoad(){if(!Wr(this.file))return;this.imageLoading=!0;const e=new Image;e.src=this.file.url,e.addEventListener("load",()=>this.imageLoading=!1)},openFile(e,t){this.messageSelectionEnabled||(e.stopPropagation(),this.$emit("open-file",{file:this.file,action:t}))}}},B4={class:"vac-message-file-container"},F4={key:0,class:"vac-image-buttons"},O4={controls:""},L4=["src"];function j4(e,t,n,r,a,i){const s=Ke("progress-bar"),c=Ke("loader"),v=Ke("svg-icon");return $(),le("div",B4,[i.isImage?($(),le("div",{key:0,ref:"imageRef"+n.index,class:"vac-message-image-container",onMouseover:t[2]||(t[2]=u=>a.imageHover=!0),onMouseleave:t[3]||(t[3]=u=>a.imageHover=!1),onClick:t[4]||(t[4]=u=>i.openFile(u,"preview"))},[n.file.progress>=0?($(),ft(s,{key:0,progress:n.file.progress,style:Mt({top:`${a.imageResponsive.loaderTop}px`})},null,8,["progress","style"])):($(),ft(c,{key:1,show:i.isImageLoading,type:"message-file","message-id":n.message._id,style:Mt({top:`${a.imageResponsive.loaderTop}px`})},gt({_:2},[nt(e.$slots,(u,m)=>({name:m,fn:Ge(o=>[Ce(e.$slots,m,pt(vt(o)))])}))]),1032,["show","message-id","style"])),Se("div",{class:rt(["vac-message-image",{"vac-blur-loading":i.isImageLoading&&n.message.senderId===n.currentUserId}]),style:Mt({"background-image":`url('${i.isImageLoading&&n.file.preview||n.file.url}')`,"max-height":`${a.imageResponsive.maxHeight}px`})},[Oe(Bt,{name:"vac-fade-image"},{default:Ge(()=>[!n.messageSelectionEnabled&&a.imageHover&&!i.isImageLoading?($(),le("div",F4,[Se("div",{class:"vac-svg-button vac-button-view",onClick:t[0]||(t[0]=u=>i.openFile(u,"preview"))},[Ce(e.$slots,"eye-icon_"+n.message._id,{},()=>[Oe(v,{name:"eye"})])]),Se("div",{class:"vac-svg-button vac-button-download",onClick:t[1]||(t[1]=u=>i.openFile(u,"download"))},[Ce(e.$slots,"document-icon_"+n.message._id,{},()=>[Oe(v,{name:"document"})])])])):Ie("",!0)]),_:3})],6)],544)):i.isVideo?($(),le("div",{key:1,class:"vac-video-container",onClick:t[5]||(t[5]=Fn(u=>i.openFile(u,"preview"),["prevent"]))},[n.file.progress>=0?($(),ft(s,{key:0,progress:n.file.progress},null,8,["progress"])):Ie("",!0),Se("video",O4,[Se("source",{src:n.file.url},null,8,L4)])])):Ie("",!0)])}var N4=St(C4,[["render",j4]]);const D4={name:"MessageFiles",components:{SvgIcon:Dt,FormatMessage:ji,ProgressBar:Z1,MessageFile:N4},props:{currentUserId:{type:[String,Number],required:!0},message:{type:Object,required:!0},roomUsers:{type:Array,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},messageSelectionEnabled:{type:Boolean,required:!0}},emits:["open-file","open-user-tag"],computed:{imageVideoFiles(){return this.message.files.filter(e=>Hl(e))},otherFiles(){return this.message.files.filter(e=>!Hl(e))}},methods:{openFile(e,t,n){this.messageSelectionEnabled||(e.stopPropagation(),this.$emit("open-file",{file:t,action:n}))}}},H4={class:"vac-message-files-container"},P4=["onClick"],z4={class:"vac-svg-button"},V4={class:"vac-text-ellipsis"},U4={key:0,class:"vac-text-ellipsis vac-text-extension"};function q4(e,t,n,r,a,i){const s=Ke("message-file"),c=Ke("progress-bar"),v=Ke("svg-icon"),u=Ke("format-message");return $(),le("div",H4,[($(!0),le(st,null,nt(i.imageVideoFiles,(m,o)=>($(),le("div",{key:o+"iv"},[Oe(s,{file:m,"current-user-id":n.currentUserId,message:n.message,index:o,"message-selection-enabled":n.messageSelectionEnabled,onOpenFile:t[0]||(t[0]=l=>e.$emit("open-file",l))},gt({_:2},[nt(e.$slots,(l,f)=>({name:f,fn:Ge(g=>[Ce(e.$slots,f,pt(vt(g)))])}))]),1032,["file","current-user-id","message","index","message-selection-enabled"])]))),128)),($(!0),le(st,null,nt(i.otherFiles,(m,o)=>($(),le("div",{key:o+"a",class:"vac-file-wrapper"},[m.progress>=0?($(),ft(c,{key:0,progress:m.progress,style:{top:"44px"}},null,8,["progress"])):Ie("",!0),Se("div",{class:rt(["vac-file-container",{"vac-file-container-progress":m.progress>=0}]),onClick:l=>i.openFile(l,m,"download")},[Se("div",z4,[Ce(e.$slots,"document-icon",{},()=>[Oe(v,{name:"document"})])]),Se("div",V4,$e(m.name),1),m.extension?($(),le("div",U4,$e(m.extension),1)):Ie("",!0)],10,P4)]))),128)),Oe(u,{"message-id":n.message._id,content:n.message.content,users:n.roomUsers,"text-formatting":n.textFormatting,"link-options":n.linkOptions,onOpenUserTag:t[1]||(t[1]=m=>e.$emit("open-user-tag",m))},null,8,["message-id","content","users","text-formatting","link-options"])])}var X4=St(D4,[["render",q4]]);const Y4={name:"MessageActions",components:{SvgIcon:Dt,EmojiPickerContainer:P1},directives:{clickOutside:Ua},props:{currentUserId:{type:[String,Number],required:!0},message:{type:Object,required:!0},messageActions:{type:Array,required:!0},showReactionEmojis:{type:Boolean,required:!0},messageHover:{type:Boolean,required:!0},hoverMessageId:{type:[String,Number],default:null},hoverAudioProgress:{type:Boolean,required:!0},emojiDataSource:{type:String,default:void 0}},emits:["update-emoji-opened","update-options-opened","update-message-hover","message-action-handler","send-message-reaction"],data(){return{menuOptionsTop:0,optionsOpened:!1,optionsClosing:!1,emojiOpened:!1}},computed:{isMessageActions(){return this.filteredMessageActions.length&&this.messageHover&&!this.message.deleted&&!this.message.disableActions&&!this.hoverAudioProgress},isMessageReactions(){return this.showReactionEmojis&&this.messageHover&&!this.message.deleted&&!this.message.disableReactions&&!this.hoverAudioProgress},filteredMessageActions(){return this.message.senderId===this.currentUserId?this.messageActions:this.messageActions.filter(e=>!e.onlyMe)}},watch:{emojiOpened(e){this.$emit("update-emoji-opened",e),e&&(this.optionsOpened=!1)},optionsOpened(e){this.$emit("update-options-opened",e)}},methods:{openOptions(){this.optionsClosing||(this.optionsOpened=!this.optionsOpened,this.optionsOpened&&setTimeout(()=>{const e=H1(this.$el,"#room-footer");if(!e||!this.$refs.menuOptions||!this.$refs.actionIcon)return;const t=this.$refs.menuOptions.getBoundingClientRect().height,n=this.$refs.actionIcon.getBoundingClientRect().top;e.getBoundingClientRect().top-n>t+50?this.menuOptionsTop=30:this.menuOptionsTop=-t}))},closeOptions(){this.optionsOpened=!1,this.optionsClosing=!0,this.updateMessageHover(),setTimeout(()=>this.optionsClosing=!1,100)},openEmoji(){this.emojiOpened=!this.emojiOpened},closeEmoji(){this.emojiOpened=!1,this.updateMessageHover()},updateMessageHover(){this.hoverMessageId!==this.message._id&&this.$emit("update-message-hover",!1)},messageActionHandler(e){this.closeOptions(),this.$emit("message-action-handler",e)},sendMessageReaction(e,t){this.$emit("send-message-reaction",{emoji:e,reaction:t}),this.closeEmoji()}}},K4={class:"vac-message-actions-wrapper"},G4={key:"3"},W4={class:"vac-menu-list"},Z4=["onClick"];function Q4(e,t,n,r,a,i){const s=Ke("svg-icon"),c=Ke("emoji-picker-container"),v=Na("click-outside");return $(),le("div",K4,[Se("div",{class:"vac-options-container",style:Mt({display:n.hoverAudioProgress?"none":"initial",width:i.filteredMessageActions.length&&n.showReactionEmojis?"70px":"45px"})},[Oe(xo,{name:"vac-slide-left",tag:"span"},{default:Ge(()=>[i.isMessageActions||i.isMessageReactions?($(),le("div",{key:"1",class:rt(["vac-blur-container",{"vac-options-me":n.message.senderId===n.currentUserId}])},null,2)):Ie("",!0),i.isMessageActions?($(),le("div",{ref:"actionIcon",key:"2",class:"vac-svg-button vac-message-options",onClick:t[0]||(t[0]=(...u)=>i.openOptions&&i.openOptions(...u))},[Ce(e.$slots,"dropdown-icon_"+n.message._id,{},()=>[Oe(s,{name:"dropdown",param:"message"})])],512)):Ie("",!0),i.isMessageReactions?zn(($(),le("div",G4,[Ce(e.$slots,"emoji-picker",wo({emojiOpened:a.emojiOpened},{addEmoji:i.sendMessageReaction}),()=>[Oe(c,{class:"vac-message-emojis",style:Mt({right:i.isMessageActions?"30px":"5px"}),"emoji-opened":a.emojiOpened,"emoji-reaction":!0,"position-right":n.message.senderId===n.currentUserId,"message-id":n.message._id,"emoji-data-source":n.emojiDataSource,onAddEmoji:i.sendMessageReaction,onOpenEmoji:i.openEmoji},gt({_:2},[nt(e.$slots,(u,m)=>({name:m,fn:Ge(o=>[Ce(e.$slots,m,pt(vt(o)))])}))]),1032,["style","emoji-opened","position-right","message-id","emoji-data-source","onAddEmoji","onOpenEmoji"])])])),[[v,i.closeEmoji]]):Ie("",!0)]),_:3})],4),i.filteredMessageActions.length?($(),ft(Bt,{key:0,name:n.message.senderId===n.currentUserId?"vac-slide-left":"vac-slide-right"},{default:Ge(()=>[a.optionsOpened?zn(($(),le("div",{key:0,ref:"menuOptions",class:rt(["vac-menu-options",{"vac-menu-left":n.message.senderId!==n.currentUserId}]),style:Mt({top:`${a.menuOptionsTop}px`})},[Se("div",W4,[($(!0),le(st,null,nt(i.filteredMessageActions,u=>($(),le("div",{key:u.name},[Se("div",{class:"vac-menu-item",onClick:m=>i.messageActionHandler(u)},$e(u.title),9,Z4)]))),128))])],6)),[[v,i.closeOptions]]):Ie("",!0)]),_:1},8,["name"])):Ie("",!0)])}var J4=St(Y4,[["render",Q4]]);const $4={name:"MessageReactions",props:{currentUserId:{type:[String,Number],required:!0},message:{type:Object,required:!0}},emits:["send-message-reaction"],methods:{sendMessageReaction(e,t){this.$emit("send-message-reaction",{emoji:e,reaction:t})}}},e5=["onClick"];function t5(e,t,n,r,a,i){return n.message.deleted?Ie("",!0):($(),ft(xo,{key:0,name:"vac-slide-left",tag:"span"},{default:Ge(()=>[($(!0),le(st,null,nt(n.message.reactions,(s,c)=>zn(($(),le("button",{key:c+0,class:rt(["vac-button-reaction",{"vac-reaction-me":s.indexOf(n.currentUserId)!==-1}]),style:Mt({float:n.message.senderId===n.currentUserId?"right":"left"}),onClick:v=>i.sendMessageReaction({unicode:c},s)},[Vn($e(c),1),Se("span",null,$e(s.length),1)],14,e5)),[[Pa,s.length]])),128))]),_:1}))}var n5=St($4,[["render",t5]]);function r5(e){if(!((r,a)=>a.every(i=>{let s=!1;return(i.type[0]==="array"&&Array.isArray(r[i.key])||i.type.find(c=>c===typeof r[i.key]))&&(s=!0),s&&Do(r,i.key)}))(e,[{key:"roomId",type:["string","number"]},{key:"roomName",type:["string"]},{key:"users",type:["array"]}]))throw new Error("Rooms object is not valid! Must contain at least roomId[String, Number], roomName[String] and users[Array]")}function i5(e){if(!((r,a)=>a.every(i=>i.type.find(c=>c===typeof r[i.key])&&Do(r,i.key)))(e,[{key:"_id",type:["string","number"]},{key:"username",type:["string"]}]))throw new Error("Participants object is not valid! Must contain at least _id[String, Number] and username[String]")}function a5(e){if(!((r,a)=>a.every(i=>i.type.find(c=>c===typeof r[i.key])&&Do(r,i.key)))(e,[{key:"_id",type:["string","number"]},{key:"senderId",type:["string","number"]}]))throw new Error("Messages object is not valid! Must contain at least _id[String, Number] and senderId[String, Number]")}function Do(e,t){return Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==null&&e[t]!==void 0}const s5={name:"RoomMessage",components:{SvgIcon:Dt,FormatMessage:ji,AudioPlayer:jo,MessageReply:S4,MessageFiles:X4,MessageActions:J4,MessageReactions:n5},props:{currentUserId:{type:[String,Number],required:!0},textMessages:{type:Object,required:!0},index:{type:Number,required:!0},message:{type:Object,required:!0},messages:{type:Array,required:!0},editedMessageId:{type:[String,Number],default:null},roomUsers:{type:Array,default:()=>[]},messageActions:{type:Array,required:!0},newMessages:{type:Array,default:()=>[]},showReactionEmojis:{type:Boolean,required:!0},showNewMessagesDivider:{type:Boolean,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},usernameOptions:{type:Object,required:!0},messageSelectionEnabled:{type:Boolean,required:!0},selectedMessages:{type:Array,default:()=>[]},emojiDataSource:{type:String,default:void 0}},emits:["message-added","open-file","open-user-tag","open-failed-message","message-action-handler","send-message-reaction","select-message","unselect-message"],data(){return{hoverMessageId:null,messageHover:!1,optionsOpened:!1,emojiOpened:!1,newMessage:{},progressTime:"- : -",hoverAudioProgress:!1}},computed:{showUsername(){return!this.usernameOptions.currentUser&&this.message.senderId===this.currentUserId?!1:this.roomUsers.length>=this.usernameOptions.minUsers},showDate(){return this.index>0&&this.message.date!==this.messages[this.index-1].date},messageOffset(){return this.index>0&&this.message.senderId!==this.messages[this.index-1].senderId},isMessageHover(){return this.editedMessageId===this.message._id||this.hoverMessageId===this.message._id},isAudio(){var e;return(e=this.message.files)==null?void 0:e.some(t=>qa(t))},isCheckmarkVisible(){return this.message.senderId===this.currentUserId&&!this.message.deleted&&(this.message.saved||this.message.distributed||this.message.seen)},hasCurrentUserAvatar(){return this.messages.some(e=>e.senderId===this.currentUserId&&e.avatar)},hasSenderUserAvatar(){return this.messages.some(e=>e.senderId!==this.currentUserId&&e.avatar)},isMessageSelected(){return this.messageSelectionEnabled&&!!this.selectedMessages.find(e=>e._id===this.message._id)}},watch:{newMessages:{immediate:!0,deep:!0,handler(e){if(!e.length||!this.showNewMessagesDivider){this.newMessage={};return}this.newMessage=e.reduce((t,n)=>n.index<t.index?n:t)}},messageSelectionEnabled(){this.resetMessageHover()}},mounted(){a5(this.message),this.$emit("message-added",{message:this.message,index:this.index,ref:this.$refs.message})},methods:{onHoverMessage(){this.messageSelectionEnabled||(this.messageHover=!0,this.canEditMessage()&&(this.hoverMessageId=this.message._id))},canEditMessage(){return!this.message.deleted},onLeaveMessage(){this.messageSelectionEnabled||(!this.optionsOpened&&!this.emojiOpened&&(this.messageHover=!1),this.hoverMessageId=null)},resetMessageHover(){this.messageHover=!1,this.hoverMessageId=null},openFile(e){this.$emit("open-file",{message:this.message,file:e})},openUserTag(e){this.$emit("open-user-tag",{user:e})},messageActionHandler(e){this.resetMessageHover(),setTimeout(()=>{this.$emit("message-action-handler",{action:e,message:this.message})},300)},sendMessageReaction({emoji:e,reaction:t}){this.$emit("send-message-reaction",{messageId:this.message._id,reaction:e,remove:t&&t.indexOf(this.currentUserId)!==-1}),this.messageHover=!1},selectMessage(){this.messageSelectionEnabled&&(this.isMessageSelected?this.$emit("unselect-message",this.message._id):this.$emit("select-message",this.message))}}},o5=["id"],l5={key:0,class:"vac-card-info vac-card-date"},c5={key:1,class:"vac-line-new"},u5={key:2,class:"vac-card-info vac-card-system"},d5={key:1,class:"vac-avatar-offset"},m5={key:0,class:"vac-progress-time"},h5={class:"vac-text-timestamp"},f5={key:0,class:"vac-icon-edited"},v5={key:1},_5=Se("div",{class:"vac-failure-text"},"!",-1),p5=[_5],g5={key:3,class:"vac-avatar-current-offset"};function b5(e,t,n,r,a,i){const s=Ke("format-message"),c=Ke("message-reply"),v=Ke("message-files"),u=Ke("audio-player"),m=Ke("svg-icon"),o=Ke("message-actions"),l=Ke("message-reactions");return $(),le("div",{id:n.message._id,ref:"message",class:"vac-message-wrapper"},[i.showDate?($(),le("div",l5,$e(n.message.date),1)):Ie("",!0),a.newMessage._id===n.message._id?($(),le("div",c5,$e(n.textMessages.NEW_MESSAGES),1)):Ie("",!0),n.message.system?($(),le("div",u5,[Ce(e.$slots,"message_"+n.message._id,{},()=>[Oe(s,{"message-id":n.message._id,content:n.message.content,deleted:!!n.message.deleted,users:n.roomUsers,"text-messages":n.textMessages,"text-formatting":n.textFormatting,"link-options":n.linkOptions,onOpenUserTag:i.openUserTag},gt({_:2},[nt(e.$slots,(f,g)=>({name:g,fn:Ge(D=>[Ce(e.$slots,g,pt(vt(D)))])}))]),1032,["message-id","content","deleted","users","text-messages","text-formatting","link-options","onOpenUserTag"])])])):($(),le("div",{key:3,class:rt(["vac-message-box",{"vac-offset-current":n.message.senderId===n.currentUserId}]),onClick:t[8]||(t[8]=(...f)=>i.selectMessage&&i.selectMessage(...f))},[Ce(e.$slots,"message_"+n.message._id,{},()=>[n.message.senderId!==n.currentUserId?Ce(e.$slots,"message-avatar_"+n.message._id,{key:0},()=>[n.message.avatar?($(),le("div",{key:0,class:"vac-avatar",style:Mt({"background-image":`url('${n.message.avatar}')`})},null,4)):Ie("",!0)]):Ie("",!0),i.hasSenderUserAvatar&&!n.message.avatar?($(),le("div",d5)):Ie("",!0),Se("div",{class:rt(["vac-message-container",{"vac-message-container-offset":i.messageOffset}])},[Se("div",{class:rt(["vac-message-card",{"vac-message-highlight":i.isMessageHover,"vac-message-current":n.message.senderId===n.currentUserId,"vac-message-deleted":n.message.deleted,"vac-item-clickable":n.messageSelectionEnabled,"vac-message-selected":i.isMessageSelected}]),onMouseover:t[5]||(t[5]=(...f)=>i.onHoverMessage&&i.onHoverMessage(...f)),onMouseleave:t[6]||(t[6]=(...f)=>i.onLeaveMessage&&i.onLeaveMessage(...f))},[i.showUsername?($(),le("div",{key:0,class:rt(["vac-text-username",{"vac-username-reply":!n.message.deleted&&n.message.replyMessage}])},[Se("span",null,$e(n.message.username),1)],2)):Ie("",!0),!n.message.deleted&&n.message.replyMessage?($(),ft(c,{key:1,message:n.message,"room-users":n.roomUsers,"text-formatting":n.textFormatting,"link-options":n.linkOptions},gt({_:2},[nt(e.$slots,(f,g)=>({name:g,fn:Ge(D=>[Ce(e.$slots,g,pt(vt(D)))])}))]),1032,["message","room-users","text-formatting","link-options"])):Ie("",!0),n.message.deleted||!n.message.files||!n.message.files.length?($(),ft(s,{key:2,"message-id":n.message._id,content:n.message.content,deleted:!!n.message.deleted,users:n.roomUsers,"text-formatting":n.textFormatting,"text-messages":n.textMessages,"link-options":n.linkOptions,onOpenUserTag:i.openUserTag},gt({_:2},[nt(e.$slots,(f,g)=>({name:g,fn:Ge(D=>[Ce(e.$slots,g,pt(vt(D)))])}))]),1032,["message-id","content","deleted","users","text-formatting","text-messages","link-options","onOpenUserTag"])):!i.isAudio||n.message.files.length>1?($(),ft(v,{key:3,"current-user-id":n.currentUserId,message:n.message,"room-users":n.roomUsers,"text-formatting":n.textFormatting,"link-options":n.linkOptions,"message-selection-enabled":n.messageSelectionEnabled,onOpenFile:i.openFile,onOpenUserTag:i.openUserTag},gt({_:2},[nt(e.$slots,(f,g)=>({name:g,fn:Ge(D=>[Ce(e.$slots,g,pt(vt(D)))])}))]),1032,["current-user-id","message","room-users","text-formatting","link-options","message-selection-enabled","onOpenFile","onOpenUserTag"])):($(),le(st,{key:4},[Oe(u,{"message-id":n.message._id,src:n.message.files[0].url,"message-selection-enabled":n.messageSelectionEnabled,onUpdateProgressTime:t[0]||(t[0]=f=>a.progressTime=f),onHoverAudioProgress:t[1]||(t[1]=f=>a.hoverAudioProgress=f)},gt({_:2},[nt(e.$slots,(f,g)=>({name:g,fn:Ge(D=>[Ce(e.$slots,g,pt(vt(D)))])}))]),1032,["message-id","src","message-selection-enabled"]),n.message.deleted?Ie("",!0):($(),le("div",m5,$e(a.progressTime),1))],64)),Se("div",h5,[n.message.edited&&!n.message.deleted?($(),le("div",f5,[Ce(e.$slots,"pencil-icon_"+n.message._id,{},()=>[Oe(m,{name:"pencil"})])])):Ie("",!0),Se("span",null,$e(n.message.timestamp),1),i.isCheckmarkVisible?($(),le("span",v5,[Ce(e.$slots,"checkmark-icon_"+n.message._id,{},()=>[Oe(m,{name:n.message.distributed?"double-checkmark":"checkmark",param:n.message.seen?"seen":"",class:"vac-icon-check"},null,8,["name","param"])])])):Ie("",!0)]),Oe(o,{"current-user-id":n.currentUserId,message:n.message,"message-actions":n.messageActions,"show-reaction-emojis":n.showReactionEmojis,"message-hover":a.messageHover,"hover-message-id":a.hoverMessageId,"hover-audio-progress":a.hoverAudioProgress,"emoji-data-source":n.emojiDataSource,onUpdateMessageHover:t[2]||(t[2]=f=>a.messageHover=f),onUpdateOptionsOpened:t[3]||(t[3]=f=>a.optionsOpened=f),onUpdateEmojiOpened:t[4]||(t[4]=f=>a.emojiOpened=f),onMessageActionHandler:i.messageActionHandler,onSendMessageReaction:i.sendMessageReaction},gt({_:2},[nt(e.$slots,(f,g)=>({name:g,fn:Ge(D=>[Ce(e.$slots,g,pt(vt(D)))])}))]),1032,["current-user-id","message","message-actions","show-reaction-emojis","message-hover","hover-message-id","hover-audio-progress","emoji-data-source","onMessageActionHandler","onSendMessageReaction"])],34),Oe(l,{"current-user-id":n.currentUserId,message:n.message,onSendMessageReaction:i.sendMessageReaction},null,8,["current-user-id","message","onSendMessageReaction"])],2),Ce(e.$slots,"message-failure_"+n.message._id,{},()=>[n.message.failure&&n.message.senderId===n.currentUserId?($(),le("div",{key:0,class:rt(["vac-failure-container vac-svg-button",{"vac-failure-container-avatar":n.message.avatar&&n.message.senderId===n.currentUserId}]),onClick:t[7]||(t[7]=f=>e.$emit("open-failed-message",{message:n.message}))},p5,2)):Ie("",!0)]),n.message.senderId===n.currentUserId?Ce(e.$slots,"message-avatar_"+n.message._id,{key:2},()=>[n.message.avatar?($(),le("div",{key:0,class:"vac-avatar vac-avatar-current",style:Mt({"background-image":`url('${n.message.avatar}')`})},null,4)):Ie("",!0)]):Ie("",!0),i.hasCurrentUserAvatar&&!n.message.avatar?($(),le("div",g5)):Ie("",!0)])],2))],8,o5)}var y5=St(s5,[["render",b5]]);const w5={name:"ChatRoom",components:{Loader:za,SvgIcon:Dt,RoomHeader:m_,RoomFooter:u4,RoomMessage:y5},props:{currentUserId:{type:[String,Number],required:!0},textMessages:{type:Object,required:!0},singleRoom:{type:Boolean,required:!0},showRoomsList:{type:Boolean,required:!0},isMobile:{type:Boolean,required:!0},rooms:{type:Array,required:!0},roomId:{type:[String,Number],required:!0},loadFirstRoom:{type:Boolean,required:!0},messages:{type:Array,required:!0},roomMessage:{type:String,default:null},messagesLoaded:{type:Boolean,required:!0},menuActions:{type:Array,required:!0},messageActions:{type:Array,required:!0},messageSelectionActions:{type:Array,required:!0},autoScroll:{type:Object,required:!0},showSendIcon:{type:Boolean,required:!0},showFiles:{type:Boolean,required:!0},showAudio:{type:Boolean,required:!0},audioBitRate:{type:Number,required:!0},audioSampleRate:{type:Number,required:!0},showEmojis:{type:Boolean,required:!0},showReactionEmojis:{type:Boolean,required:!0},showNewMessagesDivider:{type:Boolean,required:!0},showFooter:{type:Boolean,required:!0},acceptedFiles:{type:String,required:!0},captureFiles:{type:String,required:!0},multipleFiles:{type:Boolean,default:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},loadingRooms:{type:Boolean,required:!0},roomInfoEnabled:{type:Boolean,required:!0},textareaActionEnabled:{type:Boolean,required:!0},textareaAutoFocus:{type:Boolean,required:!0},userTagsEnabled:{type:Boolean,required:!0},emojisSuggestionEnabled:{type:Boolean,required:!0},scrollDistance:{type:Number,required:!0},templatesText:{type:Array,default:null},usernameOptions:{type:Object,required:!0},emojiDataSource:{type:String,default:void 0}},emits:["toggle-rooms-list","room-info","menu-action-handler","message-selection-action-handler","edit-message","send-message","delete-message","message-action-handler","fetch-messages","send-message-reaction","typing-message","open-file","open-user-tag","open-failed-message","textarea-action-handler"],data(){return{editedMessageId:null,initReplyMessage:null,initEditMessage:null,loadingMessages:!1,observer:null,showLoader:!0,loadingMoreMessages:!1,scrollIcon:!1,scrollMessagesCount:0,newMessages:[],messageSelectionEnabled:!1,selectedMessages:[],droppedFiles:[]}},computed:{room(){return this.rooms.find(e=>e.roomId===this.roomId)||{}},showNoMessages(){return this.roomId&&!this.messages.length&&!this.loadingMessages&&!this.loadingRooms},showNoRoom(){const e=!this.rooms.length&&!this.loadingRooms||!this.roomId&&!this.loadFirstRoom;return e&&this.updateLoadingMessages(!1),e},showMessagesStarted(){return this.messages.length&&this.messagesLoaded}},watch:{roomId:{immediate:!0,handler(){this.onRoomChanged()}},messages:{deep:!0,handler(e,t){e.forEach((n,r)=>{this.showNewMessagesDivider&&!n.seen&&n.senderId!==this.currentUserId&&this.newMessages.push({_id:n._id,index:r})}),t?.length===e?.length-1&&(this.newMessages=[]),setTimeout(()=>this.loadingMoreMessages=!1)}},messagesLoaded(e){e&&this.updateLoadingMessages(!1)}},mounted(){this.newMessages=[]},methods:{updateLoadingMessages(e){this.loadingMessages=e,e||setTimeout(()=>this.initIntersectionObserver())},initIntersectionObserver(){this.observer&&(this.showLoader=!0,this.observer.disconnect());const e=this.$el.querySelector("#infinite-loader-messages");if(e){const t={root:this.$el.querySelector("#messages-list"),rootMargin:`${this.scrollDistance}px`,threshold:0};this.observer=new IntersectionObserver(n=>{n[0].isIntersecting&&this.loadMoreMessages()},t),this.observer.observe(e)}},preventTopScroll(){const e=this.$refs.scrollContainer,t=e.scrollHeight,n=new ResizeObserver(a=>{e.scrollHeight!==t&&this.$refs.scrollContainer&&(this.$refs.scrollContainer.scrollTo({top:e.scrollHeight-t}),n.disconnect())});for(var r=0;r<e.children.length;r++)n.observe(e.children[r])},touchStart(e){if(!this.singleRoom&&e.changedTouches.length===1){const t=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY;addEventListener("touchend",r=>this.touchEnd(r,t,n),{once:!0})}},touchEnd(e,t,n){if(e.changedTouches.length===1){const r=e.changedTouches[0].clientX,a=e.changedTouches[0].clientY,i=r-t>100,s=Math.abs(a-n)>50;i&&!s&&this.$emit("toggle-rooms-list")}},onRoomChanged(){this.updateLoadingMessages(!0),this.scrollIcon=!1,this.scrollMessagesCount=0,this.resetMessageSelection();const e=this.$watch(()=>this.messages,t=>{if(!t||!t.length)return;const n=this.$refs.scrollContainer;n&&(e(),setTimeout(()=>{n.scrollTo({top:n.scrollHeight}),this.updateLoadingMessages(!1)}))})},resetMessageSelection(){this.messageSelectionEnabled=!1,this.selectedMessages=[]},selectMessage(e){this.selectedMessages.push(e)},unselectMessage(e){this.selectedMessages=this.selectedMessages.filter(t=>t._id!==e)},onMessageAdded({message:e,index:t,ref:n}){if(t!==this.messages.length-1)return;const r=n.offsetHeight+60;setTimeout(()=>{const a=this.$refs.scrollContainer;let i=!1;a&&(i=this.getBottomScroll(a)>r),e.senderId===this.currentUserId?i?this.autoScroll.send.newAfterScrollUp&&this.scrollToBottom():this.autoScroll.send.new&&this.scrollToBottom():i?this.autoScroll.receive.newAfterScrollUp?this.scrollToBottom():(this.scrollIcon=!0,this.scrollMessagesCount++):this.autoScroll.receive.new?this.scrollToBottom():(this.scrollIcon=!0,this.scrollMessagesCount++)})},onContainerScroll(e){if(!e.target)return;const t=this.getBottomScroll(e.target);t<60&&(this.scrollMessagesCount=0),this.scrollIcon=t>500||this.scrollMessagesCount},loadMoreMessages(){this.loadingMessages||setTimeout(()=>{if(!this.loadingMoreMessages){if(this.messagesLoaded||!this.roomId){this.loadingMoreMessages=!1,this.showLoader=!1;return}this.preventTopScroll(),this.$emit("fetch-messages"),this.loadingMoreMessages=!0}},500)},messageActionHandler({action:e,message:t}){switch(e.name){case"replyMessage":this.initReplyMessage=t,setTimeout(()=>{this.initReplyMessage=null});return;case"editMessage":this.initEditMessage=t,setTimeout(()=>{this.initEditMessage=null});return;case"deleteMessage":return this.$emit("delete-message",t);case"selectMessages":this.selectedMessages=[t],this.messageSelectionEnabled=!0;return;default:return this.$emit("message-action-handler",{action:e,message:t})}},messageSelectionActionHandler(e){this.$emit("message-selection-action-handler",{action:e,messages:this.selectedMessages}),this.resetMessageSelection()},sendMessageReaction(e){this.$emit("send-message-reaction",e)},getBottomScroll(e){const{scrollHeight:t,clientHeight:n,scrollTop:r}=e;return t-n-r},scrollToBottom(){setTimeout(()=>{const e=this.$refs.scrollContainer;e&&(e.classList.add("vac-scroll-smooth"),e.scrollTo({top:e.scrollHeight,behavior:"smooth"}),setTimeout(()=>e.classList.remove("vac-scroll-smooth")))},50)},openFile({message:e,file:t}){this.$emit("open-file",{message:e,file:t})},openUserTag(e){this.$emit("open-user-tag",e)},onDropFiles(e){this.showFiles&&(this.droppedFiles=e.dataTransfer.files)}}},k5={class:"vac-container-center vac-room-empty"},S5={class:"vac-messages-container"},x5={key:0,class:"vac-text-started"},M5={key:1,class:"vac-text-started"},A5={key:0,id:"infinite-loader-messages"},E5={key:2},T5={key:0,class:"vac-badge-counter vac-messages-count"};function R5(e,t,n,r,a,i){const s=Ke("room-header"),c=Ke("loader"),v=Ke("room-message"),u=Ke("svg-icon"),m=Ke("room-footer");return zn(($(),le("div",{class:"vac-col-messages",onDrop:t[12]||(t[12]=Fn((...o)=>i.onDropFiles&&i.onDropFiles(...o),["prevent"])),onDragenter:t[13]||(t[13]=Fn(()=>{},["prevent"])),onDragover:t[14]||(t[14]=Fn(()=>{},["prevent"])),onDragleave:t[15]||(t[15]=Fn(()=>{},["prevent"])),onTouchstart:t[16]||(t[16]=(...o)=>i.touchStart&&i.touchStart(...o))},[i.showNoRoom?Ce(e.$slots,"no-room-selected",{key:0},()=>[Se("div",k5,[Se("div",null,$e(n.textMessages.ROOM_EMPTY),1)])]):($(),ft(s,{key:1,"current-user-id":n.currentUserId,"text-messages":n.textMessages,"single-room":n.singleRoom,"show-rooms-list":n.showRoomsList,"is-mobile":n.isMobile,"room-info-enabled":n.roomInfoEnabled,"menu-actions":n.menuActions,room:i.room,"message-selection-enabled":a.messageSelectionEnabled,"message-selection-actions":n.messageSelectionActions,"selected-messages-total":a.selectedMessages.length,onToggleRoomsList:t[0]||(t[0]=o=>e.$emit("toggle-rooms-list")),onRoomInfo:t[1]||(t[1]=o=>e.$emit("room-info")),onMenuActionHandler:t[2]||(t[2]=o=>e.$emit("menu-action-handler",o)),onMessageSelectionActionHandler:i.messageSelectionActionHandler,onCancelMessageSelection:t[3]||(t[3]=o=>a.messageSelectionEnabled=!1)},gt({_:2},[nt(e.$slots,(o,l)=>({name:l,fn:Ge(f=>[Ce(e.$slots,l,pt(vt(f)))])}))]),1032,["current-user-id","text-messages","single-room","show-rooms-list","is-mobile","room-info-enabled","menu-actions","room","message-selection-enabled","message-selection-actions","selected-messages-total","onMessageSelectionActionHandler"])),Se("div",{id:"messages-list",ref:"scrollContainer",class:"vac-container-scroll",onScroll:t[5]||(t[5]=(...o)=>i.onContainerScroll&&i.onContainerScroll(...o))},[Oe(c,{show:a.loadingMessages,type:"messages"},gt({_:2},[nt(e.$slots,(o,l)=>({name:l,fn:Ge(f=>[Ce(e.$slots,l,pt(vt(f)))])}))]),1032,["show"]),Se("div",S5,[Se("div",{class:rt({"vac-messages-hidden":a.loadingMessages})},[Oe(Bt,{name:"vac-fade-message"},{default:Ge(()=>[Se("div",null,[i.showNoMessages?($(),le("div",x5,[Ce(e.$slots,"messages-empty",{},()=>[Vn($e(n.textMessages.MESSAGES_EMPTY),1)])])):Ie("",!0),i.showMessagesStarted?($(),le("div",M5,$e(n.textMessages.CONVERSATION_STARTED)+" "+$e(n.messages[0].date),1)):Ie("",!0)])]),_:3}),n.messages.length&&!n.messagesLoaded?($(),le("div",A5,[Oe(c,{show:!0,infinite:!0,type:"infinite-messages"},gt({_:2},[nt(e.$slots,(o,l)=>({name:l,fn:Ge(f=>[Ce(e.$slots,l,pt(vt(f)))])}))]),1024)])):Ie("",!0),($(),ft(xo,{key:n.roomId,name:"vac-fade-message",tag:"span"},{default:Ge(()=>[($(!0),le(st,null,nt(n.messages,(o,l)=>($(),le("div",{key:o.indexId||o._id},[Oe(v,{"current-user-id":n.currentUserId,message:o,index:l,messages:n.messages,"edited-message-id":a.editedMessageId,"message-actions":n.messageActions,"room-users":i.room.users,"text-messages":n.textMessages,"new-messages":a.newMessages,"show-reaction-emojis":n.showReactionEmojis,"show-new-messages-divider":n.showNewMessagesDivider,"text-formatting":n.textFormatting,"link-options":n.linkOptions,"username-options":n.usernameOptions,"message-selection-enabled":a.messageSelectionEnabled,"selected-messages":a.selectedMessages,"emoji-data-source":n.emojiDataSource,onMessageAdded:i.onMessageAdded,onMessageActionHandler:i.messageActionHandler,onOpenFile:i.openFile,onOpenUserTag:i.openUserTag,onOpenFailedMessage:t[4]||(t[4]=f=>e.$emit("open-failed-message",f)),onSendMessageReaction:i.sendMessageReaction,onSelectMessage:i.selectMessage,onUnselectMessage:i.unselectMessage},gt({_:2},[nt(e.$slots,(f,g)=>({name:g,fn:Ge(D=>[Ce(e.$slots,g,pt(vt(D)))])}))]),1032,["current-user-id","message","index","messages","edited-message-id","message-actions","room-users","text-messages","new-messages","show-reaction-emojis","show-new-messages-divider","text-formatting","link-options","username-options","message-selection-enabled","selected-messages","emoji-data-source","onMessageAdded","onMessageActionHandler","onOpenFile","onOpenUserTag","onSendMessageReaction","onSelectMessage","onUnselectMessage"])]))),128))]),_:3}))],2)])],544),a.loadingMessages?Ie("",!0):($(),le("div",E5,[Oe(Bt,{name:"vac-bounce"},{default:Ge(()=>[a.scrollIcon?($(),le("div",{key:0,class:"vac-icon-scroll",onClick:t[6]||(t[6]=(...o)=>i.scrollToBottom&&i.scrollToBottom(...o))},[Oe(Bt,{name:"vac-bounce"},{default:Ge(()=>[a.scrollMessagesCount?($(),le("div",T5,$e(a.scrollMessagesCount),1)):Ie("",!0)]),_:1}),Ce(e.$slots,"scroll-icon",{},()=>[Oe(u,{name:"dropdown",param:"scroll"})])])):Ie("",!0)]),_:3})])),Oe(m,{room:i.room,"room-id":n.roomId,"room-message":n.roomMessage,"text-messages":n.textMessages,"show-send-icon":n.showSendIcon,"show-files":n.showFiles,"show-audio":n.showAudio,"show-emojis":n.showEmojis,"show-footer":n.showFooter,"accepted-files":n.acceptedFiles,"capture-files":n.captureFiles,"multiple-files":n.multipleFiles,"textarea-action-enabled":n.textareaActionEnabled,"textarea-auto-focus":n.textareaAutoFocus,"user-tags-enabled":n.userTagsEnabled,"emojis-suggestion-enabled":n.emojisSuggestionEnabled,"templates-text":n.templatesText,"text-formatting":n.textFormatting,"link-options":n.linkOptions,"audio-bit-rate":n.audioBitRate,"audio-sample-rate":n.audioSampleRate,"init-reply-message":a.initReplyMessage,"init-edit-message":a.initEditMessage,"dropped-files":a.droppedFiles,"emoji-data-source":n.emojiDataSource,onUpdateEditedMessageId:t[7]||(t[7]=o=>a.editedMessageId=o),onEditMessage:t[8]||(t[8]=o=>e.$emit("edit-message",o)),onSendMessage:t[9]||(t[9]=o=>e.$emit("send-message",o)),onTypingMessage:t[10]||(t[10]=o=>e.$emit("typing-message",o)),onTextareaActionHandler:t[11]||(t[11]=o=>e.$emit("textarea-action-handler",o))},gt({_:2},[nt(e.$slots,(o,l)=>({name:l,fn:Ge(f=>[Ce(e.$slots,l,pt(vt(f)))])}))]),1032,["room","room-id","room-message","text-messages","show-send-icon","show-files","show-audio","show-emojis","show-footer","accepted-files","capture-files","multiple-files","textarea-action-enabled","textarea-auto-focus","user-tags-enabled","emojis-suggestion-enabled","templates-text","text-formatting","link-options","audio-bit-rate","audio-sample-rate","init-reply-message","init-edit-message","dropped-files","emoji-data-source"])],544)),[[Pa,n.isMobile&&!n.showRoomsList||!n.isMobile||n.singleRoom]])}var I5=St(w5,[["render",R5]]);const C5={name:"MediaPreview",components:{SvgIcon:Dt},props:{file:{type:Object,required:!0}},emits:["close-media-preview"],computed:{isImage(){return Wr(this.file)},isVideo(){return Ni(this.file)}},mounted(){this.$refs.modal.focus()},methods:{closeModal(){this.$emit("close-media-preview")}}},B5={key:0,class:"vac-media-preview-container"},F5={key:1,class:"vac-media-preview-container"},O5={controls:"",autoplay:""},L5=["src"],j5={class:"vac-svg-button"};function N5(e,t,n,r,a,i){const s=Ke("svg-icon");return $(),le("div",{ref:"modal",tabindex:"0",class:"vac-media-preview",onClick:t[0]||(t[0]=Fn((...c)=>i.closeModal&&i.closeModal(...c),["stop"])),onKeydown:t[1]||(t[1]=xr((...c)=>i.closeModal&&i.closeModal(...c),["esc"]))},[Oe(Bt,{name:"vac-bounce-preview",appear:""},{default:Ge(()=>[i.isImage?($(),le("div",B5,[Se("div",{class:"vac-image-preview",style:Mt({"background-image":`url('${n.file.url}')`})},null,4)])):i.isVideo?($(),le("div",F5,[Se("video",O5,[Se("source",{src:n.file.url},null,8,L5)])])):Ie("",!0)]),_:1}),Se("div",j5,[Ce(e.$slots,"preview-close-icon",{},()=>[Oe(s,{name:"close-outline",param:"preview"})])])],544)}var D5=St(C5,[["render",N5]]),H5={ROOMS_EMPTY:"No rooms",ROOM_EMPTY:"No room selected",NEW_MESSAGES:"New Messages",MESSAGE_DELETED:"This message was deleted",MESSAGES_EMPTY:"No messages",CONVERSATION_STARTED:"Conversation started on:",TYPE_MESSAGE:"Type message",SEARCH:"Search",IS_ONLINE:"is online",LAST_SEEN:"last seen ",IS_TYPING:"is writing...",CANCEL_SELECT_MESSAGE:"Cancel"};const P5={light:{general:{color:"#0a0a0a",colorButtonClear:"#1976d2",colorButton:"#fff",backgroundColorButton:"#1976d2",backgroundInput:"#fff",colorPlaceholder:"#9ca6af",colorCaret:"#1976d2",colorSpinner:"#333",borderStyle:"1px solid #e1e4e8",backgroundScrollIcon:"#fff"},container:{border:"none",borderRadius:"4px",boxShadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)"},header:{background:"#fff",colorRoomName:"#0a0a0a",colorRoomInfo:"#9ca6af",position:"absolute",width:"100%"},footer:{background:"#f8f9fa",borderStyleInput:"1px solid #e1e4e8",borderInputSelected:"#1976d2",backgroundReply:"#e5e5e6",backgroundTagActive:"#e5e5e6",backgroundTag:"#f8f9fa"},content:{background:"#f8f9fa"},sidemenu:{background:"#fff",backgroundHover:"#f6f6f6",backgroundActive:"#e5effa",colorActive:"#1976d2",borderColorSearch:"#e1e5e8"},dropdown:{background:"#fff",backgroundHover:"#f6f6f6"},message:{background:"#fff",backgroundMe:"#ccf2cf",color:"#0a0a0a",colorStarted:"#9ca6af",backgroundDeleted:"#dadfe2",backgroundSelected:"#c2dcf2",colorDeleted:"#757e85",colorUsername:"#9ca6af",colorTimestamp:"#828c94",backgroundDate:"#e5effa",colorDate:"#505a62",backgroundSystem:"#e5effa",colorSystem:"#505a62",backgroundMedia:"rgba(0, 0, 0, 0.15)",backgroundReply:"rgba(0, 0, 0, 0.08)",colorReplyUsername:"#0a0a0a",colorReply:"#6e6e6e",colorTag:"#0d579c",backgroundImage:"#ddd",colorNewMessages:"#1976d2",backgroundScrollCounter:"#0696c7",colorScrollCounter:"#fff",backgroundReaction:"#eee",borderStyleReaction:"1px solid #eee",backgroundReactionHover:"#fff",borderStyleReactionHover:"1px solid #ddd",colorReactionCounter:"#0a0a0a",backgroundReactionMe:"#cfecf5",borderStyleReactionMe:"1px solid #3b98b8",backgroundReactionHoverMe:"#cfecf5",borderStyleReactionHoverMe:"1px solid #3b98b8",colorReactionCounterMe:"#0b59b3",backgroundAudioRecord:"#eb4034",backgroundAudioLine:"rgba(0, 0, 0, 0.15)",backgroundAudioProgress:"#455247",backgroundAudioProgressSelector:"#455247",colorFileExtension:"#757e85"},markdown:{background:"rgba(239, 239, 239, 0.7)",border:"rgba(212, 212, 212, 0.9)",color:"#e01e5a",colorMulti:"#0a0a0a"},room:{colorUsername:"#0a0a0a",colorMessage:"#67717a",colorTimestamp:"#a2aeb8",colorStateOnline:"#4caf50",colorStateOffline:"#9ca6af",backgroundCounterBadge:"#0696c7",colorCounterBadge:"#fff"},emoji:{background:"#fff"},icons:{search:"#9ca6af",add:"#1976d2",toggle:"#0a0a0a",menu:"#0a0a0a",close:"#9ca6af",closeImage:"#fff",file:"#1976d2",paperclip:"#1976d2",closeOutline:"#000",closePreview:"#fff",send:"#1976d2",sendDisabled:"#9ca6af",emoji:"#1976d2",emojiReaction:"rgba(0, 0, 0, 0.3)",document:"#1976d2",pencil:"#9e9e9e",checkmark:"#9e9e9e",checkmarkSeen:"#0696c7",eye:"#fff",dropdownMessage:"#fff",dropdownMessageBackground:"rgba(0, 0, 0, 0.25)",dropdownRoom:"#9e9e9e",dropdownScroll:"#0a0a0a",microphone:"#1976d2",audioPlay:"#455247",audioPause:"#455247",audioCancel:"#eb4034",audioConfirm:"#1ba65b"}},dark:{general:{color:"#fff",colorButtonClear:"#fff",colorButton:"#fff",backgroundColorButton:"#1976d2",backgroundInput:"#202223",colorPlaceholder:"#596269",colorCaret:"#fff",colorSpinner:"#fff",borderStyle:"none",backgroundScrollIcon:"#fff"},container:{border:"none",borderRadius:"4px",boxShadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)"},header:{background:"#181a1b",colorRoomName:"#fff",colorRoomInfo:"#9ca6af",position:"absolute",width:"100%"},footer:{background:"#131415",borderStyleInput:"none",borderInputSelected:"#1976d2",backgroundReply:"#1b1c1c",backgroundTagActive:"#1b1c1c",backgroundTag:"#131415"},content:{background:"#131415"},sidemenu:{background:"#181a1b",backgroundHover:"#202224",backgroundActive:"#151617",colorActive:"#fff",borderColorSearch:"#181a1b"},dropdown:{background:"#2a2c33",backgroundHover:"#26282e"},message:{background:"#22242a",backgroundMe:"#1f7e80",color:"#fff",colorStarted:"#9ca6af",backgroundDeleted:"#1b1c21",backgroundSelected:"#c2dcf2",colorDeleted:"#a2a5a8",colorUsername:"#b3bac9",colorTimestamp:"#ebedf2",backgroundDate:"rgba(0, 0, 0, 0.3)",colorDate:"#bec5cc",backgroundSystem:"rgba(0, 0, 0, 0.3)",colorSystem:"#bec5cc",backgroundMedia:"rgba(0, 0, 0, 0.18)",backgroundReply:"rgba(0, 0, 0, 0.18)",colorReplyUsername:"#fff",colorReply:"#d6d6d6",colorTag:"#f0c60a",backgroundImage:"#ddd",colorNewMessages:"#fff",backgroundScrollCounter:"#1976d2",colorScrollCounter:"#fff",backgroundReaction:"none",borderStyleReaction:"none",backgroundReactionHover:"#202223",borderStyleReactionHover:"none",colorReactionCounter:"#fff",backgroundReactionMe:"#4e9ad1",borderStyleReactionMe:"none",backgroundReactionHoverMe:"#4e9ad1",borderStyleReactionHoverMe:"none",colorReactionCounterMe:"#fff",backgroundAudioRecord:"#eb4034",backgroundAudioLine:"rgba(255, 255, 255, 0.15)",backgroundAudioProgress:"#b7d4d3",backgroundAudioProgressSelector:"#b7d4d3",colorFileExtension:"#a2a5a8"},markdown:{background:"rgba(239, 239, 239, 0.7)",border:"rgba(212, 212, 212, 0.9)",color:"#e01e5a",colorMulti:"#0a0a0a"},room:{colorUsername:"#fff",colorMessage:"#6c7278",colorTimestamp:"#6c7278",colorStateOnline:"#4caf50",colorStateOffline:"#596269",backgroundCounterBadge:"#1976d2",colorCounterBadge:"#fff"},emoji:{background:"#343740"},icons:{search:"#596269",add:"#fff",toggle:"#fff",menu:"#fff",close:"#9ca6af",closeImage:"#fff",file:"#1976d2",paperclip:"#fff",closeOutline:"#fff",closePreview:"#fff",send:"#fff",sendDisabled:"#646a70",emoji:"#fff",emojiReaction:"#fff",document:"#1976d2",pencil:"#ebedf2",checkmark:"#ebedf2",checkmarkSeen:"#f0d90a",eye:"#fff",dropdownMessage:"#fff",dropdownMessageBackground:"rgba(0, 0, 0, 0.25)",dropdownRoom:"#fff",dropdownScroll:"#0a0a0a",microphone:"#fff",audioPlay:"#b7d4d3",audioPause:"#b7d4d3",audioCancel:"#eb4034",audioConfirm:"#1ba65b"}}},z5=({general:e,container:t,header:n,footer:r,sidemenu:a,content:i,dropdown:s,message:c,markdown:v,room:u,emoji:m,icons:o})=>({"--chat-color":e.color,"--chat-color-button-clear":e.colorButtonClear,"--chat-color-button":e.colorButton,"--chat-bg-color-button":e.backgroundColorButton,"--chat-bg-color-input":e.backgroundInput,"--chat-color-spinner":e.colorSpinner,"--chat-color-placeholder":e.colorPlaceholder,"--chat-color-caret":e.colorCaret,"--chat-border-style":e.borderStyle,"--chat-bg-scroll-icon":e.backgroundScrollIcon,"--chat-container-border":t.border,"--chat-container-border-radius":t.borderRadius,"--chat-container-box-shadow":t.boxShadow,"--chat-header-bg-color":n.background,"--chat-header-color-name":n.colorRoomName,"--chat-header-color-info":n.colorRoomInfo,"--chat-header-position":n.position,"--chat-header-width":n.width,"--chat-footer-bg-color":r.background,"--chat-border-style-input":r.borderStyleInput,"--chat-border-color-input-selected":r.borderInputSelected,"--chat-footer-bg-color-reply":r.backgroundReply,"--chat-footer-bg-color-tag-active":r.backgroundTagActive,"--chat-footer-bg-color-tag":r.backgroundTag,"--chat-content-bg-color":i.background,"--chat-sidemenu-bg-color":a.background,"--chat-sidemenu-bg-color-hover":a.backgroundHover,"--chat-sidemenu-bg-color-active":a.backgroundActive,"--chat-sidemenu-color-active":a.colorActive,"--chat-sidemenu-border-color-search":a.borderColorSearch,"--chat-dropdown-bg-color":s.background,"--chat-dropdown-bg-color-hover":s.backgroundHover,"--chat-message-bg-color":c.background,"--chat-message-bg-color-me":c.backgroundMe,"--chat-message-color-started":c.colorStarted,"--chat-message-bg-color-deleted":c.backgroundDeleted,"--chat-message-bg-color-selected":c.backgroundSelected,"--chat-message-color-deleted":c.colorDeleted,"--chat-message-color-username":c.colorUsername,"--chat-message-color-timestamp":c.colorTimestamp,"--chat-message-bg-color-date":c.backgroundDate,"--chat-message-color-date":c.colorDate,"--chat-message-bg-color-system":c.backgroundSystem,"--chat-message-color-system":c.colorSystem,"--chat-message-color":c.color,"--chat-message-bg-color-media":c.backgroundMedia,"--chat-message-bg-color-reply":c.backgroundReply,"--chat-message-color-reply-username":c.colorReplyUsername,"--chat-message-color-reply-content":c.colorReply,"--chat-message-color-tag":c.colorTag,"--chat-message-bg-color-image":c.backgroundImage,"--chat-message-color-new-messages":c.colorNewMessages,"--chat-message-bg-color-scroll-counter":c.backgroundScrollCounter,"--chat-message-color-scroll-counter":c.colorScrollCounter,"--chat-message-bg-color-reaction":c.backgroundReaction,"--chat-message-border-style-reaction":c.borderStyleReaction,"--chat-message-bg-color-reaction-hover":c.backgroundReactionHover,"--chat-message-border-style-reaction-hover":c.borderStyleReactionHover,"--chat-message-color-reaction-counter":c.colorReactionCounter,"--chat-message-bg-color-reaction-me":c.backgroundReactionMe,"--chat-message-border-style-reaction-me":c.borderStyleReactionMe,"--chat-message-bg-color-reaction-hover-me":c.backgroundReactionHoverMe,"--chat-message-border-style-reaction-hover-me":c.borderStyleReactionHoverMe,"--chat-message-color-reaction-counter-me":c.colorReactionCounterMe,"--chat-message-bg-color-audio-record":c.backgroundAudioRecord,"--chat-message-bg-color-audio-line":c.backgroundAudioLine,"--chat-message-bg-color-audio-progress":c.backgroundAudioProgress,"--chat-message-bg-color-audio-progress-selector":c.backgroundAudioProgressSelector,"--chat-message-color-file-extension":c.colorFileExtension,"--chat-markdown-bg":v.background,"--chat-markdown-border":v.border,"--chat-markdown-color":v.color,"--chat-markdown-color-multi":v.colorMulti,"--chat-room-color-username":u.colorUsername,"--chat-room-color-message":u.colorMessage,"--chat-room-color-timestamp":u.colorTimestamp,"--chat-room-color-online":u.colorStateOnline,"--chat-room-color-offline":u.colorStateOffline,"--chat-room-bg-color-badge":u.backgroundCounterBadge,"--chat-room-color-badge":u.colorCounterBadge,"--chat-emoji-bg-color":m.background,"--chat-icon-color-search":o.search,"--chat-icon-color-add":o.add,"--chat-icon-color-toggle":o.toggle,"--chat-icon-color-menu":o.menu,"--chat-icon-color-close":o.close,"--chat-icon-color-close-image":o.closeImage,"--chat-icon-color-file":o.file,"--chat-icon-color-paperclip":o.paperclip,"--chat-icon-color-close-outline":o.closeOutline,"--chat-icon-color-close-preview":o.closePreview,"--chat-icon-color-send":o.send,"--chat-icon-color-send-disabled":o.sendDisabled,"--chat-icon-color-emoji":o.emoji,"--chat-icon-color-emoji-reaction":o.emojiReaction,"--chat-icon-color-document":o.document,"--chat-icon-color-pencil":o.pencil,"--chat-icon-color-checkmark":o.checkmark,"--chat-icon-color-checkmark-seen":o.checkmarkSeen,"--chat-icon-color-eye":o.eye,"--chat-icon-color-dropdown-message":o.dropdownMessage,"--chat-icon-bg-dropdown-message":o.dropdownMessageBackground,"--chat-icon-color-dropdown-room":o.dropdownRoom,"--chat-icon-color-dropdown-scroll":o.dropdownScroll,"--chat-icon-color-microphone":o.microphone,"--chat-icon-color-audio-play":o.audioPlay,"--chat-icon-color-audio-pause":o.audioPause,"--chat-icon-color-audio-cancel":o.audioCancel,"--chat-icon-color-audio-confirm":o.audioConfirm});var V5=`.vac-fade-spinner-enter-from{opacity:0}.vac-fade-spinner-enter-active{transition:opacity .8s}.vac-fade-spinner-leave-active{transition:opacity .2s;opacity:0}.vac-fade-image-enter-from{opacity:0}.vac-fade-image-enter-active{transition:opacity 1s}.vac-fade-image-leave-active{transition:opacity .5s;opacity:0}.vac-fade-message-enter-from{opacity:0}.vac-fade-message-enter-active{transition:opacity .5s}.vac-fade-message-leave-active{transition:opacity .2s;opacity:0}.vac-slide-left-enter-active,.vac-slide-right-enter-active{transition:all .3s ease;transition-property:transform,opacity}.vac-slide-left-leave-active,.vac-slide-right-leave-active{transition:all .2s cubic-bezier(1,.5,.8,1)!important;transition-property:transform,opacity}.vac-slide-left-enter-from,.vac-slide-left-leave-to{transform:translate(10px);opacity:0}.vac-slide-right-enter-from,.vac-slide-right-leave-to{transform:translate(-10px);opacity:0}.vac-slide-up-enter-active{transition:all .3s ease}.vac-slide-up-leave-active{transition:all .2s cubic-bezier(1,.5,.8,1)}.vac-slide-up-enter-from,.vac-slide-up-leave-to{transform:translateY(10px);opacity:0}.vac-bounce-enter-active{animation:vac-bounce-in .5s}.vac-bounce-leave-active{animation:vac-bounce-in .3s reverse}@keyframes vac-bounce-in{0%{transform:scale(0)}50%{transform:scale(1.05)}to{transform:scale(1)}}.vac-fade-preview-enter{opacity:0}.vac-fade-preview-enter-active{transition:opacity .1s}.vac-fade-preview-leave-active{transition:opacity .2s;opacity:0}.vac-bounce-preview-enter-active{animation:vac-bounce-image-in .4s}.vac-bounce-preview-leave-active{animation:vac-bounce-image-in .3s reverse}@keyframes vac-bounce-image-in{0%{transform:scale(.6)}to{transform:scale(1)}}.vac-menu-list{border-radius:4px;display:block;cursor:pointer;background:var(--chat-dropdown-bg-color);padding:6px 0}.vac-menu-list :hover{background:var(--chat-dropdown-bg-color-hover);transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-menu-list :not(:hover){transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-menu-item{-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1 1 100%;flex:1 1 100%;min-height:30px;padding:5px 16px;position:relative;white-space:nowrap;line-height:30px}.vac-menu-options{position:absolute;right:10px;top:20px;z-index:9999;min-width:150px;display:inline-block;border-radius:4px;font-size:14px;color:var(--chat-color);overflow-y:auto;overflow-x:hidden;contain:content;box-shadow:0 2px 2px -4px #0000001a,0 2px 2px 1px #0000001f,0 1px 8px 1px #0000001f}.vac-app-border{border:var(--chat-border-style)}.vac-app-border-t{border-top:var(--chat-border-style)}.vac-app-border-r{border-right:var(--chat-border-style)}.vac-app-border-b{border-bottom:var(--chat-border-style)}.vac-app-box-shadow{transition:all .5s;box-shadow:0 2px 2px -4px #0000001a,0 2px 2px 1px #0000001f,0 1px 8px 1px #0000001f}.vac-item-clickable{cursor:pointer}.vac-vertical-center{display:flex;align-items:center;height:100%}.vac-vertical-center .vac-vertical-container{width:100%;text-align:center}.vac-svg-button{max-height:30px;display:flex;cursor:pointer;transition:all .2s}.vac-svg-button:hover{transform:scale(1.1);opacity:.7}.vac-avatar{background-size:cover;background-position:center center;background-repeat:no-repeat;background-color:#ddd;height:42px;width:42px;min-height:42px;min-width:42px;margin-right:15px;border-radius:50%}.vac-blur-loading{filter:blur(3px)}.vac-badge-counter{height:13px;width:auto;min-width:13px;border-radius:50%;display:flex;align-items:center;justify-content:center;padding:3px;font-size:11px;font-weight:500}.vac-text-ellipsis{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.vac-text-tag{color:var(--chat-message-color-tag);cursor:pointer}.vac-file-container{display:flex;align-content:center;justify-content:center;flex-wrap:wrap;text-align:center;background:var(--chat-bg-color-input);border:var(--chat-border-style-input);border-radius:4px;padding:10px}.vac-file-container svg{height:28px;width:28px}.vac-file-container .vac-text-extension{font-size:12px;color:var(--chat-message-color-file-extension);margin-top:-2px}.markdown p{margin:0}.markdown ol{display:flex;flex-direction:column;list-style-position:inside}.markdown ul{display:flex;flex-direction:column}.markdown code{display:block;font-size:12px;color:var(--chat-markdown-color-multi);background:var(--chat-markdown-bg);border:1px solid var(--chat-markdown-border);border-radius:3px;margin:4px 0;padding:7px}.markdown p code{display:inline-block;font-size:12px;color:var(--chat-markdown-color);background:var(--chat-markdown-bg);border:1px solid var(--chat-markdown-border);border-radius:3px;margin:2px 0;padding:2px 3px}.vac-card-window{width:100%;display:block;max-width:100%;background:var(--chat-content-bg-color);color:var(--chat-color);overflow-wrap:break-word;white-space:normal;border:var(--chat-container-border);border-radius:var(--chat-container-border-radius);box-shadow:var(--chat-container-box-shadow);-webkit-tap-highlight-color:transparent}.vac-card-window *{font-family:inherit}.vac-card-window a{color:#0d579c;font-weight:500}.vac-card-window .vac-chat-container{height:100%;display:flex}.vac-card-window .vac-chat-container input{min-width:10px}.vac-card-window .vac-chat-container textarea,.vac-card-window .vac-chat-container input[type=text],.vac-card-window .vac-chat-container input[type=search]{-webkit-appearance:none}.vac-media-preview{position:fixed;top:0;left:0;z-index:99;width:100vw;height:100vh;display:flex;align-items:center;background-color:#000c;outline:none}.vac-media-preview .vac-media-preview-container{height:calc(100% - 140px);width:calc(100% - 80px);padding:70px 40px;margin:0 auto}.vac-media-preview .vac-image-preview{width:100%;height:100%;background-size:contain;background-repeat:no-repeat;background-position:center}.vac-media-preview video{width:100%;height:100%}.vac-media-preview .vac-svg-button{position:absolute;top:30px;right:30px;transform:scale(1.4)}@media only screen and (max-width: 768px){.vac-media-preview .vac-svg-button{top:20px;right:20px;transform:scale(1.2)}.vac-media-preview .vac-media-preview-container{width:calc(100% - 40px);padding:70px 20px}}.vac-col-messages{position:relative;height:100%;flex:1;overflow:hidden;display:flex;flex-flow:column}.vac-col-messages .vac-container-center{height:100%;width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center}.vac-col-messages .vac-room-empty{font-size:14px;color:#9ca6af;font-style:italic;line-height:20px;white-space:pre-line}.vac-col-messages .vac-room-empty div{padding:0 10%}.vac-col-messages .vac-container-scroll{background:var(--chat-content-bg-color);flex:1;overflow-y:auto;margin-right:1px;margin-top:65px;-webkit-overflow-scrolling:touch}.vac-col-messages .vac-container-scroll.vac-scroll-smooth{scroll-behavior:smooth}.vac-col-messages .vac-messages-container{padding:0 5px 5px}.vac-col-messages .vac-text-started{font-size:14px;color:var(--chat-message-color-started);font-style:italic;text-align:center;margin-top:25px;margin-bottom:20px}.vac-col-messages .vac-icon-scroll{position:absolute;bottom:80px;right:20px;padding:8px;background:var(--chat-bg-scroll-icon);border-radius:50%;box-shadow:0 1px 1px -1px #0003,0 1px 1px #00000024,0 1px 2px #0000001f;display:flex;cursor:pointer;z-index:10}.vac-col-messages .vac-icon-scroll svg{height:25px;width:25px}.vac-col-messages .vac-messages-count{position:absolute;top:-8px;left:11px;background-color:var(--chat-message-bg-color-scroll-counter);color:var(--chat-message-color-scroll-counter)}.vac-col-messages .vac-messages-hidden{opacity:0}@media only screen and (max-width: 768px){.vac-col-messages .vac-container-scroll{margin-top:50px}.vac-col-messages .vac-text-started{margin-top:20px}.vac-col-messages .vac-icon-scroll{bottom:70px}}.vac-room-header{position:var(--chat-header-position);display:flex;align-items:center;height:64px;width:var(--chat-header-width);z-index:10;margin-right:1px;background:var(--chat-header-bg-color);border-top-right-radius:var(--chat-container-border-radius)}.vac-room-header .vac-room-wrapper{display:flex;align-items:center;min-width:0;height:100%;width:100%;padding:0 16px}.vac-room-header .vac-toggle-button{margin-right:15px}.vac-room-header .vac-toggle-button svg{height:26px;width:26px}.vac-room-header .vac-rotate-icon{transform:rotate(180deg)!important}.vac-room-header .vac-rotate-icon-init{transform:rotate(360deg)}.vac-room-header .vac-info-wrapper,.vac-room-header .vac-room-selection{display:flex;align-items:center;min-width:0;width:100%;height:100%}.vac-room-header .vac-room-selection .vac-selection-button{padding:8px 16px;color:var(--chat-color-button);background-color:var(--chat-bg-color-button);border-radius:4px;margin-right:10px;cursor:pointer;transition:all .2s}.vac-room-header .vac-room-selection .vac-selection-button:hover{opacity:.7}.vac-room-header .vac-room-selection .vac-selection-button:active{opacity:.9}.vac-room-header .vac-room-selection .vac-selection-button .vac-selection-button-count{margin-left:6px;opacity:.9}.vac-room-header .vac-room-selection .vac-selection-cancel{display:flex;align-items:center;margin-left:auto;white-space:nowrap;color:var(--chat-color-button-clear);transition:all .2s}.vac-room-header .vac-room-selection .vac-selection-cancel:hover{opacity:.7}.vac-room-header .vac-room-name{font-size:17px;font-weight:500;line-height:22px;color:var(--chat-header-color-name)}.vac-room-header .vac-room-info{font-size:13px;line-height:18px;color:var(--chat-header-color-info)}.vac-room-header .vac-room-options{margin-left:auto}@media only screen and (max-width: 768px){.vac-room-header{height:50px}.vac-room-header .vac-room-wrapper{padding:0 10px}.vac-room-header .vac-room-name{font-size:16px;line-height:22px}.vac-room-header .vac-room-info{font-size:12px;line-height:16px}.vac-room-header .vac-avatar{height:37px;width:37px;min-height:37px;min-width:37px}}.vac-room-footer{width:100%;border-bottom-right-radius:4px;z-index:10}.vac-box-footer{display:flex;position:relative;background:var(--chat-footer-bg-color);padding:10px 8px}.vac-textarea{max-height:300px;overflow-y:auto;height:20px;width:100%;line-height:20px;outline:0;resize:none;border-radius:20px;padding:12px 16px;box-sizing:content-box;font-size:16px;background:var(--chat-bg-color-input);color:var(--chat-color);caret-color:var(--chat-color-caret);border:var(--chat-border-style-input)}.vac-textarea::placeholder{color:var(--chat-color-placeholder);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.vac-textarea-outline{border:1px solid var(--chat-border-color-input-selected);box-shadow:inset 0 0 0 1px var(--chat-border-color-input-selected)}.vac-icon-textarea,.vac-icon-textarea-left{display:flex;align-items:center}.vac-icon-textarea svg,.vac-icon-textarea .vac-wrapper,.vac-icon-textarea-left svg,.vac-icon-textarea-left .vac-wrapper{margin:0 7px}.vac-icon-textarea{margin-left:5px}.vac-icon-textarea-left{display:flex;align-items:center;margin-right:5px}.vac-icon-textarea-left svg,.vac-icon-textarea-left .vac-wrapper{margin:0 7px}.vac-icon-textarea-left .vac-icon-microphone{fill:var(--chat-icon-color-microphone);margin:0 7px}.vac-icon-textarea-left .vac-dot-audio-record{height:15px;width:15px;border-radius:50%;background-color:var(--chat-message-bg-color-audio-record);animation:vac-scaling .8s ease-in-out infinite alternate}@keyframes vac-scaling{0%{transform:scale(1);opacity:.4}to{transform:scale(1.1);opacity:1}}.vac-icon-textarea-left .vac-dot-audio-record-time{font-size:16px;color:var(--chat-color);margin-left:8px;width:45px}.vac-icon-textarea-left .vac-icon-audio-stop,.vac-icon-textarea-left .vac-icon-audio-confirm{min-height:28px;min-width:28px}.vac-icon-textarea-left .vac-icon-audio-stop svg,.vac-icon-textarea-left .vac-icon-audio-confirm svg{min-height:28px;min-width:28px}.vac-icon-textarea-left .vac-icon-audio-stop{margin-right:20px}.vac-icon-textarea-left .vac-icon-audio-stop #vac-icon-close-outline{fill:var(--chat-icon-color-audio-cancel)}.vac-icon-textarea-left .vac-icon-audio-confirm{margin-right:3px;margin-left:12px}.vac-icon-textarea-left .vac-icon-audio-confirm #vac-icon-checkmark{fill:var(--chat-icon-color-audio-confirm)}.vac-send-disabled,.vac-send-disabled svg{cursor:none!important;pointer-events:none!important;transform:none!important}@media only screen and (max-width: 768px){.vac-room-footer{width:100%}.vac-box-footer{padding:7px 2px 7px 7px}.vac-box-footer.vac-box-footer-border{border-top:var(--chat-border-style-input)}.vac-textarea{padding:7px;line-height:18px}.vac-textarea::placeholder{color:transparent}.vac-icon-textarea svg,.vac-icon-textarea .vac-wrapper,.vac-icon-textarea-left svg,.vac-icon-textarea-left .vac-wrapper{margin:0 5px!important}}@media only screen and (max-height: 768px){.vac-textarea{max-height:120px}}.vac-emojis-container{width:calc(100% - 16px);padding:10px 8px;background:var(--chat-footer-bg-color);display:flex;align-items:center;overflow:auto}.vac-emojis-container .vac-emoji-element{padding:0 8px;font-size:30px;border-radius:4px;cursor:pointer;background:var(--chat-footer-bg-color-tag);transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-emojis-container .vac-emoji-element-active{background:var(--chat-footer-bg-color-tag-active)}@media only screen and (max-width: 768px){.vac-emojis-container{width:calc(100% - 10px);padding:7px 5px}.vac-emojis-container .vac-emoji-element{padding:0 7px;font-size:26px}}.vac-reply-container{display:flex;padding:10px 10px 0;background:var(--chat-footer-bg-color);align-items:center;width:calc(100% - 20px)}.vac-reply-container .vac-reply-box{width:100%;overflow:hidden;background:var(--chat-footer-bg-color-reply);border-radius:4px;padding:8px 10px}.vac-reply-container .vac-reply-info{overflow:hidden}.vac-reply-container .vac-reply-username{color:var(--chat-message-color-reply-username);font-size:12px;line-height:15px;margin-bottom:2px}.vac-reply-container .vac-reply-content{font-size:12px;color:var(--chat-message-color-reply-content);white-space:pre-line}.vac-reply-container .vac-icon-reply{margin-left:10px}.vac-reply-container .vac-icon-reply svg{height:20px;width:20px}.vac-reply-container .vac-image-reply{max-height:100px;max-width:200px;margin:4px 10px 0 0;border-radius:4px}.vac-reply-container .vac-audio-reply{margin-right:10px}.vac-reply-container .vac-file-container{max-width:80px}@media only screen and (max-width: 768px){.vac-reply-container{padding:5px 8px;width:calc(100% - 16px)}}.vac-room-files-container{display:flex;align-items:center;padding:10px 6px 0;background:var(--chat-footer-bg-color)}.vac-room-files-container .vac-files-box{display:flex;overflow:auto;width:calc(100% - 30px)}.vac-room-files-container video{height:100px;border:var(--chat-border-style-input);border-radius:4px}.vac-room-files-container .vac-icon-close{margin-left:auto}.vac-room-files-container .vac-icon-close svg{height:20px;width:20px}@media only screen and (max-width: 768px){.vac-files-container{padding:6px 4px 4px 2px}}.vac-room-file-container{display:flex;position:relative;margin:0 4px}.vac-room-file-container .vac-message-image{position:relative;background-color:var(--chat-message-bg-color-image)!important;background-size:cover!important;background-position:center center!important;background-repeat:no-repeat!important;height:100px;width:100px;border:var(--chat-border-style-input);border-radius:4px}.vac-room-file-container .vac-file-container{height:80px;width:80px}.vac-room-file-container .vac-icon-remove{position:absolute;top:6px;left:6px;z-index:10}.vac-room-file-container .vac-icon-remove svg{height:20px;width:20px;border-radius:50%}.vac-room-file-container .vac-icon-remove:before{content:" ";position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);border-radius:50%;z-index:-1}.vac-tags-container{display:flex;flex-direction:column;align-items:center;width:100%}.vac-tags-container .vac-tags-box{display:flex;width:100%;height:54px;overflow:hidden;cursor:pointer;background:var(--chat-footer-bg-color-tag);transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-tags-container .vac-tags-box-active{background:var(--chat-footer-bg-color-tag-active)}.vac-tags-container .vac-tags-info{display:flex;overflow:hidden;padding:0 20px;align-items:center}.vac-tags-container .vac-tags-avatar{height:34px;width:34px;min-height:34px;min-width:34px}.vac-tags-container .vac-tags-username{font-size:14px}@media only screen and (max-width: 768px){.vac-tags-container .vac-tags-box{height:50px}.vac-tags-container .vac-tags-info{padding:0 12px}}.vac-template-container{display:flex;flex-direction:column;align-items:center;width:100%}.vac-template-container .vac-template-box{display:flex;width:100%;height:54px;overflow:hidden;cursor:pointer;background:var(--chat-footer-bg-color-tag);transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-template-container .vac-template-active{background:var(--chat-footer-bg-color-tag-active)}.vac-template-container .vac-template-info{display:flex;overflow:hidden;padding:0 20px;align-items:center}.vac-template-container .vac-template-tag{font-size:14px;font-weight:700;margin-right:10px}.vac-template-container .vac-template-text{font-size:14px}@media only screen and (max-width: 768px){.vac-template-container .vac-template-box{height:50px}.vac-template-container .vac-template-info{padding:0 12px}}.vac-rooms-container{display:flex;flex-flow:column;flex:0 0 25%;min-width:260px;max-width:500px;position:relative;background:var(--chat-sidemenu-bg-color);height:100%;border-top-left-radius:var(--chat-container-border-radius);border-bottom-left-radius:var(--chat-container-border-radius)}.vac-rooms-container.vac-rooms-container-full{flex:0 0 100%;max-width:100%}.vac-rooms-container .vac-rooms-empty{font-size:14px;color:#9ca6af;font-style:italic;text-align:center;margin:40px 0;line-height:20px;white-space:pre-line}.vac-rooms-container .vac-room-list{flex:1;position:relative;max-width:100%;padding:0 10px 5px;overflow-y:auto}.vac-rooms-container .vac-room-item{border-radius:8px;align-items:center;display:flex;flex:1 1 100%;margin-bottom:5px;padding:0 14px;position:relative;min-height:71px;transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-rooms-container .vac-room-item:hover{background:var(--chat-sidemenu-bg-color-hover)}.vac-rooms-container .vac-room-item:not(.vac-room-selected){cursor:pointer}.vac-rooms-container .vac-room-selected{color:var(--chat-sidemenu-color-active)!important;background:var(--chat-sidemenu-bg-color-active)!important}.vac-rooms-container .vac-room-selected:hover{background:var(--chat-sidemenu-bg-color-active)!important}@media only screen and (max-width: 768px){.vac-rooms-container .vac-room-list{padding:0 7px 5px}.vac-rooms-container .vac-room-item{min-height:60px;padding:0 8px}}.vac-room-container{display:flex;flex:1;align-items:center;width:100%}.vac-room-container .vac-name-container{flex:1}.vac-room-container .vac-title-container{display:flex;align-items:center;line-height:25px}.vac-room-container .vac-state-circle{width:9px;height:9px;border-radius:50%;background-color:var(--chat-room-color-offline);margin-right:6px;transition:.3s}.vac-room-container .vac-state-online{background-color:var(--chat-room-color-online)}.vac-room-container .vac-room-name{flex:1;color:var(--chat-room-color-username);font-weight:500}.vac-room-container .vac-text-date{margin-left:5px;font-size:11px;color:var(--chat-room-color-timestamp)}.vac-room-container .vac-text-last{display:flex;align-items:center;font-size:12px;line-height:19px;color:var(--chat-room-color-message)}.vac-room-container .vac-message-new{color:var(--chat-room-color-username);font-weight:500}.vac-room-container .vac-icon-check{display:flex;vertical-align:middle;height:14px;width:14px;margin-top:-2px;margin-right:2px}.vac-room-container .vac-icon-microphone{height:15px;width:15px;vertical-align:middle;margin:-3px 1px 0 -2px;fill:var(--chat-room-color-message)}.vac-room-container .vac-room-options-container{display:flex;margin-left:auto}.vac-room-container .vac-room-badge{background-color:var(--chat-room-bg-color-badge);color:var(--chat-room-color-badge);margin-left:5px}.vac-room-container .vac-list-room-options{height:19px;width:19px;align-items:center;margin-left:5px}.vac-box-empty{margin-top:10px}@media only screen and (max-width: 768px){.vac-box-empty{margin-top:7px}}.vac-box-search{position:sticky;display:flex;align-items:center;height:64px;padding:0 15px}.vac-box-search .vac-icon-search{display:flex;position:absolute;left:30px}.vac-box-search .vac-icon-search svg{width:18px;height:18px}.vac-box-search .vac-input{height:38px;width:100%;background:var(--chat-bg-color-input);color:var(--chat-color);font-size:15px;outline:0;caret-color:var(--chat-color-caret);padding:10px 10px 10px 40px;border:1px solid var(--chat-sidemenu-border-color-search);border-radius:20px}.vac-box-search .vac-input::placeholder{color:var(--chat-color-placeholder)}.vac-box-search .vac-add-icon{margin-left:auto;padding-left:10px}@media only screen and (max-width: 768px){.vac-box-search{height:58px}}.vac-message-wrapper .vac-card-info{border-radius:4px;text-align:center;margin:10px auto;font-size:12px;padding:4px;display:block;overflow-wrap:break-word;position:relative;white-space:normal;box-shadow:0 1px 1px -1px #0000001a,0 1px 1px -1px #0000001c,0 1px 2px -1px #0000001c}.vac-message-wrapper .vac-card-date{max-width:150px;font-weight:500;text-transform:uppercase;color:var(--chat-message-color-date);background-color:var(--chat-message-bg-color-date)}.vac-message-wrapper .vac-card-system{max-width:250px;padding:8px 4px;color:var(--chat-message-color-system);background-color:var(--chat-message-bg-color-system)}.vac-message-wrapper .vac-line-new{color:var(--chat-message-color-new-messages);position:relative;text-align:center;font-size:13px;padding:10px 0}.vac-message-wrapper .vac-line-new:after,.vac-message-wrapper .vac-line-new:before{border-top:1px solid var(--chat-message-color-new-messages);content:"";left:0;position:absolute;top:50%;width:calc(50% - 60px)}.vac-message-wrapper .vac-line-new:before{left:auto;right:0}.vac-message-wrapper .vac-message-box{display:flex;flex:0 0 50%;max-width:50%;justify-content:flex-start;line-height:1.4}.vac-message-wrapper .vac-avatar{height:28px;width:28px;min-height:28px;min-width:28px;margin:0 0 2px;align-self:flex-end}.vac-message-wrapper .vac-avatar-current-offset{margin-right:28px}.vac-message-wrapper .vac-avatar-offset{margin-left:28px}.vac-message-wrapper .vac-failure-container{position:relative;align-self:flex-end;height:20px;width:20px;margin:0 0 2px -4px;border-radius:50%;background-color:#f44336}.vac-message-wrapper .vac-failure-container.vac-failure-container-avatar{margin-right:6px}.vac-message-wrapper .vac-failure-container .vac-failure-text{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-size:15px;font-weight:700}.vac-message-wrapper .vac-message-container{position:relative;padding:2px 10px;align-items:end;min-width:100px;box-sizing:content-box}.vac-message-wrapper .vac-message-container-offset{margin-top:10px}.vac-message-wrapper .vac-offset-current{margin-left:50%;justify-content:flex-end}.vac-message-wrapper .vac-message-card{background-color:var(--chat-message-bg-color);color:var(--chat-message-color);border-radius:8px;font-size:14px;padding:6px 9px 3px;white-space:pre-line;max-width:100%;-webkit-transition-property:box-shadow,opacity;transition-property:box-shadow,opacity;transition:box-shadow .28s cubic-bezier(.4,0,.2,1);will-change:box-shadow;box-shadow:0 1px 1px -1px #0000001a,0 1px 1px -1px #0000001c,0 1px 2px -1px #0000001c}.vac-message-wrapper .vac-message-highlight{box-shadow:0 1px 2px -1px #0000001a,0 1px 2px -1px #0000001c,0 1px 5px -1px #0000001c}.vac-message-wrapper .vac-message-current{background-color:var(--chat-message-bg-color-me)!important}.vac-message-wrapper .vac-message-deleted{color:var(--chat-message-color-deleted)!important;font-size:13px!important;font-style:italic!important;background-color:var(--chat-message-bg-color-deleted)!important}.vac-message-wrapper .vac-message-selected{background-color:var(--chat-message-bg-color-selected)!important;transition:background-color .2s}.vac-message-wrapper .vac-message-image{position:relative;background-color:var(--chat-message-bg-color-image)!important;background-size:cover!important;background-position:center center!important;background-repeat:no-repeat!important;height:250px;width:250px;max-width:100%;border-radius:4px;margin:4px auto 5px;transition:.4s filter linear}.vac-message-wrapper .vac-text-username{font-size:13px;color:var(--chat-message-color-username);margin-bottom:2px}.vac-message-wrapper .vac-username-reply{margin-bottom:5px}.vac-message-wrapper .vac-text-timestamp{font-size:10px;color:var(--chat-message-color-timestamp);text-align:right}.vac-message-wrapper .vac-progress-time{float:left;margin:-2px 0 0 40px;color:var(--chat-color);font-size:12px}.vac-message-wrapper .vac-icon-edited{-webkit-box-align:center;align-items:center;display:-webkit-inline-box;display:inline-flex;justify-content:center;letter-spacing:normal;line-height:1;text-indent:0;vertical-align:middle;margin:0 4px 2px}.vac-message-wrapper .vac-icon-edited svg{height:12px;width:12px}.vac-message-wrapper .vac-icon-check{height:14px;width:14px;vertical-align:middle;margin:-3px -3px 0 3px}@media only screen and (max-width: 768px){.vac-message-wrapper .vac-message-container{padding:2px 3px 1px}.vac-message-wrapper .vac-message-container-offset{margin-top:10px}.vac-message-wrapper .vac-message-box{flex:0 0 80%;max-width:80%}.vac-message-wrapper .vac-avatar{height:25px;width:25px;min-height:25px;min-width:25px;margin:0 6px 1px 0}.vac-message-wrapper .vac-avatar.vac-avatar-current{margin:0 0 1px 6px}.vac-message-wrapper .vac-avatar-current-offset{margin-right:31px}.vac-message-wrapper .vac-avatar-offset{margin-left:31px}.vac-message-wrapper .vac-failure-container{margin-left:2px}.vac-message-wrapper .vac-failure-container.vac-failure-container-avatar{margin-right:0}.vac-message-wrapper .vac-offset-current{margin-left:20%}.vac-message-wrapper .vac-progress-time{margin-left:37px}}.vac-audio-player{display:flex;margin:8px 0 5px}.vac-audio-player .vac-svg-button{max-width:18px;margin-left:7px}@media only screen and (max-width: 768px){.vac-audio-player{margin:4px 0 0}.vac-audio-player .vac-svg-button{max-width:16px;margin-left:5px}}.vac-player-bar{display:flex;align-items:center;max-width:calc(100% - 18px);margin-right:7px;margin-left:20px}.vac-player-bar .vac-player-progress{width:190px}.vac-player-bar .vac-player-progress .vac-line-container{position:relative;height:4px;border-radius:5px;background-color:var(--chat-message-bg-color-audio-line)}.vac-player-bar .vac-player-progress .vac-line-container .vac-line-progress{position:absolute;height:inherit;background-color:var(--chat-message-bg-color-audio-progress);border-radius:inherit}.vac-player-bar .vac-player-progress .vac-line-container .vac-line-dot{position:absolute;top:-5px;margin-left:-7px;height:14px;width:14px;border-radius:50%;background-color:var(--chat-message-bg-color-audio-progress-selector);transition:transform .25s}.vac-player-bar .vac-player-progress .vac-line-container .vac-line-dot__active{transform:scale(1.2)}@media only screen and (max-width: 768px){.vac-player-bar{margin-right:5px}.vac-player-bar .vac-player-progress .vac-line-container{height:3px}.vac-player-bar .vac-player-progress .vac-line-container .vac-line-dot{height:12px;width:12px;top:-5px;margin-left:-5px}}.vac-message-actions-wrapper .vac-options-container{position:absolute;top:2px;right:10px;height:40px;width:70px;overflow:hidden;border-top-right-radius:8px}.vac-message-actions-wrapper .vac-blur-container{position:absolute;height:100%;width:100%;left:8px;bottom:10px;background:var(--chat-message-bg-color);filter:blur(3px);border-bottom-left-radius:8px}.vac-message-actions-wrapper .vac-options-me{background:var(--chat-message-bg-color-me)}.vac-message-actions-wrapper .vac-message-options{background:var(--chat-icon-bg-dropdown-message);border-radius:50%;position:absolute;top:7px;right:7px}.vac-message-actions-wrapper .vac-message-options svg{height:17px;width:17px;padding:5px;margin:-5px}.vac-message-actions-wrapper .vac-message-emojis{position:absolute;top:6px;right:30px}.vac-message-actions-wrapper .vac-menu-options{right:15px}.vac-message-actions-wrapper .vac-menu-left{right:-118px}@media only screen and (max-width: 768px){.vac-message-actions-wrapper .vac-options-container{right:3px}.vac-message-actions-wrapper .vac-menu-left{right:-50px}}.vac-message-files-container .vac-file-wrapper{position:relative;width:fit-content}.vac-message-files-container .vac-file-wrapper .vac-file-container{height:60px;width:60px;margin:3px 0 5px;cursor:pointer;transition:all .6s}.vac-message-files-container .vac-file-wrapper .vac-file-container:hover{opacity:.85}.vac-message-files-container .vac-file-wrapper .vac-file-container svg{height:30px;width:30px}.vac-message-files-container .vac-file-wrapper .vac-file-container.vac-file-container-progress{background-color:#0000004d}.vac-message-file-container{position:relative;z-index:0}.vac-message-file-container .vac-message-image-container{cursor:pointer}.vac-message-file-container .vac-image-buttons{position:absolute;width:100%;height:100%;border-radius:4px;background:linear-gradient(to bottom,rgba(0,0,0,0) 55%,rgba(0,0,0,.02) 60%,rgba(0,0,0,.05) 65%,rgba(0,0,0,.1) 70%,rgba(0,0,0,.2) 75%,rgba(0,0,0,.3) 80%,rgba(0,0,0,.5) 85%,rgba(0,0,0,.6) 90%,rgba(0,0,0,.7) 95%,rgba(0,0,0,.8) 100%)}.vac-message-file-container .vac-image-buttons svg{height:26px;width:26px}.vac-message-file-container .vac-image-buttons .vac-button-view,.vac-message-file-container .vac-image-buttons .vac-button-download{position:absolute;bottom:6px;left:7px}.vac-message-file-container .vac-image-buttons :first-child{left:40px}.vac-message-file-container .vac-image-buttons .vac-button-view{max-width:18px;bottom:8px}.vac-message-file-container .vac-video-container{width:350px;max-width:100%;margin:4px auto 5px;cursor:pointer}.vac-message-file-container .vac-video-container video{width:100%;height:100%;border-radius:4px}.vac-button-reaction{display:inline-flex;align-items:center;border:var(--chat-message-border-style-reaction);outline:none;background:var(--chat-message-bg-color-reaction);border-radius:4px;margin:4px 2px 0;transition:.3s;padding:0 5px;font-size:18px;line-height:23px}.vac-button-reaction span{font-size:11px;font-weight:500;min-width:7px;color:var(--chat-message-color-reaction-counter)}.vac-button-reaction:hover{border:var(--chat-message-border-style-reaction-hover);background:var(--chat-message-bg-color-reaction-hover);cursor:pointer}.vac-button-reaction.vac-reaction-me{border:var(--chat-message-border-style-reaction-me);background:var(--chat-message-bg-color-reaction-me)}.vac-button-reaction.vac-reaction-me span{color:var(--chat-message-color-reaction-counter-me)}.vac-button-reaction.vac-reaction-me:hover{border:var(--chat-message-border-style-reaction-hover-me);background:var(--chat-message-bg-color-reaction-hover-me)}.vac-reply-message{background:var(--chat-message-bg-color-reply);border-radius:4px;margin:-1px -5px 8px;padding:8px 10px}.vac-reply-message .vac-reply-username{color:var(--chat-message-color-reply-username);font-size:12px;line-height:15px;margin-bottom:2px}.vac-reply-message .vac-image-reply-container{width:70px}.vac-reply-message .vac-image-reply-container .vac-message-image-reply{height:70px;width:70px;margin:4px auto 3px}.vac-reply-message .vac-video-reply-container{width:200px;max-width:100%}.vac-reply-message .vac-video-reply-container video{width:100%;height:100%;border-radius:4px}.vac-reply-message .vac-reply-content{font-size:12px;color:var(--chat-message-color-reply-content)}.vac-reply-message .vac-file-container{height:60px;width:60px}.vac-emoji-wrapper{position:relative;display:flex}.vac-emoji-wrapper .vac-emoji-reaction svg{height:19px;width:19px}.vac-emoji-wrapper .vac-emoji-picker{position:absolute;z-index:9999;bottom:32px;right:10px;width:300px;padding-top:4px;overflow:scroll;box-sizing:border-box;border-radius:.5rem;background:var(--chat-emoji-bg-color);box-shadow:0 1px 2px -2px #0000001a,0 1px 2px -1px #0000001a,0 1px 2px 1px #0000001a;scrollbar-width:none}.vac-emoji-wrapper .vac-emoji-picker::-webkit-scrollbar{display:none}.vac-emoji-wrapper .vac-emoji-picker.vac-picker-reaction{position:fixed;top:initial;right:initial}.vac-emoji-wrapper .vac-emoji-picker emoji-picker{height:100%;width:100%;--emoji-size: 1.2rem;--background: var(--chat-emoji-bg-color);--emoji-padding: .4rem;--border-color: var(--chat-sidemenu-border-color-search);--button-hover-background: var(--chat-sidemenu-bg-color-hover);--button-active-background: var(--chat-sidemenu-bg-color-hover)}.vac-format-message-wrapper .vac-format-container{display:inline}.vac-format-message-wrapper .vac-icon-deleted{height:14px;width:14px;vertical-align:middle;margin:-2px 2px 0 0;fill:var(--chat-message-color-deleted)}.vac-format-message-wrapper .vac-icon-deleted.vac-icon-deleted-room{margin:-3px 1px 0 0;fill:var(--chat-room-color-message)}.vac-format-message-wrapper .vac-image-link-container{background-color:var(--chat-message-bg-color-media);padding:8px;margin:2px auto;border-radius:4px}.vac-format-message-wrapper .vac-image-link{position:relative;background-color:var(--chat-message-bg-color-image)!important;background-size:contain;background-position:center center!important;background-repeat:no-repeat!important;height:150px;width:150px;max-width:100%;border-radius:4px;margin:0 auto}.vac-format-message-wrapper .vac-image-link-message{max-width:166px;font-size:12px}.vac-loader-wrapper.vac-container-center{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:9}.vac-loader-wrapper.vac-container-top{padding:21px}.vac-loader-wrapper.vac-container-top #vac-circle{height:20px;width:20px}.vac-loader-wrapper #vac-circle{margin:auto;height:28px;width:28px;border:3px rgba(0,0,0,.25) solid;border-top:3px var(--chat-color-spinner) solid;border-right:3px var(--chat-color-spinner) solid;border-bottom:3px var(--chat-color-spinner) solid;border-radius:50%;-webkit-animation:vac-spin 1s infinite linear;animation:vac-spin 1s infinite linear}@media only screen and (max-width: 768px){.vac-loader-wrapper #vac-circle{height:24px;width:24px}.vac-loader-wrapper.vac-container-top{padding:18px}.vac-loader-wrapper.vac-container-top #vac-circle{height:16px;width:16px}}@-webkit-keyframes vac-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes vac-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}#vac-icon-search{fill:var(--chat-icon-color-search)}#vac-icon-add{fill:var(--chat-icon-color-add)}#vac-icon-toggle{fill:var(--chat-icon-color-toggle)}#vac-icon-menu{fill:var(--chat-icon-color-menu)}#vac-icon-close{fill:var(--chat-icon-color-close)}#vac-icon-close-image{fill:var(--chat-icon-color-close-image)}#vac-icon-file{fill:var(--chat-icon-color-file)}#vac-icon-paperclip{fill:var(--chat-icon-color-paperclip)}#vac-icon-close-outline{fill:var(--chat-icon-color-close-outline)}#vac-icon-close-outline-preview{fill:var(--chat-icon-color-close-preview)}#vac-icon-send{fill:var(--chat-icon-color-send)}#vac-icon-send-disabled{fill:var(--chat-icon-color-send-disabled)}#vac-icon-emoji{fill:var(--chat-icon-color-emoji)}#vac-icon-emoji-reaction{fill:var(--chat-icon-color-emoji-reaction)}#vac-icon-document{fill:var(--chat-icon-color-document)}#vac-icon-pencil{fill:var(--chat-icon-color-pencil)}#vac-icon-checkmark,#vac-icon-double-checkmark{fill:var(--chat-icon-color-checkmark)}#vac-icon-checkmark-seen,#vac-icon-double-checkmark-seen{fill:var(--chat-icon-color-checkmark-seen)}#vac-icon-eye{fill:var(--chat-icon-color-eye)}#vac-icon-dropdown-message{fill:var(--chat-icon-color-dropdown-message)}#vac-icon-dropdown-room{fill:var(--chat-icon-color-dropdown-room)}#vac-icon-dropdown-scroll{fill:var(--chat-icon-color-dropdown-scroll)}#vac-icon-audio-play{fill:var(--chat-icon-color-audio-play)}#vac-icon-audio-pause{fill:var(--chat-icon-color-audio-pause)}.vac-progress-wrapper{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:9}.vac-progress-wrapper circle{transition:stroke-dashoffset .35s;transform:rotate(-90deg);transform-origin:50% 50%}.vac-progress-wrapper .vac-progress-content{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:-1;margin-top:-2px;background-color:#000000b3;border-radius:50%}.vac-progress-wrapper .vac-progress-content .vac-progress-text{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);font-weight:700;color:#fff}.vac-progress-wrapper .vac-progress-content .vac-progress-text .vac-progress-pourcent{font-size:9px;font-weight:400}
`;const U5={name:"ChatContainer",components:{RoomsList:Zv,Room:I5,MediaPreview:D5},props:{height:{type:String,default:"600px"},theme:{type:String,default:"light"},styles:{type:[Object,String],default:()=>({})},responsiveBreakpoint:{type:Number,default:900},singleRoom:{type:[Boolean,String],default:!1},roomsListOpened:{type:[Boolean,String],default:!0},textMessages:{type:[Object,String],default:()=>({})},currentUserId:{type:String,default:""},rooms:{type:[Array,String],default:()=>[]},roomsOrder:{type:String,default:"desc"},loadingRooms:{type:[Boolean,String],default:!1},roomsLoaded:{type:[Boolean,String],default:!1},roomId:{type:String,default:null},loadFirstRoom:{type:[Boolean,String],default:!0},messages:{type:[Array,String],default:()=>[]},messagesLoaded:{type:[Boolean,String],default:!1},roomActions:{type:[Array,String],default:()=>[]},menuActions:{type:[Array,String],default:()=>[]},messageActions:{type:[Array,String],default:()=>[{name:"replyMessage",title:"Reply"},{name:"editMessage",title:"Edit Message",onlyMe:!0},{name:"deleteMessage",title:"Delete Message",onlyMe:!0},{name:"selectMessages",title:"Select"}]},messageSelectionActions:{type:[Array,String],default:()=>[]},autoScroll:{type:[Object,String],default:()=>({send:{new:!0,newAfterScrollUp:!0},receive:{new:!0,newAfterScrollUp:!1}})},customSearchRoomEnabled:{type:[Boolean,String],default:!1},showSearch:{type:[Boolean,String],default:!0},showAddRoom:{type:[Boolean,String],default:!0},showSendIcon:{type:[Boolean,String],default:!0},showFiles:{type:[Boolean,String],default:!0},showAudio:{type:[Boolean,String],default:!0},audioBitRate:{type:Number,default:128},audioSampleRate:{type:Number,default:new(window.AudioContext||window.webkitAudioContext)().sampleRate},showEmojis:{type:[Boolean,String],default:!0},showReactionEmojis:{type:[Boolean,String],default:!0},showNewMessagesDivider:{type:[Boolean,String],default:!0},showFooter:{type:[Boolean,String],default:!0},textFormatting:{type:[Object,String],default:()=>({disabled:!1})},linkOptions:{type:[Object,String],default:()=>({disabled:!1,target:"_blank",rel:null})},roomInfoEnabled:{type:[Boolean,String],default:!1},textareaActionEnabled:{type:[Boolean,String],default:!1},textareaAutoFocus:{type:[Boolean,String],default:!0},userTagsEnabled:{type:[Boolean,String],default:!0},emojisSuggestionEnabled:{type:[Boolean,String],default:!0},roomMessage:{type:String,default:""},scrollDistance:{type:Number,default:60},acceptedFiles:{type:String,default:"*"},captureFiles:{type:String,default:""},multipleFiles:{type:[Boolean,String],default:!0},templatesText:{type:[Array,String],default:()=>[]},mediaPreviewEnabled:{type:[Boolean,String],default:!0},usernameOptions:{type:[Object,String],default:()=>({minUsers:3,currentUser:!1})},emojiDataSource:{type:String,default:void 0}},emits:["toggle-rooms-list","room-info","fetch-messages","send-message","edit-message","delete-message","open-file","open-user-tag","open-failed-message","menu-action-handler","message-action-handler","send-message-reaction","typing-message","textarea-action-handler","fetch-more-rooms","add-room","search-room","room-action-handler","message-selection-action-handler"],data(){return{slots:[],room:{},loadingMoreRooms:!1,showRoomsList:!0,isMobile:!1,showMediaPreview:!1,previewFile:{}}},computed:{t(){return{...H5,...this.textMessagesCasted}},cssVars(){const e=P5[this.theme],t={};return Object.keys(e).map(n=>{t[n]={...e[n],...this.stylesCasted[n]||{}}}),z5(t)},orderedRooms(){return this.roomsCasted.slice().sort((e,t)=>{const n=e.index||0,r=t.index||0;return this.roomsOrder==="asc"?n<r?-1:r<n?1:0:n>r?-1:r>n?1:0})},singleRoomCasted(){return this.castBoolean(this.singleRoom)},roomsListOpenedCasted(){return this.castBoolean(this.roomsListOpened)},loadingRoomsCasted(){return this.castBoolean(this.loadingRooms)},roomsLoadedCasted(){return this.castBoolean(this.roomsLoaded)},loadFirstRoomCasted(){return this.castBoolean(this.loadFirstRoom)},messagesLoadedCasted(){return this.castBoolean(this.messagesLoaded)},multipleFilesCasted(){return this.castBoolean(this.multipleFiles)},showSearchCasted(){return this.castBoolean(this.showSearch)},showAddRoomCasted(){return this.castBoolean(this.showAddRoom)},showSendIconCasted(){return this.castBoolean(this.showSendIcon)},showFilesCasted(){return this.castBoolean(this.showFiles)},showAudioCasted(){return this.castBoolean(this.showAudio)},showEmojisCasted(){return this.castBoolean(this.showEmojis)},showReactionEmojisCasted(){return this.castBoolean(this.showReactionEmojis)},showNewMessagesDividerCasted(){return this.castBoolean(this.showNewMessagesDivider)},showFooterCasted(){return this.castBoolean(this.showFooter)},roomInfoEnabledCasted(){return this.castBoolean(this.roomInfoEnabled)},textareaActionEnabledCasted(){return this.castBoolean(this.textareaActionEnabled)},textareaAutoFocusCasted(){return this.castBoolean(this.textareaAutoFocus)},userTagsEnabledCasted(){return this.castBoolean(this.userTagsEnabled)},emojisSuggestionEnabledCasted(){return this.castBoolean(this.emojisSuggestionEnabled)},mediaPreviewEnabledCasted(){return this.castBoolean(this.mediaPreviewEnabled)},roomsCasted(){return this.castArray(this.rooms)},messagesCasted(){return this.castArray(this.messages)},roomActionsCasted(){return this.castArray(this.roomActions)},menuActionsCasted(){return this.castArray(this.menuActions)},messageActionsCasted(){return this.castArray(this.messageActions)},messageSelectionActionsCasted(){return this.castArray(this.messageSelectionActions)},templatesTextCasted(){return this.castArray(this.templatesText)},stylesCasted(){return this.castObject(this.styles)},textMessagesCasted(){return this.castObject(this.textMessages)},autoScrollCasted(){return this.castObject(this.autoScroll)},textFormattingCasted(){return this.castObject(this.textFormatting)},linkOptionsCasted(){return this.castObject(this.linkOptions)},usernameOptionsCasted(){return this.castObject(this.usernameOptions)}},watch:{roomsCasted:{immediate:!0,deep:!0,handler(e,t){if((!e[0]||!e.find(n=>n.roomId===this.room.roomId))&&(this.showRoomsList=!0),!this.loadingMoreRooms&&this.loadFirstRoomCasted&&e[0]&&(!t||e.length!==t.length))if(this.roomId){const n=e.find(r=>r.roomId===this.roomId)||{};this.fetchRoom({room:n})}else!this.isMobile||this.singleRoomCasted?this.fetchRoom({room:this.orderedRooms[0]}):this.showRoomsList=!0}},loadingRoomsCasted(e){e&&(this.room={})},roomId:{immediate:!0,handler(e,t){if(e&&!this.loadingRoomsCasted&&this.roomsCasted.length){const n=this.roomsCasted.find(r=>r.roomId===e);this.fetchRoom({room:n})}else t&&!e&&(this.room={})}},room(e){!e||Object.entries(e).length===0||(r5(e),e.users.forEach(t=>{i5(t)}))},roomsListOpenedCasted:{immediate:!0,handler(e){this.showRoomsList=e}}},created(){this.updateResponsive(),window.addEventListener("resize",e=>{e.isTrusted&&this.updateResponsive()})},updated(){const e=document.querySelectorAll("[slot]");this.slots.length!==e.length&&(this.slots=e)},methods:{castBoolean(e){return e==="true"||e===!0},castArray(e){return e?Array.isArray(e)?e:JSON.parse(e):[]},castObject(e){return e?typeof e=="object"?e:JSON.parse(e):{}},updateResponsive(){this.isMobile=window.innerWidth<Number(this.responsiveBreakpoint)},toggleRoomsList(){this.showRoomsList=!this.showRoomsList,this.isMobile&&(this.room={}),this.$emit("toggle-rooms-list",{opened:this.showRoomsList})},fetchRoom({room:e}){this.room=e,this.fetchMessages({reset:!0}),this.isMobile&&(this.showRoomsList=!1)},fetchMoreRooms(){this.$emit("fetch-more-rooms")},roomInfo(){this.$emit("room-info",this.room)},addRoom(){this.$emit("add-room")},searchRoom(e){this.$emit("search-room",{value:e,roomId:this.room.roomId})},fetchMessages(e){this.$emit("fetch-messages",{room:this.room,options:e})},sendMessage(e){this.$emit("send-message",{...e,roomId:this.room.roomId})},editMessage(e){this.$emit("edit-message",{...e,roomId:this.room.roomId})},deleteMessage(e){this.$emit("delete-message",{message:e,roomId:this.room.roomId})},openFile({message:e,file:t}){this.mediaPreviewEnabledCasted&&t.action==="preview"?(this.previewFile=t.file,this.showMediaPreview=!0):this.$emit("open-file",{message:e,file:t})},openUserTag({user:e}){this.$emit("open-user-tag",{user:e})},openFailedMessage({message:e}){this.$emit("open-failed-message",{message:e,roomId:this.room.roomId})},menuActionHandler(e){this.$emit("menu-action-handler",{action:e,roomId:this.room.roomId})},roomActionHandler({action:e,roomId:t}){this.$emit("room-action-handler",{action:e,roomId:t})},messageActionHandler(e){this.$emit("message-action-handler",{...e,roomId:this.room.roomId})},messageSelectionActionHandler(e){this.$emit("message-selection-action-handler",{...e,roomId:this.room.roomId})},sendMessageReaction(e){this.$emit("send-message-reaction",{...e,roomId:this.room.roomId})},typingMessage(e){this.$emit("typing-message",{message:e,roomId:this.room.roomId})},textareaActionHandler(e){this.$emit("textarea-action-handler",{message:e,roomId:this.room.roomId})}}},q5={class:"vac-chat-container"};function X5(e,t,n,r,a,i){const s=Ke("rooms-list"),c=Ke("room"),v=Ke("media-preview");return $(),le("div",{class:"vac-card-window",style:Mt([{height:n.height},i.cssVars])},[Se("div",q5,[i.singleRoomCasted?Ie("",!0):($(),ft(s,{key:0,"current-user-id":n.currentUserId,rooms:i.orderedRooms,"loading-rooms":i.loadingRoomsCasted,"rooms-loaded":i.roomsLoadedCasted,room:a.room,"room-actions":i.roomActionsCasted,"custom-search-room-enabled":n.customSearchRoomEnabled,"text-messages":i.t,"show-search":i.showSearchCasted,"show-add-room":i.showAddRoomCasted,"show-rooms-list":a.showRoomsList&&i.roomsListOpenedCasted,"text-formatting":i.textFormattingCasted,"link-options":i.linkOptionsCasted,"is-mobile":a.isMobile,"scroll-distance":n.scrollDistance,onFetchRoom:i.fetchRoom,onFetchMoreRooms:i.fetchMoreRooms,onLoadingMoreRooms:t[0]||(t[0]=u=>a.loadingMoreRooms=u),onAddRoom:i.addRoom,onSearchRoom:i.searchRoom,onRoomActionHandler:i.roomActionHandler},gt({_:2},[nt(a.slots,u=>({name:u.slot,fn:Ge(m=>[Ce(e.$slots,u.slot,pt(vt(m)))])}))]),1032,["current-user-id","rooms","loading-rooms","rooms-loaded","room","room-actions","custom-search-room-enabled","text-messages","show-search","show-add-room","show-rooms-list","text-formatting","link-options","is-mobile","scroll-distance","onFetchRoom","onFetchMoreRooms","onAddRoom","onSearchRoom","onRoomActionHandler"])),Oe(c,{"current-user-id":n.currentUserId,rooms:i.roomsCasted,"room-id":a.room.roomId||"","load-first-room":i.loadFirstRoomCasted,messages:i.messagesCasted,"room-message":n.roomMessage,"messages-loaded":i.messagesLoadedCasted,"menu-actions":i.menuActionsCasted,"message-actions":i.messageActionsCasted,"message-selection-actions":i.messageSelectionActionsCasted,"auto-scroll":i.autoScrollCasted,"show-send-icon":i.showSendIconCasted,"show-files":i.showFilesCasted,"show-audio":i.showAudioCasted,"audio-bit-rate":n.audioBitRate,"audio-sample-rate":n.audioSampleRate,"show-emojis":i.showEmojisCasted,"show-reaction-emojis":i.showReactionEmojisCasted,"show-new-messages-divider":i.showNewMessagesDividerCasted,"show-footer":i.showFooterCasted,"text-messages":i.t,"single-room":i.singleRoomCasted,"show-rooms-list":a.showRoomsList&&i.roomsListOpenedCasted,"text-formatting":i.textFormattingCasted,"link-options":i.linkOptionsCasted,"is-mobile":a.isMobile,"loading-rooms":i.loadingRoomsCasted,"room-info-enabled":i.roomInfoEnabledCasted,"textarea-action-enabled":i.textareaActionEnabledCasted,"textarea-auto-focus":i.textareaAutoFocusCasted,"user-tags-enabled":i.userTagsEnabledCasted,"emojis-suggestion-enabled":i.emojisSuggestionEnabledCasted,"scroll-distance":n.scrollDistance,"accepted-files":n.acceptedFiles,"capture-files":n.captureFiles,"multiple-files":i.multipleFilesCasted,"templates-text":i.templatesTextCasted,"username-options":i.usernameOptionsCasted,"emoji-data-source":n.emojiDataSource,onToggleRoomsList:i.toggleRoomsList,onRoomInfo:i.roomInfo,onFetchMessages:i.fetchMessages,onSendMessage:i.sendMessage,onEditMessage:i.editMessage,onDeleteMessage:i.deleteMessage,onOpenFile:i.openFile,onOpenUserTag:i.openUserTag,onOpenFailedMessage:i.openFailedMessage,onMenuActionHandler:i.menuActionHandler,onMessageActionHandler:i.messageActionHandler,onMessageSelectionActionHandler:i.messageSelectionActionHandler,onSendMessageReaction:i.sendMessageReaction,onTypingMessage:i.typingMessage,onTextareaActionHandler:i.textareaActionHandler},gt({_:2},[nt(a.slots,u=>({name:u.slot,fn:Ge(m=>[Ce(e.$slots,u.slot,pt(vt(m)))])}))]),1032,["current-user-id","rooms","room-id","load-first-room","messages","room-message","messages-loaded","menu-actions","message-actions","message-selection-actions","auto-scroll","show-send-icon","show-files","show-audio","audio-bit-rate","audio-sample-rate","show-emojis","show-reaction-emojis","show-new-messages-divider","show-footer","text-messages","single-room","show-rooms-list","text-formatting","link-options","is-mobile","loading-rooms","room-info-enabled","textarea-action-enabled","textarea-auto-focus","user-tags-enabled","emojis-suggestion-enabled","scroll-distance","accepted-files","capture-files","multiple-files","templates-text","username-options","emoji-data-source","onToggleRoomsList","onRoomInfo","onFetchMessages","onSendMessage","onEditMessage","onDeleteMessage","onOpenFile","onOpenUserTag","onOpenFailedMessage","onMenuActionHandler","onMessageActionHandler","onMessageSelectionActionHandler","onSendMessageReaction","onTypingMessage","onTextareaActionHandler"])]),Oe(Bt,{name:"vac-fade-preview",appear:""},{default:Ge(()=>[a.showMediaPreview?($(),ft(v,{key:0,file:a.previewFile,onCloseMediaPreview:t[1]||(t[1]=u=>a.showMediaPreview=!1)},gt({_:2},[nt(a.slots,u=>({name:u.slot,fn:Ge(m=>[Ce(e.$slots,u.slot,pt(vt(m)))])}))]),1032,["file"])):Ie("",!0)]),_:3})],4)}var Y5=St(U5,[["render",X5],["styles",[V5]]]);const K5=Bm(Y5),Mc="vue-advanced-chat";function G5(){customElements.get(Mc)||customElements.define(Mc,K5)}export{K5 as V,G5 as r};
//# sourceMappingURL=advanced-chat-BwpPdChx.js.map
